ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"deca_device.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.dwt_apiversion,"ax",%progbits
  18              		.align	1
  19              		.global	dwt_apiversion
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	dwt_apiversion:
  25              	.LFB0:
  26              		.file 1 "Core/Src/deca_device.c"
   1:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
   2:Core/Src/deca_device.c ****  * @file    deca_device.c
   3:Core/Src/deca_device.c ****  * @brief   Decawave device configuration and control functions
   4:Core/Src/deca_device.c ****  *
   5:Core/Src/deca_device.c ****  * @attention
   6:Core/Src/deca_device.c ****  *
   7:Core/Src/deca_device.c ****  * Copyright 2013 (c) Decawave Ltd, Dublin, Ireland.
   8:Core/Src/deca_device.c ****  *
   9:Core/Src/deca_device.c ****  * All rights reserved.
  10:Core/Src/deca_device.c ****  *
  11:Core/Src/deca_device.c ****  */
  12:Core/Src/deca_device.c **** 
  13:Core/Src/deca_device.c **** #include <assert.h>
  14:Core/Src/deca_device.c **** #include <stdlib.h>
  15:Core/Src/deca_device.c **** 
  16:Core/Src/deca_device.c **** #include "deca_types.h"
  17:Core/Src/deca_device.c **** #include "deca_param_types.h"
  18:Core/Src/deca_device.c **** #include "deca_regs.h"
  19:Core/Src/deca_device.c **** #include "deca_device_api.h"
  20:Core/Src/deca_device.c **** 
  21:Core/Src/deca_device.c **** // Defines for enable_clocks function
  22:Core/Src/deca_device.c **** #define FORCE_SYS_XTI  0
  23:Core/Src/deca_device.c **** #define ENABLE_ALL_SEQ 1
  24:Core/Src/deca_device.c **** #define FORCE_SYS_PLL  2
  25:Core/Src/deca_device.c **** #define READ_ACC_ON    7
  26:Core/Src/deca_device.c **** #define READ_ACC_OFF   8
  27:Core/Src/deca_device.c **** #define FORCE_OTP_ON   11
  28:Core/Src/deca_device.c **** #define FORCE_OTP_OFF  12
  29:Core/Src/deca_device.c **** #define FORCE_TX_PLL   13
  30:Core/Src/deca_device.c **** #define FORCE_LDE      14
  31:Core/Src/deca_device.c **** 
  32:Core/Src/deca_device.c **** // Defines for ACK request bitmask in DATA and MAC COMMAND frame control (first byte) - Used to det
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 2


  33:Core/Src/deca_device.c **** #define FCTRL_ACK_REQ_MASK 0x20
  34:Core/Src/deca_device.c **** // Frame control maximum length in bytes.
  35:Core/Src/deca_device.c **** #define FCTRL_LEN_MAX 2
  36:Core/Src/deca_device.c **** 
  37:Core/Src/deca_device.c **** // #define DWT_API_ERROR_CHECK     // define so API checks config input parameters
  38:Core/Src/deca_device.c **** 
  39:Core/Src/deca_device.c **** // ------------------------------------------------------------------------------------------------
  40:Core/Src/deca_device.c **** //
  41:Core/Src/deca_device.c **** // Internal functions for controlling and configuring the device
  42:Core/Src/deca_device.c **** //
  43:Core/Src/deca_device.c **** // ------------------------------------------------------------------------------------------------
  44:Core/Src/deca_device.c **** 
  45:Core/Src/deca_device.c **** // Enable and Configure specified clocks
  46:Core/Src/deca_device.c **** void _dwt_enableclocks(int clocks) ;
  47:Core/Src/deca_device.c **** // Configure the ucode (FP algorithm) parameters
  48:Core/Src/deca_device.c **** void _dwt_configlde(int prf);
  49:Core/Src/deca_device.c **** // Load ucode from OTP/ROM
  50:Core/Src/deca_device.c **** void _dwt_loaducodefromrom(void);
  51:Core/Src/deca_device.c **** // Read non-volatile memory
  52:Core/Src/deca_device.c **** uint32 _dwt_otpread(uint16 address);
  53:Core/Src/deca_device.c **** // Program the non-volatile memory
  54:Core/Src/deca_device.c **** uint32 _dwt_otpprogword32(uint32 data, uint16 address);
  55:Core/Src/deca_device.c **** // Upload the device configuration into always on memory
  56:Core/Src/deca_device.c **** void _dwt_aonarrayupload(void);
  57:Core/Src/deca_device.c **** // ------------------------------------------------------------------------------------------------
  58:Core/Src/deca_device.c **** 
  59:Core/Src/deca_device.c **** /*!
  60:Core/Src/deca_device.c ****  * Static data for DW1000 DecaWave Transceiver control
  61:Core/Src/deca_device.c ****  */
  62:Core/Src/deca_device.c **** 
  63:Core/Src/deca_device.c **** // ------------------------------------------------------------------------------------------------
  64:Core/Src/deca_device.c **** // Structure to hold device data
  65:Core/Src/deca_device.c **** typedef struct
  66:Core/Src/deca_device.c **** {
  67:Core/Src/deca_device.c ****     uint32      partID ;            // IC Part ID - read during initialisation
  68:Core/Src/deca_device.c ****     uint32      lotID ;             // IC Lot ID - read during initialisation
  69:Core/Src/deca_device.c ****     uint8       vBatP ;             // IC V bat read during production and stored in OTP (Vmeas @ 3
  70:Core/Src/deca_device.c ****     uint8       tempP ;             // IC V temp read during production and stored in OTP (Tmeas @ 
  71:Core/Src/deca_device.c ****     uint8       longFrames ;        // Flag in non-standard long frame mode
  72:Core/Src/deca_device.c ****     uint8       otprev ;            // OTP revision number (read during initialisation)
  73:Core/Src/deca_device.c ****     uint32      txFCTRL ;           // Keep TX_FCTRL register config
  74:Core/Src/deca_device.c ****     uint32      sysCFGreg ;         // Local copy of system config register
  75:Core/Src/deca_device.c ****     uint8       dblbuffon;          // Double RX buffer mode flag
  76:Core/Src/deca_device.c ****     uint8       wait4resp ;         // wait4response was set with last TX start command
  77:Core/Src/deca_device.c ****     uint16      sleep_mode;         // Used for automatic reloading of LDO tune and microcode at wa
  78:Core/Src/deca_device.c ****     uint16      otp_mask ;          // Local copy of the OTP mask used in dwt_initialise call
  79:Core/Src/deca_device.c ****     dwt_cb_data_t cbData;           // Callback data structure
  80:Core/Src/deca_device.c ****     dwt_cb_t    cbTxDone;           // Callback for TX confirmation event
  81:Core/Src/deca_device.c ****     dwt_cb_t    cbRxOk;             // Callback for RX good frame event
  82:Core/Src/deca_device.c ****     dwt_cb_t    cbRxTo;             // Callback for RX timeout events
  83:Core/Src/deca_device.c ****     dwt_cb_t    cbRxErr;            // Callback for RX error events
  84:Core/Src/deca_device.c **** } dwt_local_data_t ;
  85:Core/Src/deca_device.c **** 
  86:Core/Src/deca_device.c **** static dwt_local_data_t dw1000local[DWT_NUM_DW_DEV] ; // Static local device data, can be an array 
  87:Core/Src/deca_device.c **** static dwt_local_data_t *pdw1000local = dw1000local ; // Static local data structure pointer
  88:Core/Src/deca_device.c **** 
  89:Core/Src/deca_device.c **** 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 3


  90:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
  91:Core/Src/deca_device.c ****  * @fn dwt_apiversion()
  92:Core/Src/deca_device.c ****  *
  93:Core/Src/deca_device.c ****  * @brief This function returns the version of the API as defined by DW1000_DRIVER_VERSION
  94:Core/Src/deca_device.c ****  *
  95:Core/Src/deca_device.c ****  * input parameters
  96:Core/Src/deca_device.c ****  *
  97:Core/Src/deca_device.c ****  * output parameters
  98:Core/Src/deca_device.c ****  *
  99:Core/Src/deca_device.c ****  * returns version (DW1000_DRIVER_VERSION)
 100:Core/Src/deca_device.c ****  */
 101:Core/Src/deca_device.c **** int32 dwt_apiversion(void)
 102:Core/Src/deca_device.c **** {
  27              		.loc 1 102 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
 103:Core/Src/deca_device.c ****     return DW1000_DRIVER_VERSION ;
  32              		.loc 1 103 5 view .LVU1
 104:Core/Src/deca_device.c **** }
  33              		.loc 1 104 1 is_stmt 0 view .LVU2
  34 0000 0048     		ldr	r0, .L2
  35 0002 7047     		bx	lr
  36              	.L3:
  37              		.align	2
  38              	.L2:
  39 0004 00010500 		.word	327936
  40              		.cfi_endproc
  41              	.LFE0:
  43              		.section	.text.dwt_setlocaldataptr,"ax",%progbits
  44              		.align	1
  45              		.global	dwt_setlocaldataptr
  46              		.syntax unified
  47              		.thumb
  48              		.thumb_func
  50              	dwt_setlocaldataptr:
  51              	.LVL0:
  52              	.LFB1:
 105:Core/Src/deca_device.c **** 
 106:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 107:Core/Src/deca_device.c ****  * @fn dwt_setlocaldataptr()
 108:Core/Src/deca_device.c ****  *
 109:Core/Src/deca_device.c ****  * @brief This function sets the local data structure pointer to point to the element in the local 
 110:Core/Src/deca_device.c ****  *
 111:Core/Src/deca_device.c ****  * input parameters
 112:Core/Src/deca_device.c ****  * @param index    - selects the array element to point to. Must be within the array bounds, i.e. <
 113:Core/Src/deca_device.c ****  *
 114:Core/Src/deca_device.c ****  * output parameters
 115:Core/Src/deca_device.c ****  *
 116:Core/Src/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error
 117:Core/Src/deca_device.c ****  */
 118:Core/Src/deca_device.c **** int dwt_setlocaldataptr(unsigned int index)
 119:Core/Src/deca_device.c **** {
  53              		.loc 1 119 1 is_stmt 1 view -0
  54              		.cfi_startproc
  55              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 4


  56              		@ frame_needed = 0, uses_anonymous_args = 0
  57              		@ link register save eliminated.
 120:Core/Src/deca_device.c ****     // Check the index is within the array bounds
 121:Core/Src/deca_device.c ****     if (DWT_NUM_DW_DEV <= index) // return error if index outside the array bounds
  58              		.loc 1 121 5 view .LVU4
  59              		.loc 1 121 8 is_stmt 0 view .LVU5
  60 0000 38B9     		cbnz	r0, .L6
 122:Core/Src/deca_device.c ****     {
 123:Core/Src/deca_device.c ****         return DWT_ERROR ;
 124:Core/Src/deca_device.c ****     }
 125:Core/Src/deca_device.c **** 
 126:Core/Src/deca_device.c ****     pdw1000local = &dw1000local[index];
  61              		.loc 1 126 5 is_stmt 1 view .LVU6
  62              		.loc 1 126 20 is_stmt 0 view .LVU7
  63 0002 C0EBC003 		rsb	r3, r0, r0, lsl #3
  64 0006 044A     		ldr	r2, .L7
  65 0008 02EBC303 		add	r3, r2, r3, lsl #3
  66              		.loc 1 126 18 view .LVU8
  67 000c 034A     		ldr	r2, .L7+4
  68 000e 1360     		str	r3, [r2]
 127:Core/Src/deca_device.c **** 
 128:Core/Src/deca_device.c ****     return DWT_SUCCESS ;
  69              		.loc 1 128 5 is_stmt 1 view .LVU9
  70              		.loc 1 128 12 is_stmt 0 view .LVU10
  71 0010 7047     		bx	lr
  72              	.L6:
 123:Core/Src/deca_device.c ****     }
  73              		.loc 1 123 16 view .LVU11
  74 0012 4FF0FF30 		mov	r0, #-1
  75              	.LVL1:
 129:Core/Src/deca_device.c **** }
  76              		.loc 1 129 1 view .LVU12
  77 0016 7047     		bx	lr
  78              	.L8:
  79              		.align	2
  80              	.L7:
  81 0018 00000000 		.word	.LANCHOR0
  82 001c 00000000 		.word	.LANCHOR1
  83              		.cfi_endproc
  84              	.LFE1:
  86              		.section	.text.dwt_otprevision,"ax",%progbits
  87              		.align	1
  88              		.global	dwt_otprevision
  89              		.syntax unified
  90              		.thumb
  91              		.thumb_func
  93              	dwt_otprevision:
  94              	.LFB3:
 130:Core/Src/deca_device.c **** 
 131:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 132:Core/Src/deca_device.c ****  * @fn dwt_initialise()
 133:Core/Src/deca_device.c ****  *
 134:Core/Src/deca_device.c ****  * @brief This function initiates communications with the DW1000 transceiver
 135:Core/Src/deca_device.c ****  * and reads its DEV_ID register (address 0x00) to verify the IC is one supported
 136:Core/Src/deca_device.c ****  * by this software (e.g. DW1000 32-bit device ID value is 0xDECA0130).  Then it
 137:Core/Src/deca_device.c ****  * does any initial once only device configurations needed for its use and initialises
 138:Core/Src/deca_device.c ****  * as necessary any static data items belonging to this low-level driver.
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 5


 139:Core/Src/deca_device.c ****  *
 140:Core/Src/deca_device.c ****  * This function does not need to be called after DW1000 device is woken up from DEEPSLEEP,
 141:Core/Src/deca_device.c ****  * the device will preserve register values e.g. LDO, UCODE, XTAL. However if needed this
 142:Core/Src/deca_device.c ****  * function can be called to initialise internal structure  dw1000local[] if it has not been preser
 143:Core/Src/deca_device.c ****  * (e.g. if micro was in sleep and its RAM data (containing dw1000local structure was not preserved
 144:Core/Src/deca_device.c ****  *
 145:Core/Src/deca_device.c ****  * NOTES:
 146:Core/Src/deca_device.c ****  * 1. When DW1000 is powered on this function needs to be run before dwt_configuresleep,
 147:Core/Src/deca_device.c ****  *    also the SPI frequency has to be < 3MHz
 148:Core/Src/deca_device.c ****  * 2. It reads and applies LDO tune and crystal trim values from OTP memory
 149:Core/Src/deca_device.c ****  * 3. If accurate RX timestamping is needed microcode/LDE must be loaded
 150:Core/Src/deca_device.c ****  *
 151:Core/Src/deca_device.c ****  * input parameters
 152:Core/Src/deca_device.c ****  * @param config    -   specifies what configuration to load
 153:Core/Src/deca_device.c ****  *                  DWT_LOADNONE         0x00 - do not load any values from OTP memory
 154:Core/Src/deca_device.c ****  *                  DWT_LOADUCODE        0x01 - load the LDE microcode from ROM - enable accurate R
 155:Core/Src/deca_device.c ****  *                  DWT_DW_WAKE_UP       0x02 - just initialise dw1000local[] values (e.g. DW1000 h
 156:Core/Src/deca_device.c ****  *                  DWT_DW_WUP_NO_UCODE  0x04 - if microcode/LDE algorithm has not already been loa
 157:Core/Src/deca_device.c ****  *                  DWT_READ_OTP_PID     0x10 - read part ID from OTP
 158:Core/Src/deca_device.c ****  *                  DWT_READ_OTP_LID     0x20 - read lot ID from OTP
 159:Core/Src/deca_device.c ****  *                  DWT_READ_OTP_BAT     0x40 - read ref voltage from OTP
 160:Core/Src/deca_device.c ****  *                  DWT_READ_OTP_TMP     0x80 - read ref temperature from OTP
 161:Core/Src/deca_device.c ****  * output parameters
 162:Core/Src/deca_device.c ****  *
 163:Core/Src/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error
 164:Core/Src/deca_device.c ****  */
 165:Core/Src/deca_device.c **** // OTP addresses definitions
 166:Core/Src/deca_device.c **** #define LDOTUNE_ADDRESS (0x04)
 167:Core/Src/deca_device.c **** #define PARTID_ADDRESS (0x06)
 168:Core/Src/deca_device.c **** #define LOTID_ADDRESS  (0x07)
 169:Core/Src/deca_device.c **** #define VBAT_ADDRESS   (0x08)
 170:Core/Src/deca_device.c **** #define VTEMP_ADDRESS  (0x09)
 171:Core/Src/deca_device.c **** #define XTRIM_ADDRESS  (0x1E)
 172:Core/Src/deca_device.c **** 
 173:Core/Src/deca_device.c **** int dwt_initialise(int config)
 174:Core/Src/deca_device.c **** {
 175:Core/Src/deca_device.c ****     uint16 otp_xtaltrim_and_rev = 0;
 176:Core/Src/deca_device.c ****     uint32 ldo_tune = 0;
 177:Core/Src/deca_device.c **** 
 178:Core/Src/deca_device.c ****     pdw1000local->dblbuffon = 0; // - set to 0 - meaning double buffer mode is off by default
 179:Core/Src/deca_device.c ****     pdw1000local->wait4resp = 0; // - set to 0 - meaning wait for response not active
 180:Core/Src/deca_device.c ****     pdw1000local->sleep_mode = 0; // - set to 0 - meaning sleep mode has not been configured
 181:Core/Src/deca_device.c **** 
 182:Core/Src/deca_device.c ****     pdw1000local->cbTxDone = NULL;
 183:Core/Src/deca_device.c ****     pdw1000local->cbRxOk = NULL;
 184:Core/Src/deca_device.c ****     pdw1000local->cbRxTo = NULL;
 185:Core/Src/deca_device.c ****     pdw1000local->cbRxErr = NULL;
 186:Core/Src/deca_device.c **** 
 187:Core/Src/deca_device.c **** #if DWT_API_ERROR_CHECK
 188:Core/Src/deca_device.c ****     pdw1000local->otp_mask = config ; // Save the READ_OTP config mask
 189:Core/Src/deca_device.c **** #endif
 190:Core/Src/deca_device.c **** 
 191:Core/Src/deca_device.c ****     // Read and validate device ID, return -1 if not recognised
 192:Core/Src/deca_device.c ****     if (DWT_DEVICE_ID != dwt_readdevid()) // MP IC ONLY (i.e. DW1000) FOR THIS CODE
 193:Core/Src/deca_device.c ****     {
 194:Core/Src/deca_device.c ****         return DWT_ERROR ;
 195:Core/Src/deca_device.c ****     }
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 6


 196:Core/Src/deca_device.c **** 
 197:Core/Src/deca_device.c ****     if(!(DWT_DW_WAKE_UP & config)) // Don't reset the device if DWT_DW_WAKE_UP bit is set, e.g. whe
 198:Core/Src/deca_device.c ****     {
 199:Core/Src/deca_device.c ****         dwt_softreset(); // Make sure the device is completely reset before starting initialisation
 200:Core/Src/deca_device.c ****     }
 201:Core/Src/deca_device.c **** 
 202:Core/Src/deca_device.c ****     if(!((DWT_DW_WAKE_UP & config) && ((DWT_READ_OTP_TMP | DWT_READ_OTP_BAT | DWT_READ_OTP_LID | DW
 203:Core/Src/deca_device.c ****     {
 204:Core/Src/deca_device.c ****         _dwt_enableclocks(FORCE_SYS_XTI); // NOTE: set system clock to XTI - this is necessary to m
 205:Core/Src/deca_device.c ****     }                                  // when not reading from OTP, clocks don't need to change.
 206:Core/Src/deca_device.c **** 
 207:Core/Src/deca_device.c ****     // Configure the CPLL lock detect
 208:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(EXT_SYNC_ID, EC_CTRL_OFFSET, EC_CTRL_PLLLCK);
 209:Core/Src/deca_device.c **** 
 210:Core/Src/deca_device.c ****     // When DW1000 IC is initialised from power up, then the LDO value should be kicked from OTP, o
 211:Core/Src/deca_device.c ****     // DW1000 IC has been woken up (DWT_DW_WAKE_UP bit is set) this can be skipped as LDO would hav
 212:Core/Src/deca_device.c ****     // kicked/loaded on wake up
 213:Core/Src/deca_device.c ****     if(!(DWT_DW_WAKE_UP & config))
 214:Core/Src/deca_device.c ****     {
 215:Core/Src/deca_device.c ****         // Load LDO tune from OTP and kick it if there is a value actually programmed.
 216:Core/Src/deca_device.c ****         ldo_tune = _dwt_otpread(LDOTUNE_ADDRESS);
 217:Core/Src/deca_device.c ****         if((ldo_tune & 0xFF) != 0)
 218:Core/Src/deca_device.c ****         {
 219:Core/Src/deca_device.c ****             // Kick LDO tune
 220:Core/Src/deca_device.c ****             dwt_write8bitoffsetreg(OTP_IF_ID, OTP_SF, OTP_SF_LDO_KICK); // Set load LDO kick bit
 221:Core/Src/deca_device.c ****             pdw1000local->sleep_mode |= AON_WCFG_ONW_LLDO; // LDO tune must be kicked at wake-up
 222:Core/Src/deca_device.c ****         }
 223:Core/Src/deca_device.c ****     }
 224:Core/Src/deca_device.c ****     else
 225:Core/Src/deca_device.c ****     {   //if LDOTUNE reg contains value different from default it means it was kicked from OTP and 
 226:Core/Src/deca_device.c ****         if(dwt_read32bitoffsetreg(RF_CONF_ID, LDOTUNE) != LDOTUNE_DEFAULT)
 227:Core/Src/deca_device.c ****             pdw1000local->sleep_mode |= AON_WCFG_ONW_LLDO;
 228:Core/Src/deca_device.c ****     }
 229:Core/Src/deca_device.c **** 
 230:Core/Src/deca_device.c ****     if((!(DWT_DW_WAKE_UP & config)) || ((DWT_DW_WAKE_UP & config) && (DWT_DW_WUP_RD_OTPREV & config
 231:Core/Src/deca_device.c ****     {
 232:Core/Src/deca_device.c ****         // Read OTP revision number
 233:Core/Src/deca_device.c ****         otp_xtaltrim_and_rev = _dwt_otpread(XTRIM_ADDRESS) & 0xffff;        // Read 32 bit value, X
 234:Core/Src/deca_device.c ****         pdw1000local->otprev = (otp_xtaltrim_and_rev >> 8) & 0xff;          // OTP revision is the 
 235:Core/Src/deca_device.c ****     }
 236:Core/Src/deca_device.c ****     else
 237:Core/Src/deca_device.c ****         pdw1000local->otprev = 0; // If OTP valuse are not used, if this API is called after DW1000
 238:Core/Src/deca_device.c ****                                   // (DWT_DW_WAKE_UP bit is set), set otprev to 0
 239:Core/Src/deca_device.c **** 
 240:Core/Src/deca_device.c ****     if(!(DWT_DW_WAKE_UP & config))
 241:Core/Src/deca_device.c ****     {
 242:Core/Src/deca_device.c ****         // XTAL trim value is set in OTP for DW1000 module and EVK/TREK boards but that might not b
 243:Core/Src/deca_device.c ****         if ((otp_xtaltrim_and_rev & 0x1F) == 0) // A value of 0 means that the crystal has not been
 244:Core/Src/deca_device.c ****         {
 245:Core/Src/deca_device.c ****             otp_xtaltrim_and_rev = FS_XTALT_MIDRANGE ; // Set to mid-range if no calibration value 
 246:Core/Src/deca_device.c ****         }
 247:Core/Src/deca_device.c ****         // Configure XTAL trim
 248:Core/Src/deca_device.c ****         dwt_setxtaltrim((uint8)otp_xtaltrim_and_rev);
 249:Core/Src/deca_device.c ****     }
 250:Core/Src/deca_device.c **** 
 251:Core/Src/deca_device.c ****     if(DWT_READ_OTP_PID & config)
 252:Core/Src/deca_device.c ****     {
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 7


 253:Core/Src/deca_device.c ****         // Load Part from OTP
 254:Core/Src/deca_device.c ****         pdw1000local->partID = _dwt_otpread(PARTID_ADDRESS);
 255:Core/Src/deca_device.c ****     }
 256:Core/Src/deca_device.c ****     else
 257:Core/Src/deca_device.c ****     {
 258:Core/Src/deca_device.c ****         pdw1000local->partID = 0;
 259:Core/Src/deca_device.c ****     }
 260:Core/Src/deca_device.c **** 
 261:Core/Src/deca_device.c ****     if(DWT_READ_OTP_LID & config)
 262:Core/Src/deca_device.c ****     {
 263:Core/Src/deca_device.c ****         // Load Lot ID from OTP
 264:Core/Src/deca_device.c ****         pdw1000local->lotID = _dwt_otpread(LOTID_ADDRESS);
 265:Core/Src/deca_device.c ****     }
 266:Core/Src/deca_device.c ****     else
 267:Core/Src/deca_device.c ****     {
 268:Core/Src/deca_device.c ****         pdw1000local->lotID = 0;
 269:Core/Src/deca_device.c ****     }
 270:Core/Src/deca_device.c **** 
 271:Core/Src/deca_device.c ****     if(DWT_READ_OTP_BAT & config)
 272:Core/Src/deca_device.c ****     {
 273:Core/Src/deca_device.c ****         // Load VBAT from OTP
 274:Core/Src/deca_device.c ****         pdw1000local->vBatP = _dwt_otpread(VBAT_ADDRESS) & 0xff;
 275:Core/Src/deca_device.c ****     }
 276:Core/Src/deca_device.c ****     else
 277:Core/Src/deca_device.c ****     {
 278:Core/Src/deca_device.c ****         pdw1000local->vBatP = 0;
 279:Core/Src/deca_device.c ****     }
 280:Core/Src/deca_device.c **** 
 281:Core/Src/deca_device.c ****     if(DWT_READ_OTP_TMP & config)
 282:Core/Src/deca_device.c ****     {
 283:Core/Src/deca_device.c ****         // Load TEMP from OTP
 284:Core/Src/deca_device.c ****         pdw1000local->tempP = _dwt_otpread(VTEMP_ADDRESS) & 0xff;
 285:Core/Src/deca_device.c ****     }
 286:Core/Src/deca_device.c ****     else
 287:Core/Src/deca_device.c ****     {
 288:Core/Src/deca_device.c ****         pdw1000local->tempP = 0;
 289:Core/Src/deca_device.c ****     }
 290:Core/Src/deca_device.c **** 
 291:Core/Src/deca_device.c ****     // Load leading edge detect code (LDE/microcode)
 292:Core/Src/deca_device.c ****     if(!(DWT_DW_WAKE_UP & config))
 293:Core/Src/deca_device.c ****     {
 294:Core/Src/deca_device.c ****         if(DWT_LOADUCODE & config)
 295:Core/Src/deca_device.c ****         {
 296:Core/Src/deca_device.c ****             _dwt_loaducodefromrom();
 297:Core/Src/deca_device.c ****             pdw1000local->sleep_mode |= AON_WCFG_ONW_LLDE; // microcode must be loaded at wake-up i
 298:Core/Src/deca_device.c ****         }
 299:Core/Src/deca_device.c ****         else // Should disable the LDERUN bit enable if LDE has not been loaded
 300:Core/Src/deca_device.c ****         {
 301:Core/Src/deca_device.c ****             uint16 rega = dwt_read16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET+1) ;
 302:Core/Src/deca_device.c ****             rega &= 0xFDFF ; // Clear LDERUN bit
 303:Core/Src/deca_device.c ****             dwt_write16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET+1, rega) ;
 304:Core/Src/deca_device.c ****         }
 305:Core/Src/deca_device.c ****     }
 306:Core/Src/deca_device.c ****     else //if DWT_DW_WUP_NO_UCODE is set then assume that the UCODE was loaded from ROM (i.e. DWT_L
 307:Core/Src/deca_device.c ****     {     //thus set AON_WCFG_ONW_LLDE, otherwise don't set the AON_WCFG_ONW_LLDE bit in the sleep_
 308:Core/Src/deca_device.c ****         if((DWT_DW_WUP_NO_UCODE & config) == 0)
 309:Core/Src/deca_device.c ****         {
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 8


 310:Core/Src/deca_device.c ****             pdw1000local->sleep_mode |= AON_WCFG_ONW_LLDE;
 311:Core/Src/deca_device.c ****         }
 312:Core/Src/deca_device.c ****     }
 313:Core/Src/deca_device.c **** 
 314:Core/Src/deca_device.c ****     _dwt_enableclocks(ENABLE_ALL_SEQ); // Enable clocks for sequencing
 315:Core/Src/deca_device.c **** 
 316:Core/Src/deca_device.c ****     // The 3 bits in AON CFG1 register must be cleared to ensure proper operation of the DW1000 in 
 317:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG1_OFFSET, 0x00);
 318:Core/Src/deca_device.c **** 
 319:Core/Src/deca_device.c ****     // Read system register / store local copy
 320:Core/Src/deca_device.c ****     pdw1000local->sysCFGreg = dwt_read32bitreg(SYS_CFG_ID) ; // Read sysconfig register
 321:Core/Src/deca_device.c ****     pdw1000local->longFrames = (pdw1000local->sysCFGreg & SYS_CFG_PHR_MODE_11) >> SYS_CFG_PHR_MODE_
 322:Core/Src/deca_device.c **** 
 323:Core/Src/deca_device.c ****     pdw1000local->txFCTRL = dwt_read32bitreg(TX_FCTRL_ID) ;
 324:Core/Src/deca_device.c **** 
 325:Core/Src/deca_device.c ****     return DWT_SUCCESS ;
 326:Core/Src/deca_device.c **** 
 327:Core/Src/deca_device.c **** } // end dwt_initialise()
 328:Core/Src/deca_device.c **** 
 329:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 330:Core/Src/deca_device.c ****  * @fn dwt_otprevision()
 331:Core/Src/deca_device.c ****  *
 332:Core/Src/deca_device.c ****  * @brief This is used to return the read OTP revision
 333:Core/Src/deca_device.c ****  *
 334:Core/Src/deca_device.c ****  * NOTE: dwt_initialise() must be called prior to this function so that it can return a relevant va
 335:Core/Src/deca_device.c ****  *
 336:Core/Src/deca_device.c ****  * input parameters
 337:Core/Src/deca_device.c ****  *
 338:Core/Src/deca_device.c ****  * output parameters
 339:Core/Src/deca_device.c ****  *
 340:Core/Src/deca_device.c ****  * returns the read OTP revision value
 341:Core/Src/deca_device.c ****  */
 342:Core/Src/deca_device.c **** uint8 dwt_otprevision(void)
 343:Core/Src/deca_device.c **** {
  95              		.loc 1 343 1 is_stmt 1 view -0
  96              		.cfi_startproc
  97              		@ args = 0, pretend = 0, frame = 0
  98              		@ frame_needed = 0, uses_anonymous_args = 0
  99              		@ link register save eliminated.
 344:Core/Src/deca_device.c ****     return pdw1000local->otprev ;
 100              		.loc 1 344 5 view .LVU14
 101              		.loc 1 344 24 is_stmt 0 view .LVU15
 102 0000 014B     		ldr	r3, .L10
 103 0002 1B68     		ldr	r3, [r3]
 345:Core/Src/deca_device.c **** }
 104              		.loc 1 345 1 view .LVU16
 105 0004 D87A     		ldrb	r0, [r3, #11]	@ zero_extendqisi2
 106 0006 7047     		bx	lr
 107              	.L11:
 108              		.align	2
 109              	.L10:
 110 0008 00000000 		.word	.LANCHOR1
 111              		.cfi_endproc
 112              	.LFE3:
 114              		.section	.text.dwt_geticrefvolt,"ax",%progbits
 115              		.align	1
 116              		.global	dwt_geticrefvolt
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 9


 117              		.syntax unified
 118              		.thumb
 119              		.thumb_func
 121              	dwt_geticrefvolt:
 122              	.LFB10:
 346:Core/Src/deca_device.c **** 
 347:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 348:Core/Src/deca_device.c ****  * @fn dwt_setfinegraintxseq()
 349:Core/Src/deca_device.c ****  *
 350:Core/Src/deca_device.c ****  * @brief This function enables/disables the fine grain TX sequencing (enabled by default).
 351:Core/Src/deca_device.c ****  *
 352:Core/Src/deca_device.c ****  * input parameters
 353:Core/Src/deca_device.c ****  * @param enable - 1 to enable fine grain TX sequencing, 0 to disable it.
 354:Core/Src/deca_device.c ****  *
 355:Core/Src/deca_device.c ****  * output parameters none
 356:Core/Src/deca_device.c ****  *
 357:Core/Src/deca_device.c ****  * no return value
 358:Core/Src/deca_device.c ****  */
 359:Core/Src/deca_device.c **** void dwt_setfinegraintxseq(int enable)
 360:Core/Src/deca_device.c **** {
 361:Core/Src/deca_device.c ****     if (enable)
 362:Core/Src/deca_device.c ****     {
 363:Core/Src/deca_device.c ****         dwt_write16bitoffsetreg(PMSC_ID, PMSC_TXFINESEQ_OFFSET, PMSC_TXFINESEQ_ENABLE);
 364:Core/Src/deca_device.c ****     }
 365:Core/Src/deca_device.c ****     else
 366:Core/Src/deca_device.c ****     {
 367:Core/Src/deca_device.c ****         dwt_write16bitoffsetreg(PMSC_ID, PMSC_TXFINESEQ_OFFSET, PMSC_TXFINESEQ_DISABLE);
 368:Core/Src/deca_device.c ****     }
 369:Core/Src/deca_device.c **** }
 370:Core/Src/deca_device.c **** 
 371:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 372:Core/Src/deca_device.c ****  * @fn dwt_setlnapamode()
 373:Core/Src/deca_device.c ****  *
 374:Core/Src/deca_device.c ****  * @brief This is used to enable GPIO for external LNA or PA functionality - HW dependent, consult 
 375:Core/Src/deca_device.c ****  *        This can also be used for debug as enabling TX and RX GPIOs is quite handy to monitor DW1
 376:Core/Src/deca_device.c ****  *
 377:Core/Src/deca_device.c ****  * NOTE: Enabling PA functionality requires that fine grain TX sequencing is deactivated. This can 
 378:Core/Src/deca_device.c ****  *       dwt_setfinegraintxseq().
 379:Core/Src/deca_device.c ****  *
 380:Core/Src/deca_device.c ****  * input parameters
 381:Core/Src/deca_device.c ****  * @param lna_pa - bit field: bit 0 if set will enable LNA functionality,
 382:Core/Src/deca_device.c ****  *                          : bit 1 if set will enable PA functionality,
 383:Core/Src/deca_device.c ****  *                          : to disable LNA/PA set the bits to 0
 384:Core/Src/deca_device.c ****  *
 385:Core/Src/deca_device.c ****  * no return value
 386:Core/Src/deca_device.c ****  */
 387:Core/Src/deca_device.c **** void dwt_setlnapamode(int lna_pa)
 388:Core/Src/deca_device.c **** {
 389:Core/Src/deca_device.c ****     uint32 gpio_mode = dwt_read32bitoffsetreg(GPIO_CTRL_ID, GPIO_MODE_OFFSET);
 390:Core/Src/deca_device.c ****     gpio_mode &= ~(GPIO_MSGP4_MASK | GPIO_MSGP5_MASK | GPIO_MSGP6_MASK);
 391:Core/Src/deca_device.c ****     if (lna_pa & DWT_LNA_ENABLE)
 392:Core/Src/deca_device.c ****     {
 393:Core/Src/deca_device.c ****         gpio_mode |= GPIO_PIN6_EXTRXE;
 394:Core/Src/deca_device.c ****     }
 395:Core/Src/deca_device.c ****     if (lna_pa & DWT_PA_ENABLE)
 396:Core/Src/deca_device.c ****     {
 397:Core/Src/deca_device.c ****         gpio_mode |= (GPIO_PIN5_EXTTXE | GPIO_PIN4_EXTPA);
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 10


 398:Core/Src/deca_device.c ****     }
 399:Core/Src/deca_device.c ****     dwt_write32bitoffsetreg(GPIO_CTRL_ID, GPIO_MODE_OFFSET, gpio_mode);
 400:Core/Src/deca_device.c **** }
 401:Core/Src/deca_device.c **** 
 402:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 403:Core/Src/deca_device.c ****  * @fn dwt_enablegpioclocks()
 404:Core/Src/deca_device.c ****  *
 405:Core/Src/deca_device.c ****  * @brief This is used to enable GPIO clocks. The clocks are needed to ensure correct GPIO operatio
 406:Core/Src/deca_device.c ****  *
 407:Core/Src/deca_device.c ****  * input parameters
 408:Core/Src/deca_device.c ****  *
 409:Core/Src/deca_device.c ****  * output parameters
 410:Core/Src/deca_device.c ****  *
 411:Core/Src/deca_device.c ****  * no return value
 412:Core/Src/deca_device.c ****  */
 413:Core/Src/deca_device.c **** void dwt_enablegpioclocks(void)
 414:Core/Src/deca_device.c **** {
 415:Core/Src/deca_device.c ****     uint32 pmsc_clock_ctrl = dwt_read32bitreg(PMSC_ID);
 416:Core/Src/deca_device.c ****     dwt_write32bitreg(PMSC_ID, pmsc_clock_ctrl | PMSC_CTRL0_GPCE | PMSC_CTRL0_GPRN) ;
 417:Core/Src/deca_device.c **** }
 418:Core/Src/deca_device.c **** 
 419:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 420:Core/Src/deca_device.c ****  * @fn dwt_setgpiodirection()
 421:Core/Src/deca_device.c ****  *
 422:Core/Src/deca_device.c ****  * @brief This is used to set GPIO direction as an input (1) or output (0)
 423:Core/Src/deca_device.c ****  *
 424:Core/Src/deca_device.c ****  * input parameters
 425:Core/Src/deca_device.c ****  * @param gpioNum    -   this is the GPIO to configure - see GxM0... GxM8 in the deca_regs.h file
 426:Core/Src/deca_device.c ****  * @param direction  -   this sets the GPIO direction - see GxP0... GxP8 in the deca_regs.h file
 427:Core/Src/deca_device.c ****  *
 428:Core/Src/deca_device.c ****  * output parameters
 429:Core/Src/deca_device.c ****  *
 430:Core/Src/deca_device.c ****  * no return value
 431:Core/Src/deca_device.c ****  */
 432:Core/Src/deca_device.c **** void dwt_setgpiodirection(uint32 gpioNum, uint32 direction)
 433:Core/Src/deca_device.c **** {
 434:Core/Src/deca_device.c ****     uint8 buf[GPIO_DIR_LEN];
 435:Core/Src/deca_device.c ****     uint32 command = direction | gpioNum;
 436:Core/Src/deca_device.c **** 
 437:Core/Src/deca_device.c ****     buf[0] = command & 0xff;
 438:Core/Src/deca_device.c ****     buf[1] = (command >> 8) & 0xff;
 439:Core/Src/deca_device.c ****     buf[2] = (command >> 16) & 0xff;
 440:Core/Src/deca_device.c **** 
 441:Core/Src/deca_device.c ****     dwt_writetodevice(GPIO_CTRL_ID, GPIO_DIR_OFFSET, GPIO_DIR_LEN, buf);
 442:Core/Src/deca_device.c **** }
 443:Core/Src/deca_device.c **** 
 444:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 445:Core/Src/deca_device.c ****  * @fn dwt_setgpiovalue()
 446:Core/Src/deca_device.c ****  *
 447:Core/Src/deca_device.c ****  * @brief This is used to set GPIO value as (1) or (0) only applies if the GPIO is configured as ou
 448:Core/Src/deca_device.c ****  *
 449:Core/Src/deca_device.c ****  * input parameters
 450:Core/Src/deca_device.c ****  * @param gpioNum    -   this is the GPIO to configure - see DWT_GxP0... DWT_GxP8
 451:Core/Src/deca_device.c ****  * @param value  -   this sets the GPIO value - see DWT_GxP0... DWT_GxP8
 452:Core/Src/deca_device.c ****  *
 453:Core/Src/deca_device.c ****  * output parameters
 454:Core/Src/deca_device.c ****  *
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 11


 455:Core/Src/deca_device.c ****  * no return value
 456:Core/Src/deca_device.c ****  */
 457:Core/Src/deca_device.c **** void dwt_setgpiovalue(uint32 gpioNum, uint32 value)
 458:Core/Src/deca_device.c **** {
 459:Core/Src/deca_device.c ****     uint8 buf[GPIO_DOUT_LEN];
 460:Core/Src/deca_device.c ****     uint32 command = value | gpioNum;
 461:Core/Src/deca_device.c **** 
 462:Core/Src/deca_device.c ****     buf[0] = command & 0xff;
 463:Core/Src/deca_device.c ****     buf[1] = (command >> 8) & 0xff;
 464:Core/Src/deca_device.c ****     buf[2] = (command >> 16) & 0xff;
 465:Core/Src/deca_device.c **** 
 466:Core/Src/deca_device.c ****     dwt_writetodevice(GPIO_CTRL_ID, GPIO_DOUT_OFFSET, GPIO_DOUT_LEN, buf);
 467:Core/Src/deca_device.c **** }
 468:Core/Src/deca_device.c **** 
 469:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 470:Core/Src/deca_device.c ****  * @fn dwt_getgpiovalue()
 471:Core/Src/deca_device.c ****  *
 472:Core/Src/deca_device.c ****  * @brief This is used to return 1 or 0 depending if the depending if the GPIO is high or low, only
 473:Core/Src/deca_device.c ****  *        be tested at a time
 474:Core/Src/deca_device.c ****  *
 475:Core/Src/deca_device.c ****  * input parameters
 476:Core/Src/deca_device.c ****  * @param gpioNum    -   this is the GPIO to configure - see DWT_GxP0... DWT_GxP8
 477:Core/Src/deca_device.c ****  *
 478:Core/Src/deca_device.c ****  * output parameters
 479:Core/Src/deca_device.c ****  *
 480:Core/Src/deca_device.c ****  * return int (1 or 0)
 481:Core/Src/deca_device.c ****  */
 482:Core/Src/deca_device.c **** int dwt_getgpiovalue(uint32 gpioNum)
 483:Core/Src/deca_device.c **** {
 484:Core/Src/deca_device.c ****     return ((dwt_read32bitoffsetreg(GPIO_CTRL_ID, GPIO_RAW_OFFSET) & gpioNum)? 1 : 0);
 485:Core/Src/deca_device.c **** }
 486:Core/Src/deca_device.c **** 
 487:Core/Src/deca_device.c **** 
 488:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 489:Core/Src/deca_device.c ****  * @fn dwt_geticrefvolt()
 490:Core/Src/deca_device.c ****  *
 491:Core/Src/deca_device.c ****  * @brief This is used to return the read V measured @ 3.3 V value recorded in OTP address 0x8 (VBA
 492:Core/Src/deca_device.c ****  *
 493:Core/Src/deca_device.c ****  * NOTE: dwt_initialise() must be called prior to this function so that it can return a relevant va
 494:Core/Src/deca_device.c ****  *
 495:Core/Src/deca_device.c ****  * input parameters
 496:Core/Src/deca_device.c ****  *
 497:Core/Src/deca_device.c ****  * output parameters
 498:Core/Src/deca_device.c ****  *
 499:Core/Src/deca_device.c ****  * returns the 8 bit V bat value as programmed in the factory
 500:Core/Src/deca_device.c ****  */
 501:Core/Src/deca_device.c **** uint8 dwt_geticrefvolt(void)
 502:Core/Src/deca_device.c **** {
 123              		.loc 1 502 1 is_stmt 1 view -0
 124              		.cfi_startproc
 125              		@ args = 0, pretend = 0, frame = 0
 126              		@ frame_needed = 0, uses_anonymous_args = 0
 127              		@ link register save eliminated.
 503:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 504:Core/Src/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_BAT);
 505:Core/Src/deca_device.c **** #endif
 506:Core/Src/deca_device.c ****     return pdw1000local->vBatP;
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 12


 128              		.loc 1 506 5 view .LVU18
 129              		.loc 1 506 24 is_stmt 0 view .LVU19
 130 0000 014B     		ldr	r3, .L13
 131 0002 1B68     		ldr	r3, [r3]
 507:Core/Src/deca_device.c **** }
 132              		.loc 1 507 1 view .LVU20
 133 0004 187A     		ldrb	r0, [r3, #8]	@ zero_extendqisi2
 134 0006 7047     		bx	lr
 135              	.L14:
 136              		.align	2
 137              	.L13:
 138 0008 00000000 		.word	.LANCHOR1
 139              		.cfi_endproc
 140              	.LFE10:
 142              		.section	.text.dwt_geticreftemp,"ax",%progbits
 143              		.align	1
 144              		.global	dwt_geticreftemp
 145              		.syntax unified
 146              		.thumb
 147              		.thumb_func
 149              	dwt_geticreftemp:
 150              	.LFB11:
 508:Core/Src/deca_device.c **** 
 509:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 510:Core/Src/deca_device.c ****  * @fn dwt_geticreftemp()
 511:Core/Src/deca_device.c ****  *
 512:Core/Src/deca_device.c ****  * @brief This is used to return the read T measured @ 23 C value recorded in OTP address 0x9 (VTEM
 513:Core/Src/deca_device.c ****  *
 514:Core/Src/deca_device.c ****  * NOTE: dwt_initialise() must be called prior to this function so that it can return a relevant va
 515:Core/Src/deca_device.c ****  *
 516:Core/Src/deca_device.c ****  * input parameters
 517:Core/Src/deca_device.c ****  *
 518:Core/Src/deca_device.c ****  * output parameters
 519:Core/Src/deca_device.c ****  *
 520:Core/Src/deca_device.c ****  * returns the 8 bit V temp value as programmed in the factory
 521:Core/Src/deca_device.c ****  */
 522:Core/Src/deca_device.c **** uint8 dwt_geticreftemp(void)
 523:Core/Src/deca_device.c **** {
 151              		.loc 1 523 1 is_stmt 1 view -0
 152              		.cfi_startproc
 153              		@ args = 0, pretend = 0, frame = 0
 154              		@ frame_needed = 0, uses_anonymous_args = 0
 155              		@ link register save eliminated.
 524:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 525:Core/Src/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_TMP);
 526:Core/Src/deca_device.c **** #endif
 527:Core/Src/deca_device.c ****     return pdw1000local->tempP;
 156              		.loc 1 527 5 view .LVU22
 157              		.loc 1 527 24 is_stmt 0 view .LVU23
 158 0000 014B     		ldr	r3, .L16
 159 0002 1B68     		ldr	r3, [r3]
 528:Core/Src/deca_device.c **** }
 160              		.loc 1 528 1 view .LVU24
 161 0004 587A     		ldrb	r0, [r3, #9]	@ zero_extendqisi2
 162 0006 7047     		bx	lr
 163              	.L17:
 164              		.align	2
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 13


 165              	.L16:
 166 0008 00000000 		.word	.LANCHOR1
 167              		.cfi_endproc
 168              	.LFE11:
 170              		.section	.text.dwt_getpartid,"ax",%progbits
 171              		.align	1
 172              		.global	dwt_getpartid
 173              		.syntax unified
 174              		.thumb
 175              		.thumb_func
 177              	dwt_getpartid:
 178              	.LFB12:
 529:Core/Src/deca_device.c **** 
 530:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 531:Core/Src/deca_device.c ****  * @fn dwt_getpartid()
 532:Core/Src/deca_device.c ****  *
 533:Core/Src/deca_device.c ****  * @brief This is used to return the read part ID (or chip ID) of the device
 534:Core/Src/deca_device.c ****  *
 535:Core/Src/deca_device.c ****  * NOTE: dwt_initialise() must be called prior to this function so that it can return a relevant va
 536:Core/Src/deca_device.c ****  *
 537:Core/Src/deca_device.c ****  * input parameters
 538:Core/Src/deca_device.c ****  *
 539:Core/Src/deca_device.c ****  * output parameters
 540:Core/Src/deca_device.c ****  *
 541:Core/Src/deca_device.c ****  * returns the 32 bit part ID (or chip ID) value as programmed in the factory
 542:Core/Src/deca_device.c ****  */
 543:Core/Src/deca_device.c **** uint32 dwt_getpartid(void)
 544:Core/Src/deca_device.c **** {
 179              		.loc 1 544 1 is_stmt 1 view -0
 180              		.cfi_startproc
 181              		@ args = 0, pretend = 0, frame = 0
 182              		@ frame_needed = 0, uses_anonymous_args = 0
 183              		@ link register save eliminated.
 545:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 546:Core/Src/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_PID);
 547:Core/Src/deca_device.c **** #endif
 548:Core/Src/deca_device.c **** 
 549:Core/Src/deca_device.c ****     return pdw1000local->partID;
 184              		.loc 1 549 5 view .LVU26
 185              		.loc 1 549 24 is_stmt 0 view .LVU27
 186 0000 014B     		ldr	r3, .L19
 187 0002 1B68     		ldr	r3, [r3]
 550:Core/Src/deca_device.c **** }
 188              		.loc 1 550 1 view .LVU28
 189 0004 1868     		ldr	r0, [r3]
 190 0006 7047     		bx	lr
 191              	.L20:
 192              		.align	2
 193              	.L19:
 194 0008 00000000 		.word	.LANCHOR1
 195              		.cfi_endproc
 196              	.LFE12:
 198              		.section	.text.dwt_getlotid,"ax",%progbits
 199              		.align	1
 200              		.global	dwt_getlotid
 201              		.syntax unified
 202              		.thumb
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 14


 203              		.thumb_func
 205              	dwt_getlotid:
 206              	.LFB13:
 551:Core/Src/deca_device.c **** 
 552:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 553:Core/Src/deca_device.c ****  * @fn dwt_getlotid()
 554:Core/Src/deca_device.c ****  *
 555:Core/Src/deca_device.c ****  * @brief This is used to return the read lot ID of the device
 556:Core/Src/deca_device.c ****  *
 557:Core/Src/deca_device.c ****  * NOTE: dwt_initialise() must be called prior to this function so that it can return a relevant va
 558:Core/Src/deca_device.c ****  *
 559:Core/Src/deca_device.c ****  * input parameters
 560:Core/Src/deca_device.c ****  *
 561:Core/Src/deca_device.c ****  * output parameters
 562:Core/Src/deca_device.c ****  *
 563:Core/Src/deca_device.c ****  * returns the 32 bit lot ID value as programmed in the factory
 564:Core/Src/deca_device.c ****  */
 565:Core/Src/deca_device.c **** uint32 dwt_getlotid(void)
 566:Core/Src/deca_device.c **** {
 207              		.loc 1 566 1 is_stmt 1 view -0
 208              		.cfi_startproc
 209              		@ args = 0, pretend = 0, frame = 0
 210              		@ frame_needed = 0, uses_anonymous_args = 0
 211              		@ link register save eliminated.
 567:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 568:Core/Src/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_LID);
 569:Core/Src/deca_device.c **** #endif
 570:Core/Src/deca_device.c **** 
 571:Core/Src/deca_device.c ****     return pdw1000local->lotID;
 212              		.loc 1 571 5 view .LVU30
 213              		.loc 1 571 24 is_stmt 0 view .LVU31
 214 0000 014B     		ldr	r3, .L22
 215 0002 1B68     		ldr	r3, [r3]
 572:Core/Src/deca_device.c **** }
 216              		.loc 1 572 1 view .LVU32
 217 0004 5868     		ldr	r0, [r3, #4]
 218 0006 7047     		bx	lr
 219              	.L23:
 220              		.align	2
 221              	.L22:
 222 0008 00000000 		.word	.LANCHOR1
 223              		.cfi_endproc
 224              	.LFE13:
 226              		.section	.text.dwt_writetodevice,"ax",%progbits
 227              		.align	1
 228              		.global	dwt_writetodevice
 229              		.syntax unified
 230              		.thumb
 231              		.thumb_func
 233              	dwt_writetodevice:
 234              	.LVL2:
 235              	.LFB34:
 573:Core/Src/deca_device.c **** 
 574:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 575:Core/Src/deca_device.c ****  * @fn dwt_readdevid()
 576:Core/Src/deca_device.c ****  *
 577:Core/Src/deca_device.c ****  * @brief This is used to return the read device type and revision information of the DW1000 device
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 15


 578:Core/Src/deca_device.c ****  *
 579:Core/Src/deca_device.c ****  * input parameters
 580:Core/Src/deca_device.c ****  *
 581:Core/Src/deca_device.c ****  * output parameters
 582:Core/Src/deca_device.c ****  *
 583:Core/Src/deca_device.c ****  * returns the read value which for DW1000 is 0xDECA0130
 584:Core/Src/deca_device.c ****  */
 585:Core/Src/deca_device.c **** uint32 dwt_readdevid(void)
 586:Core/Src/deca_device.c **** {
 587:Core/Src/deca_device.c ****     return dwt_read32bitoffsetreg(DEV_ID_ID,0);
 588:Core/Src/deca_device.c **** }
 589:Core/Src/deca_device.c **** 
 590:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 591:Core/Src/deca_device.c ****  * @fn dwt_configuretxrf()
 592:Core/Src/deca_device.c ****  *
 593:Core/Src/deca_device.c ****  * @brief This function provides the API for the configuration of the TX spectrum
 594:Core/Src/deca_device.c ****  * including the power and pulse generator delay. The input is a pointer to the data structure
 595:Core/Src/deca_device.c ****  * of type dwt_txconfig_t that holds all the configurable items.
 596:Core/Src/deca_device.c ****  *
 597:Core/Src/deca_device.c ****  * input parameters
 598:Core/Src/deca_device.c ****  * @param config    -   pointer to the txrf configuration structure, which contains the tx rf confi
 599:Core/Src/deca_device.c ****  *
 600:Core/Src/deca_device.c ****  * output parameters
 601:Core/Src/deca_device.c ****  *
 602:Core/Src/deca_device.c ****  * no return value
 603:Core/Src/deca_device.c ****  */
 604:Core/Src/deca_device.c **** void dwt_configuretxrf(dwt_txconfig_t *config)
 605:Core/Src/deca_device.c **** {
 606:Core/Src/deca_device.c **** 
 607:Core/Src/deca_device.c ****     // Configure RF TX PG_DELAY
 608:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGDELAY_OFFSET, config->PGdly);
 609:Core/Src/deca_device.c **** 
 610:Core/Src/deca_device.c ****     // Configure TX power
 611:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_POWER_ID, config->power);
 612:Core/Src/deca_device.c **** 
 613:Core/Src/deca_device.c **** }
 614:Core/Src/deca_device.c **** 
 615:Core/Src/deca_device.c **** 
 616:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 617:Core/Src/deca_device.c ****  * @fn dwt_configurefor64plen()
 618:Core/Src/deca_device.c ****  *  - Use default OPS table should be used with following register modifications:
 619:Core/Src/deca_device.c ****  *    These modifications optimise the default OPS configuration further for 64 length preamble use
 620:Core/Src/deca_device.c ****  *
 621:Core/Src/deca_device.c ****  * NOTE: These register settings are not preserved during SLEEP/DEEPSLEEP, thus they should be prog
 622:Core/Src/deca_device.c ****  *
 623:Core/Src/deca_device.c ****  * input parameters
 624:Core/Src/deca_device.c ****  * @param prf
 625:Core/Src/deca_device.c ****  *
 626:Core/Src/deca_device.c ****  * output parameters
 627:Core/Src/deca_device.c ****  *
 628:Core/Src/deca_device.c ****  * no return value
 629:Core/Src/deca_device.c ****  */
 630:Core/Src/deca_device.c **** void dwt_configurefor64plen(int prf)
 631:Core/Src/deca_device.c **** {
 632:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(CRTR_ID, CRTR_GEAR_OFFSET, DEMOD_GEAR_64L);
 633:Core/Src/deca_device.c **** 
 634:Core/Src/deca_device.c ****     if(prf == DWT_PRF_16M)
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 16


 635:Core/Src/deca_device.c ****     {
 636:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(DRX_CONF_ID, DRX_TUNE2_OFFSET+2, DRX_TUNE2_UNCONF_SFD_TH_PRF16);
 637:Core/Src/deca_device.c ****     }
 638:Core/Src/deca_device.c ****     else
 639:Core/Src/deca_device.c ****     {
 640:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(DRX_CONF_ID, DRX_TUNE2_OFFSET+2, DRX_TUNE2_UNCONF_SFD_TH_PRF64);
 641:Core/Src/deca_device.c ****     }
 642:Core/Src/deca_device.c **** }
 643:Core/Src/deca_device.c **** 
 644:Core/Src/deca_device.c **** 
 645:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 646:Core/Src/deca_device.c ****  * @fn dwt_configure()
 647:Core/Src/deca_device.c ****  *
 648:Core/Src/deca_device.c ****  * @brief This function provides the main API for the configuration of the
 649:Core/Src/deca_device.c ****  * DW1000 and this low-level driver.  The input is a pointer to the data structure
 650:Core/Src/deca_device.c ****  * of type dwt_config_t that holds all the configurable items.
 651:Core/Src/deca_device.c ****  * The dwt_config_t structure shows which ones are supported
 652:Core/Src/deca_device.c ****  *
 653:Core/Src/deca_device.c ****  * input parameters
 654:Core/Src/deca_device.c ****  * @param config    -   pointer to the configuration structure, which contains the device configura
 655:Core/Src/deca_device.c ****  *
 656:Core/Src/deca_device.c ****  * output parameters
 657:Core/Src/deca_device.c ****  *
 658:Core/Src/deca_device.c ****  * no return value
 659:Core/Src/deca_device.c ****  */
 660:Core/Src/deca_device.c **** void dwt_configure(dwt_config_t *config)
 661:Core/Src/deca_device.c **** {
 662:Core/Src/deca_device.c ****     uint8 nsSfd_result  = 0;
 663:Core/Src/deca_device.c ****     uint8 useDWnsSFD = 0;
 664:Core/Src/deca_device.c ****     uint8 chan = config->chan ;
 665:Core/Src/deca_device.c ****     uint32 regval ;
 666:Core/Src/deca_device.c ****     uint16 reg16 = lde_replicaCoeff[config->rxCode];
 667:Core/Src/deca_device.c ****     uint8 prfIndex = config->prf - DWT_PRF_16M;
 668:Core/Src/deca_device.c ****     uint8 bw = ((chan == 4) || (chan == 7)) ? 1 : 0 ; // Select wide or narrow band
 669:Core/Src/deca_device.c **** 
 670:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 671:Core/Src/deca_device.c ****     assert(config->dataRate <= DWT_BR_6M8);
 672:Core/Src/deca_device.c ****     assert(config->rxPAC <= DWT_PAC64);
 673:Core/Src/deca_device.c ****     assert((chan >= 1) && (chan <= 7) && (chan != 6));
 674:Core/Src/deca_device.c ****     assert(((config->prf == DWT_PRF_64M) && (config->txCode >= 9) && (config->txCode <= 24))
 675:Core/Src/deca_device.c ****            || ((config->prf == DWT_PRF_16M) && (config->txCode >= 1) && (config->txCode <= 8)));
 676:Core/Src/deca_device.c ****     assert(((config->prf == DWT_PRF_64M) && (config->rxCode >= 9) && (config->rxCode <= 24))
 677:Core/Src/deca_device.c ****            || ((config->prf == DWT_PRF_16M) && (config->rxCode >= 1) && (config->rxCode <= 8)));
 678:Core/Src/deca_device.c ****     assert((config->txPreambLength == DWT_PLEN_64) || (config->txPreambLength == DWT_PLEN_128) || (
 679:Core/Src/deca_device.c ****            || (config->txPreambLength == DWT_PLEN_512) || (config->txPreambLength == DWT_PLEN_1024)
 680:Core/Src/deca_device.c ****            || (config->txPreambLength == DWT_PLEN_2048) || (config->txPreambLength == DWT_PLEN_4096
 681:Core/Src/deca_device.c ****     assert((config->phrMode == DWT_PHRMODE_STD) || (config->phrMode == DWT_PHRMODE_EXT));
 682:Core/Src/deca_device.c **** #endif
 683:Core/Src/deca_device.c **** 
 684:Core/Src/deca_device.c ****     // For 110 kbps we need a special setup
 685:Core/Src/deca_device.c ****     if(DWT_BR_110K == config->dataRate)
 686:Core/Src/deca_device.c ****     {
 687:Core/Src/deca_device.c ****         pdw1000local->sysCFGreg |= SYS_CFG_RXM110K ;
 688:Core/Src/deca_device.c ****         reg16 >>= 3; // lde_replicaCoeff must be divided by 8
 689:Core/Src/deca_device.c ****     }
 690:Core/Src/deca_device.c ****     else
 691:Core/Src/deca_device.c ****     {
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 17


 692:Core/Src/deca_device.c ****         pdw1000local->sysCFGreg &= (~SYS_CFG_RXM110K) ;
 693:Core/Src/deca_device.c ****     }
 694:Core/Src/deca_device.c **** 
 695:Core/Src/deca_device.c ****     pdw1000local->longFrames = config->phrMode ;
 696:Core/Src/deca_device.c **** 
 697:Core/Src/deca_device.c ****     pdw1000local->sysCFGreg &= ~SYS_CFG_PHR_MODE_11;
 698:Core/Src/deca_device.c ****     pdw1000local->sysCFGreg |= (SYS_CFG_PHR_MODE_11 & ((uint32)config->phrMode << SYS_CFG_PHR_MODE_
 699:Core/Src/deca_device.c **** 
 700:Core/Src/deca_device.c ****     dwt_write32bitreg(SYS_CFG_ID,pdw1000local->sysCFGreg) ;
 701:Core/Src/deca_device.c ****     // Set the lde_replicaCoeff
 702:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(LDE_IF_ID, LDE_REPC_OFFSET, reg16) ;
 703:Core/Src/deca_device.c **** 
 704:Core/Src/deca_device.c ****     _dwt_configlde(prfIndex);
 705:Core/Src/deca_device.c **** 
 706:Core/Src/deca_device.c ****     // Configure PLL2/RF PLL block CFG/TUNE (for a given channel)
 707:Core/Src/deca_device.c ****     dwt_write32bitoffsetreg(FS_CTRL_ID, FS_PLLCFG_OFFSET, fs_pll_cfg[chan_idx[chan]]);
 708:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(FS_CTRL_ID, FS_PLLTUNE_OFFSET, fs_pll_tune[chan_idx[chan]]);
 709:Core/Src/deca_device.c **** 
 710:Core/Src/deca_device.c ****     // Configure RF RX blocks (for specified channel/bandwidth)
 711:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(RF_CONF_ID, RF_RXCTRLH_OFFSET, rx_config[bw]);
 712:Core/Src/deca_device.c **** 
 713:Core/Src/deca_device.c ****     // Configure RF TX blocks (for specified channel and PRF)
 714:Core/Src/deca_device.c ****     // Configure RF TX control
 715:Core/Src/deca_device.c ****     dwt_write32bitoffsetreg(RF_CONF_ID, RF_TXCTRL_OFFSET, tx_config[chan_idx[chan]]);
 716:Core/Src/deca_device.c **** 
 717:Core/Src/deca_device.c ****     // Configure the baseband parameters (for specified PRF, bit rate, PAC, and SFD settings)
 718:Core/Src/deca_device.c ****     // DTUNE0
 719:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(DRX_CONF_ID, DRX_TUNE0b_OFFSET, sftsh[config->dataRate][config->nsSFD])
 720:Core/Src/deca_device.c **** 
 721:Core/Src/deca_device.c ****     // DTUNE1
 722:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(DRX_CONF_ID, DRX_TUNE1a_OFFSET, dtune1[prfIndex]);
 723:Core/Src/deca_device.c **** 
 724:Core/Src/deca_device.c ****     if(config->dataRate == DWT_BR_110K)
 725:Core/Src/deca_device.c ****     {
 726:Core/Src/deca_device.c ****         dwt_write16bitoffsetreg(DRX_CONF_ID, DRX_TUNE1b_OFFSET, DRX_TUNE1b_110K);
 727:Core/Src/deca_device.c ****     }
 728:Core/Src/deca_device.c ****     else
 729:Core/Src/deca_device.c ****     {
 730:Core/Src/deca_device.c ****         if(config->txPreambLength == DWT_PLEN_64)
 731:Core/Src/deca_device.c ****         {
 732:Core/Src/deca_device.c ****             dwt_write16bitoffsetreg(DRX_CONF_ID, DRX_TUNE1b_OFFSET, DRX_TUNE1b_6M8_PRE64);
 733:Core/Src/deca_device.c ****             dwt_write8bitoffsetreg(DRX_CONF_ID, DRX_TUNE4H_OFFSET, DRX_TUNE4H_PRE64);
 734:Core/Src/deca_device.c ****         }
 735:Core/Src/deca_device.c ****         else
 736:Core/Src/deca_device.c ****         {
 737:Core/Src/deca_device.c ****             dwt_write16bitoffsetreg(DRX_CONF_ID, DRX_TUNE1b_OFFSET, DRX_TUNE1b_850K_6M8);
 738:Core/Src/deca_device.c ****             dwt_write8bitoffsetreg(DRX_CONF_ID, DRX_TUNE4H_OFFSET, DRX_TUNE4H_PRE128PLUS);
 739:Core/Src/deca_device.c ****         }
 740:Core/Src/deca_device.c ****     }
 741:Core/Src/deca_device.c **** 
 742:Core/Src/deca_device.c ****     // DTUNE2
 743:Core/Src/deca_device.c ****     dwt_write32bitoffsetreg(DRX_CONF_ID, DRX_TUNE2_OFFSET, digital_bb_config[prfIndex][config->rxPA
 744:Core/Src/deca_device.c **** 
 745:Core/Src/deca_device.c ****     // DTUNE3 (SFD timeout)
 746:Core/Src/deca_device.c ****     // Don't allow 0 - SFD timeout will always be enabled
 747:Core/Src/deca_device.c ****     if(config->sfdTO == 0)
 748:Core/Src/deca_device.c ****     {
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 18


 749:Core/Src/deca_device.c ****         config->sfdTO = DWT_SFDTOC_DEF;
 750:Core/Src/deca_device.c ****     }
 751:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(DRX_CONF_ID, DRX_SFDTOC_OFFSET, config->sfdTO);
 752:Core/Src/deca_device.c **** 
 753:Core/Src/deca_device.c ****     // Configure AGC parameters
 754:Core/Src/deca_device.c ****     dwt_write32bitoffsetreg( AGC_CFG_STS_ID, 0xC, agc_config.lo32);
 755:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg( AGC_CFG_STS_ID, 0x4, agc_config.target[prfIndex]);
 756:Core/Src/deca_device.c **** 
 757:Core/Src/deca_device.c ****     // Set (non-standard) user SFD for improved performance,
 758:Core/Src/deca_device.c ****     if(config->nsSFD)
 759:Core/Src/deca_device.c ****     {
 760:Core/Src/deca_device.c ****         // Write non standard (DW) SFD length
 761:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(USR_SFD_ID, 0x00, dwnsSFDlen[config->dataRate]);
 762:Core/Src/deca_device.c ****         nsSfd_result = 3 ;
 763:Core/Src/deca_device.c ****         useDWnsSFD = 1 ;
 764:Core/Src/deca_device.c ****     }
 765:Core/Src/deca_device.c ****     regval =  (CHAN_CTRL_TX_CHAN_MASK & (chan << CHAN_CTRL_TX_CHAN_SHIFT)) | // Transmit Channel
 766:Core/Src/deca_device.c ****               (CHAN_CTRL_RX_CHAN_MASK & (chan << CHAN_CTRL_RX_CHAN_SHIFT)) | // Receive Channel
 767:Core/Src/deca_device.c ****               (CHAN_CTRL_RXFPRF_MASK & ((uint32)config->prf << CHAN_CTRL_RXFPRF_SHIFT)) | // RX PRF
 768:Core/Src/deca_device.c ****               ((CHAN_CTRL_TNSSFD|CHAN_CTRL_RNSSFD) & ((uint32)nsSfd_result << CHAN_CTRL_TNSSFD_SHIF
 769:Core/Src/deca_device.c ****               (CHAN_CTRL_DWSFD & ((uint32)useDWnsSFD << CHAN_CTRL_DWSFD_SHIFT)) | // Use DW nsSFD
 770:Core/Src/deca_device.c ****               (CHAN_CTRL_TX_PCOD_MASK & ((uint32)config->txCode << CHAN_CTRL_TX_PCOD_SHIFT)) | // T
 771:Core/Src/deca_device.c ****               (CHAN_CTRL_RX_PCOD_MASK & ((uint32)config->rxCode << CHAN_CTRL_RX_PCOD_SHIFT)) ; // R
 772:Core/Src/deca_device.c **** 
 773:Core/Src/deca_device.c ****     dwt_write32bitreg(CHAN_CTRL_ID,regval) ;
 774:Core/Src/deca_device.c **** 
 775:Core/Src/deca_device.c ****     // Set up TX Preamble Size, PRF and Data Rate
 776:Core/Src/deca_device.c ****     pdw1000local->txFCTRL = ((uint32)(config->txPreambLength | config->prf) << TX_FCTRL_TXPRF_SHFT)
 777:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, pdw1000local->txFCTRL);
 778:Core/Src/deca_device.c **** 
 779:Core/Src/deca_device.c ****     // The SFD transmit pattern is initialised by the DW1000 upon a user TX request, but (due to an
 780:Core/Src/deca_device.c ****     // SYS_CTRL write below works around this issue, by simultaneously initiating and aborting a tr
 781:Core/Src/deca_device.c ****     // after its configuration or reconfiguration.
 782:Core/Src/deca_device.c ****     // This issue is not documented at the time of writing this code. It should be in next release 
 783:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_OFFSET, SYS_CTRL_TXSTRT | SYS_CTRL_TRXOFF); // Req
 784:Core/Src/deca_device.c **** } // end dwt_configure()
 785:Core/Src/deca_device.c **** 
 786:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 787:Core/Src/deca_device.c ****  * @fn dwt_setrxantennadelay()
 788:Core/Src/deca_device.c ****  *
 789:Core/Src/deca_device.c ****  * @brief This API function writes the antenna delay (in time units) to RX registers
 790:Core/Src/deca_device.c ****  *
 791:Core/Src/deca_device.c ****  * input parameters:
 792:Core/Src/deca_device.c ****  * @param rxDelay - this is the total (RX) antenna delay value, which
 793:Core/Src/deca_device.c ****  *                          will be programmed into the RX register
 794:Core/Src/deca_device.c ****  *
 795:Core/Src/deca_device.c ****  * output parameters
 796:Core/Src/deca_device.c ****  *
 797:Core/Src/deca_device.c ****  * no return value
 798:Core/Src/deca_device.c ****  */
 799:Core/Src/deca_device.c **** void dwt_setrxantennadelay(uint16 rxDelay)
 800:Core/Src/deca_device.c **** {
 801:Core/Src/deca_device.c ****     // Set the RX antenna delay for auto TX timestamp adjustment
 802:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(LDE_IF_ID, LDE_RXANTD_OFFSET, rxDelay);
 803:Core/Src/deca_device.c **** }
 804:Core/Src/deca_device.c **** 
 805:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 19


 806:Core/Src/deca_device.c ****  * @fn dwt_settxantennadelay()
 807:Core/Src/deca_device.c ****  *
 808:Core/Src/deca_device.c ****  * @brief This API function writes the antenna delay (in time units) to TX registers
 809:Core/Src/deca_device.c ****  *
 810:Core/Src/deca_device.c ****  * input parameters:
 811:Core/Src/deca_device.c ****  * @param txDelay - this is the total (TX) antenna delay value, which
 812:Core/Src/deca_device.c ****  *                          will be programmed into the TX delay register
 813:Core/Src/deca_device.c ****  *
 814:Core/Src/deca_device.c ****  * output parameters
 815:Core/Src/deca_device.c ****  *
 816:Core/Src/deca_device.c ****  * no return value
 817:Core/Src/deca_device.c ****  */
 818:Core/Src/deca_device.c **** void dwt_settxantennadelay(uint16 txDelay)
 819:Core/Src/deca_device.c **** {
 820:Core/Src/deca_device.c ****     // Set the TX antenna delay for auto TX timestamp adjustment
 821:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(TX_ANTD_ID, TX_ANTD_OFFSET, txDelay);
 822:Core/Src/deca_device.c **** }
 823:Core/Src/deca_device.c **** 
 824:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 825:Core/Src/deca_device.c ****  * @fn dwt_writetxdata()
 826:Core/Src/deca_device.c ****  *
 827:Core/Src/deca_device.c ****  * @brief This API function writes the supplied TX data into the DW1000's
 828:Core/Src/deca_device.c ****  * TX buffer.  The input parameters are the data length in bytes and a pointer
 829:Core/Src/deca_device.c ****  * to those data bytes.
 830:Core/Src/deca_device.c ****  *
 831:Core/Src/deca_device.c ****  * input parameters
 832:Core/Src/deca_device.c ****  * @param txFrameLength  - This is the total frame length, including the two byte CRC.
 833:Core/Src/deca_device.c ****  *                         Note: this is the length of TX message (including the 2 byte CRC) - max 
 834:Core/Src/deca_device.c ****  *                         standard PHR mode allows up to 127 bytes
 835:Core/Src/deca_device.c ****  *                         if > 127 is programmed, DWT_PHRMODE_EXT needs to be set in the phrMode c
 836:Core/Src/deca_device.c ****  *                         see dwt_configure function
 837:Core/Src/deca_device.c ****  * @param txFrameBytes   - Pointer to the users buffer containing the data to send.
 838:Core/Src/deca_device.c ****  * @param txBufferOffset - This specifies an offset in the DW1000s TX Buffer at which to start wri
 839:Core/Src/deca_device.c ****  *
 840:Core/Src/deca_device.c ****  * output parameters
 841:Core/Src/deca_device.c ****  *
 842:Core/Src/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error
 843:Core/Src/deca_device.c ****  */
 844:Core/Src/deca_device.c **** int dwt_writetxdata(uint16 txFrameLength, uint8 *txFrameBytes, uint16 txBufferOffset)
 845:Core/Src/deca_device.c **** {
 846:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 847:Core/Src/deca_device.c ****     assert(txFrameLength >= 2);
 848:Core/Src/deca_device.c ****     assert((pdw1000local->longFrames && (txFrameLength <= 1023)) || (txFrameLength <= 127));
 849:Core/Src/deca_device.c ****     assert((txBufferOffset + txFrameLength) <= 1024);
 850:Core/Src/deca_device.c **** #endif
 851:Core/Src/deca_device.c **** 
 852:Core/Src/deca_device.c ****     if ((txBufferOffset + txFrameLength) <= 1024)
 853:Core/Src/deca_device.c ****     {
 854:Core/Src/deca_device.c ****         // Write the data to the IC TX buffer, (-2 bytes for auto generated CRC)
 855:Core/Src/deca_device.c ****         dwt_writetodevice( TX_BUFFER_ID, txBufferOffset, txFrameLength-2, txFrameBytes);
 856:Core/Src/deca_device.c ****         return DWT_SUCCESS;
 857:Core/Src/deca_device.c ****     }
 858:Core/Src/deca_device.c ****     else
 859:Core/Src/deca_device.c ****     {
 860:Core/Src/deca_device.c ****         return DWT_ERROR;
 861:Core/Src/deca_device.c ****     }
 862:Core/Src/deca_device.c **** } // end dwt_writetxdata()
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 20


 863:Core/Src/deca_device.c **** 
 864:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 865:Core/Src/deca_device.c ****  * @fn dwt_writetxfctrl()
 866:Core/Src/deca_device.c ****  *
 867:Core/Src/deca_device.c ****  * @brief This API function configures the TX frame control register before the transmission of a f
 868:Core/Src/deca_device.c ****  *
 869:Core/Src/deca_device.c ****  * input parameters:
 870:Core/Src/deca_device.c ****  * @param txFrameLength - this is the length of TX message (including the 2 byte CRC) - max is 1023
 871:Core/Src/deca_device.c ****  *                              NOTE: standard PHR mode allows up to 127 bytes
 872:Core/Src/deca_device.c ****  *                              if > 127 is programmed, DWT_PHRMODE_EXT needs to be set in the phrM
 873:Core/Src/deca_device.c ****  *                              see dwt_configure function
 874:Core/Src/deca_device.c ****  * @param txBufferOffset - the offset in the tx buffer to start writing the data
 875:Core/Src/deca_device.c ****  * @param ranging - 1 if this is a ranging frame, else 0
 876:Core/Src/deca_device.c ****  *
 877:Core/Src/deca_device.c ****  * output parameters
 878:Core/Src/deca_device.c ****  *
 879:Core/Src/deca_device.c ****  * no return value
 880:Core/Src/deca_device.c ****  */
 881:Core/Src/deca_device.c **** void dwt_writetxfctrl(uint16 txFrameLength, uint16 txBufferOffset, int ranging)
 882:Core/Src/deca_device.c **** {
 883:Core/Src/deca_device.c **** 
 884:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 885:Core/Src/deca_device.c ****     assert((pdw1000local->longFrames && (txFrameLength <= 1023)) || (txFrameLength <= 127));
 886:Core/Src/deca_device.c ****     assert((txBufferOffset + txFrameLength) <= 1024);
 887:Core/Src/deca_device.c ****     assert((ranging == 0) || (ranging == 1))
 888:Core/Src/deca_device.c **** #endif
 889:Core/Src/deca_device.c **** 
 890:Core/Src/deca_device.c ****     // Write the frame length to the TX frame control register
 891:Core/Src/deca_device.c ****     // pdw1000local->txFCTRL has kept configured bit rate information
 892:Core/Src/deca_device.c ****     uint32 reg32 = pdw1000local->txFCTRL | txFrameLength | ((uint32)txBufferOffset << TX_FCTRL_TXBO
 893:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, reg32);
 894:Core/Src/deca_device.c **** } // end dwt_writetxfctrl()
 895:Core/Src/deca_device.c **** 
 896:Core/Src/deca_device.c **** 
 897:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 898:Core/Src/deca_device.c ****  * @fn dwt_readrxdata()
 899:Core/Src/deca_device.c ****  *
 900:Core/Src/deca_device.c ****  * @brief This is used to read the data from the RX buffer, from an offset location give by offset 
 901:Core/Src/deca_device.c ****  *
 902:Core/Src/deca_device.c ****  * input parameters
 903:Core/Src/deca_device.c ****  * @param buffer - the buffer into which the data will be read
 904:Core/Src/deca_device.c ****  * @param length - the length of data to read (in bytes)
 905:Core/Src/deca_device.c ****  * @param rxBufferOffset - the offset in the rx buffer from which to read the data
 906:Core/Src/deca_device.c ****  *
 907:Core/Src/deca_device.c ****  * output parameters
 908:Core/Src/deca_device.c ****  *
 909:Core/Src/deca_device.c ****  * no return value
 910:Core/Src/deca_device.c ****  */
 911:Core/Src/deca_device.c **** void dwt_readrxdata(uint8 *buffer, uint16 length, uint16 rxBufferOffset)
 912:Core/Src/deca_device.c **** {
 913:Core/Src/deca_device.c ****     dwt_readfromdevice(RX_BUFFER_ID,rxBufferOffset,length,buffer) ;
 914:Core/Src/deca_device.c **** }
 915:Core/Src/deca_device.c **** 
 916:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 917:Core/Src/deca_device.c ****  * @fn dwt_readaccdata()
 918:Core/Src/deca_device.c ****  *
 919:Core/Src/deca_device.c ****  * @brief This is used to read the data from the Accumulator buffer, from an offset location give b
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 21


 920:Core/Src/deca_device.c ****  *
 921:Core/Src/deca_device.c ****  * NOTE: Because of an internal memory access delay when reading the accumulator the first octet ou
 922:Core/Src/deca_device.c ****  *       that should be discarded. This is true no matter what sub-index the read begins at.
 923:Core/Src/deca_device.c ****  *
 924:Core/Src/deca_device.c ****  * input parameters
 925:Core/Src/deca_device.c ****  * @param buffer - the buffer into which the data will be read
 926:Core/Src/deca_device.c ****  * @param length - the length of data to read (in bytes)
 927:Core/Src/deca_device.c ****  * @param accOffset - the offset in the acc buffer from which to read the data
 928:Core/Src/deca_device.c ****  *
 929:Core/Src/deca_device.c ****  * output parameters
 930:Core/Src/deca_device.c ****  *
 931:Core/Src/deca_device.c ****  * no return value
 932:Core/Src/deca_device.c ****  */
 933:Core/Src/deca_device.c **** void dwt_readaccdata(uint8 *buffer, uint16 len, uint16 accOffset)
 934:Core/Src/deca_device.c **** {
 935:Core/Src/deca_device.c ****     // Force on the ACC clocks if we are sequenced
 936:Core/Src/deca_device.c ****     _dwt_enableclocks(READ_ACC_ON);
 937:Core/Src/deca_device.c **** 
 938:Core/Src/deca_device.c ****     dwt_readfromdevice(ACC_MEM_ID,accOffset,len,buffer) ;
 939:Core/Src/deca_device.c **** 
 940:Core/Src/deca_device.c ****     _dwt_enableclocks(READ_ACC_OFF); // Revert clocks back
 941:Core/Src/deca_device.c **** }
 942:Core/Src/deca_device.c **** 
 943:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 944:Core/Src/deca_device.c ****  * @fn dwt_readcarrierintegrator()
 945:Core/Src/deca_device.c ****  *
 946:Core/Src/deca_device.c ****  * @brief This is used to read the RX carrier integrator value (relating to the frequency offset of
 947:Core/Src/deca_device.c ****  *
 948:Core/Src/deca_device.c ****  * NOTE: This is a 21-bit signed quantity, the function sign extends the most significant bit, whic
 949:Core/Src/deca_device.c ****  *       (numbering from bit zero) to return a 32-bit signed integer value.
 950:Core/Src/deca_device.c ****  *
 951:Core/Src/deca_device.c ****  * input parameters - NONE
 952:Core/Src/deca_device.c ****  *
 953:Core/Src/deca_device.c ****  * return value - the (int32) signed carrier integrator value.
 954:Core/Src/deca_device.c ****  *                A positive value means the local RX clock is running faster than the remote TX de
 955:Core/Src/deca_device.c ****  */
 956:Core/Src/deca_device.c **** 
 957:Core/Src/deca_device.c **** #define B20_SIGN_EXTEND_TEST (0x00100000UL)
 958:Core/Src/deca_device.c **** #define B20_SIGN_EXTEND_MASK (0xFFF00000UL)
 959:Core/Src/deca_device.c **** 
 960:Core/Src/deca_device.c **** int32 dwt_readcarrierintegrator(void)
 961:Core/Src/deca_device.c **** {
 962:Core/Src/deca_device.c ****     uint32  regval = 0 ;
 963:Core/Src/deca_device.c ****     int     j ;
 964:Core/Src/deca_device.c ****     uint8   buffer[DRX_CARRIER_INT_LEN] ;
 965:Core/Src/deca_device.c **** 
 966:Core/Src/deca_device.c ****     /* Read 3 bytes into buffer (21-bit quantity) */
 967:Core/Src/deca_device.c **** 
 968:Core/Src/deca_device.c ****     dwt_readfromdevice(DRX_CONF_ID,DRX_CARRIER_INT_OFFSET,DRX_CARRIER_INT_LEN, buffer) ;
 969:Core/Src/deca_device.c **** 
 970:Core/Src/deca_device.c ****     for (j = 2 ; j >= 0 ; j --)  // arrange the three bytes into an unsigned integer value
 971:Core/Src/deca_device.c ****     {
 972:Core/Src/deca_device.c ****         regval = (regval << 8) + buffer[j] ;
 973:Core/Src/deca_device.c ****     }
 974:Core/Src/deca_device.c **** 
 975:Core/Src/deca_device.c ****     if (regval & B20_SIGN_EXTEND_TEST) regval |= B20_SIGN_EXTEND_MASK ; // sign extend bit #20 to w
 976:Core/Src/deca_device.c ****     else regval &= DRX_CARRIER_INT_MASK ;                               // make sure upper bits are
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 22


 977:Core/Src/deca_device.c **** 
 978:Core/Src/deca_device.c ****     return (int32) regval ; // cast unsigned value to signed quantity.
 979:Core/Src/deca_device.c **** }
 980:Core/Src/deca_device.c **** 
 981:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
 982:Core/Src/deca_device.c ****  * @fn dwt_readdiagnostics()
 983:Core/Src/deca_device.c ****  *
 984:Core/Src/deca_device.c ****  * @brief this function reads the RX signal quality diagnostic data
 985:Core/Src/deca_device.c ****  *
 986:Core/Src/deca_device.c ****  * input parameters
 987:Core/Src/deca_device.c ****  * @param diagnostics - diagnostic structure pointer, this will contain the diagnostic data read fr
 988:Core/Src/deca_device.c ****  *
 989:Core/Src/deca_device.c ****  * output parameters
 990:Core/Src/deca_device.c ****  *
 991:Core/Src/deca_device.c ****  * no return value
 992:Core/Src/deca_device.c ****  */
 993:Core/Src/deca_device.c **** void dwt_readdiagnostics(dwt_rxdiag_t *diagnostics)
 994:Core/Src/deca_device.c **** {
 995:Core/Src/deca_device.c ****     // Read the HW FP index
 996:Core/Src/deca_device.c ****     diagnostics->firstPath = dwt_read16bitoffsetreg(RX_TIME_ID, RX_TIME_FP_INDEX_OFFSET);
 997:Core/Src/deca_device.c **** 
 998:Core/Src/deca_device.c ****     // LDE diagnostic data
 999:Core/Src/deca_device.c ****     diagnostics->maxNoise = dwt_read16bitoffsetreg(LDE_IF_ID, LDE_THRESH_OFFSET);
1000:Core/Src/deca_device.c **** 
1001:Core/Src/deca_device.c ****     // Read all 8 bytes in one SPI transaction
1002:Core/Src/deca_device.c ****     dwt_readfromdevice(RX_FQUAL_ID, 0x0, 8, (uint8*)&diagnostics->stdNoise);
1003:Core/Src/deca_device.c **** 
1004:Core/Src/deca_device.c ****     diagnostics->firstPathAmp1 = dwt_read16bitoffsetreg(RX_TIME_ID, RX_TIME_FP_AMPL1_OFFSET);
1005:Core/Src/deca_device.c **** 
1006:Core/Src/deca_device.c ****     diagnostics->rxPreamCount = (dwt_read32bitreg(RX_FINFO_ID) & RX_FINFO_RXPACC_MASK) >> RX_FINFO_
1007:Core/Src/deca_device.c **** }
1008:Core/Src/deca_device.c **** 
1009:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1010:Core/Src/deca_device.c ****  * @fn dwt_readtxtimestamp()
1011:Core/Src/deca_device.c ****  *
1012:Core/Src/deca_device.c ****  * @brief This is used to read the TX timestamp (adjusted with the programmed antenna delay)
1013:Core/Src/deca_device.c ****  *
1014:Core/Src/deca_device.c ****  * input parameters
1015:Core/Src/deca_device.c ****  * @param timestamp - a pointer to a 5-byte buffer which will store the read TX timestamp time
1016:Core/Src/deca_device.c ****  *
1017:Core/Src/deca_device.c ****  * output parameters - the timestamp buffer will contain the value after the function call
1018:Core/Src/deca_device.c ****  *
1019:Core/Src/deca_device.c ****  * no return value
1020:Core/Src/deca_device.c ****  */
1021:Core/Src/deca_device.c **** void dwt_readtxtimestamp(uint8 * timestamp)
1022:Core/Src/deca_device.c **** {
1023:Core/Src/deca_device.c ****     dwt_readfromdevice(TX_TIME_ID, TX_TIME_TX_STAMP_OFFSET, TX_TIME_TX_STAMP_LEN, timestamp) ; // R
1024:Core/Src/deca_device.c **** }
1025:Core/Src/deca_device.c **** 
1026:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1027:Core/Src/deca_device.c ****  * @fn dwt_readtxtimestamphi32()
1028:Core/Src/deca_device.c ****  *
1029:Core/Src/deca_device.c ****  * @brief This is used to read the high 32-bits of the TX timestamp (adjusted with the programmed a
1030:Core/Src/deca_device.c ****  *
1031:Core/Src/deca_device.c ****  * input parameters
1032:Core/Src/deca_device.c ****  *
1033:Core/Src/deca_device.c ****  * output parameters
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 23


1034:Core/Src/deca_device.c ****  *
1035:Core/Src/deca_device.c ****  * returns high 32-bits of TX timestamp
1036:Core/Src/deca_device.c ****  */
1037:Core/Src/deca_device.c **** uint32 dwt_readtxtimestamphi32(void)
1038:Core/Src/deca_device.c **** {
1039:Core/Src/deca_device.c ****     return dwt_read32bitoffsetreg(TX_TIME_ID, 1); // Offset is 1 to get the 4 upper bytes out of 5
1040:Core/Src/deca_device.c **** }
1041:Core/Src/deca_device.c **** 
1042:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1043:Core/Src/deca_device.c ****  * @fn dwt_readtxtimestamplo32()
1044:Core/Src/deca_device.c ****  *
1045:Core/Src/deca_device.c ****  * @brief This is used to read the low 32-bits of the TX timestamp (adjusted with the programmed an
1046:Core/Src/deca_device.c ****  *
1047:Core/Src/deca_device.c ****  * input parameters
1048:Core/Src/deca_device.c ****  *
1049:Core/Src/deca_device.c ****  * output parameters
1050:Core/Src/deca_device.c ****  *
1051:Core/Src/deca_device.c ****  * returns low 32-bits of TX timestamp
1052:Core/Src/deca_device.c ****  */
1053:Core/Src/deca_device.c **** uint32 dwt_readtxtimestamplo32(void)
1054:Core/Src/deca_device.c **** {
1055:Core/Src/deca_device.c ****     return dwt_read32bitreg(TX_TIME_ID); // Read TX TIME as a 32-bit register to get the 4 lower by
1056:Core/Src/deca_device.c **** }
1057:Core/Src/deca_device.c **** 
1058:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1059:Core/Src/deca_device.c ****  * @fn dwt_readrxtimestamp()
1060:Core/Src/deca_device.c ****  *
1061:Core/Src/deca_device.c ****  * @brief This is used to read the RX timestamp (adjusted time of arrival)
1062:Core/Src/deca_device.c ****  *
1063:Core/Src/deca_device.c ****  * input parameters
1064:Core/Src/deca_device.c ****  * @param timestamp - a pointer to a 5-byte buffer which will store the read RX timestamp time
1065:Core/Src/deca_device.c ****  *
1066:Core/Src/deca_device.c ****  * output parameters - the timestamp buffer will contain the value after the function call
1067:Core/Src/deca_device.c ****  *
1068:Core/Src/deca_device.c ****  * no return value
1069:Core/Src/deca_device.c ****  */
1070:Core/Src/deca_device.c **** void dwt_readrxtimestamp(uint8 * timestamp)
1071:Core/Src/deca_device.c **** {
1072:Core/Src/deca_device.c ****     dwt_readfromdevice(RX_TIME_ID, RX_TIME_RX_STAMP_OFFSET, RX_TIME_RX_STAMP_LEN, timestamp) ; // G
1073:Core/Src/deca_device.c **** }
1074:Core/Src/deca_device.c **** 
1075:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1076:Core/Src/deca_device.c ****  * @fn dwt_readrxtimestamphi32()
1077:Core/Src/deca_device.c ****  *
1078:Core/Src/deca_device.c ****  * @brief This is used to read the high 32-bits of the RX timestamp (adjusted with the programmed a
1079:Core/Src/deca_device.c ****  *
1080:Core/Src/deca_device.c ****  * input parameters
1081:Core/Src/deca_device.c ****  *
1082:Core/Src/deca_device.c ****  * output parameters
1083:Core/Src/deca_device.c ****  *
1084:Core/Src/deca_device.c ****  * returns high 32-bits of RX timestamp
1085:Core/Src/deca_device.c ****  */
1086:Core/Src/deca_device.c **** uint32 dwt_readrxtimestamphi32(void)
1087:Core/Src/deca_device.c **** {
1088:Core/Src/deca_device.c ****     return dwt_read32bitoffsetreg(RX_TIME_ID, 1); // Offset is 1 to get the 4 upper bytes out of 5
1089:Core/Src/deca_device.c **** }
1090:Core/Src/deca_device.c **** 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 24


1091:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1092:Core/Src/deca_device.c ****  * @fn dwt_readrxtimestamplo32()
1093:Core/Src/deca_device.c ****  *
1094:Core/Src/deca_device.c ****  * @brief This is used to read the low 32-bits of the RX timestamp (adjusted with the programmed an
1095:Core/Src/deca_device.c ****  *
1096:Core/Src/deca_device.c ****  * input parameters
1097:Core/Src/deca_device.c ****  *
1098:Core/Src/deca_device.c ****  * output parameters
1099:Core/Src/deca_device.c ****  *
1100:Core/Src/deca_device.c ****  * returns low 32-bits of RX timestamp
1101:Core/Src/deca_device.c ****  */
1102:Core/Src/deca_device.c **** uint32 dwt_readrxtimestamplo32(void)
1103:Core/Src/deca_device.c **** {
1104:Core/Src/deca_device.c ****     return dwt_read32bitreg(RX_TIME_ID); // Read RX TIME as a 32-bit register to get the 4 lower by
1105:Core/Src/deca_device.c **** }
1106:Core/Src/deca_device.c **** 
1107:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1108:Core/Src/deca_device.c ****  * @fn dwt_readsystimestamphi32()
1109:Core/Src/deca_device.c ****  *
1110:Core/Src/deca_device.c ****  * @brief This is used to read the high 32-bits of the system time
1111:Core/Src/deca_device.c ****  *
1112:Core/Src/deca_device.c ****  * input parameters
1113:Core/Src/deca_device.c ****  *
1114:Core/Src/deca_device.c ****  * output parameters
1115:Core/Src/deca_device.c ****  *
1116:Core/Src/deca_device.c ****  * returns high 32-bits of system time timestamp
1117:Core/Src/deca_device.c ****  */
1118:Core/Src/deca_device.c **** uint32 dwt_readsystimestamphi32(void)
1119:Core/Src/deca_device.c **** {
1120:Core/Src/deca_device.c ****     return dwt_read32bitoffsetreg(SYS_TIME_ID, 1); // Offset is 1 to get the 4 upper bytes out of 5
1121:Core/Src/deca_device.c **** }
1122:Core/Src/deca_device.c **** 
1123:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1124:Core/Src/deca_device.c ****  * @fn dwt_readsystime()
1125:Core/Src/deca_device.c ****  *
1126:Core/Src/deca_device.c ****  * @brief This is used to read the system time
1127:Core/Src/deca_device.c ****  *
1128:Core/Src/deca_device.c ****  * input parameters
1129:Core/Src/deca_device.c ****  * @param timestamp - a pointer to a 5-byte buffer which will store the read system time
1130:Core/Src/deca_device.c ****  *
1131:Core/Src/deca_device.c ****  * output parameters
1132:Core/Src/deca_device.c ****  * @param timestamp - the timestamp buffer will contain the value after the function call
1133:Core/Src/deca_device.c ****  *
1134:Core/Src/deca_device.c ****  * no return value
1135:Core/Src/deca_device.c ****  */
1136:Core/Src/deca_device.c **** void dwt_readsystime(uint8 * timestamp)
1137:Core/Src/deca_device.c **** {
1138:Core/Src/deca_device.c ****     dwt_readfromdevice(SYS_TIME_ID, SYS_TIME_OFFSET, SYS_TIME_LEN, timestamp) ;
1139:Core/Src/deca_device.c **** }
1140:Core/Src/deca_device.c **** 
1141:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1142:Core/Src/deca_device.c ****  * @fn dwt_writetodevice()
1143:Core/Src/deca_device.c ****  *
1144:Core/Src/deca_device.c ****  * @brief  this function is used to write to the DW1000 device registers
1145:Core/Src/deca_device.c ****  * Notes:
1146:Core/Src/deca_device.c ****  *        1. Firstly we create a header (the first byte is a header byte)
1147:Core/Src/deca_device.c ****  *        a. check if sub index is used, if subindexing is used - set bit-6 to 1 to signify that th
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 25


1148:Core/Src/deca_device.c ****  *        b. set bit-7 (or with 0x80) for write operation
1149:Core/Src/deca_device.c ****  *        c. if extended sub address index is used (i.e. if index > 127) set bit-7 of the first sub
1150:Core/Src/deca_device.c ****  *
1151:Core/Src/deca_device.c ****  *        2. Write the header followed by the data bytes to the DW1000 device
1152:Core/Src/deca_device.c ****  *
1153:Core/Src/deca_device.c ****  *
1154:Core/Src/deca_device.c ****  * input parameters:
1155:Core/Src/deca_device.c ****  * @param recordNumber  - ID of register file or buffer being accessed
1156:Core/Src/deca_device.c ****  * @param index         - byte index into register file or buffer being accessed
1157:Core/Src/deca_device.c ****  * @param length        - number of bytes being written
1158:Core/Src/deca_device.c ****  * @param buffer        - pointer to buffer containing the 'length' bytes to be written
1159:Core/Src/deca_device.c ****  *
1160:Core/Src/deca_device.c ****  * output parameters
1161:Core/Src/deca_device.c ****  *
1162:Core/Src/deca_device.c ****  * no return value
1163:Core/Src/deca_device.c ****  */
1164:Core/Src/deca_device.c **** void dwt_writetodevice
1165:Core/Src/deca_device.c **** (
1166:Core/Src/deca_device.c ****     uint16  recordNumber,
1167:Core/Src/deca_device.c ****     uint16  index,
1168:Core/Src/deca_device.c ****     uint32        length,
1169:Core/Src/deca_device.c ****     const uint8   *buffer
1170:Core/Src/deca_device.c **** )
1171:Core/Src/deca_device.c **** {
 236              		.loc 1 1171 1 is_stmt 1 view -0
 237              		.cfi_startproc
 238              		@ args = 0, pretend = 0, frame = 8
 239              		@ frame_needed = 0, uses_anonymous_args = 0
 240              		.loc 1 1171 1 is_stmt 0 view .LVU34
 241 0000 00B5     		push	{lr}
 242              	.LCFI0:
 243              		.cfi_def_cfa_offset 4
 244              		.cfi_offset 14, -4
 245 0002 83B0     		sub	sp, sp, #12
 246              	.LCFI1:
 247              		.cfi_def_cfa_offset 16
1172:Core/Src/deca_device.c ****     uint8 header[3] ; // Buffer to compose header in
 248              		.loc 1 1172 5 is_stmt 1 view .LVU35
1173:Core/Src/deca_device.c ****     int   cnt = 0; // Counter for length of header
 249              		.loc 1 1173 5 view .LVU36
 250              	.LVL3:
1174:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
1175:Core/Src/deca_device.c ****     assert(recordNumber <= 0x3F); // Record number is limited to 6-bits.
1176:Core/Src/deca_device.c **** #endif
1177:Core/Src/deca_device.c **** 
1178:Core/Src/deca_device.c ****     // Write message header selecting WRITE operation and addresses as appropriate (this is one to 
1179:Core/Src/deca_device.c ****     if (index == 0) // For index of 0, no sub-index is required
 251              		.loc 1 1179 5 view .LVU37
 252              		.loc 1 1179 8 is_stmt 0 view .LVU38
 253 0004 51B9     		cbnz	r1, .L25
1180:Core/Src/deca_device.c ****     {
1181:Core/Src/deca_device.c ****         header[cnt++] = 0x80 | recordNumber ; // Bit-7 is WRITE operation, bit-6 zero=NO sub-addres
 254              		.loc 1 1181 9 is_stmt 1 view .LVU39
 255              	.LVL4:
 256              		.loc 1 1181 23 is_stmt 0 view .LVU40
 257 0006 60F07F00 		orn	r0, r0, #127
 258              	.LVL5:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 26


 259              		.loc 1 1181 23 view .LVU41
 260 000a 8DF80400 		strb	r0, [sp, #4]
 261              		.loc 1 1181 19 view .LVU42
 262 000e 0120     		movs	r0, #1
 263              	.LVL6:
 264              	.L26:
1182:Core/Src/deca_device.c ****     }
1183:Core/Src/deca_device.c ****     else
1184:Core/Src/deca_device.c ****     {
1185:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
1186:Core/Src/deca_device.c ****         assert((index <= 0x7FFF) && ((index + length) <= 0x7FFF)); // Index and sub-addressable are
1187:Core/Src/deca_device.c **** #endif
1188:Core/Src/deca_device.c ****         header[cnt++] = 0xC0 | recordNumber ; // Bit-7 is WRITE operation, bit-6 one=sub-address fo
1189:Core/Src/deca_device.c **** 
1190:Core/Src/deca_device.c ****         if (index <= 127) // For non-zero index < 127, just a single sub-index byte is required
1191:Core/Src/deca_device.c ****         {
1192:Core/Src/deca_device.c ****             header[cnt++] = (uint8)index ; // Bit-7 zero means no extension, bits 6-0 is index.
1193:Core/Src/deca_device.c ****         }
1194:Core/Src/deca_device.c ****         else
1195:Core/Src/deca_device.c ****         {
1196:Core/Src/deca_device.c ****             header[cnt++] = 0x80 | (uint8)(index) ; // Bit-7 one means extended index, bits 6-0 is 
1197:Core/Src/deca_device.c ****             header[cnt++] =  (uint8) (index >> 7) ; // 8-bit value = high eight bits of index.
1198:Core/Src/deca_device.c ****         }
1199:Core/Src/deca_device.c ****     }
1200:Core/Src/deca_device.c **** 
1201:Core/Src/deca_device.c ****     // Write it to the SPI
1202:Core/Src/deca_device.c ****     writetospi(cnt,header,length,buffer);
 265              		.loc 1 1202 5 is_stmt 1 view .LVU43
 266 0010 01A9     		add	r1, sp, #4
 267 0012 FFF7FEFF 		bl	writetospi
 268              	.LVL7:
1203:Core/Src/deca_device.c **** } // end dwt_writetodevice()
 269              		.loc 1 1203 1 is_stmt 0 view .LVU44
 270 0016 03B0     		add	sp, sp, #12
 271              	.LCFI2:
 272              		.cfi_remember_state
 273              		.cfi_def_cfa_offset 4
 274              		@ sp needed
 275 0018 5DF804FB 		ldr	pc, [sp], #4
 276              	.LVL8:
 277              	.L25:
 278              	.LCFI3:
 279              		.cfi_restore_state
 280              		.loc 1 1203 1 view .LVU45
 281 001c 8C46     		mov	ip, r1
1188:Core/Src/deca_device.c **** 
 282              		.loc 1 1188 9 is_stmt 1 view .LVU46
 283              	.LVL9:
1188:Core/Src/deca_device.c **** 
 284              		.loc 1 1188 23 is_stmt 0 view .LVU47
 285 001e 60F03F00 		orn	r0, r0, #63
 286              	.LVL10:
1188:Core/Src/deca_device.c **** 
 287              		.loc 1 1188 23 view .LVU48
 288 0022 8DF80400 		strb	r0, [sp, #4]
1190:Core/Src/deca_device.c ****         {
 289              		.loc 1 1190 9 is_stmt 1 view .LVU49
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 27


1190:Core/Src/deca_device.c ****         {
 290              		.loc 1 1190 12 is_stmt 0 view .LVU50
 291 0026 7F29     		cmp	r1, #127
 292 0028 03D8     		bhi	.L27
1192:Core/Src/deca_device.c ****         }
 293              		.loc 1 1192 13 is_stmt 1 view .LVU51
 294              	.LVL11:
1192:Core/Src/deca_device.c ****         }
 295              		.loc 1 1192 27 is_stmt 0 view .LVU52
 296 002a 8DF80510 		strb	r1, [sp, #5]
1192:Core/Src/deca_device.c ****         }
 297              		.loc 1 1192 23 view .LVU53
 298 002e 0220     		movs	r0, #2
 299 0030 EEE7     		b	.L26
 300              	.LVL12:
 301              	.L27:
1196:Core/Src/deca_device.c ****             header[cnt++] =  (uint8) (index >> 7) ; // 8-bit value = high eight bits of index.
 302              		.loc 1 1196 13 is_stmt 1 view .LVU54
1196:Core/Src/deca_device.c ****             header[cnt++] =  (uint8) (index >> 7) ; // 8-bit value = high eight bits of index.
 303              		.loc 1 1196 27 is_stmt 0 view .LVU55
 304 0032 61F07F01 		orn	r1, r1, #127
 305              	.LVL13:
1196:Core/Src/deca_device.c ****             header[cnt++] =  (uint8) (index >> 7) ; // 8-bit value = high eight bits of index.
 306              		.loc 1 1196 27 view .LVU56
 307 0036 8DF80510 		strb	r1, [sp, #5]
1197:Core/Src/deca_device.c ****         }
 308              		.loc 1 1197 13 is_stmt 1 view .LVU57
 309              	.LVL14:
1197:Core/Src/deca_device.c ****         }
 310              		.loc 1 1197 30 is_stmt 0 view .LVU58
 311 003a CCF3C71C 		ubfx	ip, ip, #7, #8
1197:Core/Src/deca_device.c ****         }
 312              		.loc 1 1197 27 view .LVU59
 313 003e 8DF806C0 		strb	ip, [sp, #6]
1197:Core/Src/deca_device.c ****         }
 314              		.loc 1 1197 23 view .LVU60
 315 0042 0320     		movs	r0, #3
 316 0044 E4E7     		b	.L26
 317              		.cfi_endproc
 318              	.LFE34:
 320              		.section	.text.dwt_setgpiodirection,"ax",%progbits
 321              		.align	1
 322              		.global	dwt_setgpiodirection
 323              		.syntax unified
 324              		.thumb
 325              		.thumb_func
 327              	dwt_setgpiodirection:
 328              	.LVL15:
 329              	.LFB7:
 433:Core/Src/deca_device.c ****     uint8 buf[GPIO_DIR_LEN];
 330              		.loc 1 433 1 is_stmt 1 view -0
 331              		.cfi_startproc
 332              		@ args = 0, pretend = 0, frame = 8
 333              		@ frame_needed = 0, uses_anonymous_args = 0
 433:Core/Src/deca_device.c ****     uint8 buf[GPIO_DIR_LEN];
 334              		.loc 1 433 1 is_stmt 0 view .LVU62
 335 0000 00B5     		push	{lr}
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 28


 336              	.LCFI4:
 337              		.cfi_def_cfa_offset 4
 338              		.cfi_offset 14, -4
 339 0002 83B0     		sub	sp, sp, #12
 340              	.LCFI5:
 341              		.cfi_def_cfa_offset 16
 434:Core/Src/deca_device.c ****     uint32 command = direction | gpioNum;
 342              		.loc 1 434 5 is_stmt 1 view .LVU63
 435:Core/Src/deca_device.c **** 
 343              		.loc 1 435 5 view .LVU64
 435:Core/Src/deca_device.c **** 
 344              		.loc 1 435 12 is_stmt 0 view .LVU65
 345 0004 0143     		orrs	r1, r1, r0
 346              	.LVL16:
 437:Core/Src/deca_device.c ****     buf[1] = (command >> 8) & 0xff;
 347              		.loc 1 437 5 is_stmt 1 view .LVU66
 437:Core/Src/deca_device.c ****     buf[1] = (command >> 8) & 0xff;
 348              		.loc 1 437 12 is_stmt 0 view .LVU67
 349 0006 8DF80410 		strb	r1, [sp, #4]
 438:Core/Src/deca_device.c ****     buf[2] = (command >> 16) & 0xff;
 350              		.loc 1 438 5 is_stmt 1 view .LVU68
 438:Core/Src/deca_device.c ****     buf[2] = (command >> 16) & 0xff;
 351              		.loc 1 438 23 is_stmt 0 view .LVU69
 352 000a 0B0A     		lsrs	r3, r1, #8
 438:Core/Src/deca_device.c ****     buf[2] = (command >> 16) & 0xff;
 353              		.loc 1 438 12 view .LVU70
 354 000c 8DF80530 		strb	r3, [sp, #5]
 439:Core/Src/deca_device.c **** 
 355              		.loc 1 439 5 is_stmt 1 view .LVU71
 439:Core/Src/deca_device.c **** 
 356              		.loc 1 439 23 is_stmt 0 view .LVU72
 357 0010 090C     		lsrs	r1, r1, #16
 358              	.LVL17:
 439:Core/Src/deca_device.c **** 
 359              		.loc 1 439 12 view .LVU73
 360 0012 8DF80610 		strb	r1, [sp, #6]
 441:Core/Src/deca_device.c **** }
 361              		.loc 1 441 5 is_stmt 1 view .LVU74
 362 0016 01AB     		add	r3, sp, #4
 363 0018 0322     		movs	r2, #3
 364 001a 0821     		movs	r1, #8
 365 001c 2620     		movs	r0, #38
 366              	.LVL18:
 441:Core/Src/deca_device.c **** }
 367              		.loc 1 441 5 is_stmt 0 view .LVU75
 368 001e FFF7FEFF 		bl	dwt_writetodevice
 369              	.LVL19:
 442:Core/Src/deca_device.c **** 
 370              		.loc 1 442 1 view .LVU76
 371 0022 03B0     		add	sp, sp, #12
 372              	.LCFI6:
 373              		.cfi_def_cfa_offset 4
 374              		@ sp needed
 375 0024 5DF804FB 		ldr	pc, [sp], #4
 376              		.cfi_endproc
 377              	.LFE7:
 379              		.section	.text.dwt_setgpiovalue,"ax",%progbits
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 29


 380              		.align	1
 381              		.global	dwt_setgpiovalue
 382              		.syntax unified
 383              		.thumb
 384              		.thumb_func
 386              	dwt_setgpiovalue:
 387              	.LVL20:
 388              	.LFB8:
 458:Core/Src/deca_device.c ****     uint8 buf[GPIO_DOUT_LEN];
 389              		.loc 1 458 1 is_stmt 1 view -0
 390              		.cfi_startproc
 391              		@ args = 0, pretend = 0, frame = 8
 392              		@ frame_needed = 0, uses_anonymous_args = 0
 458:Core/Src/deca_device.c ****     uint8 buf[GPIO_DOUT_LEN];
 393              		.loc 1 458 1 is_stmt 0 view .LVU78
 394 0000 00B5     		push	{lr}
 395              	.LCFI7:
 396              		.cfi_def_cfa_offset 4
 397              		.cfi_offset 14, -4
 398 0002 83B0     		sub	sp, sp, #12
 399              	.LCFI8:
 400              		.cfi_def_cfa_offset 16
 459:Core/Src/deca_device.c ****     uint32 command = value | gpioNum;
 401              		.loc 1 459 5 is_stmt 1 view .LVU79
 460:Core/Src/deca_device.c **** 
 402              		.loc 1 460 5 view .LVU80
 460:Core/Src/deca_device.c **** 
 403              		.loc 1 460 12 is_stmt 0 view .LVU81
 404 0004 0143     		orrs	r1, r1, r0
 405              	.LVL21:
 462:Core/Src/deca_device.c ****     buf[1] = (command >> 8) & 0xff;
 406              		.loc 1 462 5 is_stmt 1 view .LVU82
 462:Core/Src/deca_device.c ****     buf[1] = (command >> 8) & 0xff;
 407              		.loc 1 462 12 is_stmt 0 view .LVU83
 408 0006 8DF80410 		strb	r1, [sp, #4]
 463:Core/Src/deca_device.c ****     buf[2] = (command >> 16) & 0xff;
 409              		.loc 1 463 5 is_stmt 1 view .LVU84
 463:Core/Src/deca_device.c ****     buf[2] = (command >> 16) & 0xff;
 410              		.loc 1 463 23 is_stmt 0 view .LVU85
 411 000a 0B0A     		lsrs	r3, r1, #8
 463:Core/Src/deca_device.c ****     buf[2] = (command >> 16) & 0xff;
 412              		.loc 1 463 12 view .LVU86
 413 000c 8DF80530 		strb	r3, [sp, #5]
 464:Core/Src/deca_device.c **** 
 414              		.loc 1 464 5 is_stmt 1 view .LVU87
 464:Core/Src/deca_device.c **** 
 415              		.loc 1 464 23 is_stmt 0 view .LVU88
 416 0010 090C     		lsrs	r1, r1, #16
 417              	.LVL22:
 464:Core/Src/deca_device.c **** 
 418              		.loc 1 464 12 view .LVU89
 419 0012 8DF80610 		strb	r1, [sp, #6]
 466:Core/Src/deca_device.c **** }
 420              		.loc 1 466 5 is_stmt 1 view .LVU90
 421 0016 01AB     		add	r3, sp, #4
 422 0018 0322     		movs	r2, #3
 423 001a 0C21     		movs	r1, #12
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 30


 424 001c 2620     		movs	r0, #38
 425              	.LVL23:
 466:Core/Src/deca_device.c **** }
 426              		.loc 1 466 5 is_stmt 0 view .LVU91
 427 001e FFF7FEFF 		bl	dwt_writetodevice
 428              	.LVL24:
 467:Core/Src/deca_device.c **** 
 429              		.loc 1 467 1 view .LVU92
 430 0022 03B0     		add	sp, sp, #12
 431              	.LCFI9:
 432              		.cfi_def_cfa_offset 4
 433              		@ sp needed
 434 0024 5DF804FB 		ldr	pc, [sp], #4
 435              		.cfi_endproc
 436              	.LFE8:
 438              		.section	.text.dwt_writetxdata,"ax",%progbits
 439              		.align	1
 440              		.global	dwt_writetxdata
 441              		.syntax unified
 442              		.thumb
 443              		.thumb_func
 445              	dwt_writetxdata:
 446              	.LVL25:
 447              	.LFB20:
 845:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 448              		.loc 1 845 1 is_stmt 1 view -0
 449              		.cfi_startproc
 450              		@ args = 0, pretend = 0, frame = 0
 451              		@ frame_needed = 0, uses_anonymous_args = 0
 845:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
 452              		.loc 1 845 1 is_stmt 0 view .LVU94
 453 0000 08B5     		push	{r3, lr}
 454              	.LCFI10:
 455              		.cfi_def_cfa_offset 8
 456              		.cfi_offset 3, -8
 457              		.cfi_offset 14, -4
 458 0002 0B46     		mov	r3, r1
 459 0004 1146     		mov	r1, r2
 460              	.LVL26:
 852:Core/Src/deca_device.c ****     {
 461              		.loc 1 852 5 is_stmt 1 view .LVU95
 852:Core/Src/deca_device.c ****     {
 462              		.loc 1 852 25 is_stmt 0 view .LVU96
 463 0006 0244     		add	r2, r2, r0
 464              	.LVL27:
 852:Core/Src/deca_device.c ****     {
 465              		.loc 1 852 8 view .LVU97
 466 0008 B2F5806F 		cmp	r2, #1024
 467 000c 05DC     		bgt	.L35
 855:Core/Src/deca_device.c ****         return DWT_SUCCESS;
 468              		.loc 1 855 9 is_stmt 1 view .LVU98
 469 000e 821E     		subs	r2, r0, #2
 470 0010 0920     		movs	r0, #9
 471              	.LVL28:
 855:Core/Src/deca_device.c ****         return DWT_SUCCESS;
 472              		.loc 1 855 9 is_stmt 0 view .LVU99
 473 0012 FFF7FEFF 		bl	dwt_writetodevice
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 31


 474              	.LVL29:
 856:Core/Src/deca_device.c ****     }
 475              		.loc 1 856 9 is_stmt 1 view .LVU100
 856:Core/Src/deca_device.c ****     }
 476              		.loc 1 856 16 is_stmt 0 view .LVU101
 477 0016 0020     		movs	r0, #0
 478              	.L33:
 862:Core/Src/deca_device.c **** 
 479              		.loc 1 862 1 view .LVU102
 480 0018 08BD     		pop	{r3, pc}
 481              	.LVL30:
 482              	.L35:
 860:Core/Src/deca_device.c ****     }
 483              		.loc 1 860 16 view .LVU103
 484 001a 4FF0FF30 		mov	r0, #-1
 485              	.LVL31:
 860:Core/Src/deca_device.c ****     }
 486              		.loc 1 860 16 view .LVU104
 487 001e FBE7     		b	.L33
 488              		.cfi_endproc
 489              	.LFE20:
 491              		.section	.text.dwt_readfromdevice,"ax",%progbits
 492              		.align	1
 493              		.global	dwt_readfromdevice
 494              		.syntax unified
 495              		.thumb
 496              		.thumb_func
 498              	dwt_readfromdevice:
 499              	.LVL32:
 500              	.LFB35:
1204:Core/Src/deca_device.c **** 
1205:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1206:Core/Src/deca_device.c ****  * @fn dwt_readfromdevice()
1207:Core/Src/deca_device.c ****  *
1208:Core/Src/deca_device.c ****  * @brief  this function is used to read from the DW1000 device registers
1209:Core/Src/deca_device.c ****  * Notes:
1210:Core/Src/deca_device.c ****  *        1. Firstly we create a header (the first byte is a header byte)
1211:Core/Src/deca_device.c ****  *        a. check if sub index is used, if subindexing is used - set bit-6 to 1 to signify that th
1212:Core/Src/deca_device.c ****  *        b. set bit-7 (or with 0x80) for write operation
1213:Core/Src/deca_device.c ****  *        c. if extended sub address index is used (i.e. if index > 127) set bit-7 of the first sub
1214:Core/Src/deca_device.c ****  *
1215:Core/Src/deca_device.c ****  *        2. Write the header followed by the data bytes to the DW1000 device
1216:Core/Src/deca_device.c ****  *        3. Store the read data in the input buffer
1217:Core/Src/deca_device.c ****  *
1218:Core/Src/deca_device.c ****  * input parameters:
1219:Core/Src/deca_device.c ****  * @param recordNumber  - ID of register file or buffer being accessed
1220:Core/Src/deca_device.c ****  * @param index         - byte index into register file or buffer being accessed
1221:Core/Src/deca_device.c ****  * @param length        - number of bytes being read
1222:Core/Src/deca_device.c ****  * @param buffer        - pointer to buffer in which to return the read data.
1223:Core/Src/deca_device.c ****  *
1224:Core/Src/deca_device.c ****  * output parameters
1225:Core/Src/deca_device.c ****  *
1226:Core/Src/deca_device.c ****  * no return value
1227:Core/Src/deca_device.c ****  */
1228:Core/Src/deca_device.c **** void dwt_readfromdevice
1229:Core/Src/deca_device.c **** (
1230:Core/Src/deca_device.c ****     uint16  recordNumber,
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 32


1231:Core/Src/deca_device.c ****     uint16  index,
1232:Core/Src/deca_device.c ****     uint32        length,
1233:Core/Src/deca_device.c ****     uint8         *buffer
1234:Core/Src/deca_device.c **** )
1235:Core/Src/deca_device.c **** {
 501              		.loc 1 1235 1 is_stmt 1 view -0
 502              		.cfi_startproc
 503              		@ args = 0, pretend = 0, frame = 8
 504              		@ frame_needed = 0, uses_anonymous_args = 0
 505              		.loc 1 1235 1 is_stmt 0 view .LVU106
 506 0000 00B5     		push	{lr}
 507              	.LCFI11:
 508              		.cfi_def_cfa_offset 4
 509              		.cfi_offset 14, -4
 510 0002 83B0     		sub	sp, sp, #12
 511              	.LCFI12:
 512              		.cfi_def_cfa_offset 16
1236:Core/Src/deca_device.c ****     uint8 header[3] ; // Buffer to compose header in
 513              		.loc 1 1236 5 is_stmt 1 view .LVU107
1237:Core/Src/deca_device.c ****     int   cnt = 0; // Counter for length of header
 514              		.loc 1 1237 5 view .LVU108
 515              	.LVL33:
1238:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
1239:Core/Src/deca_device.c ****     assert(recordNumber <= 0x3F); // Record number is limited to 6-bits.
1240:Core/Src/deca_device.c **** #endif
1241:Core/Src/deca_device.c **** 
1242:Core/Src/deca_device.c ****     // Write message header selecting READ operation and addresses as appropriate (this is one to t
1243:Core/Src/deca_device.c ****     if (index == 0) // For index of 0, no sub-index is required
 516              		.loc 1 1243 5 view .LVU109
 517              		.loc 1 1243 8 is_stmt 0 view .LVU110
 518 0004 41B9     		cbnz	r1, .L38
1244:Core/Src/deca_device.c ****     {
1245:Core/Src/deca_device.c ****         header[cnt++] = (uint8) recordNumber ; // Bit-7 zero is READ operation, bit-6 zero=NO sub-a
 519              		.loc 1 1245 9 is_stmt 1 view .LVU111
 520              	.LVL34:
 521              		.loc 1 1245 23 is_stmt 0 view .LVU112
 522 0006 8DF80400 		strb	r0, [sp, #4]
 523              		.loc 1 1245 19 view .LVU113
 524 000a 0120     		movs	r0, #1
 525              	.LVL35:
 526              	.L39:
1246:Core/Src/deca_device.c ****     }
1247:Core/Src/deca_device.c ****     else
1248:Core/Src/deca_device.c ****     {
1249:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
1250:Core/Src/deca_device.c ****         assert((index <= 0x7FFF) && ((index + length) <= 0x7FFF)); // Index and sub-addressable are
1251:Core/Src/deca_device.c **** #endif
1252:Core/Src/deca_device.c ****         header[cnt++] = (uint8)(0x40 | recordNumber) ; // Bit-7 zero is READ operation, bit-6 one=s
1253:Core/Src/deca_device.c **** 
1254:Core/Src/deca_device.c ****         if (index <= 127) // For non-zero index < 127, just a single sub-index byte is required
1255:Core/Src/deca_device.c ****         {
1256:Core/Src/deca_device.c ****             header[cnt++] = (uint8) index ; // Bit-7 zero means no extension, bits 6-0 is index.
1257:Core/Src/deca_device.c ****         }
1258:Core/Src/deca_device.c ****         else
1259:Core/Src/deca_device.c ****         {
1260:Core/Src/deca_device.c ****             header[cnt++] = 0x80 | (uint8)(index) ; // Bit-7 one means extended index, bits 6-0 is 
1261:Core/Src/deca_device.c ****             header[cnt++] =  (uint8) (index >> 7) ; // 8-bit value = high eight bits of index.
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 33


1262:Core/Src/deca_device.c ****         }
1263:Core/Src/deca_device.c ****     }
1264:Core/Src/deca_device.c **** 
1265:Core/Src/deca_device.c ****     // Do the read from the SPI
1266:Core/Src/deca_device.c ****     readfromspi(cnt, header, length, buffer);  // result is stored in the buffer
 527              		.loc 1 1266 5 is_stmt 1 view .LVU114
 528 000c 01A9     		add	r1, sp, #4
 529 000e FFF7FEFF 		bl	readfromspi
 530              	.LVL36:
1267:Core/Src/deca_device.c **** } // end dwt_readfromdevice()
 531              		.loc 1 1267 1 is_stmt 0 view .LVU115
 532 0012 03B0     		add	sp, sp, #12
 533              	.LCFI13:
 534              		.cfi_remember_state
 535              		.cfi_def_cfa_offset 4
 536              		@ sp needed
 537 0014 5DF804FB 		ldr	pc, [sp], #4
 538              	.LVL37:
 539              	.L38:
 540              	.LCFI14:
 541              		.cfi_restore_state
 542              		.loc 1 1267 1 view .LVU116
 543 0018 8C46     		mov	ip, r1
1252:Core/Src/deca_device.c **** 
 544              		.loc 1 1252 9 is_stmt 1 view .LVU117
 545              	.LVL38:
1252:Core/Src/deca_device.c **** 
 546              		.loc 1 1252 25 is_stmt 0 view .LVU118
 547 001a 40F04000 		orr	r0, r0, #64
 548              	.LVL39:
1252:Core/Src/deca_device.c **** 
 549              		.loc 1 1252 23 view .LVU119
 550 001e 8DF80400 		strb	r0, [sp, #4]
1254:Core/Src/deca_device.c ****         {
 551              		.loc 1 1254 9 is_stmt 1 view .LVU120
1254:Core/Src/deca_device.c ****         {
 552              		.loc 1 1254 12 is_stmt 0 view .LVU121
 553 0022 7F29     		cmp	r1, #127
 554 0024 03D8     		bhi	.L40
1256:Core/Src/deca_device.c ****         }
 555              		.loc 1 1256 13 is_stmt 1 view .LVU122
 556              	.LVL40:
1256:Core/Src/deca_device.c ****         }
 557              		.loc 1 1256 27 is_stmt 0 view .LVU123
 558 0026 8DF80510 		strb	r1, [sp, #5]
1256:Core/Src/deca_device.c ****         }
 559              		.loc 1 1256 23 view .LVU124
 560 002a 0220     		movs	r0, #2
 561 002c EEE7     		b	.L39
 562              	.LVL41:
 563              	.L40:
1260:Core/Src/deca_device.c ****             header[cnt++] =  (uint8) (index >> 7) ; // 8-bit value = high eight bits of index.
 564              		.loc 1 1260 13 is_stmt 1 view .LVU125
1260:Core/Src/deca_device.c ****             header[cnt++] =  (uint8) (index >> 7) ; // 8-bit value = high eight bits of index.
 565              		.loc 1 1260 27 is_stmt 0 view .LVU126
 566 002e 61F07F01 		orn	r1, r1, #127
 567              	.LVL42:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 34


1260:Core/Src/deca_device.c ****             header[cnt++] =  (uint8) (index >> 7) ; // 8-bit value = high eight bits of index.
 568              		.loc 1 1260 27 view .LVU127
 569 0032 8DF80510 		strb	r1, [sp, #5]
1261:Core/Src/deca_device.c ****         }
 570              		.loc 1 1261 13 is_stmt 1 view .LVU128
 571              	.LVL43:
1261:Core/Src/deca_device.c ****         }
 572              		.loc 1 1261 30 is_stmt 0 view .LVU129
 573 0036 CCF3C71C 		ubfx	ip, ip, #7, #8
1261:Core/Src/deca_device.c ****         }
 574              		.loc 1 1261 27 view .LVU130
 575 003a 8DF806C0 		strb	ip, [sp, #6]
1261:Core/Src/deca_device.c ****         }
 576              		.loc 1 1261 23 view .LVU131
 577 003e 0320     		movs	r0, #3
 578 0040 E4E7     		b	.L39
 579              		.cfi_endproc
 580              	.LFE35:
 582              		.section	.text.dwt_readrxdata,"ax",%progbits
 583              		.align	1
 584              		.global	dwt_readrxdata
 585              		.syntax unified
 586              		.thumb
 587              		.thumb_func
 589              	dwt_readrxdata:
 590              	.LVL44:
 591              	.LFB22:
 912:Core/Src/deca_device.c ****     dwt_readfromdevice(RX_BUFFER_ID,rxBufferOffset,length,buffer) ;
 592              		.loc 1 912 1 is_stmt 1 view -0
 593              		.cfi_startproc
 594              		@ args = 0, pretend = 0, frame = 0
 595              		@ frame_needed = 0, uses_anonymous_args = 0
 912:Core/Src/deca_device.c ****     dwt_readfromdevice(RX_BUFFER_ID,rxBufferOffset,length,buffer) ;
 596              		.loc 1 912 1 is_stmt 0 view .LVU133
 597 0000 08B5     		push	{r3, lr}
 598              	.LCFI15:
 599              		.cfi_def_cfa_offset 8
 600              		.cfi_offset 3, -8
 601              		.cfi_offset 14, -4
 602 0002 0346     		mov	r3, r0
 603 0004 8C46     		mov	ip, r1
 604 0006 1146     		mov	r1, r2
 605              	.LVL45:
 913:Core/Src/deca_device.c **** }
 606              		.loc 1 913 5 is_stmt 1 view .LVU134
 607 0008 6246     		mov	r2, ip
 608              	.LVL46:
 913:Core/Src/deca_device.c **** }
 609              		.loc 1 913 5 is_stmt 0 view .LVU135
 610 000a 1120     		movs	r0, #17
 611              	.LVL47:
 913:Core/Src/deca_device.c **** }
 612              		.loc 1 913 5 view .LVU136
 613 000c FFF7FEFF 		bl	dwt_readfromdevice
 614              	.LVL48:
 914:Core/Src/deca_device.c **** 
 615              		.loc 1 914 1 view .LVU137
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 35


 616 0010 08BD     		pop	{r3, pc}
 617              		.cfi_endproc
 618              	.LFE22:
 620              		.section	.text.dwt_readcarrierintegrator,"ax",%progbits
 621              		.align	1
 622              		.global	dwt_readcarrierintegrator
 623              		.syntax unified
 624              		.thumb
 625              		.thumb_func
 627              	dwt_readcarrierintegrator:
 628              	.LFB24:
 961:Core/Src/deca_device.c ****     uint32  regval = 0 ;
 629              		.loc 1 961 1 is_stmt 1 view -0
 630              		.cfi_startproc
 631              		@ args = 0, pretend = 0, frame = 8
 632              		@ frame_needed = 0, uses_anonymous_args = 0
 633 0000 00B5     		push	{lr}
 634              	.LCFI16:
 635              		.cfi_def_cfa_offset 4
 636              		.cfi_offset 14, -4
 637 0002 83B0     		sub	sp, sp, #12
 638              	.LCFI17:
 639              		.cfi_def_cfa_offset 16
 962:Core/Src/deca_device.c ****     int     j ;
 640              		.loc 1 962 5 view .LVU139
 641              	.LVL49:
 963:Core/Src/deca_device.c ****     uint8   buffer[DRX_CARRIER_INT_LEN] ;
 642              		.loc 1 963 5 view .LVU140
 964:Core/Src/deca_device.c **** 
 643              		.loc 1 964 5 view .LVU141
 968:Core/Src/deca_device.c **** 
 644              		.loc 1 968 5 view .LVU142
 645 0004 01AB     		add	r3, sp, #4
 646 0006 0322     		movs	r2, #3
 647 0008 2821     		movs	r1, #40
 648 000a 2720     		movs	r0, #39
 649 000c FFF7FEFF 		bl	dwt_readfromdevice
 650              	.LVL50:
 970:Core/Src/deca_device.c ****     {
 651              		.loc 1 970 5 view .LVU143
 970:Core/Src/deca_device.c ****     {
 652              		.loc 1 970 12 is_stmt 0 view .LVU144
 653 0010 0223     		movs	r3, #2
 962:Core/Src/deca_device.c ****     int     j ;
 654              		.loc 1 962 13 view .LVU145
 655 0012 0020     		movs	r0, #0
 970:Core/Src/deca_device.c ****     {
 656              		.loc 1 970 5 view .LVU146
 657 0014 07E0     		b	.L45
 658              	.LVL51:
 659              	.L46:
 972:Core/Src/deca_device.c ****     }
 660              		.loc 1 972 9 is_stmt 1 discriminator 3 view .LVU147
 972:Core/Src/deca_device.c ****     }
 661              		.loc 1 972 40 is_stmt 0 discriminator 3 view .LVU148
 662 0016 03F10802 		add	r2, r3, #8
 663 001a 6A44     		add	r2, sp, r2
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 36


 664 001c 12F8042C 		ldrb	r2, [r2, #-4]	@ zero_extendqisi2
 972:Core/Src/deca_device.c ****     }
 665              		.loc 1 972 16 discriminator 3 view .LVU149
 666 0020 02EB0020 		add	r0, r2, r0, lsl #8
 667              	.LVL52:
 970:Core/Src/deca_device.c ****     {
 668              		.loc 1 970 27 is_stmt 1 discriminator 3 view .LVU150
 970:Core/Src/deca_device.c ****     {
 669              		.loc 1 970 29 is_stmt 0 discriminator 3 view .LVU151
 670 0024 013B     		subs	r3, r3, #1
 671              	.LVL53:
 672              	.L45:
 970:Core/Src/deca_device.c ****     {
 673              		.loc 1 970 18 is_stmt 1 discriminator 1 view .LVU152
 970:Core/Src/deca_device.c ****     {
 674              		.loc 1 970 5 is_stmt 0 discriminator 1 view .LVU153
 675 0026 002B     		cmp	r3, #0
 676 0028 F5DA     		bge	.L46
 975:Core/Src/deca_device.c ****     else regval &= DRX_CARRIER_INT_MASK ;                               // make sure upper bits are
 677              		.loc 1 975 5 is_stmt 1 view .LVU154
 975:Core/Src/deca_device.c ****     else regval &= DRX_CARRIER_INT_MASK ;                               // make sure upper bits are
 678              		.loc 1 975 8 is_stmt 0 view .LVU155
 679 002a 10F4801F 		tst	r0, #1048576
 680 002e 06D0     		beq	.L47
 975:Core/Src/deca_device.c ****     else regval &= DRX_CARRIER_INT_MASK ;                               // make sure upper bits are
 681              		.loc 1 975 40 is_stmt 1 discriminator 1 view .LVU156
 975:Core/Src/deca_device.c ****     else regval &= DRX_CARRIER_INT_MASK ;                               // make sure upper bits are
 682              		.loc 1 975 47 is_stmt 0 discriminator 1 view .LVU157
 683 0030 6FEA0030 		mvn	r0, r0, lsl #12
 684              	.LVL54:
 975:Core/Src/deca_device.c ****     else regval &= DRX_CARRIER_INT_MASK ;                               // make sure upper bits are
 685              		.loc 1 975 47 discriminator 1 view .LVU158
 686 0034 6FEA1030 		mvn	r0, r0, lsr #12
 687              	.LVL55:
 688              	.L48:
 978:Core/Src/deca_device.c **** }
 689              		.loc 1 978 5 is_stmt 1 view .LVU159
 979:Core/Src/deca_device.c **** 
 690              		.loc 1 979 1 is_stmt 0 view .LVU160
 691 0038 03B0     		add	sp, sp, #12
 692              	.LCFI18:
 693              		.cfi_remember_state
 694              		.cfi_def_cfa_offset 4
 695              		@ sp needed
 696 003a 5DF804FB 		ldr	pc, [sp], #4
 697              	.L47:
 698              	.LCFI19:
 699              		.cfi_restore_state
 976:Core/Src/deca_device.c **** 
 700              		.loc 1 976 10 is_stmt 1 view .LVU161
 976:Core/Src/deca_device.c **** 
 701              		.loc 1 976 17 is_stmt 0 view .LVU162
 702 003e C0F31400 		ubfx	r0, r0, #0, #21
 703              	.LVL56:
 976:Core/Src/deca_device.c **** 
 704              		.loc 1 976 17 view .LVU163
 705 0042 F9E7     		b	.L48
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 37


 706              		.cfi_endproc
 707              	.LFE24:
 709              		.section	.text.dwt_readtxtimestamp,"ax",%progbits
 710              		.align	1
 711              		.global	dwt_readtxtimestamp
 712              		.syntax unified
 713              		.thumb
 714              		.thumb_func
 716              	dwt_readtxtimestamp:
 717              	.LVL57:
 718              	.LFB26:
1022:Core/Src/deca_device.c ****     dwt_readfromdevice(TX_TIME_ID, TX_TIME_TX_STAMP_OFFSET, TX_TIME_TX_STAMP_LEN, timestamp) ; // R
 719              		.loc 1 1022 1 is_stmt 1 view -0
 720              		.cfi_startproc
 721              		@ args = 0, pretend = 0, frame = 0
 722              		@ frame_needed = 0, uses_anonymous_args = 0
1022:Core/Src/deca_device.c ****     dwt_readfromdevice(TX_TIME_ID, TX_TIME_TX_STAMP_OFFSET, TX_TIME_TX_STAMP_LEN, timestamp) ; // R
 723              		.loc 1 1022 1 is_stmt 0 view .LVU165
 724 0000 08B5     		push	{r3, lr}
 725              	.LCFI20:
 726              		.cfi_def_cfa_offset 8
 727              		.cfi_offset 3, -8
 728              		.cfi_offset 14, -4
 729 0002 0346     		mov	r3, r0
1023:Core/Src/deca_device.c **** }
 730              		.loc 1 1023 5 is_stmt 1 view .LVU166
 731 0004 0522     		movs	r2, #5
 732 0006 0021     		movs	r1, #0
 733 0008 1720     		movs	r0, #23
 734              	.LVL58:
1023:Core/Src/deca_device.c **** }
 735              		.loc 1 1023 5 is_stmt 0 view .LVU167
 736 000a FFF7FEFF 		bl	dwt_readfromdevice
 737              	.LVL59:
1024:Core/Src/deca_device.c **** 
 738              		.loc 1 1024 1 view .LVU168
 739 000e 08BD     		pop	{r3, pc}
 740              		.cfi_endproc
 741              	.LFE26:
 743              		.section	.text.dwt_readrxtimestamp,"ax",%progbits
 744              		.align	1
 745              		.global	dwt_readrxtimestamp
 746              		.syntax unified
 747              		.thumb
 748              		.thumb_func
 750              	dwt_readrxtimestamp:
 751              	.LVL60:
 752              	.LFB29:
1071:Core/Src/deca_device.c ****     dwt_readfromdevice(RX_TIME_ID, RX_TIME_RX_STAMP_OFFSET, RX_TIME_RX_STAMP_LEN, timestamp) ; // G
 753              		.loc 1 1071 1 is_stmt 1 view -0
 754              		.cfi_startproc
 755              		@ args = 0, pretend = 0, frame = 0
 756              		@ frame_needed = 0, uses_anonymous_args = 0
1071:Core/Src/deca_device.c ****     dwt_readfromdevice(RX_TIME_ID, RX_TIME_RX_STAMP_OFFSET, RX_TIME_RX_STAMP_LEN, timestamp) ; // G
 757              		.loc 1 1071 1 is_stmt 0 view .LVU170
 758 0000 08B5     		push	{r3, lr}
 759              	.LCFI21:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 38


 760              		.cfi_def_cfa_offset 8
 761              		.cfi_offset 3, -8
 762              		.cfi_offset 14, -4
 763 0002 0346     		mov	r3, r0
1072:Core/Src/deca_device.c **** }
 764              		.loc 1 1072 5 is_stmt 1 view .LVU171
 765 0004 0522     		movs	r2, #5
 766 0006 0021     		movs	r1, #0
 767 0008 1520     		movs	r0, #21
 768              	.LVL61:
1072:Core/Src/deca_device.c **** }
 769              		.loc 1 1072 5 is_stmt 0 view .LVU172
 770 000a FFF7FEFF 		bl	dwt_readfromdevice
 771              	.LVL62:
1073:Core/Src/deca_device.c **** 
 772              		.loc 1 1073 1 view .LVU173
 773 000e 08BD     		pop	{r3, pc}
 774              		.cfi_endproc
 775              	.LFE29:
 777              		.section	.text.dwt_readsystime,"ax",%progbits
 778              		.align	1
 779              		.global	dwt_readsystime
 780              		.syntax unified
 781              		.thumb
 782              		.thumb_func
 784              	dwt_readsystime:
 785              	.LVL63:
 786              	.LFB33:
1137:Core/Src/deca_device.c ****     dwt_readfromdevice(SYS_TIME_ID, SYS_TIME_OFFSET, SYS_TIME_LEN, timestamp) ;
 787              		.loc 1 1137 1 is_stmt 1 view -0
 788              		.cfi_startproc
 789              		@ args = 0, pretend = 0, frame = 0
 790              		@ frame_needed = 0, uses_anonymous_args = 0
1137:Core/Src/deca_device.c ****     dwt_readfromdevice(SYS_TIME_ID, SYS_TIME_OFFSET, SYS_TIME_LEN, timestamp) ;
 791              		.loc 1 1137 1 is_stmt 0 view .LVU175
 792 0000 08B5     		push	{r3, lr}
 793              	.LCFI22:
 794              		.cfi_def_cfa_offset 8
 795              		.cfi_offset 3, -8
 796              		.cfi_offset 14, -4
 797 0002 0346     		mov	r3, r0
1138:Core/Src/deca_device.c **** }
 798              		.loc 1 1138 5 is_stmt 1 view .LVU176
 799 0004 0522     		movs	r2, #5
 800 0006 0021     		movs	r1, #0
 801 0008 0620     		movs	r0, #6
 802              	.LVL64:
1138:Core/Src/deca_device.c **** }
 803              		.loc 1 1138 5 is_stmt 0 view .LVU177
 804 000a FFF7FEFF 		bl	dwt_readfromdevice
 805              	.LVL65:
1139:Core/Src/deca_device.c **** 
 806              		.loc 1 1139 1 view .LVU178
 807 000e 08BD     		pop	{r3, pc}
 808              		.cfi_endproc
 809              	.LFE33:
 811              		.section	.text.dwt_read32bitoffsetreg,"ax",%progbits
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 39


 812              		.align	1
 813              		.global	dwt_read32bitoffsetreg
 814              		.syntax unified
 815              		.thumb
 816              		.thumb_func
 818              	dwt_read32bitoffsetreg:
 819              	.LVL66:
 820              	.LFB36:
1268:Core/Src/deca_device.c **** 
1269:Core/Src/deca_device.c **** 
1270:Core/Src/deca_device.c **** 
1271:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1272:Core/Src/deca_device.c ****  * @fn dwt_read32bitoffsetreg()
1273:Core/Src/deca_device.c ****  *
1274:Core/Src/deca_device.c ****  * @brief  this function is used to read 32-bit value from the DW1000 device registers
1275:Core/Src/deca_device.c ****  *
1276:Core/Src/deca_device.c ****  * input parameters:
1277:Core/Src/deca_device.c ****  * @param regFileID - ID of register file or buffer being accessed
1278:Core/Src/deca_device.c ****  * @param regOffset - the index into register file or buffer being accessed
1279:Core/Src/deca_device.c ****  *
1280:Core/Src/deca_device.c ****  * output parameters
1281:Core/Src/deca_device.c ****  *
1282:Core/Src/deca_device.c ****  * returns 32 bit register value
1283:Core/Src/deca_device.c ****  */
1284:Core/Src/deca_device.c **** uint32 dwt_read32bitoffsetreg(int regFileID, int regOffset)
1285:Core/Src/deca_device.c **** {
 821              		.loc 1 1285 1 is_stmt 1 view -0
 822              		.cfi_startproc
 823              		@ args = 0, pretend = 0, frame = 8
 824              		@ frame_needed = 0, uses_anonymous_args = 0
 825              		.loc 1 1285 1 is_stmt 0 view .LVU180
 826 0000 00B5     		push	{lr}
 827              	.LCFI23:
 828              		.cfi_def_cfa_offset 4
 829              		.cfi_offset 14, -4
 830 0002 83B0     		sub	sp, sp, #12
 831              	.LCFI24:
 832              		.cfi_def_cfa_offset 16
1286:Core/Src/deca_device.c ****     uint32  regval = 0 ;
 833              		.loc 1 1286 5 is_stmt 1 view .LVU181
 834              	.LVL67:
1287:Core/Src/deca_device.c ****     int     j ;
 835              		.loc 1 1287 5 view .LVU182
1288:Core/Src/deca_device.c ****     uint8   buffer[4] ;
 836              		.loc 1 1288 5 view .LVU183
1289:Core/Src/deca_device.c **** 
1290:Core/Src/deca_device.c ****     dwt_readfromdevice(regFileID,regOffset,4,buffer); // Read 4 bytes (32-bits) register into buffe
 837              		.loc 1 1290 5 view .LVU184
 838 0004 01AB     		add	r3, sp, #4
 839 0006 0422     		movs	r2, #4
 840 0008 89B2     		uxth	r1, r1
 841              	.LVL68:
 842              		.loc 1 1290 5 is_stmt 0 view .LVU185
 843 000a 80B2     		uxth	r0, r0
 844              	.LVL69:
 845              		.loc 1 1290 5 view .LVU186
 846 000c FFF7FEFF 		bl	dwt_readfromdevice
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 40


 847              	.LVL70:
1291:Core/Src/deca_device.c **** 
1292:Core/Src/deca_device.c ****     for (j = 3 ; j >= 0 ; j --)
 848              		.loc 1 1292 5 is_stmt 1 view .LVU187
 849              		.loc 1 1292 12 is_stmt 0 view .LVU188
 850 0010 0323     		movs	r3, #3
1286:Core/Src/deca_device.c ****     int     j ;
 851              		.loc 1 1286 13 view .LVU189
 852 0012 0020     		movs	r0, #0
 853              		.loc 1 1292 5 view .LVU190
 854 0014 07E0     		b	.L57
 855              	.LVL71:
 856              	.L58:
1293:Core/Src/deca_device.c ****     {
1294:Core/Src/deca_device.c ****         regval = (regval << 8) + buffer[j] ;
 857              		.loc 1 1294 9 is_stmt 1 discriminator 3 view .LVU191
 858              		.loc 1 1294 40 is_stmt 0 discriminator 3 view .LVU192
 859 0016 03F10802 		add	r2, r3, #8
 860 001a 6A44     		add	r2, sp, r2
 861 001c 12F8042C 		ldrb	r2, [r2, #-4]	@ zero_extendqisi2
 862              		.loc 1 1294 16 discriminator 3 view .LVU193
 863 0020 02EB0020 		add	r0, r2, r0, lsl #8
 864              	.LVL72:
1292:Core/Src/deca_device.c ****     {
 865              		.loc 1 1292 27 is_stmt 1 discriminator 3 view .LVU194
1292:Core/Src/deca_device.c ****     {
 866              		.loc 1 1292 29 is_stmt 0 discriminator 3 view .LVU195
 867 0024 013B     		subs	r3, r3, #1
 868              	.LVL73:
 869              	.L57:
1292:Core/Src/deca_device.c ****     {
 870              		.loc 1 1292 18 is_stmt 1 discriminator 1 view .LVU196
1292:Core/Src/deca_device.c ****     {
 871              		.loc 1 1292 5 is_stmt 0 discriminator 1 view .LVU197
 872 0026 002B     		cmp	r3, #0
 873 0028 F5DA     		bge	.L58
1295:Core/Src/deca_device.c ****     }
1296:Core/Src/deca_device.c ****     return regval ;
 874              		.loc 1 1296 5 is_stmt 1 view .LVU198
1297:Core/Src/deca_device.c **** 
1298:Core/Src/deca_device.c **** } // end dwt_read32bitoffsetreg()
 875              		.loc 1 1298 1 is_stmt 0 view .LVU199
 876 002a 03B0     		add	sp, sp, #12
 877              	.LCFI25:
 878              		.cfi_def_cfa_offset 4
 879              		@ sp needed
 880 002c 5DF804FB 		ldr	pc, [sp], #4
 881              		.cfi_endproc
 882              	.LFE36:
 884              		.section	.text.dwt_getgpiovalue,"ax",%progbits
 885              		.align	1
 886              		.global	dwt_getgpiovalue
 887              		.syntax unified
 888              		.thumb
 889              		.thumb_func
 891              	dwt_getgpiovalue:
 892              	.LVL74:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 41


 893              	.LFB9:
 483:Core/Src/deca_device.c ****     return ((dwt_read32bitoffsetreg(GPIO_CTRL_ID, GPIO_RAW_OFFSET) & gpioNum)? 1 : 0);
 894              		.loc 1 483 1 is_stmt 1 view -0
 895              		.cfi_startproc
 896              		@ args = 0, pretend = 0, frame = 0
 897              		@ frame_needed = 0, uses_anonymous_args = 0
 483:Core/Src/deca_device.c ****     return ((dwt_read32bitoffsetreg(GPIO_CTRL_ID, GPIO_RAW_OFFSET) & gpioNum)? 1 : 0);
 898              		.loc 1 483 1 is_stmt 0 view .LVU201
 899 0000 10B5     		push	{r4, lr}
 900              	.LCFI26:
 901              		.cfi_def_cfa_offset 8
 902              		.cfi_offset 4, -8
 903              		.cfi_offset 14, -4
 904 0002 0446     		mov	r4, r0
 484:Core/Src/deca_device.c **** }
 905              		.loc 1 484 5 is_stmt 1 view .LVU202
 484:Core/Src/deca_device.c **** }
 906              		.loc 1 484 14 is_stmt 0 view .LVU203
 907 0004 2821     		movs	r1, #40
 908 0006 2620     		movs	r0, #38
 909              	.LVL75:
 484:Core/Src/deca_device.c **** }
 910              		.loc 1 484 14 view .LVU204
 911 0008 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 912              	.LVL76:
 484:Core/Src/deca_device.c **** }
 913              		.loc 1 484 82 view .LVU205
 914 000c 2042     		tst	r0, r4
 485:Core/Src/deca_device.c **** 
 915              		.loc 1 485 1 view .LVU206
 916 000e 14BF     		ite	ne
 917 0010 0120     		movne	r0, #1
 918 0012 0020     		moveq	r0, #0
 919 0014 10BD     		pop	{r4, pc}
 485:Core/Src/deca_device.c **** 
 920              		.loc 1 485 1 view .LVU207
 921              		.cfi_endproc
 922              	.LFE9:
 924              		.section	.text.dwt_readdevid,"ax",%progbits
 925              		.align	1
 926              		.global	dwt_readdevid
 927              		.syntax unified
 928              		.thumb
 929              		.thumb_func
 931              	dwt_readdevid:
 932              	.LFB14:
 586:Core/Src/deca_device.c ****     return dwt_read32bitoffsetreg(DEV_ID_ID,0);
 933              		.loc 1 586 1 is_stmt 1 view -0
 934              		.cfi_startproc
 935              		@ args = 0, pretend = 0, frame = 0
 936              		@ frame_needed = 0, uses_anonymous_args = 0
 937 0000 08B5     		push	{r3, lr}
 938              	.LCFI27:
 939              		.cfi_def_cfa_offset 8
 940              		.cfi_offset 3, -8
 941              		.cfi_offset 14, -4
 587:Core/Src/deca_device.c **** }
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 42


 942              		.loc 1 587 5 view .LVU209
 587:Core/Src/deca_device.c **** }
 943              		.loc 1 587 12 is_stmt 0 view .LVU210
 944 0002 0021     		movs	r1, #0
 945 0004 0846     		mov	r0, r1
 946 0006 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 947              	.LVL77:
 588:Core/Src/deca_device.c **** 
 948              		.loc 1 588 1 view .LVU211
 949 000a 08BD     		pop	{r3, pc}
 950              		.cfi_endproc
 951              	.LFE14:
 953              		.section	.text.dwt_readtxtimestamphi32,"ax",%progbits
 954              		.align	1
 955              		.global	dwt_readtxtimestamphi32
 956              		.syntax unified
 957              		.thumb
 958              		.thumb_func
 960              	dwt_readtxtimestamphi32:
 961              	.LFB27:
1038:Core/Src/deca_device.c ****     return dwt_read32bitoffsetreg(TX_TIME_ID, 1); // Offset is 1 to get the 4 upper bytes out of 5
 962              		.loc 1 1038 1 is_stmt 1 view -0
 963              		.cfi_startproc
 964              		@ args = 0, pretend = 0, frame = 0
 965              		@ frame_needed = 0, uses_anonymous_args = 0
 966 0000 08B5     		push	{r3, lr}
 967              	.LCFI28:
 968              		.cfi_def_cfa_offset 8
 969              		.cfi_offset 3, -8
 970              		.cfi_offset 14, -4
1039:Core/Src/deca_device.c **** }
 971              		.loc 1 1039 5 view .LVU213
1039:Core/Src/deca_device.c **** }
 972              		.loc 1 1039 12 is_stmt 0 view .LVU214
 973 0002 0121     		movs	r1, #1
 974 0004 1720     		movs	r0, #23
 975 0006 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 976              	.LVL78:
1040:Core/Src/deca_device.c **** 
 977              		.loc 1 1040 1 view .LVU215
 978 000a 08BD     		pop	{r3, pc}
 979              		.cfi_endproc
 980              	.LFE27:
 982              		.section	.text.dwt_readtxtimestamplo32,"ax",%progbits
 983              		.align	1
 984              		.global	dwt_readtxtimestamplo32
 985              		.syntax unified
 986              		.thumb
 987              		.thumb_func
 989              	dwt_readtxtimestamplo32:
 990              	.LFB28:
1054:Core/Src/deca_device.c ****     return dwt_read32bitreg(TX_TIME_ID); // Read TX TIME as a 32-bit register to get the 4 lower by
 991              		.loc 1 1054 1 is_stmt 1 view -0
 992              		.cfi_startproc
 993              		@ args = 0, pretend = 0, frame = 0
 994              		@ frame_needed = 0, uses_anonymous_args = 0
 995 0000 08B5     		push	{r3, lr}
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 43


 996              	.LCFI29:
 997              		.cfi_def_cfa_offset 8
 998              		.cfi_offset 3, -8
 999              		.cfi_offset 14, -4
1055:Core/Src/deca_device.c **** }
 1000              		.loc 1 1055 5 view .LVU217
1055:Core/Src/deca_device.c **** }
 1001              		.loc 1 1055 12 is_stmt 0 view .LVU218
 1002 0002 0021     		movs	r1, #0
 1003 0004 1720     		movs	r0, #23
 1004 0006 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 1005              	.LVL79:
1056:Core/Src/deca_device.c **** 
 1006              		.loc 1 1056 1 view .LVU219
 1007 000a 08BD     		pop	{r3, pc}
 1008              		.cfi_endproc
 1009              	.LFE28:
 1011              		.section	.text.dwt_readrxtimestamphi32,"ax",%progbits
 1012              		.align	1
 1013              		.global	dwt_readrxtimestamphi32
 1014              		.syntax unified
 1015              		.thumb
 1016              		.thumb_func
 1018              	dwt_readrxtimestamphi32:
 1019              	.LFB30:
1087:Core/Src/deca_device.c ****     return dwt_read32bitoffsetreg(RX_TIME_ID, 1); // Offset is 1 to get the 4 upper bytes out of 5
 1020              		.loc 1 1087 1 is_stmt 1 view -0
 1021              		.cfi_startproc
 1022              		@ args = 0, pretend = 0, frame = 0
 1023              		@ frame_needed = 0, uses_anonymous_args = 0
 1024 0000 08B5     		push	{r3, lr}
 1025              	.LCFI30:
 1026              		.cfi_def_cfa_offset 8
 1027              		.cfi_offset 3, -8
 1028              		.cfi_offset 14, -4
1088:Core/Src/deca_device.c **** }
 1029              		.loc 1 1088 5 view .LVU221
1088:Core/Src/deca_device.c **** }
 1030              		.loc 1 1088 12 is_stmt 0 view .LVU222
 1031 0002 0121     		movs	r1, #1
 1032 0004 1520     		movs	r0, #21
 1033 0006 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 1034              	.LVL80:
1089:Core/Src/deca_device.c **** 
 1035              		.loc 1 1089 1 view .LVU223
 1036 000a 08BD     		pop	{r3, pc}
 1037              		.cfi_endproc
 1038              	.LFE30:
 1040              		.section	.text.dwt_readrxtimestamplo32,"ax",%progbits
 1041              		.align	1
 1042              		.global	dwt_readrxtimestamplo32
 1043              		.syntax unified
 1044              		.thumb
 1045              		.thumb_func
 1047              	dwt_readrxtimestamplo32:
 1048              	.LFB31:
1103:Core/Src/deca_device.c ****     return dwt_read32bitreg(RX_TIME_ID); // Read RX TIME as a 32-bit register to get the 4 lower by
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 44


 1049              		.loc 1 1103 1 is_stmt 1 view -0
 1050              		.cfi_startproc
 1051              		@ args = 0, pretend = 0, frame = 0
 1052              		@ frame_needed = 0, uses_anonymous_args = 0
 1053 0000 08B5     		push	{r3, lr}
 1054              	.LCFI31:
 1055              		.cfi_def_cfa_offset 8
 1056              		.cfi_offset 3, -8
 1057              		.cfi_offset 14, -4
1104:Core/Src/deca_device.c **** }
 1058              		.loc 1 1104 5 view .LVU225
1104:Core/Src/deca_device.c **** }
 1059              		.loc 1 1104 12 is_stmt 0 view .LVU226
 1060 0002 0021     		movs	r1, #0
 1061 0004 1520     		movs	r0, #21
 1062 0006 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 1063              	.LVL81:
1105:Core/Src/deca_device.c **** 
 1064              		.loc 1 1105 1 view .LVU227
 1065 000a 08BD     		pop	{r3, pc}
 1066              		.cfi_endproc
 1067              	.LFE31:
 1069              		.section	.text.dwt_readsystimestamphi32,"ax",%progbits
 1070              		.align	1
 1071              		.global	dwt_readsystimestamphi32
 1072              		.syntax unified
 1073              		.thumb
 1074              		.thumb_func
 1076              	dwt_readsystimestamphi32:
 1077              	.LFB32:
1119:Core/Src/deca_device.c ****     return dwt_read32bitoffsetreg(SYS_TIME_ID, 1); // Offset is 1 to get the 4 upper bytes out of 5
 1078              		.loc 1 1119 1 is_stmt 1 view -0
 1079              		.cfi_startproc
 1080              		@ args = 0, pretend = 0, frame = 0
 1081              		@ frame_needed = 0, uses_anonymous_args = 0
 1082 0000 08B5     		push	{r3, lr}
 1083              	.LCFI32:
 1084              		.cfi_def_cfa_offset 8
 1085              		.cfi_offset 3, -8
 1086              		.cfi_offset 14, -4
1120:Core/Src/deca_device.c **** }
 1087              		.loc 1 1120 5 view .LVU229
1120:Core/Src/deca_device.c **** }
 1088              		.loc 1 1120 12 is_stmt 0 view .LVU230
 1089 0002 0121     		movs	r1, #1
 1090 0004 0620     		movs	r0, #6
 1091 0006 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 1092              	.LVL82:
1121:Core/Src/deca_device.c **** 
 1093              		.loc 1 1121 1 view .LVU231
 1094 000a 08BD     		pop	{r3, pc}
 1095              		.cfi_endproc
 1096              	.LFE32:
 1098              		.section	.text.dwt_read16bitoffsetreg,"ax",%progbits
 1099              		.align	1
 1100              		.global	dwt_read16bitoffsetreg
 1101              		.syntax unified
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 45


 1102              		.thumb
 1103              		.thumb_func
 1105              	dwt_read16bitoffsetreg:
 1106              	.LVL83:
 1107              	.LFB37:
1299:Core/Src/deca_device.c **** 
1300:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1301:Core/Src/deca_device.c ****  * @fn dwt_read16bitoffsetreg()
1302:Core/Src/deca_device.c ****  *
1303:Core/Src/deca_device.c ****  * @brief  this function is used to read 16-bit value from the DW1000 device registers
1304:Core/Src/deca_device.c ****  *
1305:Core/Src/deca_device.c ****  * input parameters:
1306:Core/Src/deca_device.c ****  * @param regFileID - ID of register file or buffer being accessed
1307:Core/Src/deca_device.c ****  * @param regOffset - the index into register file or buffer being accessed
1308:Core/Src/deca_device.c ****  *
1309:Core/Src/deca_device.c ****  * output parameters
1310:Core/Src/deca_device.c ****  *
1311:Core/Src/deca_device.c ****  * returns 16 bit register value
1312:Core/Src/deca_device.c ****  */
1313:Core/Src/deca_device.c **** uint16 dwt_read16bitoffsetreg(int regFileID, int regOffset)
1314:Core/Src/deca_device.c **** {
 1108              		.loc 1 1314 1 is_stmt 1 view -0
 1109              		.cfi_startproc
 1110              		@ args = 0, pretend = 0, frame = 8
 1111              		@ frame_needed = 0, uses_anonymous_args = 0
 1112              		.loc 1 1314 1 is_stmt 0 view .LVU233
 1113 0000 00B5     		push	{lr}
 1114              	.LCFI33:
 1115              		.cfi_def_cfa_offset 4
 1116              		.cfi_offset 14, -4
 1117 0002 83B0     		sub	sp, sp, #12
 1118              	.LCFI34:
 1119              		.cfi_def_cfa_offset 16
1315:Core/Src/deca_device.c ****     uint16  regval = 0 ;
 1120              		.loc 1 1315 5 is_stmt 1 view .LVU234
 1121              	.LVL84:
1316:Core/Src/deca_device.c ****     uint8   buffer[2] ;
 1122              		.loc 1 1316 5 view .LVU235
1317:Core/Src/deca_device.c **** 
1318:Core/Src/deca_device.c ****     dwt_readfromdevice(regFileID,regOffset,2,buffer); // Read 2 bytes (16-bits) register into buffe
 1123              		.loc 1 1318 5 view .LVU236
 1124 0004 01AB     		add	r3, sp, #4
 1125 0006 0222     		movs	r2, #2
 1126 0008 89B2     		uxth	r1, r1
 1127              	.LVL85:
 1128              		.loc 1 1318 5 is_stmt 0 view .LVU237
 1129 000a 80B2     		uxth	r0, r0
 1130              	.LVL86:
 1131              		.loc 1 1318 5 view .LVU238
 1132 000c FFF7FEFF 		bl	dwt_readfromdevice
 1133              	.LVL87:
1319:Core/Src/deca_device.c **** 
1320:Core/Src/deca_device.c ****     regval = ((uint16)buffer[1] << 8) + buffer[0] ;
 1134              		.loc 1 1320 5 is_stmt 1 view .LVU239
 1135              		.loc 1 1320 29 is_stmt 0 view .LVU240
 1136 0010 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 1137              		.loc 1 1320 47 view .LVU241
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 46


 1138 0014 9DF80400 		ldrb	r0, [sp, #4]	@ zero_extendqisi2
 1139              		.loc 1 1320 12 view .LVU242
 1140 0018 00EB0320 		add	r0, r0, r3, lsl #8
 1141              	.LVL88:
1321:Core/Src/deca_device.c ****     return regval ;
 1142              		.loc 1 1321 5 is_stmt 1 view .LVU243
1322:Core/Src/deca_device.c **** 
1323:Core/Src/deca_device.c **** } // end dwt_read16bitoffsetreg()
 1143              		.loc 1 1323 1 is_stmt 0 view .LVU244
 1144 001c 80B2     		uxth	r0, r0
 1145              		.loc 1 1323 1 view .LVU245
 1146 001e 03B0     		add	sp, sp, #12
 1147              	.LCFI35:
 1148              		.cfi_def_cfa_offset 4
 1149              		@ sp needed
 1150 0020 5DF804FB 		ldr	pc, [sp], #4
 1151              		.cfi_endproc
 1152              	.LFE37:
 1154              		.section	.text.dwt_readdiagnostics,"ax",%progbits
 1155              		.align	1
 1156              		.global	dwt_readdiagnostics
 1157              		.syntax unified
 1158              		.thumb
 1159              		.thumb_func
 1161              	dwt_readdiagnostics:
 1162              	.LVL89:
 1163              	.LFB25:
 994:Core/Src/deca_device.c ****     // Read the HW FP index
 1164              		.loc 1 994 1 is_stmt 1 view -0
 1165              		.cfi_startproc
 1166              		@ args = 0, pretend = 0, frame = 0
 1167              		@ frame_needed = 0, uses_anonymous_args = 0
 994:Core/Src/deca_device.c ****     // Read the HW FP index
 1168              		.loc 1 994 1 is_stmt 0 view .LVU247
 1169 0000 10B5     		push	{r4, lr}
 1170              	.LCFI36:
 1171              		.cfi_def_cfa_offset 8
 1172              		.cfi_offset 4, -8
 1173              		.cfi_offset 14, -4
 1174 0002 0446     		mov	r4, r0
 996:Core/Src/deca_device.c **** 
 1175              		.loc 1 996 5 is_stmt 1 view .LVU248
 996:Core/Src/deca_device.c **** 
 1176              		.loc 1 996 30 is_stmt 0 view .LVU249
 1177 0004 0521     		movs	r1, #5
 1178 0006 1520     		movs	r0, #21
 1179              	.LVL90:
 996:Core/Src/deca_device.c **** 
 1180              		.loc 1 996 30 view .LVU250
 1181 0008 FFF7FEFF 		bl	dwt_read16bitoffsetreg
 1182              	.LVL91:
 996:Core/Src/deca_device.c **** 
 1183              		.loc 1 996 28 view .LVU251
 1184 000c E081     		strh	r0, [r4, #14]	@ movhi
 999:Core/Src/deca_device.c **** 
 1185              		.loc 1 999 5 is_stmt 1 view .LVU252
 999:Core/Src/deca_device.c **** 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 47


 1186              		.loc 1 999 29 is_stmt 0 view .LVU253
 1187 000e 0021     		movs	r1, #0
 1188 0010 2E20     		movs	r0, #46
 1189 0012 FFF7FEFF 		bl	dwt_read16bitoffsetreg
 1190              	.LVL92:
 999:Core/Src/deca_device.c **** 
 1191              		.loc 1 999 27 view .LVU254
 1192 0016 2346     		mov	r3, r4
 1193 0018 23F8040B 		strh	r0, [r3], #4	@ movhi
1002:Core/Src/deca_device.c **** 
 1194              		.loc 1 1002 5 is_stmt 1 view .LVU255
 1195 001c 0822     		movs	r2, #8
 1196 001e 0021     		movs	r1, #0
 1197 0020 1220     		movs	r0, #18
 1198 0022 FFF7FEFF 		bl	dwt_readfromdevice
 1199              	.LVL93:
1004:Core/Src/deca_device.c **** 
 1200              		.loc 1 1004 5 view .LVU256
1004:Core/Src/deca_device.c **** 
 1201              		.loc 1 1004 34 is_stmt 0 view .LVU257
 1202 0026 0721     		movs	r1, #7
 1203 0028 1520     		movs	r0, #21
 1204 002a FFF7FEFF 		bl	dwt_read16bitoffsetreg
 1205              	.LVL94:
1004:Core/Src/deca_device.c **** 
 1206              		.loc 1 1004 32 view .LVU258
 1207 002e 6080     		strh	r0, [r4, #2]	@ movhi
1006:Core/Src/deca_device.c **** }
 1208              		.loc 1 1006 5 is_stmt 1 view .LVU259
1006:Core/Src/deca_device.c **** }
 1209              		.loc 1 1006 34 is_stmt 0 view .LVU260
 1210 0030 0021     		movs	r1, #0
 1211 0032 1020     		movs	r0, #16
 1212 0034 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 1213              	.LVL95:
1006:Core/Src/deca_device.c **** }
 1214              		.loc 1 1006 88 view .LVU261
 1215 0038 000D     		lsrs	r0, r0, #20
1006:Core/Src/deca_device.c **** }
 1216              		.loc 1 1006 31 view .LVU262
 1217 003a A081     		strh	r0, [r4, #12]	@ movhi
1007:Core/Src/deca_device.c **** 
 1218              		.loc 1 1007 1 view .LVU263
 1219 003c 10BD     		pop	{r4, pc}
1007:Core/Src/deca_device.c **** 
 1220              		.loc 1 1007 1 view .LVU264
 1221              		.cfi_endproc
 1222              	.LFE25:
 1224              		.section	.text.dwt_read8bitoffsetreg,"ax",%progbits
 1225              		.align	1
 1226              		.global	dwt_read8bitoffsetreg
 1227              		.syntax unified
 1228              		.thumb
 1229              		.thumb_func
 1231              	dwt_read8bitoffsetreg:
 1232              	.LVL96:
 1233              	.LFB38:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 48


1324:Core/Src/deca_device.c **** 
1325:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1326:Core/Src/deca_device.c ****  * @fn dwt_read8bitoffsetreg()
1327:Core/Src/deca_device.c ****  *
1328:Core/Src/deca_device.c ****  * @brief  this function is used to read an 8-bit value from the DW1000 device registers
1329:Core/Src/deca_device.c ****  *
1330:Core/Src/deca_device.c ****  * input parameters:
1331:Core/Src/deca_device.c ****  * @param regFileID - ID of register file or buffer being accessed
1332:Core/Src/deca_device.c ****  * @param regOffset - the index into register file or buffer being accessed
1333:Core/Src/deca_device.c ****  *
1334:Core/Src/deca_device.c ****  * output parameters
1335:Core/Src/deca_device.c ****  *
1336:Core/Src/deca_device.c ****  * returns 8-bit register value
1337:Core/Src/deca_device.c ****  */
1338:Core/Src/deca_device.c **** uint8 dwt_read8bitoffsetreg(int regFileID, int regOffset)
1339:Core/Src/deca_device.c **** {
 1234              		.loc 1 1339 1 is_stmt 1 view -0
 1235              		.cfi_startproc
 1236              		@ args = 0, pretend = 0, frame = 8
 1237              		@ frame_needed = 0, uses_anonymous_args = 0
 1238              		.loc 1 1339 1 is_stmt 0 view .LVU266
 1239 0000 00B5     		push	{lr}
 1240              	.LCFI37:
 1241              		.cfi_def_cfa_offset 4
 1242              		.cfi_offset 14, -4
 1243 0002 83B0     		sub	sp, sp, #12
 1244              	.LCFI38:
 1245              		.cfi_def_cfa_offset 16
1340:Core/Src/deca_device.c ****     uint8 regval;
 1246              		.loc 1 1340 5 is_stmt 1 view .LVU267
1341:Core/Src/deca_device.c **** 
1342:Core/Src/deca_device.c ****     dwt_readfromdevice(regFileID, regOffset, 1, &regval);
 1247              		.loc 1 1342 5 view .LVU268
 1248 0004 0DF10703 		add	r3, sp, #7
 1249 0008 0122     		movs	r2, #1
 1250 000a 89B2     		uxth	r1, r1
 1251              	.LVL97:
 1252              		.loc 1 1342 5 is_stmt 0 view .LVU269
 1253 000c 80B2     		uxth	r0, r0
 1254              	.LVL98:
 1255              		.loc 1 1342 5 view .LVU270
 1256 000e FFF7FEFF 		bl	dwt_readfromdevice
 1257              	.LVL99:
1343:Core/Src/deca_device.c **** 
1344:Core/Src/deca_device.c ****     return regval ;
 1258              		.loc 1 1344 5 is_stmt 1 view .LVU271
1345:Core/Src/deca_device.c **** }
 1259              		.loc 1 1345 1 is_stmt 0 view .LVU272
 1260 0012 9DF80700 		ldrb	r0, [sp, #7]	@ zero_extendqisi2
 1261 0016 03B0     		add	sp, sp, #12
 1262              	.LCFI39:
 1263              		.cfi_def_cfa_offset 4
 1264              		@ sp needed
 1265 0018 5DF804FB 		ldr	pc, [sp], #4
 1266              		.cfi_endproc
 1267              	.LFE38:
 1269              		.section	.text.dwt_write8bitoffsetreg,"ax",%progbits
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 49


 1270              		.align	1
 1271              		.global	dwt_write8bitoffsetreg
 1272              		.syntax unified
 1273              		.thumb
 1274              		.thumb_func
 1276              	dwt_write8bitoffsetreg:
 1277              	.LVL100:
 1278              	.LFB39:
1346:Core/Src/deca_device.c **** 
1347:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1348:Core/Src/deca_device.c ****  * @fn dwt_write8bitoffsetreg()
1349:Core/Src/deca_device.c ****  *
1350:Core/Src/deca_device.c ****  * @brief  this function is used to write an 8-bit value to the DW1000 device registers
1351:Core/Src/deca_device.c ****  *
1352:Core/Src/deca_device.c ****  * input parameters:
1353:Core/Src/deca_device.c ****  * @param regFileID - ID of register file or buffer being accessed
1354:Core/Src/deca_device.c ****  * @param regOffset - the index into register file or buffer being accessed
1355:Core/Src/deca_device.c ****  * @param regval    - the value to write
1356:Core/Src/deca_device.c ****  *
1357:Core/Src/deca_device.c ****  * output parameters
1358:Core/Src/deca_device.c ****  *
1359:Core/Src/deca_device.c ****  * no return value
1360:Core/Src/deca_device.c ****  */
1361:Core/Src/deca_device.c **** void dwt_write8bitoffsetreg(int regFileID, int regOffset, uint8 regval)
1362:Core/Src/deca_device.c **** {
 1279              		.loc 1 1362 1 is_stmt 1 view -0
 1280              		.cfi_startproc
 1281              		@ args = 0, pretend = 0, frame = 8
 1282              		@ frame_needed = 0, uses_anonymous_args = 0
 1283              		.loc 1 1362 1 is_stmt 0 view .LVU274
 1284 0000 00B5     		push	{lr}
 1285              	.LCFI40:
 1286              		.cfi_def_cfa_offset 4
 1287              		.cfi_offset 14, -4
 1288 0002 83B0     		sub	sp, sp, #12
 1289              	.LCFI41:
 1290              		.cfi_def_cfa_offset 16
 1291 0004 8DF80720 		strb	r2, [sp, #7]
1363:Core/Src/deca_device.c ****     dwt_writetodevice(regFileID, regOffset, 1, &regval);
 1292              		.loc 1 1363 5 is_stmt 1 view .LVU275
 1293 0008 0DF10703 		add	r3, sp, #7
 1294 000c 0122     		movs	r2, #1
 1295              	.LVL101:
 1296              		.loc 1 1363 5 is_stmt 0 view .LVU276
 1297 000e 89B2     		uxth	r1, r1
 1298              	.LVL102:
 1299              		.loc 1 1363 5 view .LVU277
 1300 0010 80B2     		uxth	r0, r0
 1301              	.LVL103:
 1302              		.loc 1 1363 5 view .LVU278
 1303 0012 FFF7FEFF 		bl	dwt_writetodevice
 1304              	.LVL104:
1364:Core/Src/deca_device.c **** }
 1305              		.loc 1 1364 1 view .LVU279
 1306 0016 03B0     		add	sp, sp, #12
 1307              	.LCFI42:
 1308              		.cfi_def_cfa_offset 4
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 50


 1309              		@ sp needed
 1310 0018 5DF804FB 		ldr	pc, [sp], #4
 1311              		.cfi_endproc
 1312              	.LFE39:
 1314              		.section	.text.dwt_configurefor64plen,"ax",%progbits
 1315              		.align	1
 1316              		.global	dwt_configurefor64plen
 1317              		.syntax unified
 1318              		.thumb
 1319              		.thumb_func
 1321              	dwt_configurefor64plen:
 1322              	.LVL105:
 1323              	.LFB16:
 631:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(CRTR_ID, CRTR_GEAR_OFFSET, DEMOD_GEAR_64L);
 1324              		.loc 1 631 1 is_stmt 1 view -0
 1325              		.cfi_startproc
 1326              		@ args = 0, pretend = 0, frame = 0
 1327              		@ frame_needed = 0, uses_anonymous_args = 0
 631:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(CRTR_ID, CRTR_GEAR_OFFSET, DEMOD_GEAR_64L);
 1328              		.loc 1 631 1 is_stmt 0 view .LVU281
 1329 0000 10B5     		push	{r4, lr}
 1330              	.LCFI43:
 1331              		.cfi_def_cfa_offset 8
 1332              		.cfi_offset 4, -8
 1333              		.cfi_offset 14, -4
 1334 0002 0446     		mov	r4, r0
 632:Core/Src/deca_device.c **** 
 1335              		.loc 1 632 5 is_stmt 1 view .LVU282
 1336 0004 4722     		movs	r2, #71
 1337 0006 2821     		movs	r1, #40
 1338 0008 3120     		movs	r0, #49
 1339              	.LVL106:
 632:Core/Src/deca_device.c **** 
 1340              		.loc 1 632 5 is_stmt 0 view .LVU283
 1341 000a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 1342              	.LVL107:
 634:Core/Src/deca_device.c ****     {
 1343              		.loc 1 634 5 is_stmt 1 view .LVU284
 634:Core/Src/deca_device.c ****     {
 1344              		.loc 1 634 7 is_stmt 0 view .LVU285
 1345 000e 012C     		cmp	r4, #1
 1346 0010 05D0     		beq	.L86
 640:Core/Src/deca_device.c ****     }
 1347              		.loc 1 640 9 is_stmt 1 view .LVU286
 1348 0012 2022     		movs	r2, #32
 1349 0014 0A21     		movs	r1, #10
 1350 0016 2720     		movs	r0, #39
 1351 0018 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 1352              	.LVL108:
 1353              	.L82:
 642:Core/Src/deca_device.c **** 
 1354              		.loc 1 642 1 is_stmt 0 view .LVU287
 1355 001c 10BD     		pop	{r4, pc}
 1356              	.LVL109:
 1357              	.L86:
 636:Core/Src/deca_device.c ****     }
 1358              		.loc 1 636 9 is_stmt 1 view .LVU288
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 51


 1359 001e 0E22     		movs	r2, #14
 1360 0020 0A21     		movs	r1, #10
 1361 0022 2720     		movs	r0, #39
 1362 0024 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 1363              	.LVL110:
 1364 0028 F8E7     		b	.L82
 1365              		.cfi_endproc
 1366              	.LFE16:
 1368              		.section	.text.dwt_write16bitoffsetreg,"ax",%progbits
 1369              		.align	1
 1370              		.global	dwt_write16bitoffsetreg
 1371              		.syntax unified
 1372              		.thumb
 1373              		.thumb_func
 1375              	dwt_write16bitoffsetreg:
 1376              	.LVL111:
 1377              	.LFB40:
1365:Core/Src/deca_device.c **** 
1366:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1367:Core/Src/deca_device.c ****  * @fn dwt_write16bitoffsetreg()
1368:Core/Src/deca_device.c ****  *
1369:Core/Src/deca_device.c ****  * @brief  this function is used to write 16-bit value to the DW1000 device registers
1370:Core/Src/deca_device.c ****  *
1371:Core/Src/deca_device.c ****  * input parameters:
1372:Core/Src/deca_device.c ****  * @param regFileID - ID of register file or buffer being accessed
1373:Core/Src/deca_device.c ****  * @param regOffset - the index into register file or buffer being accessed
1374:Core/Src/deca_device.c ****  * @param regval    - the value to write
1375:Core/Src/deca_device.c ****  *
1376:Core/Src/deca_device.c ****  * output parameters
1377:Core/Src/deca_device.c ****  *
1378:Core/Src/deca_device.c ****  * no return value
1379:Core/Src/deca_device.c ****  */
1380:Core/Src/deca_device.c **** void dwt_write16bitoffsetreg(int regFileID, int regOffset, uint16 regval)
1381:Core/Src/deca_device.c **** {
 1378              		.loc 1 1381 1 view -0
 1379              		.cfi_startproc
 1380              		@ args = 0, pretend = 0, frame = 8
 1381              		@ frame_needed = 0, uses_anonymous_args = 0
 1382              		.loc 1 1381 1 is_stmt 0 view .LVU290
 1383 0000 00B5     		push	{lr}
 1384              	.LCFI44:
 1385              		.cfi_def_cfa_offset 4
 1386              		.cfi_offset 14, -4
 1387 0002 83B0     		sub	sp, sp, #12
 1388              	.LCFI45:
 1389              		.cfi_def_cfa_offset 16
1382:Core/Src/deca_device.c ****     uint8   buffer[2] ;
 1390              		.loc 1 1382 5 is_stmt 1 view .LVU291
1383:Core/Src/deca_device.c **** 
1384:Core/Src/deca_device.c ****     buffer[0] = regval & 0xFF;
 1391              		.loc 1 1384 5 view .LVU292
 1392              		.loc 1 1384 15 is_stmt 0 view .LVU293
 1393 0004 8DF80420 		strb	r2, [sp, #4]
1385:Core/Src/deca_device.c ****     buffer[1] = regval >> 8 ;
 1394              		.loc 1 1385 5 is_stmt 1 view .LVU294
 1395              		.loc 1 1385 15 is_stmt 0 view .LVU295
 1396 0008 120A     		lsrs	r2, r2, #8
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 52


 1397              	.LVL112:
 1398              		.loc 1 1385 15 view .LVU296
 1399 000a 8DF80520 		strb	r2, [sp, #5]
1386:Core/Src/deca_device.c **** 
1387:Core/Src/deca_device.c ****     dwt_writetodevice(regFileID,regOffset,2,buffer);
 1400              		.loc 1 1387 5 is_stmt 1 view .LVU297
 1401 000e 01AB     		add	r3, sp, #4
 1402 0010 0222     		movs	r2, #2
 1403 0012 89B2     		uxth	r1, r1
 1404              	.LVL113:
 1405              		.loc 1 1387 5 is_stmt 0 view .LVU298
 1406 0014 80B2     		uxth	r0, r0
 1407              	.LVL114:
 1408              		.loc 1 1387 5 view .LVU299
 1409 0016 FFF7FEFF 		bl	dwt_writetodevice
 1410              	.LVL115:
1388:Core/Src/deca_device.c **** } // end dwt_write16bitoffsetreg()
 1411              		.loc 1 1388 1 view .LVU300
 1412 001a 03B0     		add	sp, sp, #12
 1413              	.LCFI46:
 1414              		.cfi_def_cfa_offset 4
 1415              		@ sp needed
 1416 001c 5DF804FB 		ldr	pc, [sp], #4
 1417              		.cfi_endproc
 1418              	.LFE40:
 1420              		.section	.text.dwt_setfinegraintxseq,"ax",%progbits
 1421              		.align	1
 1422              		.global	dwt_setfinegraintxseq
 1423              		.syntax unified
 1424              		.thumb
 1425              		.thumb_func
 1427              	dwt_setfinegraintxseq:
 1428              	.LVL116:
 1429              	.LFB4:
 360:Core/Src/deca_device.c ****     if (enable)
 1430              		.loc 1 360 1 is_stmt 1 view -0
 1431              		.cfi_startproc
 1432              		@ args = 0, pretend = 0, frame = 0
 1433              		@ frame_needed = 0, uses_anonymous_args = 0
 360:Core/Src/deca_device.c ****     if (enable)
 1434              		.loc 1 360 1 is_stmt 0 view .LVU302
 1435 0000 08B5     		push	{r3, lr}
 1436              	.LCFI47:
 1437              		.cfi_def_cfa_offset 8
 1438              		.cfi_offset 3, -8
 1439              		.cfi_offset 14, -4
 361:Core/Src/deca_device.c ****     {
 1440              		.loc 1 361 5 is_stmt 1 view .LVU303
 361:Core/Src/deca_device.c ****     {
 1441              		.loc 1 361 8 is_stmt 0 view .LVU304
 1442 0002 30B1     		cbz	r0, .L90
 363:Core/Src/deca_device.c ****     }
 1443              		.loc 1 363 9 is_stmt 1 view .LVU305
 1444 0004 40F67432 		movw	r2, #2932
 1445 0008 2621     		movs	r1, #38
 1446 000a 3620     		movs	r0, #54
 1447              	.LVL117:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 53


 363:Core/Src/deca_device.c ****     }
 1448              		.loc 1 363 9 is_stmt 0 view .LVU306
 1449 000c FFF7FEFF 		bl	dwt_write16bitoffsetreg
 1450              	.LVL118:
 1451              	.L89:
 369:Core/Src/deca_device.c **** 
 1452              		.loc 1 369 1 view .LVU307
 1453 0010 08BD     		pop	{r3, pc}
 1454              	.LVL119:
 1455              	.L90:
 367:Core/Src/deca_device.c ****     }
 1456              		.loc 1 367 9 is_stmt 1 view .LVU308
 1457 0012 0022     		movs	r2, #0
 1458 0014 2621     		movs	r1, #38
 1459 0016 3620     		movs	r0, #54
 1460              	.LVL120:
 367:Core/Src/deca_device.c ****     }
 1461              		.loc 1 367 9 is_stmt 0 view .LVU309
 1462 0018 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 1463              	.LVL121:
 369:Core/Src/deca_device.c **** 
 1464              		.loc 1 369 1 view .LVU310
 1465 001c F8E7     		b	.L89
 1466              		.cfi_endproc
 1467              	.LFE4:
 1469              		.section	.text.dwt_setrxantennadelay,"ax",%progbits
 1470              		.align	1
 1471              		.global	dwt_setrxantennadelay
 1472              		.syntax unified
 1473              		.thumb
 1474              		.thumb_func
 1476              	dwt_setrxantennadelay:
 1477              	.LVL122:
 1478              	.LFB18:
 800:Core/Src/deca_device.c ****     // Set the RX antenna delay for auto TX timestamp adjustment
 1479              		.loc 1 800 1 is_stmt 1 view -0
 1480              		.cfi_startproc
 1481              		@ args = 0, pretend = 0, frame = 0
 1482              		@ frame_needed = 0, uses_anonymous_args = 0
 800:Core/Src/deca_device.c ****     // Set the RX antenna delay for auto TX timestamp adjustment
 1483              		.loc 1 800 1 is_stmt 0 view .LVU312
 1484 0000 08B5     		push	{r3, lr}
 1485              	.LCFI48:
 1486              		.cfi_def_cfa_offset 8
 1487              		.cfi_offset 3, -8
 1488              		.cfi_offset 14, -4
 1489 0002 0246     		mov	r2, r0
 802:Core/Src/deca_device.c **** }
 1490              		.loc 1 802 5 is_stmt 1 view .LVU313
 1491 0004 41F60401 		movw	r1, #6148
 1492 0008 2E20     		movs	r0, #46
 1493              	.LVL123:
 802:Core/Src/deca_device.c **** }
 1494              		.loc 1 802 5 is_stmt 0 view .LVU314
 1495 000a FFF7FEFF 		bl	dwt_write16bitoffsetreg
 1496              	.LVL124:
 803:Core/Src/deca_device.c **** 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 54


 1497              		.loc 1 803 1 view .LVU315
 1498 000e 08BD     		pop	{r3, pc}
 1499              		.cfi_endproc
 1500              	.LFE18:
 1502              		.section	.text.dwt_settxantennadelay,"ax",%progbits
 1503              		.align	1
 1504              		.global	dwt_settxantennadelay
 1505              		.syntax unified
 1506              		.thumb
 1507              		.thumb_func
 1509              	dwt_settxantennadelay:
 1510              	.LVL125:
 1511              	.LFB19:
 819:Core/Src/deca_device.c ****     // Set the TX antenna delay for auto TX timestamp adjustment
 1512              		.loc 1 819 1 is_stmt 1 view -0
 1513              		.cfi_startproc
 1514              		@ args = 0, pretend = 0, frame = 0
 1515              		@ frame_needed = 0, uses_anonymous_args = 0
 819:Core/Src/deca_device.c ****     // Set the TX antenna delay for auto TX timestamp adjustment
 1516              		.loc 1 819 1 is_stmt 0 view .LVU317
 1517 0000 08B5     		push	{r3, lr}
 1518              	.LCFI49:
 1519              		.cfi_def_cfa_offset 8
 1520              		.cfi_offset 3, -8
 1521              		.cfi_offset 14, -4
 1522 0002 0246     		mov	r2, r0
 821:Core/Src/deca_device.c **** }
 1523              		.loc 1 821 5 is_stmt 1 view .LVU318
 1524 0004 0021     		movs	r1, #0
 1525 0006 1820     		movs	r0, #24
 1526              	.LVL126:
 821:Core/Src/deca_device.c **** }
 1527              		.loc 1 821 5 is_stmt 0 view .LVU319
 1528 0008 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 1529              	.LVL127:
 822:Core/Src/deca_device.c **** 
 1530              		.loc 1 822 1 view .LVU320
 1531 000c 08BD     		pop	{r3, pc}
 1532              		.cfi_endproc
 1533              	.LFE19:
 1535              		.section	.text.dwt_write32bitoffsetreg,"ax",%progbits
 1536              		.align	1
 1537              		.global	dwt_write32bitoffsetreg
 1538              		.syntax unified
 1539              		.thumb
 1540              		.thumb_func
 1542              	dwt_write32bitoffsetreg:
 1543              	.LVL128:
 1544              	.LFB41:
1389:Core/Src/deca_device.c **** 
1390:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1391:Core/Src/deca_device.c ****  * @fn dwt_write32bitoffsetreg()
1392:Core/Src/deca_device.c ****  *
1393:Core/Src/deca_device.c ****  * @brief  this function is used to write 32-bit value to the DW1000 device registers
1394:Core/Src/deca_device.c ****  *
1395:Core/Src/deca_device.c ****  * input parameters:
1396:Core/Src/deca_device.c ****  * @param regFileID - ID of register file or buffer being accessed
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 55


1397:Core/Src/deca_device.c ****  * @param regOffset - the index into register file or buffer being accessed
1398:Core/Src/deca_device.c ****  * @param regval    - the value to write
1399:Core/Src/deca_device.c ****  *
1400:Core/Src/deca_device.c ****  * output parameters
1401:Core/Src/deca_device.c ****  *
1402:Core/Src/deca_device.c ****  * no return value
1403:Core/Src/deca_device.c ****  */
1404:Core/Src/deca_device.c **** void dwt_write32bitoffsetreg(int regFileID, int regOffset, uint32 regval)
1405:Core/Src/deca_device.c **** {
 1545              		.loc 1 1405 1 is_stmt 1 view -0
 1546              		.cfi_startproc
 1547              		@ args = 0, pretend = 0, frame = 8
 1548              		@ frame_needed = 0, uses_anonymous_args = 0
 1549              		.loc 1 1405 1 is_stmt 0 view .LVU322
 1550 0000 00B5     		push	{lr}
 1551              	.LCFI50:
 1552              		.cfi_def_cfa_offset 4
 1553              		.cfi_offset 14, -4
 1554 0002 83B0     		sub	sp, sp, #12
 1555              	.LCFI51:
 1556              		.cfi_def_cfa_offset 16
1406:Core/Src/deca_device.c ****     int     j ;
 1557              		.loc 1 1406 5 is_stmt 1 view .LVU323
1407:Core/Src/deca_device.c ****     uint8   buffer[4] ;
 1558              		.loc 1 1407 5 view .LVU324
1408:Core/Src/deca_device.c **** 
1409:Core/Src/deca_device.c ****     for ( j = 0 ; j < 4 ; j++ )
 1559              		.loc 1 1409 5 view .LVU325
 1560              	.LVL129:
 1561              		.loc 1 1409 13 is_stmt 0 view .LVU326
 1562 0004 0023     		movs	r3, #0
 1563              		.loc 1 1409 5 view .LVU327
 1564 0006 06E0     		b	.L98
 1565              	.LVL130:
 1566              	.L99:
1410:Core/Src/deca_device.c ****     {
1411:Core/Src/deca_device.c ****         buffer[j] = regval & 0xff ;
 1567              		.loc 1 1411 9 is_stmt 1 discriminator 3 view .LVU328
 1568              		.loc 1 1411 19 is_stmt 0 discriminator 3 view .LVU329
 1569 0008 03F1080C 		add	ip, r3, #8
 1570 000c EC44     		add	ip, sp, ip
 1571 000e 0CF8042C 		strb	r2, [ip, #-4]
1412:Core/Src/deca_device.c ****         regval >>= 8 ;
 1572              		.loc 1 1412 9 is_stmt 1 discriminator 3 view .LVU330
 1573              		.loc 1 1412 16 is_stmt 0 discriminator 3 view .LVU331
 1574 0012 120A     		lsrs	r2, r2, #8
 1575              	.LVL131:
1409:Core/Src/deca_device.c ****     {
 1576              		.loc 1 1409 27 is_stmt 1 discriminator 3 view .LVU332
1409:Core/Src/deca_device.c ****     {
 1577              		.loc 1 1409 28 is_stmt 0 discriminator 3 view .LVU333
 1578 0014 0133     		adds	r3, r3, #1
 1579              	.LVL132:
 1580              	.L98:
1409:Core/Src/deca_device.c ****     {
 1581              		.loc 1 1409 19 is_stmt 1 discriminator 1 view .LVU334
1409:Core/Src/deca_device.c ****     {
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 56


 1582              		.loc 1 1409 5 is_stmt 0 discriminator 1 view .LVU335
 1583 0016 032B     		cmp	r3, #3
 1584 0018 F6DD     		ble	.L99
1413:Core/Src/deca_device.c ****     }
1414:Core/Src/deca_device.c **** 
1415:Core/Src/deca_device.c ****     dwt_writetodevice(regFileID,regOffset,4,buffer);
 1585              		.loc 1 1415 5 is_stmt 1 view .LVU336
 1586 001a 01AB     		add	r3, sp, #4
 1587              	.LVL133:
 1588              		.loc 1 1415 5 is_stmt 0 view .LVU337
 1589 001c 0422     		movs	r2, #4
 1590              	.LVL134:
 1591              		.loc 1 1415 5 view .LVU338
 1592 001e 89B2     		uxth	r1, r1
 1593              	.LVL135:
 1594              		.loc 1 1415 5 view .LVU339
 1595 0020 80B2     		uxth	r0, r0
 1596              	.LVL136:
 1597              		.loc 1 1415 5 view .LVU340
 1598 0022 FFF7FEFF 		bl	dwt_writetodevice
 1599              	.LVL137:
1416:Core/Src/deca_device.c **** } // end dwt_write32bitoffsetreg()
 1600              		.loc 1 1416 1 view .LVU341
 1601 0026 03B0     		add	sp, sp, #12
 1602              	.LCFI52:
 1603              		.cfi_def_cfa_offset 4
 1604              		@ sp needed
 1605 0028 5DF804FB 		ldr	pc, [sp], #4
 1606              		.cfi_endproc
 1607              	.LFE41:
 1609              		.section	.text.dwt_setlnapamode,"ax",%progbits
 1610              		.align	1
 1611              		.global	dwt_setlnapamode
 1612              		.syntax unified
 1613              		.thumb
 1614              		.thumb_func
 1616              	dwt_setlnapamode:
 1617              	.LVL138:
 1618              	.LFB5:
 388:Core/Src/deca_device.c ****     uint32 gpio_mode = dwt_read32bitoffsetreg(GPIO_CTRL_ID, GPIO_MODE_OFFSET);
 1619              		.loc 1 388 1 is_stmt 1 view -0
 1620              		.cfi_startproc
 1621              		@ args = 0, pretend = 0, frame = 0
 1622              		@ frame_needed = 0, uses_anonymous_args = 0
 388:Core/Src/deca_device.c ****     uint32 gpio_mode = dwt_read32bitoffsetreg(GPIO_CTRL_ID, GPIO_MODE_OFFSET);
 1623              		.loc 1 388 1 is_stmt 0 view .LVU343
 1624 0000 10B5     		push	{r4, lr}
 1625              	.LCFI53:
 1626              		.cfi_def_cfa_offset 8
 1627              		.cfi_offset 4, -8
 1628              		.cfi_offset 14, -4
 1629 0002 0446     		mov	r4, r0
 389:Core/Src/deca_device.c ****     gpio_mode &= ~(GPIO_MSGP4_MASK | GPIO_MSGP5_MASK | GPIO_MSGP6_MASK);
 1630              		.loc 1 389 5 is_stmt 1 view .LVU344
 389:Core/Src/deca_device.c ****     gpio_mode &= ~(GPIO_MSGP4_MASK | GPIO_MSGP5_MASK | GPIO_MSGP6_MASK);
 1631              		.loc 1 389 24 is_stmt 0 view .LVU345
 1632 0004 0021     		movs	r1, #0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 57


 1633 0006 2620     		movs	r0, #38
 1634              	.LVL139:
 389:Core/Src/deca_device.c ****     gpio_mode &= ~(GPIO_MSGP4_MASK | GPIO_MSGP5_MASK | GPIO_MSGP6_MASK);
 1635              		.loc 1 389 24 view .LVU346
 1636 0008 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 1637              	.LVL140:
 390:Core/Src/deca_device.c ****     if (lna_pa & DWT_LNA_ENABLE)
 1638              		.loc 1 390 5 is_stmt 1 view .LVU347
 390:Core/Src/deca_device.c ****     if (lna_pa & DWT_LNA_ENABLE)
 1639              		.loc 1 390 15 is_stmt 0 view .LVU348
 1640 000c 20F47C22 		bic	r2, r0, #1032192
 1641              	.LVL141:
 391:Core/Src/deca_device.c ****     {
 1642              		.loc 1 391 5 is_stmt 1 view .LVU349
 391:Core/Src/deca_device.c ****     {
 1643              		.loc 1 391 8 is_stmt 0 view .LVU350
 1644 0010 14F0010F 		tst	r4, #1
 1645 0014 01D0     		beq	.L102
 393:Core/Src/deca_device.c ****     }
 1646              		.loc 1 393 9 is_stmt 1 view .LVU351
 393:Core/Src/deca_device.c ****     }
 1647              		.loc 1 393 19 is_stmt 0 view .LVU352
 1648 0016 42F48022 		orr	r2, r2, #262144
 1649              	.LVL142:
 1650              	.L102:
 395:Core/Src/deca_device.c ****     {
 1651              		.loc 1 395 5 is_stmt 1 view .LVU353
 395:Core/Src/deca_device.c ****     {
 1652              		.loc 1 395 8 is_stmt 0 view .LVU354
 1653 001a 14F0020F 		tst	r4, #2
 1654 001e 01D0     		beq	.L103
 397:Core/Src/deca_device.c ****     }
 1655              		.loc 1 397 9 is_stmt 1 view .LVU355
 397:Core/Src/deca_device.c ****     }
 1656              		.loc 1 397 19 is_stmt 0 view .LVU356
 1657 0020 42F4A032 		orr	r2, r2, #81920
 1658              	.LVL143:
 1659              	.L103:
 399:Core/Src/deca_device.c **** }
 1660              		.loc 1 399 5 is_stmt 1 view .LVU357
 1661 0024 0021     		movs	r1, #0
 1662 0026 2620     		movs	r0, #38
 1663 0028 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 1664              	.LVL144:
 400:Core/Src/deca_device.c **** 
 1665              		.loc 1 400 1 is_stmt 0 view .LVU358
 1666 002c 10BD     		pop	{r4, pc}
 400:Core/Src/deca_device.c **** 
 1667              		.loc 1 400 1 view .LVU359
 1668              		.cfi_endproc
 1669              	.LFE5:
 1671              		.section	.text.dwt_enablegpioclocks,"ax",%progbits
 1672              		.align	1
 1673              		.global	dwt_enablegpioclocks
 1674              		.syntax unified
 1675              		.thumb
 1676              		.thumb_func
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 58


 1678              	dwt_enablegpioclocks:
 1679              	.LFB6:
 414:Core/Src/deca_device.c ****     uint32 pmsc_clock_ctrl = dwt_read32bitreg(PMSC_ID);
 1680              		.loc 1 414 1 is_stmt 1 view -0
 1681              		.cfi_startproc
 1682              		@ args = 0, pretend = 0, frame = 0
 1683              		@ frame_needed = 0, uses_anonymous_args = 0
 1684 0000 08B5     		push	{r3, lr}
 1685              	.LCFI54:
 1686              		.cfi_def_cfa_offset 8
 1687              		.cfi_offset 3, -8
 1688              		.cfi_offset 14, -4
 415:Core/Src/deca_device.c ****     dwt_write32bitreg(PMSC_ID, pmsc_clock_ctrl | PMSC_CTRL0_GPCE | PMSC_CTRL0_GPRN) ;
 1689              		.loc 1 415 5 view .LVU361
 415:Core/Src/deca_device.c ****     dwt_write32bitreg(PMSC_ID, pmsc_clock_ctrl | PMSC_CTRL0_GPCE | PMSC_CTRL0_GPRN) ;
 1690              		.loc 1 415 30 is_stmt 0 view .LVU362
 1691 0002 0021     		movs	r1, #0
 1692 0004 3620     		movs	r0, #54
 1693 0006 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 1694              	.LVL145:
 416:Core/Src/deca_device.c **** }
 1695              		.loc 1 416 5 is_stmt 1 view .LVU363
 1696 000a 40F44032 		orr	r2, r0, #196608
 1697 000e 0021     		movs	r1, #0
 1698 0010 3620     		movs	r0, #54
 1699              	.LVL146:
 416:Core/Src/deca_device.c **** }
 1700              		.loc 1 416 5 is_stmt 0 view .LVU364
 1701 0012 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 1702              	.LVL147:
 417:Core/Src/deca_device.c **** 
 1703              		.loc 1 417 1 view .LVU365
 1704 0016 08BD     		pop	{r3, pc}
 1705              		.cfi_endproc
 1706              	.LFE6:
 1708              		.section	.text.dwt_configuretxrf,"ax",%progbits
 1709              		.align	1
 1710              		.global	dwt_configuretxrf
 1711              		.syntax unified
 1712              		.thumb
 1713              		.thumb_func
 1715              	dwt_configuretxrf:
 1716              	.LVL148:
 1717              	.LFB15:
 605:Core/Src/deca_device.c **** 
 1718              		.loc 1 605 1 is_stmt 1 view -0
 1719              		.cfi_startproc
 1720              		@ args = 0, pretend = 0, frame = 0
 1721              		@ frame_needed = 0, uses_anonymous_args = 0
 605:Core/Src/deca_device.c **** 
 1722              		.loc 1 605 1 is_stmt 0 view .LVU367
 1723 0000 10B5     		push	{r4, lr}
 1724              	.LCFI55:
 1725              		.cfi_def_cfa_offset 8
 1726              		.cfi_offset 4, -8
 1727              		.cfi_offset 14, -4
 1728 0002 0446     		mov	r4, r0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 59


 608:Core/Src/deca_device.c **** 
 1729              		.loc 1 608 5 is_stmt 1 view .LVU368
 1730 0004 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 1731 0006 0B21     		movs	r1, #11
 1732 0008 2A20     		movs	r0, #42
 1733              	.LVL149:
 608:Core/Src/deca_device.c **** 
 1734              		.loc 1 608 5 is_stmt 0 view .LVU369
 1735 000a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 1736              	.LVL150:
 611:Core/Src/deca_device.c **** 
 1737              		.loc 1 611 5 is_stmt 1 view .LVU370
 1738 000e 6268     		ldr	r2, [r4, #4]
 1739 0010 0021     		movs	r1, #0
 1740 0012 1E20     		movs	r0, #30
 1741 0014 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 1742              	.LVL151:
 613:Core/Src/deca_device.c **** 
 1743              		.loc 1 613 1 is_stmt 0 view .LVU371
 1744 0018 10BD     		pop	{r4, pc}
 613:Core/Src/deca_device.c **** 
 1745              		.loc 1 613 1 view .LVU372
 1746              		.cfi_endproc
 1747              	.LFE15:
 1749              		.section	.text.dwt_writetxfctrl,"ax",%progbits
 1750              		.align	1
 1751              		.global	dwt_writetxfctrl
 1752              		.syntax unified
 1753              		.thumb
 1754              		.thumb_func
 1756              	dwt_writetxfctrl:
 1757              	.LVL152:
 1758              	.LFB21:
 882:Core/Src/deca_device.c **** 
 1759              		.loc 1 882 1 is_stmt 1 view -0
 1760              		.cfi_startproc
 1761              		@ args = 0, pretend = 0, frame = 0
 1762              		@ frame_needed = 0, uses_anonymous_args = 0
 882:Core/Src/deca_device.c **** 
 1763              		.loc 1 882 1 is_stmt 0 view .LVU374
 1764 0000 08B5     		push	{r3, lr}
 1765              	.LCFI56:
 1766              		.cfi_def_cfa_offset 8
 1767              		.cfi_offset 3, -8
 1768              		.cfi_offset 14, -4
 892:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, reg32);
 1769              		.loc 1 892 5 is_stmt 1 view .LVU375
 892:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, reg32);
 1770              		.loc 1 892 32 is_stmt 0 view .LVU376
 1771 0002 064B     		ldr	r3, .L111
 1772 0004 1B68     		ldr	r3, [r3]
 1773 0006 DB68     		ldr	r3, [r3, #12]
 892:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, reg32);
 1774              		.loc 1 892 42 view .LVU377
 1775 0008 1843     		orrs	r0, r0, r3
 1776              	.LVL153:
 892:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, reg32);
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 60


 1777              		.loc 1 892 58 view .LVU378
 1778 000a 40EA8150 		orr	r0, r0, r1, lsl #22
 1779              	.LVL154:
 893:Core/Src/deca_device.c **** } // end dwt_writetxfctrl()
 1780              		.loc 1 893 5 is_stmt 1 view .LVU379
 1781 000e 40EAC232 		orr	r2, r0, r2, lsl #15
 1782              	.LVL155:
 893:Core/Src/deca_device.c **** } // end dwt_writetxfctrl()
 1783              		.loc 1 893 5 is_stmt 0 view .LVU380
 1784 0012 0021     		movs	r1, #0
 1785              	.LVL156:
 893:Core/Src/deca_device.c **** } // end dwt_writetxfctrl()
 1786              		.loc 1 893 5 view .LVU381
 1787 0014 0820     		movs	r0, #8
 1788 0016 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 1789              	.LVL157:
 894:Core/Src/deca_device.c **** 
 1790              		.loc 1 894 1 view .LVU382
 1791 001a 08BD     		pop	{r3, pc}
 1792              	.L112:
 1793              		.align	2
 1794              	.L111:
 1795 001c 00000000 		.word	.LANCHOR1
 1796              		.cfi_endproc
 1797              	.LFE21:
 1799              		.section	.text.dwt_enableframefilter,"ax",%progbits
 1800              		.align	1
 1801              		.global	dwt_enableframefilter
 1802              		.syntax unified
 1803              		.thumb
 1804              		.thumb_func
 1806              	dwt_enableframefilter:
 1807              	.LVL158:
 1808              	.LFB42:
1417:Core/Src/deca_device.c **** 
1418:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1419:Core/Src/deca_device.c ****  * @fn dwt_enableframefilter()
1420:Core/Src/deca_device.c ****  *
1421:Core/Src/deca_device.c ****  * @brief This is used to enable the frame filtering - (the default option is to
1422:Core/Src/deca_device.c ****  * accept any data and ACK frames with correct destination address
1423:Core/Src/deca_device.c ****  *
1424:Core/Src/deca_device.c ****  * input parameters
1425:Core/Src/deca_device.c ****  * @param - bitmask - enables/disables the frame filtering options according to
1426:Core/Src/deca_device.c ****  *      DWT_FF_NOTYPE_EN        0x000   no frame types allowed
1427:Core/Src/deca_device.c ****  *      DWT_FF_COORD_EN         0x002   behave as coordinator (can receive frames with no destinati
1428:Core/Src/deca_device.c ****  *      DWT_FF_BEACON_EN        0x004   beacon frames allowed
1429:Core/Src/deca_device.c ****  *      DWT_FF_DATA_EN          0x008   data frames allowed
1430:Core/Src/deca_device.c ****  *      DWT_FF_ACK_EN           0x010   ack frames allowed
1431:Core/Src/deca_device.c ****  *      DWT_FF_MAC_EN           0x020   mac control frames allowed
1432:Core/Src/deca_device.c ****  *      DWT_FF_RSVD_EN          0x040   reserved frame types allowed
1433:Core/Src/deca_device.c ****  *
1434:Core/Src/deca_device.c ****  * output parameters
1435:Core/Src/deca_device.c ****  *
1436:Core/Src/deca_device.c ****  * no return value
1437:Core/Src/deca_device.c ****  */
1438:Core/Src/deca_device.c **** void dwt_enableframefilter(uint16 enable)
1439:Core/Src/deca_device.c **** {
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 61


 1809              		.loc 1 1439 1 is_stmt 1 view -0
 1810              		.cfi_startproc
 1811              		@ args = 0, pretend = 0, frame = 0
 1812              		@ frame_needed = 0, uses_anonymous_args = 0
 1813              		.loc 1 1439 1 is_stmt 0 view .LVU384
 1814 0000 10B5     		push	{r4, lr}
 1815              	.LCFI57:
 1816              		.cfi_def_cfa_offset 8
 1817              		.cfi_offset 4, -8
 1818              		.cfi_offset 14, -4
 1819 0002 0446     		mov	r4, r0
1440:Core/Src/deca_device.c ****     uint32 sysconfig = SYS_CFG_MASK & dwt_read32bitreg(SYS_CFG_ID) ; // Read sysconfig register
 1820              		.loc 1 1440 5 is_stmt 1 view .LVU385
 1821              		.loc 1 1440 39 is_stmt 0 view .LVU386
 1822 0004 0021     		movs	r1, #0
 1823 0006 0420     		movs	r0, #4
 1824              	.LVL159:
 1825              		.loc 1 1440 39 view .LVU387
 1826 0008 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 1827              	.LVL160:
1441:Core/Src/deca_device.c **** 
1442:Core/Src/deca_device.c ****     if(enable)
 1828              		.loc 1 1442 5 is_stmt 1 view .LVU388
 1829              		.loc 1 1442 7 is_stmt 0 view .LVU389
 1830 000c 74B1     		cbz	r4, .L114
1443:Core/Src/deca_device.c ****     {
1444:Core/Src/deca_device.c ****         // Enable frame filtering and configure frame types
1445:Core/Src/deca_device.c ****         sysconfig &= ~(SYS_CFG_FF_ALL_EN); // Clear all
 1831              		.loc 1 1445 9 is_stmt 1 view .LVU390
 1832              		.loc 1 1445 19 is_stmt 0 view .LVU391
 1833 000e 094B     		ldr	r3, .L117
 1834 0010 0340     		ands	r3, r3, r0
 1835              	.LVL161:
1446:Core/Src/deca_device.c ****         sysconfig |= (enable & SYS_CFG_FF_ALL_EN) | SYS_CFG_FFE;
 1836              		.loc 1 1446 9 is_stmt 1 view .LVU392
 1837              		.loc 1 1446 30 is_stmt 0 view .LVU393
 1838 0012 04F4FF72 		and	r2, r4, #510
 1839              		.loc 1 1446 19 view .LVU394
 1840 0016 1A43     		orrs	r2, r2, r3
 1841 0018 42F00102 		orr	r2, r2, #1
 1842              	.LVL162:
 1843              	.L115:
1447:Core/Src/deca_device.c ****     }
1448:Core/Src/deca_device.c ****     else
1449:Core/Src/deca_device.c ****     {
1450:Core/Src/deca_device.c ****         sysconfig &= ~(SYS_CFG_FFE);
1451:Core/Src/deca_device.c ****     }
1452:Core/Src/deca_device.c **** 
1453:Core/Src/deca_device.c ****     pdw1000local->sysCFGreg = sysconfig ;
 1844              		.loc 1 1453 5 is_stmt 1 view .LVU395
 1845              		.loc 1 1453 17 is_stmt 0 view .LVU396
 1846 001c 064B     		ldr	r3, .L117+4
 1847 001e 1B68     		ldr	r3, [r3]
 1848              		.loc 1 1453 29 view .LVU397
 1849 0020 1A61     		str	r2, [r3, #16]
1454:Core/Src/deca_device.c ****     dwt_write32bitreg(SYS_CFG_ID,sysconfig) ;
 1850              		.loc 1 1454 5 is_stmt 1 view .LVU398
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 62


 1851 0022 0021     		movs	r1, #0
 1852 0024 0420     		movs	r0, #4
 1853 0026 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 1854              	.LVL163:
1455:Core/Src/deca_device.c **** }
 1855              		.loc 1 1455 1 is_stmt 0 view .LVU399
 1856 002a 10BD     		pop	{r4, pc}
 1857              	.LVL164:
 1858              	.L114:
1450:Core/Src/deca_device.c ****     }
 1859              		.loc 1 1450 9 is_stmt 1 view .LVU400
1450:Core/Src/deca_device.c ****     }
 1860              		.loc 1 1450 19 is_stmt 0 view .LVU401
 1861 002c 034A     		ldr	r2, .L117+8
 1862 002e 0240     		ands	r2, r2, r0
 1863              	.LVL165:
1450:Core/Src/deca_device.c ****     }
 1864              		.loc 1 1450 19 view .LVU402
 1865 0030 F4E7     		b	.L115
 1866              	.L118:
 1867 0032 00BF     		.align	2
 1868              	.L117:
 1869 0034 01FE47F0 		.word	-263717375
 1870 0038 00000000 		.word	.LANCHOR1
 1871 003c FEFF47F0 		.word	-263716866
 1872              		.cfi_endproc
 1873              	.LFE42:
 1875              		.section	.text.dwt_setpanid,"ax",%progbits
 1876              		.align	1
 1877              		.global	dwt_setpanid
 1878              		.syntax unified
 1879              		.thumb
 1880              		.thumb_func
 1882              	dwt_setpanid:
 1883              	.LVL166:
 1884              	.LFB43:
1456:Core/Src/deca_device.c **** 
1457:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1458:Core/Src/deca_device.c ****  * @fn dwt_setpanid()
1459:Core/Src/deca_device.c ****  *
1460:Core/Src/deca_device.c ****  * @brief This is used to set the PAN ID
1461:Core/Src/deca_device.c ****  *
1462:Core/Src/deca_device.c ****  * input parameters
1463:Core/Src/deca_device.c ****  * @param panID - this is the PAN ID
1464:Core/Src/deca_device.c ****  *
1465:Core/Src/deca_device.c ****  * output parameters
1466:Core/Src/deca_device.c ****  *
1467:Core/Src/deca_device.c ****  * no return value
1468:Core/Src/deca_device.c ****  */
1469:Core/Src/deca_device.c **** void dwt_setpanid(uint16 panID)
1470:Core/Src/deca_device.c **** {
 1885              		.loc 1 1470 1 is_stmt 1 view -0
 1886              		.cfi_startproc
 1887              		@ args = 0, pretend = 0, frame = 0
 1888              		@ frame_needed = 0, uses_anonymous_args = 0
 1889              		.loc 1 1470 1 is_stmt 0 view .LVU404
 1890 0000 08B5     		push	{r3, lr}
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 63


 1891              	.LCFI58:
 1892              		.cfi_def_cfa_offset 8
 1893              		.cfi_offset 3, -8
 1894              		.cfi_offset 14, -4
 1895 0002 0246     		mov	r2, r0
1471:Core/Src/deca_device.c ****     // PAN ID is high 16 bits of register
1472:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(PANADR_ID, PANADR_PAN_ID_OFFSET, panID);
 1896              		.loc 1 1472 5 is_stmt 1 view .LVU405
 1897 0004 0221     		movs	r1, #2
 1898 0006 0320     		movs	r0, #3
 1899              	.LVL167:
 1900              		.loc 1 1472 5 is_stmt 0 view .LVU406
 1901 0008 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 1902              	.LVL168:
1473:Core/Src/deca_device.c **** }
 1903              		.loc 1 1473 1 view .LVU407
 1904 000c 08BD     		pop	{r3, pc}
 1905              		.cfi_endproc
 1906              	.LFE43:
 1908              		.section	.text.dwt_setaddress16,"ax",%progbits
 1909              		.align	1
 1910              		.global	dwt_setaddress16
 1911              		.syntax unified
 1912              		.thumb
 1913              		.thumb_func
 1915              	dwt_setaddress16:
 1916              	.LVL169:
 1917              	.LFB44:
1474:Core/Src/deca_device.c **** 
1475:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1476:Core/Src/deca_device.c ****  * @fn dwt_setaddress16()
1477:Core/Src/deca_device.c ****  *
1478:Core/Src/deca_device.c ****  * @brief This is used to set 16-bit (short) address
1479:Core/Src/deca_device.c ****  *
1480:Core/Src/deca_device.c ****  * input parameters
1481:Core/Src/deca_device.c ****  * @param shortAddress - this sets the 16 bit short address
1482:Core/Src/deca_device.c ****  *
1483:Core/Src/deca_device.c ****  * output parameters
1484:Core/Src/deca_device.c ****  *
1485:Core/Src/deca_device.c ****  * no return value
1486:Core/Src/deca_device.c ****  */
1487:Core/Src/deca_device.c **** void dwt_setaddress16(uint16 shortAddress)
1488:Core/Src/deca_device.c **** {
 1918              		.loc 1 1488 1 is_stmt 1 view -0
 1919              		.cfi_startproc
 1920              		@ args = 0, pretend = 0, frame = 0
 1921              		@ frame_needed = 0, uses_anonymous_args = 0
 1922              		.loc 1 1488 1 is_stmt 0 view .LVU409
 1923 0000 08B5     		push	{r3, lr}
 1924              	.LCFI59:
 1925              		.cfi_def_cfa_offset 8
 1926              		.cfi_offset 3, -8
 1927              		.cfi_offset 14, -4
 1928 0002 0246     		mov	r2, r0
1489:Core/Src/deca_device.c ****     // Short address into low 16 bits
1490:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(PANADR_ID, PANADR_SHORT_ADDR_OFFSET, shortAddress);
 1929              		.loc 1 1490 5 is_stmt 1 view .LVU410
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 64


 1930 0004 0021     		movs	r1, #0
 1931 0006 0320     		movs	r0, #3
 1932              	.LVL170:
 1933              		.loc 1 1490 5 is_stmt 0 view .LVU411
 1934 0008 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 1935              	.LVL171:
1491:Core/Src/deca_device.c **** }
 1936              		.loc 1 1491 1 view .LVU412
 1937 000c 08BD     		pop	{r3, pc}
 1938              		.cfi_endproc
 1939              	.LFE44:
 1941              		.section	.text.dwt_seteui,"ax",%progbits
 1942              		.align	1
 1943              		.global	dwt_seteui
 1944              		.syntax unified
 1945              		.thumb
 1946              		.thumb_func
 1948              	dwt_seteui:
 1949              	.LVL172:
 1950              	.LFB45:
1492:Core/Src/deca_device.c **** 
1493:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1494:Core/Src/deca_device.c ****  * @fn dwt_seteui()
1495:Core/Src/deca_device.c ****  *
1496:Core/Src/deca_device.c ****  * @brief This is used to set the EUI 64-bit (long) address
1497:Core/Src/deca_device.c ****  *
1498:Core/Src/deca_device.c ****  * input parameters
1499:Core/Src/deca_device.c ****  * @param eui64 - this is the pointer to a buffer that contains the 64bit address
1500:Core/Src/deca_device.c ****  *
1501:Core/Src/deca_device.c ****  * output parameters
1502:Core/Src/deca_device.c ****  *
1503:Core/Src/deca_device.c ****  * no return value
1504:Core/Src/deca_device.c ****  */
1505:Core/Src/deca_device.c **** void dwt_seteui(uint8 *eui64)
1506:Core/Src/deca_device.c **** {
 1951              		.loc 1 1506 1 is_stmt 1 view -0
 1952              		.cfi_startproc
 1953              		@ args = 0, pretend = 0, frame = 0
 1954              		@ frame_needed = 0, uses_anonymous_args = 0
 1955              		.loc 1 1506 1 is_stmt 0 view .LVU414
 1956 0000 08B5     		push	{r3, lr}
 1957              	.LCFI60:
 1958              		.cfi_def_cfa_offset 8
 1959              		.cfi_offset 3, -8
 1960              		.cfi_offset 14, -4
 1961 0002 0346     		mov	r3, r0
1507:Core/Src/deca_device.c ****     dwt_writetodevice(EUI_64_ID, EUI_64_OFFSET, EUI_64_LEN, eui64);
 1962              		.loc 1 1507 5 is_stmt 1 view .LVU415
 1963 0004 0822     		movs	r2, #8
 1964 0006 0021     		movs	r1, #0
 1965 0008 0120     		movs	r0, #1
 1966              	.LVL173:
 1967              		.loc 1 1507 5 is_stmt 0 view .LVU416
 1968 000a FFF7FEFF 		bl	dwt_writetodevice
 1969              	.LVL174:
1508:Core/Src/deca_device.c **** }
 1970              		.loc 1 1508 1 view .LVU417
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 65


 1971 000e 08BD     		pop	{r3, pc}
 1972              		.cfi_endproc
 1973              	.LFE45:
 1975              		.section	.text.dwt_geteui,"ax",%progbits
 1976              		.align	1
 1977              		.global	dwt_geteui
 1978              		.syntax unified
 1979              		.thumb
 1980              		.thumb_func
 1982              	dwt_geteui:
 1983              	.LVL175:
 1984              	.LFB46:
1509:Core/Src/deca_device.c **** 
1510:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1511:Core/Src/deca_device.c ****  * @fn dwt_geteui()
1512:Core/Src/deca_device.c ****  *
1513:Core/Src/deca_device.c ****  * @brief This is used to get the EUI 64-bit from the DW1000
1514:Core/Src/deca_device.c ****  *
1515:Core/Src/deca_device.c ****  * input parameters
1516:Core/Src/deca_device.c ****  * @param eui64 - this is the pointer to a buffer that will contain the read 64-bit EUI value
1517:Core/Src/deca_device.c ****  *
1518:Core/Src/deca_device.c ****  * output parameters
1519:Core/Src/deca_device.c ****  *
1520:Core/Src/deca_device.c ****  * no return value
1521:Core/Src/deca_device.c ****  */
1522:Core/Src/deca_device.c **** void dwt_geteui(uint8 *eui64)
1523:Core/Src/deca_device.c **** {
 1985              		.loc 1 1523 1 is_stmt 1 view -0
 1986              		.cfi_startproc
 1987              		@ args = 0, pretend = 0, frame = 0
 1988              		@ frame_needed = 0, uses_anonymous_args = 0
 1989              		.loc 1 1523 1 is_stmt 0 view .LVU419
 1990 0000 08B5     		push	{r3, lr}
 1991              	.LCFI61:
 1992              		.cfi_def_cfa_offset 8
 1993              		.cfi_offset 3, -8
 1994              		.cfi_offset 14, -4
 1995 0002 0346     		mov	r3, r0
1524:Core/Src/deca_device.c ****     dwt_readfromdevice(EUI_64_ID, EUI_64_OFFSET, EUI_64_LEN, eui64);
 1996              		.loc 1 1524 5 is_stmt 1 view .LVU420
 1997 0004 0822     		movs	r2, #8
 1998 0006 0021     		movs	r1, #0
 1999 0008 0120     		movs	r0, #1
 2000              	.LVL176:
 2001              		.loc 1 1524 5 is_stmt 0 view .LVU421
 2002 000a FFF7FEFF 		bl	dwt_readfromdevice
 2003              	.LVL177:
1525:Core/Src/deca_device.c **** }
 2004              		.loc 1 1525 1 view .LVU422
 2005 000e 08BD     		pop	{r3, pc}
 2006              		.cfi_endproc
 2007              	.LFE46:
 2009              		.section	.text._dwt_otpread,"ax",%progbits
 2010              		.align	1
 2011              		.global	_dwt_otpread
 2012              		.syntax unified
 2013              		.thumb
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 66


 2014              		.thumb_func
 2016              	_dwt_otpread:
 2017              	.LVL178:
 2018              	.LFB48:
1526:Core/Src/deca_device.c **** 
1527:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1528:Core/Src/deca_device.c ****  * @fn dwt_otpread()
1529:Core/Src/deca_device.c ****  *
1530:Core/Src/deca_device.c ****  * @brief This is used to read the OTP data from given address into provided array
1531:Core/Src/deca_device.c ****  *
1532:Core/Src/deca_device.c ****  * input parameters
1533:Core/Src/deca_device.c ****  * @param address - this is the OTP address to read from
1534:Core/Src/deca_device.c ****  * @param array - this is the pointer to the array into which to read the data
1535:Core/Src/deca_device.c ****  * @param length - this is the number of 32 bit words to read (array needs to be at least this leng
1536:Core/Src/deca_device.c ****  *
1537:Core/Src/deca_device.c ****  * output parameters
1538:Core/Src/deca_device.c ****  *
1539:Core/Src/deca_device.c ****  * no return value
1540:Core/Src/deca_device.c ****  */
1541:Core/Src/deca_device.c **** void dwt_otpread(uint16 address, uint32 *array, uint8 length)
1542:Core/Src/deca_device.c **** {
1543:Core/Src/deca_device.c ****     int i;
1544:Core/Src/deca_device.c **** 
1545:Core/Src/deca_device.c ****     _dwt_enableclocks(FORCE_SYS_XTI); // NOTE: Set system clock to XTAL - this is necessary to make
1546:Core/Src/deca_device.c **** 
1547:Core/Src/deca_device.c ****     for(i=0; i<length; i++)
1548:Core/Src/deca_device.c ****     {
1549:Core/Src/deca_device.c ****         array[i] = _dwt_otpread(address + i) ;
1550:Core/Src/deca_device.c ****     }
1551:Core/Src/deca_device.c **** 
1552:Core/Src/deca_device.c ****     _dwt_enableclocks(ENABLE_ALL_SEQ); // Restore system clock to PLL
1553:Core/Src/deca_device.c **** 
1554:Core/Src/deca_device.c ****     return ;
1555:Core/Src/deca_device.c **** }
1556:Core/Src/deca_device.c **** 
1557:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1558:Core/Src/deca_device.c ****  * @fn _dwt_otpread()
1559:Core/Src/deca_device.c ****  *
1560:Core/Src/deca_device.c ****  * @brief function to read the OTP memory. Ensure that MR,MRa,MRb are reset to 0.
1561:Core/Src/deca_device.c ****  *
1562:Core/Src/deca_device.c ****  * input parameters
1563:Core/Src/deca_device.c ****  * @param address - address to read at
1564:Core/Src/deca_device.c ****  *
1565:Core/Src/deca_device.c ****  * output parameters
1566:Core/Src/deca_device.c ****  *
1567:Core/Src/deca_device.c ****  * returns the 32bit of read data
1568:Core/Src/deca_device.c ****  */
1569:Core/Src/deca_device.c **** uint32 _dwt_otpread(uint16 address)
1570:Core/Src/deca_device.c **** {
 2019              		.loc 1 1570 1 is_stmt 1 view -0
 2020              		.cfi_startproc
 2021              		@ args = 0, pretend = 0, frame = 0
 2022              		@ frame_needed = 0, uses_anonymous_args = 0
 2023              		.loc 1 1570 1 is_stmt 0 view .LVU424
 2024 0000 08B5     		push	{r3, lr}
 2025              	.LCFI62:
 2026              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 67


 2027              		.cfi_offset 3, -8
 2028              		.cfi_offset 14, -4
 2029 0002 0246     		mov	r2, r0
1571:Core/Src/deca_device.c ****     uint32 ret_data;
 2030              		.loc 1 1571 5 is_stmt 1 view .LVU425
1572:Core/Src/deca_device.c **** 
1573:Core/Src/deca_device.c ****     // Write the address
1574:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(OTP_IF_ID, OTP_ADDR, address);
 2031              		.loc 1 1574 5 view .LVU426
 2032 0004 0421     		movs	r1, #4
 2033 0006 2D20     		movs	r0, #45
 2034              	.LVL179:
 2035              		.loc 1 1574 5 is_stmt 0 view .LVU427
 2036 0008 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 2037              	.LVL180:
1575:Core/Src/deca_device.c **** 
1576:Core/Src/deca_device.c ****     // Perform OTP Read - Manual read mode has to be set
1577:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(OTP_IF_ID, OTP_CTRL, OTP_CTRL_OTPREAD | OTP_CTRL_OTPRDEN);
 2038              		.loc 1 1577 5 is_stmt 1 view .LVU428
 2039 000c 0322     		movs	r2, #3
 2040 000e 0621     		movs	r1, #6
 2041 0010 2D20     		movs	r0, #45
 2042 0012 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 2043              	.LVL181:
1578:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(OTP_IF_ID, OTP_CTRL, 0x00); // OTPREAD is self clearing but OTPRDEN is n
 2044              		.loc 1 1578 5 view .LVU429
 2045 0016 0022     		movs	r2, #0
 2046 0018 0621     		movs	r1, #6
 2047 001a 2D20     		movs	r0, #45
 2048 001c FFF7FEFF 		bl	dwt_write8bitoffsetreg
 2049              	.LVL182:
1579:Core/Src/deca_device.c **** 
1580:Core/Src/deca_device.c ****     // Read read data, available 40ns after rising edge of OTP_READ
1581:Core/Src/deca_device.c ****     ret_data = dwt_read32bitoffsetreg(OTP_IF_ID, OTP_RDAT);
 2050              		.loc 1 1581 5 view .LVU430
 2051              		.loc 1 1581 16 is_stmt 0 view .LVU431
 2052 0020 0A21     		movs	r1, #10
 2053 0022 2D20     		movs	r0, #45
 2054 0024 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 2055              	.LVL183:
1582:Core/Src/deca_device.c **** 
1583:Core/Src/deca_device.c ****     // Return the 32bit of read data
1584:Core/Src/deca_device.c ****     return ret_data;
 2056              		.loc 1 1584 5 is_stmt 1 view .LVU432
1585:Core/Src/deca_device.c **** }
 2057              		.loc 1 1585 1 is_stmt 0 view .LVU433
 2058 0028 08BD     		pop	{r3, pc}
 2059              		.cfi_endproc
 2060              	.LFE48:
 2062              		.section	.text._dwt_otpsetmrregs,"ax",%progbits
 2063              		.align	1
 2064              		.global	_dwt_otpsetmrregs
 2065              		.syntax unified
 2066              		.thumb
 2067              		.thumb_func
 2069              	_dwt_otpsetmrregs:
 2070              	.LVL184:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 68


 2071              	.LFB49:
1586:Core/Src/deca_device.c **** 
1587:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1588:Core/Src/deca_device.c ****  * @fn _dwt_otpsetmrregs()
1589:Core/Src/deca_device.c ****  *
1590:Core/Src/deca_device.c ****  * @brief Configure the MR registers for initial programming (enable charge pump).
1591:Core/Src/deca_device.c ****  * Read margin is used to stress the read back from the
1592:Core/Src/deca_device.c ****  * programmed bit. In normal operation this is relaxed.
1593:Core/Src/deca_device.c ****  *
1594:Core/Src/deca_device.c ****  * input parameters
1595:Core/Src/deca_device.c ****  * @param mode - "0" : Reset all to 0x0:           MRA=0x0000, MRB=0x0000, MR=0x0000
1596:Core/Src/deca_device.c ****  *               "1" : Set for inital programming: MRA=0x9220, MRB=0x000E, MR=0x1024
1597:Core/Src/deca_device.c ****  *               "2" : Set for soak programming:   MRA=0x9220, MRB=0x0003, MR=0x1824
1598:Core/Src/deca_device.c ****  *               "3" : High Vpp:                   MRA=0x9220, MRB=0x004E, MR=0x1824
1599:Core/Src/deca_device.c ****  *               "4" : Low Read Margin:            MRA=0x0000, MRB=0x0003, MR=0x0000
1600:Core/Src/deca_device.c ****  *               "5" : Array Clean:                MRA=0x0049, MRB=0x0003, MR=0x0024
1601:Core/Src/deca_device.c ****  *               "4" : Very Low Read Margin:       MRA=0x0000, MRB=0x0003, MR=0x0000
1602:Core/Src/deca_device.c ****  *
1603:Core/Src/deca_device.c ****  * output parameters
1604:Core/Src/deca_device.c ****  *
1605:Core/Src/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error
1606:Core/Src/deca_device.c ****  */
1607:Core/Src/deca_device.c **** uint32 _dwt_otpsetmrregs(int mode)
1608:Core/Src/deca_device.c **** {
 2072              		.loc 1 1608 1 is_stmt 1 view -0
 2073              		.cfi_startproc
 2074              		@ args = 0, pretend = 0, frame = 8
 2075              		@ frame_needed = 0, uses_anonymous_args = 0
 2076              		.loc 1 1608 1 is_stmt 0 view .LVU435
 2077 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2078              	.LCFI63:
 2079              		.cfi_def_cfa_offset 32
 2080              		.cfi_offset 4, -32
 2081              		.cfi_offset 5, -28
 2082              		.cfi_offset 6, -24
 2083              		.cfi_offset 7, -20
 2084              		.cfi_offset 8, -16
 2085              		.cfi_offset 9, -12
 2086              		.cfi_offset 10, -8
 2087              		.cfi_offset 14, -4
 2088 0004 82B0     		sub	sp, sp, #8
 2089              	.LCFI64:
 2090              		.cfi_def_cfa_offset 40
 2091 0006 0446     		mov	r4, r0
1609:Core/Src/deca_device.c ****     uint8 wr_buf[4];
 2092              		.loc 1 1609 5 is_stmt 1 view .LVU436
1610:Core/Src/deca_device.c ****     uint32 mra=0,mrb=0,mr=0;
 2093              		.loc 1 1610 5 view .LVU437
 2094              	.LVL185:
1611:Core/Src/deca_device.c **** 
1612:Core/Src/deca_device.c ****     // PROGRAMME MRA
1613:Core/Src/deca_device.c ****     // Set MRA, MODE_SEL
1614:Core/Src/deca_device.c ****     wr_buf[0] = 0x03;
 2095              		.loc 1 1614 5 view .LVU438
 2096              		.loc 1 1614 15 is_stmt 0 view .LVU439
 2097 0008 0323     		movs	r3, #3
 2098 000a 8DF80430 		strb	r3, [sp, #4]
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 69


1615:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL+1,1,wr_buf);
 2099              		.loc 1 1615 5 is_stmt 1 view .LVU440
 2100 000e 01AB     		add	r3, sp, #4
 2101 0010 0122     		movs	r2, #1
 2102 0012 0721     		movs	r1, #7
 2103 0014 2D20     		movs	r0, #45
 2104              	.LVL186:
 2105              		.loc 1 1615 5 is_stmt 0 view .LVU441
 2106 0016 FFF7FEFF 		bl	dwt_writetodevice
 2107              	.LVL187:
1616:Core/Src/deca_device.c **** 
1617:Core/Src/deca_device.c ****     // Load data
1618:Core/Src/deca_device.c ****     switch(mode&0x0f) {
 2108              		.loc 1 1618 5 is_stmt 1 view .LVU442
 2109              		.loc 1 1618 16 is_stmt 0 view .LVU443
 2110 001a 04F00F00 		and	r0, r4, #15
 2111              		.loc 1 1618 5 view .LVU444
 2112 001e 0528     		cmp	r0, #5
 2113 0020 00F2CD80 		bhi	.L138
 2114 0024 DFE800F0 		tbb	[pc, r0]
 2115              	.L132:
 2116 0028 03       		.byte	(.L137-.L132)/2
 2117 0029 C5       		.byte	(.L139-.L132)/2
 2118 002a B1       		.byte	(.L135-.L132)/2
 2119 002b B7       		.byte	(.L134-.L132)/2
 2120 002c BD       		.byte	(.L133-.L132)/2
 2121 002d C1       		.byte	(.L131-.L132)/2
 2122              		.p2align 1
 2123              	.L137:
 2124 002e 0026     		movs	r6, #0
 2125 0030 3746     		mov	r7, r6
 2126 0032 3346     		mov	r3, r6
 2127              	.LVL188:
 2128              	.L136:
1619:Core/Src/deca_device.c ****     case 0x0 :
1620:Core/Src/deca_device.c ****         mr =0x0000;
1621:Core/Src/deca_device.c ****         mra=0x0000;
1622:Core/Src/deca_device.c ****         mrb=0x0000;
1623:Core/Src/deca_device.c ****         break;
1624:Core/Src/deca_device.c ****     case 0x1 :
1625:Core/Src/deca_device.c ****         mr =0x1024;
1626:Core/Src/deca_device.c ****         mra=0x9220; // Enable CPP mon
1627:Core/Src/deca_device.c ****         mrb=0x000e;
1628:Core/Src/deca_device.c ****         break;
1629:Core/Src/deca_device.c ****     case 0x2 :
1630:Core/Src/deca_device.c ****         mr =0x1824;
1631:Core/Src/deca_device.c ****         mra=0x9220;
1632:Core/Src/deca_device.c ****         mrb=0x0003;
1633:Core/Src/deca_device.c ****         break;
1634:Core/Src/deca_device.c ****     case 0x3 :
1635:Core/Src/deca_device.c ****         mr =0x1824;
1636:Core/Src/deca_device.c ****         mra=0x9220;
1637:Core/Src/deca_device.c ****         mrb=0x004e;
1638:Core/Src/deca_device.c ****         break;
1639:Core/Src/deca_device.c ****     case 0x4 :
1640:Core/Src/deca_device.c ****         mr =0x0000;
1641:Core/Src/deca_device.c ****         mra=0x0000;
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 70


1642:Core/Src/deca_device.c ****         mrb=0x0003;
1643:Core/Src/deca_device.c ****         break;
1644:Core/Src/deca_device.c ****     case 0x5 :
1645:Core/Src/deca_device.c ****         mr =0x0024;
1646:Core/Src/deca_device.c ****         mra=0x0000;
1647:Core/Src/deca_device.c ****         mrb=0x0003;
1648:Core/Src/deca_device.c ****         break;
1649:Core/Src/deca_device.c ****     default :
1650:Core/Src/deca_device.c ****         return DWT_ERROR;
1651:Core/Src/deca_device.c ****     }
1652:Core/Src/deca_device.c **** 
1653:Core/Src/deca_device.c ****     wr_buf[0] = mra & 0x00ff;
 2129              		.loc 1 1653 5 is_stmt 1 view .LVU445
 2130              		.loc 1 1653 15 is_stmt 0 view .LVU446
 2131 0034 8DF80430 		strb	r3, [sp, #4]
1654:Core/Src/deca_device.c ****     wr_buf[1] = (mra & 0xff00)>>8;
 2132              		.loc 1 1654 5 is_stmt 1 view .LVU447
 2133              		.loc 1 1654 31 is_stmt 0 view .LVU448
 2134 0038 1B0A     		lsrs	r3, r3, #8
 2135              	.LVL189:
 2136              		.loc 1 1654 15 view .LVU449
 2137 003a 8DF80530 		strb	r3, [sp, #5]
1655:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_WDAT,2,wr_buf);
 2138              		.loc 1 1655 5 is_stmt 1 view .LVU450
 2139 003e 01AB     		add	r3, sp, #4
 2140 0040 0222     		movs	r2, #2
 2141 0042 0021     		movs	r1, #0
 2142 0044 2D20     		movs	r0, #45
 2143 0046 FFF7FEFF 		bl	dwt_writetodevice
 2144              	.LVL190:
1656:Core/Src/deca_device.c **** 
1657:Core/Src/deca_device.c **** 
1658:Core/Src/deca_device.c ****     // Set WRITE_MR
1659:Core/Src/deca_device.c ****     wr_buf[0] = 0x08;
 2145              		.loc 1 1659 5 view .LVU451
 2146              		.loc 1 1659 15 is_stmt 0 view .LVU452
 2147 004a 4FF00808 		mov	r8, #8
 2148 004e 8DF80480 		strb	r8, [sp, #4]
1660:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 2149              		.loc 1 1660 5 is_stmt 1 view .LVU453
 2150 0052 01AB     		add	r3, sp, #4
 2151 0054 0122     		movs	r2, #1
 2152 0056 0621     		movs	r1, #6
 2153 0058 2D20     		movs	r0, #45
 2154 005a FFF7FEFF 		bl	dwt_writetodevice
 2155              	.LVL191:
1661:Core/Src/deca_device.c **** 
1662:Core/Src/deca_device.c ****     // Wait?
1663:Core/Src/deca_device.c ****     deca_sleep(2);
 2156              		.loc 1 1663 5 view .LVU454
 2157 005e 0220     		movs	r0, #2
 2158 0060 FFF7FEFF 		bl	deca_sleep
 2159              	.LVL192:
1664:Core/Src/deca_device.c **** 
1665:Core/Src/deca_device.c ****     // Set Clear Mode sel
1666:Core/Src/deca_device.c ****     wr_buf[0] = 0x02;
 2160              		.loc 1 1666 5 view .LVU455
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 71


 2161              		.loc 1 1666 15 is_stmt 0 view .LVU456
 2162 0064 0225     		movs	r5, #2
 2163 0066 8DF80450 		strb	r5, [sp, #4]
1667:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID,OTP_CTRL+1,1,wr_buf);
 2164              		.loc 1 1667 5 is_stmt 1 view .LVU457
 2165 006a 01AB     		add	r3, sp, #4
 2166 006c 0122     		movs	r2, #1
 2167 006e 0721     		movs	r1, #7
 2168 0070 2D20     		movs	r0, #45
 2169 0072 FFF7FEFF 		bl	dwt_writetodevice
 2170              	.LVL193:
1668:Core/Src/deca_device.c **** 
1669:Core/Src/deca_device.c ****     // Set AUX update, write MR
1670:Core/Src/deca_device.c ****     wr_buf[0] = 0x88;
 2171              		.loc 1 1670 5 view .LVU458
 2172              		.loc 1 1670 15 is_stmt 0 view .LVU459
 2173 0076 4FF0880A 		mov	r10, #136
 2174 007a 8DF804A0 		strb	r10, [sp, #4]
1671:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 2175              		.loc 1 1671 5 is_stmt 1 view .LVU460
 2176 007e 01AB     		add	r3, sp, #4
 2177 0080 0122     		movs	r2, #1
 2178 0082 0621     		movs	r1, #6
 2179 0084 2D20     		movs	r0, #45
 2180 0086 FFF7FEFF 		bl	dwt_writetodevice
 2181              	.LVL194:
1672:Core/Src/deca_device.c ****     // Clear write MR
1673:Core/Src/deca_device.c ****     wr_buf[0] = 0x80;
 2182              		.loc 1 1673 5 view .LVU461
 2183              		.loc 1 1673 15 is_stmt 0 view .LVU462
 2184 008a 4FF08009 		mov	r9, #128
 2185 008e 8DF80490 		strb	r9, [sp, #4]
1674:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 2186              		.loc 1 1674 5 is_stmt 1 view .LVU463
 2187 0092 01AB     		add	r3, sp, #4
 2188 0094 0122     		movs	r2, #1
 2189 0096 0621     		movs	r1, #6
 2190 0098 2D20     		movs	r0, #45
 2191 009a FFF7FEFF 		bl	dwt_writetodevice
 2192              	.LVL195:
1675:Core/Src/deca_device.c ****     // Clear AUX update
1676:Core/Src/deca_device.c ****     wr_buf[0] = 0x00;
 2193              		.loc 1 1676 5 view .LVU464
 2194              		.loc 1 1676 15 is_stmt 0 view .LVU465
 2195 009e 0024     		movs	r4, #0
 2196              	.LVL196:
 2197              		.loc 1 1676 15 view .LVU466
 2198 00a0 8DF80440 		strb	r4, [sp, #4]
1677:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 2199              		.loc 1 1677 5 is_stmt 1 view .LVU467
 2200 00a4 01AB     		add	r3, sp, #4
 2201 00a6 0122     		movs	r2, #1
 2202 00a8 0621     		movs	r1, #6
 2203 00aa 2D20     		movs	r0, #45
 2204 00ac FFF7FEFF 		bl	dwt_writetodevice
 2205              	.LVL197:
1678:Core/Src/deca_device.c **** 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 72


1679:Core/Src/deca_device.c ****     ///////////////////////////////////////////
1680:Core/Src/deca_device.c ****     // PROGRAM MRB
1681:Core/Src/deca_device.c ****     // Set SLOW, MRB, MODE_SEL
1682:Core/Src/deca_device.c ****     wr_buf[0] = 0x05;
 2206              		.loc 1 1682 5 view .LVU468
 2207              		.loc 1 1682 15 is_stmt 0 view .LVU469
 2208 00b0 0523     		movs	r3, #5
 2209 00b2 8DF80430 		strb	r3, [sp, #4]
1683:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID,OTP_CTRL+1,1,wr_buf);
 2210              		.loc 1 1683 5 is_stmt 1 view .LVU470
 2211 00b6 01AB     		add	r3, sp, #4
 2212 00b8 0122     		movs	r2, #1
 2213 00ba 0721     		movs	r1, #7
 2214 00bc 2D20     		movs	r0, #45
 2215 00be FFF7FEFF 		bl	dwt_writetodevice
 2216              	.LVL198:
1684:Core/Src/deca_device.c **** 
1685:Core/Src/deca_device.c ****     wr_buf[0] = mrb & 0x00ff;
 2217              		.loc 1 1685 5 view .LVU471
 2218              		.loc 1 1685 15 is_stmt 0 view .LVU472
 2219 00c2 8DF80470 		strb	r7, [sp, #4]
1686:Core/Src/deca_device.c ****     wr_buf[1] = (mrb & 0xff00)>>8;
 2220              		.loc 1 1686 5 is_stmt 1 view .LVU473
 2221              		.loc 1 1686 31 is_stmt 0 view .LVU474
 2222 00c6 27FA08F7 		lsr	r7, r7, r8
 2223              	.LVL199:
 2224              		.loc 1 1686 15 view .LVU475
 2225 00ca 8DF80570 		strb	r7, [sp, #5]
1687:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_WDAT,2,wr_buf);
 2226              		.loc 1 1687 5 is_stmt 1 view .LVU476
 2227 00ce 01AB     		add	r3, sp, #4
 2228 00d0 2A46     		mov	r2, r5
 2229 00d2 2146     		mov	r1, r4
 2230 00d4 2D20     		movs	r0, #45
 2231 00d6 FFF7FEFF 		bl	dwt_writetodevice
 2232              	.LVL200:
1688:Core/Src/deca_device.c **** 
1689:Core/Src/deca_device.c ****     // Set WRITE_MR
1690:Core/Src/deca_device.c ****     wr_buf[0] = 0x08;
 2233              		.loc 1 1690 5 view .LVU477
 2234              		.loc 1 1690 15 is_stmt 0 view .LVU478
 2235 00da 8DF80480 		strb	r8, [sp, #4]
1691:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 2236              		.loc 1 1691 5 is_stmt 1 view .LVU479
 2237 00de 01AB     		add	r3, sp, #4
 2238 00e0 0122     		movs	r2, #1
 2239 00e2 0621     		movs	r1, #6
 2240 00e4 2D20     		movs	r0, #45
 2241 00e6 FFF7FEFF 		bl	dwt_writetodevice
 2242              	.LVL201:
1692:Core/Src/deca_device.c **** 
1693:Core/Src/deca_device.c ****     // Wait?
1694:Core/Src/deca_device.c ****     deca_sleep(2);
 2243              		.loc 1 1694 5 view .LVU480
 2244 00ea 2846     		mov	r0, r5
 2245 00ec FFF7FEFF 		bl	deca_sleep
 2246              	.LVL202:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 73


1695:Core/Src/deca_device.c **** 
1696:Core/Src/deca_device.c ****     // Set Clear Mode sel
1697:Core/Src/deca_device.c ****     wr_buf[0] = 0x04;
 2247              		.loc 1 1697 5 view .LVU481
 2248              		.loc 1 1697 15 is_stmt 0 view .LVU482
 2249 00f0 0423     		movs	r3, #4
 2250 00f2 8DF80430 		strb	r3, [sp, #4]
1698:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID,OTP_CTRL+1,1,wr_buf);
 2251              		.loc 1 1698 5 is_stmt 1 view .LVU483
 2252 00f6 6B44     		add	r3, sp, r3
 2253 00f8 0122     		movs	r2, #1
 2254 00fa 0721     		movs	r1, #7
 2255 00fc 2D20     		movs	r0, #45
 2256 00fe FFF7FEFF 		bl	dwt_writetodevice
 2257              	.LVL203:
1699:Core/Src/deca_device.c **** 
1700:Core/Src/deca_device.c ****     // Set AUX update, write MR
1701:Core/Src/deca_device.c ****     wr_buf[0] = 0x88;
 2258              		.loc 1 1701 5 view .LVU484
 2259              		.loc 1 1701 15 is_stmt 0 view .LVU485
 2260 0102 8DF804A0 		strb	r10, [sp, #4]
1702:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 2261              		.loc 1 1702 5 is_stmt 1 view .LVU486
 2262 0106 01AB     		add	r3, sp, #4
 2263 0108 0122     		movs	r2, #1
 2264 010a 0621     		movs	r1, #6
 2265 010c 2D20     		movs	r0, #45
 2266 010e FFF7FEFF 		bl	dwt_writetodevice
 2267              	.LVL204:
1703:Core/Src/deca_device.c ****     // Clear write MR
1704:Core/Src/deca_device.c ****     wr_buf[0] = 0x80;
 2268              		.loc 1 1704 5 view .LVU487
 2269              		.loc 1 1704 15 is_stmt 0 view .LVU488
 2270 0112 8DF80490 		strb	r9, [sp, #4]
1705:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 2271              		.loc 1 1705 5 is_stmt 1 view .LVU489
 2272 0116 01AB     		add	r3, sp, #4
 2273 0118 0122     		movs	r2, #1
 2274 011a 0621     		movs	r1, #6
 2275 011c 2D20     		movs	r0, #45
 2276 011e FFF7FEFF 		bl	dwt_writetodevice
 2277              	.LVL205:
1706:Core/Src/deca_device.c ****     // Clear AUX update
1707:Core/Src/deca_device.c ****     wr_buf[0] = 0x00;
 2278              		.loc 1 1707 5 view .LVU490
 2279              		.loc 1 1707 15 is_stmt 0 view .LVU491
 2280 0122 8DF80440 		strb	r4, [sp, #4]
1708:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 2281              		.loc 1 1708 5 is_stmt 1 view .LVU492
 2282 0126 01AB     		add	r3, sp, #4
 2283 0128 0122     		movs	r2, #1
 2284 012a 0621     		movs	r1, #6
 2285 012c 2D20     		movs	r0, #45
 2286 012e FFF7FEFF 		bl	dwt_writetodevice
 2287              	.LVL206:
1709:Core/Src/deca_device.c **** 
1710:Core/Src/deca_device.c ****     ///////////////////////////////////////////
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 74


1711:Core/Src/deca_device.c ****     // PROGRAM MR
1712:Core/Src/deca_device.c ****     // Set SLOW, MODE_SEL
1713:Core/Src/deca_device.c ****     wr_buf[0] = 0x01;
 2288              		.loc 1 1713 5 view .LVU493
 2289              		.loc 1 1713 15 is_stmt 0 view .LVU494
 2290 0132 0127     		movs	r7, #1
 2291 0134 8DF80470 		strb	r7, [sp, #4]
1714:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID,OTP_CTRL+1,1,wr_buf);
 2292              		.loc 1 1714 5 is_stmt 1 view .LVU495
 2293 0138 01AB     		add	r3, sp, #4
 2294 013a 3A46     		mov	r2, r7
 2295 013c 0721     		movs	r1, #7
 2296 013e 2D20     		movs	r0, #45
 2297 0140 FFF7FEFF 		bl	dwt_writetodevice
 2298              	.LVL207:
1715:Core/Src/deca_device.c ****     // Load data
1716:Core/Src/deca_device.c **** 
1717:Core/Src/deca_device.c ****     wr_buf[0] = mr & 0x00ff;
 2299              		.loc 1 1717 5 view .LVU496
 2300              		.loc 1 1717 15 is_stmt 0 view .LVU497
 2301 0144 8DF80460 		strb	r6, [sp, #4]
1718:Core/Src/deca_device.c ****     wr_buf[1] = (mr & 0xff00)>>8;
 2302              		.loc 1 1718 5 is_stmt 1 view .LVU498
 2303              		.loc 1 1718 30 is_stmt 0 view .LVU499
 2304 0148 26FA08F6 		lsr	r6, r6, r8
 2305              	.LVL208:
 2306              		.loc 1 1718 15 view .LVU500
 2307 014c 8DF80560 		strb	r6, [sp, #5]
1719:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_WDAT,2,wr_buf);
 2308              		.loc 1 1719 5 is_stmt 1 view .LVU501
 2309 0150 01AB     		add	r3, sp, #4
 2310 0152 2A46     		mov	r2, r5
 2311 0154 2146     		mov	r1, r4
 2312 0156 2D20     		movs	r0, #45
 2313 0158 FFF7FEFF 		bl	dwt_writetodevice
 2314              	.LVL209:
1720:Core/Src/deca_device.c **** 
1721:Core/Src/deca_device.c ****     // Set WRITE_MR
1722:Core/Src/deca_device.c ****     wr_buf[0] = 0x08;
 2315              		.loc 1 1722 5 view .LVU502
 2316              		.loc 1 1722 15 is_stmt 0 view .LVU503
 2317 015c 8DF80480 		strb	r8, [sp, #4]
1723:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL,1,wr_buf);
 2318              		.loc 1 1723 5 is_stmt 1 view .LVU504
 2319 0160 01AB     		add	r3, sp, #4
 2320 0162 3A46     		mov	r2, r7
 2321 0164 0621     		movs	r1, #6
 2322 0166 2D20     		movs	r0, #45
 2323 0168 FFF7FEFF 		bl	dwt_writetodevice
 2324              	.LVL210:
1724:Core/Src/deca_device.c **** 
1725:Core/Src/deca_device.c ****     // Wait?
1726:Core/Src/deca_device.c ****     deca_sleep(2);
 2325              		.loc 1 1726 5 view .LVU505
 2326 016c 2846     		mov	r0, r5
 2327 016e FFF7FEFF 		bl	deca_sleep
 2328              	.LVL211:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 75


1727:Core/Src/deca_device.c ****     // Set Clear Mode sel
1728:Core/Src/deca_device.c ****     wr_buf[0] = 0x00;
 2329              		.loc 1 1728 5 view .LVU506
 2330              		.loc 1 1728 15 is_stmt 0 view .LVU507
 2331 0172 8DF80440 		strb	r4, [sp, #4]
1729:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID,OTP_CTRL+1,1,wr_buf);
 2332              		.loc 1 1729 5 is_stmt 1 view .LVU508
 2333 0176 01AB     		add	r3, sp, #4
 2334 0178 3A46     		mov	r2, r7
 2335 017a 0721     		movs	r1, #7
 2336 017c 2D20     		movs	r0, #45
 2337 017e FFF7FEFF 		bl	dwt_writetodevice
 2338              	.LVL212:
1730:Core/Src/deca_device.c **** 
1731:Core/Src/deca_device.c ****     return DWT_SUCCESS;
 2339              		.loc 1 1731 5 view .LVU509
 2340              		.loc 1 1731 12 is_stmt 0 view .LVU510
 2341 0182 2046     		mov	r0, r4
 2342              	.L129:
1732:Core/Src/deca_device.c **** }
 2343              		.loc 1 1732 1 view .LVU511
 2344 0184 02B0     		add	sp, sp, #8
 2345              	.LCFI65:
 2346              		.cfi_remember_state
 2347              		.cfi_def_cfa_offset 32
 2348              		@ sp needed
 2349 0186 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2350              	.LVL213:
 2351              	.L135:
 2352              	.LCFI66:
 2353              		.cfi_restore_state
1630:Core/Src/deca_device.c ****         mra=0x9220;
 2354              		.loc 1 1630 9 is_stmt 1 view .LVU512
1631:Core/Src/deca_device.c ****         mrb=0x0003;
 2355              		.loc 1 1631 9 view .LVU513
1632:Core/Src/deca_device.c ****         break;
 2356              		.loc 1 1632 9 view .LVU514
1633:Core/Src/deca_device.c ****     case 0x3 :
 2357              		.loc 1 1633 9 view .LVU515
1630:Core/Src/deca_device.c ****         mra=0x9220;
 2358              		.loc 1 1630 12 is_stmt 0 view .LVU516
 2359 018a 41F62406 		movw	r6, #6180
1632:Core/Src/deca_device.c ****         break;
 2360              		.loc 1 1632 12 view .LVU517
 2361 018e 0327     		movs	r7, #3
1631:Core/Src/deca_device.c ****         mrb=0x0003;
 2362              		.loc 1 1631 12 view .LVU518
 2363 0190 49F22023 		movw	r3, #37408
1633:Core/Src/deca_device.c ****     case 0x3 :
 2364              		.loc 1 1633 9 view .LVU519
 2365 0194 4EE7     		b	.L136
 2366              	.LVL214:
 2367              	.L134:
1635:Core/Src/deca_device.c ****         mra=0x9220;
 2368              		.loc 1 1635 9 is_stmt 1 view .LVU520
1636:Core/Src/deca_device.c ****         mrb=0x004e;
 2369              		.loc 1 1636 9 view .LVU521
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 76


1637:Core/Src/deca_device.c ****         break;
 2370              		.loc 1 1637 9 view .LVU522
1638:Core/Src/deca_device.c ****     case 0x4 :
 2371              		.loc 1 1638 9 view .LVU523
1635:Core/Src/deca_device.c ****         mra=0x9220;
 2372              		.loc 1 1635 12 is_stmt 0 view .LVU524
 2373 0196 41F62406 		movw	r6, #6180
1637:Core/Src/deca_device.c ****         break;
 2374              		.loc 1 1637 12 view .LVU525
 2375 019a 4E27     		movs	r7, #78
1636:Core/Src/deca_device.c ****         mrb=0x004e;
 2376              		.loc 1 1636 12 view .LVU526
 2377 019c 49F22023 		movw	r3, #37408
1638:Core/Src/deca_device.c ****     case 0x4 :
 2378              		.loc 1 1638 9 view .LVU527
 2379 01a0 48E7     		b	.L136
 2380              	.LVL215:
 2381              	.L133:
1640:Core/Src/deca_device.c ****         mra=0x0000;
 2382              		.loc 1 1640 9 is_stmt 1 view .LVU528
1641:Core/Src/deca_device.c ****         mrb=0x0003;
 2383              		.loc 1 1641 9 view .LVU529
1642:Core/Src/deca_device.c ****         break;
 2384              		.loc 1 1642 9 view .LVU530
1643:Core/Src/deca_device.c ****     case 0x5 :
 2385              		.loc 1 1643 9 view .LVU531
1640:Core/Src/deca_device.c ****         mra=0x0000;
 2386              		.loc 1 1640 12 is_stmt 0 view .LVU532
 2387 01a2 0026     		movs	r6, #0
1642:Core/Src/deca_device.c ****         break;
 2388              		.loc 1 1642 12 view .LVU533
 2389 01a4 0327     		movs	r7, #3
1641:Core/Src/deca_device.c ****         mrb=0x0003;
 2390              		.loc 1 1641 12 view .LVU534
 2391 01a6 3346     		mov	r3, r6
1643:Core/Src/deca_device.c ****     case 0x5 :
 2392              		.loc 1 1643 9 view .LVU535
 2393 01a8 44E7     		b	.L136
 2394              	.LVL216:
 2395              	.L131:
1645:Core/Src/deca_device.c ****         mra=0x0000;
 2396              		.loc 1 1645 9 is_stmt 1 view .LVU536
1646:Core/Src/deca_device.c ****         mrb=0x0003;
 2397              		.loc 1 1646 9 view .LVU537
1647:Core/Src/deca_device.c ****         break;
 2398              		.loc 1 1647 9 view .LVU538
1648:Core/Src/deca_device.c ****     default :
 2399              		.loc 1 1648 9 view .LVU539
1645:Core/Src/deca_device.c ****         mra=0x0000;
 2400              		.loc 1 1645 12 is_stmt 0 view .LVU540
 2401 01aa 2426     		movs	r6, #36
1647:Core/Src/deca_device.c ****         break;
 2402              		.loc 1 1647 12 view .LVU541
 2403 01ac 0327     		movs	r7, #3
1646:Core/Src/deca_device.c ****         mrb=0x0003;
 2404              		.loc 1 1646 12 view .LVU542
 2405 01ae 0023     		movs	r3, #0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 77


1648:Core/Src/deca_device.c ****     default :
 2406              		.loc 1 1648 9 view .LVU543
 2407 01b0 40E7     		b	.L136
 2408              	.LVL217:
 2409              	.L139:
1625:Core/Src/deca_device.c ****         mra=0x9220; // Enable CPP mon
 2410              		.loc 1 1625 12 view .LVU544
 2411 01b2 41F22406 		movw	r6, #4132
1627:Core/Src/deca_device.c ****         break;
 2412              		.loc 1 1627 12 view .LVU545
 2413 01b6 0E27     		movs	r7, #14
1626:Core/Src/deca_device.c ****         mrb=0x000e;
 2414              		.loc 1 1626 12 view .LVU546
 2415 01b8 49F22023 		movw	r3, #37408
 2416 01bc 3AE7     		b	.L136
 2417              	.L138:
1618:Core/Src/deca_device.c ****     case 0x0 :
 2418              		.loc 1 1618 5 view .LVU547
 2419 01be 4FF0FF30 		mov	r0, #-1
 2420 01c2 DFE7     		b	.L129
 2421              		.cfi_endproc
 2422              	.LFE49:
 2424              		.section	.text._dwt_otpprogword32,"ax",%progbits
 2425              		.align	1
 2426              		.global	_dwt_otpprogword32
 2427              		.syntax unified
 2428              		.thumb
 2429              		.thumb_func
 2431              	_dwt_otpprogword32:
 2432              	.LVL218:
 2433              	.LFB50:
1733:Core/Src/deca_device.c **** 
1734:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1735:Core/Src/deca_device.c ****  * @fn _dwt_otpprogword32()
1736:Core/Src/deca_device.c ****  *
1737:Core/Src/deca_device.c ****  * @brief function to program the OTP memory. Ensure that MR,MRa,MRb are reset to 0.
1738:Core/Src/deca_device.c ****  * VNM Charge pump needs to be enabled (see _dwt_otpsetmrregs)
1739:Core/Src/deca_device.c ****  * Note the address is only 11 bits long.
1740:Core/Src/deca_device.c ****  *
1741:Core/Src/deca_device.c ****  * input parameters
1742:Core/Src/deca_device.c ****  * @param address - address to read at
1743:Core/Src/deca_device.c ****  *
1744:Core/Src/deca_device.c ****  * output parameters
1745:Core/Src/deca_device.c ****  *
1746:Core/Src/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error
1747:Core/Src/deca_device.c ****  */
1748:Core/Src/deca_device.c **** uint32 _dwt_otpprogword32(uint32 data, uint16 address)
1749:Core/Src/deca_device.c **** {
 2434              		.loc 1 1749 1 is_stmt 1 view -0
 2435              		.cfi_startproc
 2436              		@ args = 0, pretend = 0, frame = 8
 2437              		@ frame_needed = 0, uses_anonymous_args = 0
 2438              		.loc 1 1749 1 is_stmt 0 view .LVU549
 2439 0000 10B5     		push	{r4, lr}
 2440              	.LCFI67:
 2441              		.cfi_def_cfa_offset 8
 2442              		.cfi_offset 4, -8
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 78


 2443              		.cfi_offset 14, -4
 2444 0002 82B0     		sub	sp, sp, #8
 2445              	.LCFI68:
 2446              		.cfi_def_cfa_offset 16
 2447 0004 0C46     		mov	r4, r1
1750:Core/Src/deca_device.c ****     uint8 rd_buf[1];
 2448              		.loc 1 1750 5 is_stmt 1 view .LVU550
1751:Core/Src/deca_device.c ****     uint8 wr_buf[4];
 2449              		.loc 1 1751 5 view .LVU551
1752:Core/Src/deca_device.c ****     uint8 otp_done;
 2450              		.loc 1 1752 5 view .LVU552
1753:Core/Src/deca_device.c **** 
1754:Core/Src/deca_device.c ****     // Write the data
1755:Core/Src/deca_device.c ****     wr_buf[3] = (data>>24) & 0xff;
 2451              		.loc 1 1755 5 view .LVU553
 2452              		.loc 1 1755 22 is_stmt 0 view .LVU554
 2453 0006 030E     		lsrs	r3, r0, #24
 2454              		.loc 1 1755 15 view .LVU555
 2455 0008 8DF80330 		strb	r3, [sp, #3]
1756:Core/Src/deca_device.c ****     wr_buf[2] = (data>>16) & 0xff;
 2456              		.loc 1 1756 5 is_stmt 1 view .LVU556
 2457              		.loc 1 1756 22 is_stmt 0 view .LVU557
 2458 000c 030C     		lsrs	r3, r0, #16
 2459              		.loc 1 1756 15 view .LVU558
 2460 000e 8DF80230 		strb	r3, [sp, #2]
1757:Core/Src/deca_device.c ****     wr_buf[1] = (data>>8) & 0xff;
 2461              		.loc 1 1757 5 is_stmt 1 view .LVU559
 2462              		.loc 1 1757 22 is_stmt 0 view .LVU560
 2463 0012 030A     		lsrs	r3, r0, #8
 2464              		.loc 1 1757 15 view .LVU561
 2465 0014 8DF80130 		strb	r3, [sp, #1]
1758:Core/Src/deca_device.c ****     wr_buf[0] = data & 0xff;
 2466              		.loc 1 1758 5 is_stmt 1 view .LVU562
 2467              		.loc 1 1758 15 is_stmt 0 view .LVU563
 2468 0018 8DF80000 		strb	r0, [sp]
1759:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_WDAT, 4, wr_buf);
 2469              		.loc 1 1759 5 is_stmt 1 view .LVU564
 2470 001c 6B46     		mov	r3, sp
 2471 001e 0422     		movs	r2, #4
 2472 0020 0021     		movs	r1, #0
 2473              	.LVL219:
 2474              		.loc 1 1759 5 is_stmt 0 view .LVU565
 2475 0022 2D20     		movs	r0, #45
 2476              	.LVL220:
 2477              		.loc 1 1759 5 view .LVU566
 2478 0024 FFF7FEFF 		bl	dwt_writetodevice
 2479              	.LVL221:
1760:Core/Src/deca_device.c **** 
1761:Core/Src/deca_device.c ****     // Write the address [10:0]
1762:Core/Src/deca_device.c ****     wr_buf[1] = (address>>8) & 0x07;
 2480              		.loc 1 1762 5 is_stmt 1 view .LVU567
 2481              		.loc 1 1762 30 is_stmt 0 view .LVU568
 2482 0028 C4F30223 		ubfx	r3, r4, #8, #3
 2483              		.loc 1 1762 15 view .LVU569
 2484 002c 8DF80130 		strb	r3, [sp, #1]
1763:Core/Src/deca_device.c ****     wr_buf[0] = address & 0xff;
 2485              		.loc 1 1763 5 is_stmt 1 view .LVU570
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 79


 2486              		.loc 1 1763 15 is_stmt 0 view .LVU571
 2487 0030 8DF80040 		strb	r4, [sp]
1764:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_ADDR, 2, wr_buf);
 2488              		.loc 1 1764 5 is_stmt 1 view .LVU572
 2489 0034 6B46     		mov	r3, sp
 2490 0036 0222     		movs	r2, #2
 2491 0038 0421     		movs	r1, #4
 2492 003a 2D20     		movs	r0, #45
 2493 003c FFF7FEFF 		bl	dwt_writetodevice
 2494              	.LVL222:
1765:Core/Src/deca_device.c **** 
1766:Core/Src/deca_device.c ****     // Enable Sequenced programming
1767:Core/Src/deca_device.c ****     wr_buf[0] = OTP_CTRL_OTPPROG;
 2495              		.loc 1 1767 5 view .LVU573
 2496              		.loc 1 1767 15 is_stmt 0 view .LVU574
 2497 0040 4023     		movs	r3, #64
 2498 0042 8DF80030 		strb	r3, [sp]
1768:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL, 1, wr_buf);
 2499              		.loc 1 1768 5 is_stmt 1 view .LVU575
 2500 0046 6B46     		mov	r3, sp
 2501 0048 0122     		movs	r2, #1
 2502 004a 0621     		movs	r1, #6
 2503 004c 2D20     		movs	r0, #45
 2504 004e FFF7FEFF 		bl	dwt_writetodevice
 2505              	.LVL223:
1769:Core/Src/deca_device.c ****     wr_buf[0] = 0x00; // And clear
 2506              		.loc 1 1769 5 view .LVU576
 2507              		.loc 1 1769 15 is_stmt 0 view .LVU577
 2508 0052 0023     		movs	r3, #0
 2509 0054 8DF80030 		strb	r3, [sp]
1770:Core/Src/deca_device.c ****     dwt_writetodevice(OTP_IF_ID, OTP_CTRL, 1, wr_buf);
 2510              		.loc 1 1770 5 is_stmt 1 view .LVU578
 2511 0058 6B46     		mov	r3, sp
 2512 005a 0122     		movs	r2, #1
 2513 005c 0621     		movs	r1, #6
 2514 005e 2D20     		movs	r0, #45
 2515 0060 FFF7FEFF 		bl	dwt_writetodevice
 2516              	.LVL224:
1771:Core/Src/deca_device.c **** 
1772:Core/Src/deca_device.c ****     // WAIT for status to flag PRGM OK..
1773:Core/Src/deca_device.c ****     otp_done = 0;
 2517              		.loc 1 1773 5 view .LVU579
1774:Core/Src/deca_device.c ****     while(otp_done == 0)
 2518              		.loc 1 1774 5 view .LVU580
 2519              	.L142:
 2520              		.loc 1 1774 10 view .LVU581
1775:Core/Src/deca_device.c ****     {
1776:Core/Src/deca_device.c ****         deca_sleep(1);
 2521              		.loc 1 1776 9 view .LVU582
 2522 0064 0120     		movs	r0, #1
 2523 0066 FFF7FEFF 		bl	deca_sleep
 2524              	.LVL225:
1777:Core/Src/deca_device.c ****         dwt_readfromdevice(OTP_IF_ID, OTP_STAT, 1, rd_buf);
 2525              		.loc 1 1777 9 view .LVU583
 2526 006a 01AB     		add	r3, sp, #4
 2527 006c 0122     		movs	r2, #1
 2528 006e 0821     		movs	r1, #8
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 80


 2529 0070 2D20     		movs	r0, #45
 2530 0072 FFF7FEFF 		bl	dwt_readfromdevice
 2531              	.LVL226:
1778:Core/Src/deca_device.c **** 
1779:Core/Src/deca_device.c ****         if((rd_buf[0] & 0x01) == 0x01)
 2532              		.loc 1 1779 9 view .LVU584
 2533              		.loc 1 1779 19 is_stmt 0 view .LVU585
 2534 0076 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 2535              		.loc 1 1779 11 view .LVU586
 2536 007a 13F0010F 		tst	r3, #1
 2537 007e F1D0     		beq	.L142
1780:Core/Src/deca_device.c ****         {
1781:Core/Src/deca_device.c ****             otp_done = 1;
1782:Core/Src/deca_device.c ****         }
1783:Core/Src/deca_device.c ****     }
1784:Core/Src/deca_device.c **** 
1785:Core/Src/deca_device.c ****     return DWT_SUCCESS;
1786:Core/Src/deca_device.c **** }
 2538              		.loc 1 1786 1 view .LVU587
 2539 0080 0020     		movs	r0, #0
 2540 0082 02B0     		add	sp, sp, #8
 2541              	.LCFI69:
 2542              		.cfi_def_cfa_offset 8
 2543              		@ sp needed
 2544 0084 10BD     		pop	{r4, pc}
 2545              		.cfi_endproc
 2546              	.LFE50:
 2548              		.section	.text._dwt_aonconfigupload,"ax",%progbits
 2549              		.align	1
 2550              		.global	_dwt_aonconfigupload
 2551              		.syntax unified
 2552              		.thumb
 2553              		.thumb_func
 2555              	_dwt_aonconfigupload:
 2556              	.LFB52:
1787:Core/Src/deca_device.c **** 
1788:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1789:Core/Src/deca_device.c ****  * @fn dwt_otpwriteandverify()
1790:Core/Src/deca_device.c ****  *
1791:Core/Src/deca_device.c ****  * @brief This is used to program 32-bit value into the DW1000 OTP memory.
1792:Core/Src/deca_device.c ****  *
1793:Core/Src/deca_device.c ****  * input parameters
1794:Core/Src/deca_device.c ****  * @param value - this is the 32-bit value to be programmed into OTP
1795:Core/Src/deca_device.c ****  * @param address - this is the 16-bit OTP address into which the 32-bit value is programmed
1796:Core/Src/deca_device.c ****  *
1797:Core/Src/deca_device.c ****  * output parameters
1798:Core/Src/deca_device.c ****  *
1799:Core/Src/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error
1800:Core/Src/deca_device.c ****  */
1801:Core/Src/deca_device.c **** int dwt_otpwriteandverify(uint32 value, uint16 address)
1802:Core/Src/deca_device.c **** {
1803:Core/Src/deca_device.c ****     int prog_ok = DWT_SUCCESS;
1804:Core/Src/deca_device.c ****     int retry = 0;
1805:Core/Src/deca_device.c ****     // Firstly set the system clock to crystal
1806:Core/Src/deca_device.c ****     _dwt_enableclocks(FORCE_SYS_XTI); //set system clock to XTI
1807:Core/Src/deca_device.c **** 
1808:Core/Src/deca_device.c ****     //
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 81


1809:Core/Src/deca_device.c ****     //!!!!!!!!!!!!!! NOTE !!!!!!!!!!!!!!!!!!!!!
1810:Core/Src/deca_device.c ****     //Set the supply to 3.7V
1811:Core/Src/deca_device.c ****     //
1812:Core/Src/deca_device.c **** 
1813:Core/Src/deca_device.c ****     _dwt_otpsetmrregs(1); // Set mode for programming
1814:Core/Src/deca_device.c **** 
1815:Core/Src/deca_device.c ****     // For each value to program - the readback/check is done couple of times to verify it has prog
1816:Core/Src/deca_device.c ****     while(1)
1817:Core/Src/deca_device.c ****     {
1818:Core/Src/deca_device.c ****         _dwt_otpprogword32(value, address);
1819:Core/Src/deca_device.c **** 
1820:Core/Src/deca_device.c ****         if(_dwt_otpread(address) == value)
1821:Core/Src/deca_device.c ****         {
1822:Core/Src/deca_device.c ****             break;
1823:Core/Src/deca_device.c ****         }
1824:Core/Src/deca_device.c ****         retry++;
1825:Core/Src/deca_device.c ****         if(retry==10)
1826:Core/Src/deca_device.c ****         {
1827:Core/Src/deca_device.c ****             break;
1828:Core/Src/deca_device.c ****         }
1829:Core/Src/deca_device.c ****     }
1830:Core/Src/deca_device.c **** 
1831:Core/Src/deca_device.c ****     // Even if the above does not exit before retry reaches 10, the programming has probably been s
1832:Core/Src/deca_device.c **** 
1833:Core/Src/deca_device.c ****     _dwt_otpsetmrregs(4); // Set mode for reading
1834:Core/Src/deca_device.c **** 
1835:Core/Src/deca_device.c ****     if(_dwt_otpread(address) != value) // If this does not pass please check voltage supply on VDDI
1836:Core/Src/deca_device.c ****     {
1837:Core/Src/deca_device.c ****         prog_ok = DWT_ERROR;
1838:Core/Src/deca_device.c ****     }
1839:Core/Src/deca_device.c **** 
1840:Core/Src/deca_device.c ****     _dwt_otpsetmrregs(0); // Setting OTP mode register for low RM read - resetting the device would
1841:Core/Src/deca_device.c **** 
1842:Core/Src/deca_device.c ****     return prog_ok;
1843:Core/Src/deca_device.c **** }
1844:Core/Src/deca_device.c **** 
1845:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1846:Core/Src/deca_device.c ****  * @fn _dwt_aonconfigupload()
1847:Core/Src/deca_device.c ****  *
1848:Core/Src/deca_device.c ****  * @brief This function uploads always on (AON) configuration, as set in the AON_CFG0_OFFSET regist
1849:Core/Src/deca_device.c ****  *
1850:Core/Src/deca_device.c ****  * input parameters
1851:Core/Src/deca_device.c ****  *
1852:Core/Src/deca_device.c ****  * output parameters
1853:Core/Src/deca_device.c ****  *
1854:Core/Src/deca_device.c ****  * no return value
1855:Core/Src/deca_device.c ****  */
1856:Core/Src/deca_device.c **** void _dwt_aonconfigupload(void)
1857:Core/Src/deca_device.c **** {
 2557              		.loc 1 1857 1 is_stmt 1 view -0
 2558              		.cfi_startproc
 2559              		@ args = 0, pretend = 0, frame = 0
 2560              		@ frame_needed = 0, uses_anonymous_args = 0
 2561 0000 08B5     		push	{r3, lr}
 2562              	.LCFI70:
 2563              		.cfi_def_cfa_offset 8
 2564              		.cfi_offset 3, -8
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 82


 2565              		.cfi_offset 14, -4
1858:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, AON_CTRL_UPL_CFG);
 2566              		.loc 1 1858 5 view .LVU589
 2567 0002 0422     		movs	r2, #4
 2568 0004 0221     		movs	r1, #2
 2569 0006 2C20     		movs	r0, #44
 2570 0008 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 2571              	.LVL227:
1859:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, 0x00); // Clear the register
 2572              		.loc 1 1859 5 view .LVU590
 2573 000c 0022     		movs	r2, #0
 2574 000e 0221     		movs	r1, #2
 2575 0010 2C20     		movs	r0, #44
 2576 0012 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 2577              	.LVL228:
1860:Core/Src/deca_device.c **** }
 2578              		.loc 1 1860 1 is_stmt 0 view .LVU591
 2579 0016 08BD     		pop	{r3, pc}
 2580              		.cfi_endproc
 2581              	.LFE52:
 2583              		.section	.text._dwt_aonarrayupload,"ax",%progbits
 2584              		.align	1
 2585              		.global	_dwt_aonarrayupload
 2586              		.syntax unified
 2587              		.thumb
 2588              		.thumb_func
 2590              	_dwt_aonarrayupload:
 2591              	.LFB53:
1861:Core/Src/deca_device.c **** 
1862:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1863:Core/Src/deca_device.c ****  * @fn _dwt_aonarrayupload()
1864:Core/Src/deca_device.c ****  *
1865:Core/Src/deca_device.c ****  * @brief This function uploads always on (AON) data array and configuration. Thus if this function
1866:Core/Src/deca_device.c ****  * is not necessary. The DW1000 will go so SLEEP straight after this if the DWT_SLP_EN has been set
1867:Core/Src/deca_device.c ****  *
1868:Core/Src/deca_device.c ****  * input parameters
1869:Core/Src/deca_device.c ****  *
1870:Core/Src/deca_device.c ****  * output parameters
1871:Core/Src/deca_device.c ****  *
1872:Core/Src/deca_device.c ****  * no return value
1873:Core/Src/deca_device.c ****  */
1874:Core/Src/deca_device.c **** void _dwt_aonarrayupload(void)
1875:Core/Src/deca_device.c **** {
 2592              		.loc 1 1875 1 is_stmt 1 view -0
 2593              		.cfi_startproc
 2594              		@ args = 0, pretend = 0, frame = 0
 2595              		@ frame_needed = 0, uses_anonymous_args = 0
 2596 0000 08B5     		push	{r3, lr}
 2597              	.LCFI71:
 2598              		.cfi_def_cfa_offset 8
 2599              		.cfi_offset 3, -8
 2600              		.cfi_offset 14, -4
1876:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, 0x00); // Clear the register
 2601              		.loc 1 1876 5 view .LVU593
 2602 0002 0022     		movs	r2, #0
 2603 0004 0221     		movs	r1, #2
 2604 0006 2C20     		movs	r0, #44
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 83


 2605 0008 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 2606              	.LVL229:
1877:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, AON_CTRL_SAVE);
 2607              		.loc 1 1877 5 view .LVU594
 2608 000c 0222     		movs	r2, #2
 2609 000e 1146     		mov	r1, r2
 2610 0010 2C20     		movs	r0, #44
 2611 0012 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 2612              	.LVL230:
1878:Core/Src/deca_device.c **** }
 2613              		.loc 1 1878 1 is_stmt 0 view .LVU595
 2614 0016 08BD     		pop	{r3, pc}
 2615              		.cfi_endproc
 2616              	.LFE53:
 2618              		.section	.text.dwt_entersleep,"ax",%progbits
 2619              		.align	1
 2620              		.global	dwt_entersleep
 2621              		.syntax unified
 2622              		.thumb
 2623              		.thumb_func
 2625              	dwt_entersleep:
 2626              	.LFB54:
1879:Core/Src/deca_device.c **** 
1880:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1881:Core/Src/deca_device.c ****  * @fn dwt_entersleep()
1882:Core/Src/deca_device.c ****  *
1883:Core/Src/deca_device.c ****  * @brief This function puts the device into deep sleep or sleep. dwt_configuresleep() should be ca
1884:Core/Src/deca_device.c ****  * to configure the sleep and on-wake/wake-up parameters
1885:Core/Src/deca_device.c ****  *
1886:Core/Src/deca_device.c ****  * input parameters
1887:Core/Src/deca_device.c ****  *
1888:Core/Src/deca_device.c ****  * output parameters
1889:Core/Src/deca_device.c ****  *
1890:Core/Src/deca_device.c ****  * no return value
1891:Core/Src/deca_device.c ****  */
1892:Core/Src/deca_device.c **** void dwt_entersleep(void)
1893:Core/Src/deca_device.c **** {
 2627              		.loc 1 1893 1 is_stmt 1 view -0
 2628              		.cfi_startproc
 2629              		@ args = 0, pretend = 0, frame = 0
 2630              		@ frame_needed = 0, uses_anonymous_args = 0
 2631 0000 08B5     		push	{r3, lr}
 2632              	.LCFI72:
 2633              		.cfi_def_cfa_offset 8
 2634              		.cfi_offset 3, -8
 2635              		.cfi_offset 14, -4
1894:Core/Src/deca_device.c ****     // Copy config to AON - upload the new configuration
1895:Core/Src/deca_device.c ****     _dwt_aonarrayupload();
 2636              		.loc 1 1895 5 view .LVU597
 2637 0002 FFF7FEFF 		bl	_dwt_aonarrayupload
 2638              	.LVL231:
1896:Core/Src/deca_device.c **** }
 2639              		.loc 1 1896 1 is_stmt 0 view .LVU598
 2640 0006 08BD     		pop	{r3, pc}
 2641              		.cfi_endproc
 2642              	.LFE54:
 2644              		.section	.text.dwt_configuresleep,"ax",%progbits
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 84


 2645              		.align	1
 2646              		.global	dwt_configuresleep
 2647              		.syntax unified
 2648              		.thumb
 2649              		.thumb_func
 2651              	dwt_configuresleep:
 2652              	.LVL232:
 2653              	.LFB57:
1897:Core/Src/deca_device.c **** 
1898:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1899:Core/Src/deca_device.c ****  * @fn dwt_configuresleepcnt()
1900:Core/Src/deca_device.c ****  *
1901:Core/Src/deca_device.c ****  * @brief sets the sleep counter to new value, this function programs the high 16-bits of the 28-bi
1902:Core/Src/deca_device.c ****  *
1903:Core/Src/deca_device.c ****  * NOTE: this function needs to be run before dwt_configuresleep, also the SPI frequency has to be 
1904:Core/Src/deca_device.c ****  *
1905:Core/Src/deca_device.c ****  * input parameters
1906:Core/Src/deca_device.c ****  * @param sleepcnt - this it value of the sleep counter to program
1907:Core/Src/deca_device.c ****  *
1908:Core/Src/deca_device.c ****  * output parameters
1909:Core/Src/deca_device.c ****  *
1910:Core/Src/deca_device.c ****  * no return value
1911:Core/Src/deca_device.c ****  */
1912:Core/Src/deca_device.c **** void dwt_configuresleepcnt(uint16 sleepcnt)
1913:Core/Src/deca_device.c **** {
1914:Core/Src/deca_device.c ****     // Force system clock to crystal
1915:Core/Src/deca_device.c ****     _dwt_enableclocks(FORCE_SYS_XTI);
1916:Core/Src/deca_device.c **** 
1917:Core/Src/deca_device.c ****     // Reset sleep configuration to make sure we don't accidentally go to sleep
1918:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG0_OFFSET, 0x00); // NB: this write change the default LPC
1919:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG1_OFFSET, 0x00);
1920:Core/Src/deca_device.c **** 
1921:Core/Src/deca_device.c ****     // Disable the sleep counter
1922:Core/Src/deca_device.c ****     _dwt_aonconfigupload();
1923:Core/Src/deca_device.c **** 
1924:Core/Src/deca_device.c ****     // Set new value
1925:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(AON_ID, AON_CFG0_OFFSET + AON_CFG0_SLEEP_TIM_OFFSET, sleepcnt);
1926:Core/Src/deca_device.c ****     _dwt_aonconfigupload();
1927:Core/Src/deca_device.c **** 
1928:Core/Src/deca_device.c ****     // Enable the sleep counter
1929:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG1_OFFSET, AON_CFG1_SLEEP_CEN);
1930:Core/Src/deca_device.c ****     _dwt_aonconfigupload();
1931:Core/Src/deca_device.c **** 
1932:Core/Src/deca_device.c ****     // Put system PLL back on
1933:Core/Src/deca_device.c ****     _dwt_enableclocks(ENABLE_ALL_SEQ);
1934:Core/Src/deca_device.c **** }
1935:Core/Src/deca_device.c **** 
1936:Core/Src/deca_device.c **** 
1937:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
1938:Core/Src/deca_device.c ****  * @fn dwt_calibratesleepcnt()
1939:Core/Src/deca_device.c ****  *
1940:Core/Src/deca_device.c ****  * @brief calibrates the local oscillator as its frequency can vary between 7 and 13kHz depending o
1941:Core/Src/deca_device.c ****  *
1942:Core/Src/deca_device.c ****  * NOTE: this function needs to be run before dwt_configuresleepcnt, so that we know what the count
1943:Core/Src/deca_device.c ****  *
1944:Core/Src/deca_device.c ****  * input parameters
1945:Core/Src/deca_device.c ****  *
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 85


1946:Core/Src/deca_device.c ****  * output parameters
1947:Core/Src/deca_device.c ****  *
1948:Core/Src/deca_device.c ****  * returns the number of XTAL/2 cycles per low-power oscillator cycle. LP OSC frequency = 19.2 MHz/
1949:Core/Src/deca_device.c ****  */
1950:Core/Src/deca_device.c **** uint16 dwt_calibratesleepcnt(void)
1951:Core/Src/deca_device.c **** {
1952:Core/Src/deca_device.c ****     uint16 result;
1953:Core/Src/deca_device.c **** 
1954:Core/Src/deca_device.c ****     // Enable calibration of the sleep counter
1955:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG1_OFFSET, AON_CFG1_LPOSC_CAL);
1956:Core/Src/deca_device.c ****     _dwt_aonconfigupload();
1957:Core/Src/deca_device.c **** 
1958:Core/Src/deca_device.c ****     // Disable calibration of the sleep counter
1959:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG1_OFFSET, 0x00);
1960:Core/Src/deca_device.c ****     _dwt_aonconfigupload();
1961:Core/Src/deca_device.c **** 
1962:Core/Src/deca_device.c ****     // Force system clock to crystal
1963:Core/Src/deca_device.c ****     _dwt_enableclocks(FORCE_SYS_XTI);
1964:Core/Src/deca_device.c **** 
1965:Core/Src/deca_device.c ****     deca_sleep(1);
1966:Core/Src/deca_device.c **** 
1967:Core/Src/deca_device.c ****     // Read the number of XTAL/2 cycles one LP oscillator cycle took.
1968:Core/Src/deca_device.c ****     // Set up address - Read upper byte first
1969:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_ADDR_OFFSET, AON_ADDR_LPOSC_CAL_1);
1970:Core/Src/deca_device.c **** 
1971:Core/Src/deca_device.c ****     // Enable manual override
1972:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, AON_CTRL_DCA_ENAB);
1973:Core/Src/deca_device.c **** 
1974:Core/Src/deca_device.c ****     // Read confirm data that was written
1975:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, AON_CTRL_DCA_ENAB | AON_CTRL_DCA_READ);
1976:Core/Src/deca_device.c **** 
1977:Core/Src/deca_device.c ****     // Read back byte from AON
1978:Core/Src/deca_device.c ****     result = dwt_read8bitoffsetreg(AON_ID, AON_RDAT_OFFSET);
1979:Core/Src/deca_device.c ****     result <<= 8;
1980:Core/Src/deca_device.c **** 
1981:Core/Src/deca_device.c ****     // Set up address - Read lower byte
1982:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_ADDR_OFFSET, AON_ADDR_LPOSC_CAL_0);
1983:Core/Src/deca_device.c **** 
1984:Core/Src/deca_device.c ****     // Enable manual override
1985:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, AON_CTRL_DCA_ENAB);
1986:Core/Src/deca_device.c **** 
1987:Core/Src/deca_device.c ****     // Read confirm data that was written
1988:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, AON_CTRL_DCA_ENAB | AON_CTRL_DCA_READ);
1989:Core/Src/deca_device.c **** 
1990:Core/Src/deca_device.c ****     // Read back byte from AON
1991:Core/Src/deca_device.c ****     result |= dwt_read8bitoffsetreg(AON_ID, AON_RDAT_OFFSET);
1992:Core/Src/deca_device.c **** 
1993:Core/Src/deca_device.c ****     // Disable manual override
1994:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CTRL_OFFSET, 0x00);
1995:Core/Src/deca_device.c **** 
1996:Core/Src/deca_device.c ****     // Put system PLL back on
1997:Core/Src/deca_device.c ****     _dwt_enableclocks(ENABLE_ALL_SEQ);
1998:Core/Src/deca_device.c **** 
1999:Core/Src/deca_device.c ****     // Returns the number of XTAL/2 cycles per one LP OSC cycle
2000:Core/Src/deca_device.c ****     // This can be converted into LP OSC frequency by 19.2 MHz/result
2001:Core/Src/deca_device.c ****     return result;
2002:Core/Src/deca_device.c **** }
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 86


2003:Core/Src/deca_device.c **** 
2004:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2005:Core/Src/deca_device.c ****  * @fn dwt_configuresleep()
2006:Core/Src/deca_device.c ****  *
2007:Core/Src/deca_device.c ****  * @brief configures the device for both DEEP_SLEEP and SLEEP modes, and on-wake mode
2008:Core/Src/deca_device.c ****  * i.e. before entering the sleep, the device should be programmed for TX or RX, then upon "waking 
2009:Core/Src/deca_device.c ****  * will be preserved and the device can immediately perform the desired action TX/RX
2010:Core/Src/deca_device.c ****  *
2011:Core/Src/deca_device.c ****  * NOTE: e.g. Tag operation - after deep sleep, the device needs to just load the TX buffer and sen
2012:Core/Src/deca_device.c ****  *
2013:Core/Src/deca_device.c ****  *
2014:Core/Src/deca_device.c ****  *      mode: the array and LDE code (OTP/ROM) and LDO tune, and set sleep persist
2015:Core/Src/deca_device.c ****  *      DWT_PRESRV_SLEEP 0x0100 - preserve sleep
2016:Core/Src/deca_device.c ****  *      DWT_LOADOPSET    0x0080 - load operating parameter set on wakeup
2017:Core/Src/deca_device.c ****  *      DWT_CONFIG       0x0040 - download the AON array into the HIF (configuration download)
2018:Core/Src/deca_device.c ****  *      DWT_LOADEUI      0x0008
2019:Core/Src/deca_device.c ****  *      DWT_GOTORX       0x0002
2020:Core/Src/deca_device.c ****  *      DWT_TANDV        0x0001
2021:Core/Src/deca_device.c ****  *
2022:Core/Src/deca_device.c ****  *      wake: wake up parameters
2023:Core/Src/deca_device.c ****  *      DWT_XTAL_EN      0x10 - keep XTAL running during sleep
2024:Core/Src/deca_device.c ****  *      DWT_WAKE_SLPCNT  0x8 - wake up after sleep count
2025:Core/Src/deca_device.c ****  *      DWT_WAKE_CS      0x4 - wake up on chip select
2026:Core/Src/deca_device.c ****  *      DWT_WAKE_WK      0x2 - wake up on WAKEUP PIN
2027:Core/Src/deca_device.c ****  *      DWT_SLP_EN       0x1 - enable sleep/deep sleep functionality
2028:Core/Src/deca_device.c ****  *
2029:Core/Src/deca_device.c ****  * input parameters
2030:Core/Src/deca_device.c ****  * @param mode - config on-wake parameters
2031:Core/Src/deca_device.c ****  * @param wake - config wake up parameters
2032:Core/Src/deca_device.c ****  *
2033:Core/Src/deca_device.c ****  * output parameters
2034:Core/Src/deca_device.c ****  *
2035:Core/Src/deca_device.c ****  * no return value
2036:Core/Src/deca_device.c ****  */
2037:Core/Src/deca_device.c **** void dwt_configuresleep(uint16 mode, uint8 wake)
2038:Core/Src/deca_device.c **** {
 2654              		.loc 1 2038 1 is_stmt 1 view -0
 2655              		.cfi_startproc
 2656              		@ args = 0, pretend = 0, frame = 0
 2657              		@ frame_needed = 0, uses_anonymous_args = 0
 2658              		.loc 1 2038 1 is_stmt 0 view .LVU600
 2659 0000 10B5     		push	{r4, lr}
 2660              	.LCFI73:
 2661              		.cfi_def_cfa_offset 8
 2662              		.cfi_offset 4, -8
 2663              		.cfi_offset 14, -4
 2664 0002 0C46     		mov	r4, r1
2039:Core/Src/deca_device.c ****     // Add predefined sleep settings before writing the mode
2040:Core/Src/deca_device.c ****     mode |= pdw1000local->sleep_mode;
 2665              		.loc 1 2040 5 is_stmt 1 view .LVU601
 2666              		.loc 1 2040 25 is_stmt 0 view .LVU602
 2667 0004 064B     		ldr	r3, .L154
 2668 0006 1B68     		ldr	r3, [r3]
 2669 0008 DA8A     		ldrh	r2, [r3, #22]
 2670              	.LVL233:
2041:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(AON_ID, AON_WCFG_OFFSET, mode);
 2671              		.loc 1 2041 5 is_stmt 1 view .LVU603
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 87


 2672 000a 0243     		orrs	r2, r2, r0
 2673              	.LVL234:
 2674              		.loc 1 2041 5 is_stmt 0 view .LVU604
 2675 000c 0021     		movs	r1, #0
 2676              	.LVL235:
 2677              		.loc 1 2041 5 view .LVU605
 2678 000e 2C20     		movs	r0, #44
 2679 0010 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 2680              	.LVL236:
2042:Core/Src/deca_device.c **** 
2043:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG0_OFFSET, wake);
 2681              		.loc 1 2043 5 is_stmt 1 view .LVU606
 2682 0014 2246     		mov	r2, r4
 2683 0016 0621     		movs	r1, #6
 2684 0018 2C20     		movs	r0, #44
 2685 001a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 2686              	.LVL237:
2044:Core/Src/deca_device.c **** }
 2687              		.loc 1 2044 1 is_stmt 0 view .LVU607
 2688 001e 10BD     		pop	{r4, pc}
 2689              	.L155:
 2690              		.align	2
 2691              	.L154:
 2692 0020 00000000 		.word	.LANCHOR1
 2693              		.cfi_endproc
 2694              	.LFE57:
 2696              		.section	.text.dwt_entersleepaftertx,"ax",%progbits
 2697              		.align	1
 2698              		.global	dwt_entersleepaftertx
 2699              		.syntax unified
 2700              		.thumb
 2701              		.thumb_func
 2703              	dwt_entersleepaftertx:
 2704              	.LVL238:
 2705              	.LFB58:
2045:Core/Src/deca_device.c **** 
2046:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2047:Core/Src/deca_device.c ****  * @fn dwt_entersleepaftertx(int enable)
2048:Core/Src/deca_device.c ****  *
2049:Core/Src/deca_device.c ****  * @brief sets the auto TX to sleep bit. This means that after a frame
2050:Core/Src/deca_device.c ****  * transmission the device will enter deep sleep mode. The dwt_configuresleep() function
2051:Core/Src/deca_device.c ****  * needs to be called before this to configure the on-wake settings
2052:Core/Src/deca_device.c ****  *
2053:Core/Src/deca_device.c ****  * NOTE: the IRQ line has to be low/inactive (i.e. no pending events)
2054:Core/Src/deca_device.c ****  *
2055:Core/Src/deca_device.c ****  * input parameters
2056:Core/Src/deca_device.c ****  * @param enable - 1 to configure the device to enter deep sleep after TX, 0 - disables the configu
2057:Core/Src/deca_device.c ****  *
2058:Core/Src/deca_device.c ****  * output parameters
2059:Core/Src/deca_device.c ****  *
2060:Core/Src/deca_device.c ****  * no return value
2061:Core/Src/deca_device.c ****  */
2062:Core/Src/deca_device.c **** void dwt_entersleepaftertx(int enable)
2063:Core/Src/deca_device.c **** {
 2706              		.loc 1 2063 1 is_stmt 1 view -0
 2707              		.cfi_startproc
 2708              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 88


 2709              		@ frame_needed = 0, uses_anonymous_args = 0
 2710              		.loc 1 2063 1 is_stmt 0 view .LVU609
 2711 0000 10B5     		push	{r4, lr}
 2712              	.LCFI74:
 2713              		.cfi_def_cfa_offset 8
 2714              		.cfi_offset 4, -8
 2715              		.cfi_offset 14, -4
 2716 0002 0446     		mov	r4, r0
2064:Core/Src/deca_device.c ****     uint32 reg = dwt_read32bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET);
 2717              		.loc 1 2064 5 is_stmt 1 view .LVU610
 2718              		.loc 1 2064 18 is_stmt 0 view .LVU611
 2719 0004 0421     		movs	r1, #4
 2720 0006 3620     		movs	r0, #54
 2721              	.LVL239:
 2722              		.loc 1 2064 18 view .LVU612
 2723 0008 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 2724              	.LVL240:
2065:Core/Src/deca_device.c ****     // Set the auto TX -> sleep bit
2066:Core/Src/deca_device.c ****     if(enable)
 2725              		.loc 1 2066 5 is_stmt 1 view .LVU613
 2726              		.loc 1 2066 7 is_stmt 0 view .LVU614
 2727 000c 34B1     		cbz	r4, .L157
2067:Core/Src/deca_device.c ****     {
2068:Core/Src/deca_device.c ****         reg |= PMSC_CTRL1_ATXSLP;
 2728              		.loc 1 2068 9 is_stmt 1 view .LVU615
 2729              		.loc 1 2068 13 is_stmt 0 view .LVU616
 2730 000e 40F40062 		orr	r2, r0, #2048
 2731              	.LVL241:
 2732              	.L158:
2069:Core/Src/deca_device.c ****     }
2070:Core/Src/deca_device.c ****     else
2071:Core/Src/deca_device.c ****     {
2072:Core/Src/deca_device.c ****         reg &= ~(PMSC_CTRL1_ATXSLP);
2073:Core/Src/deca_device.c ****     }
2074:Core/Src/deca_device.c ****     dwt_write32bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET, reg);
 2733              		.loc 1 2074 5 is_stmt 1 view .LVU617
 2734 0012 0421     		movs	r1, #4
 2735 0014 3620     		movs	r0, #54
 2736 0016 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 2737              	.LVL242:
2075:Core/Src/deca_device.c **** }
 2738              		.loc 1 2075 1 is_stmt 0 view .LVU618
 2739 001a 10BD     		pop	{r4, pc}
 2740              	.LVL243:
 2741              	.L157:
2072:Core/Src/deca_device.c ****     }
 2742              		.loc 1 2072 9 is_stmt 1 view .LVU619
2072:Core/Src/deca_device.c ****     }
 2743              		.loc 1 2072 13 is_stmt 0 view .LVU620
 2744 001c 20F40062 		bic	r2, r0, #2048
 2745              	.LVL244:
2072:Core/Src/deca_device.c ****     }
 2746              		.loc 1 2072 13 view .LVU621
 2747 0020 F7E7     		b	.L158
 2748              		.cfi_endproc
 2749              	.LFE58:
 2751              		.section	.text.dwt_spicswakeup,"ax",%progbits
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 89


 2752              		.align	1
 2753              		.global	dwt_spicswakeup
 2754              		.syntax unified
 2755              		.thumb
 2756              		.thumb_func
 2758              	dwt_spicswakeup:
 2759              	.LVL245:
 2760              	.LFB59:
2076:Core/Src/deca_device.c **** 
2077:Core/Src/deca_device.c **** 
2078:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2079:Core/Src/deca_device.c ****  * @fn dwt_spicswakeup()
2080:Core/Src/deca_device.c ****  *
2081:Core/Src/deca_device.c ****  * @brief wake up the device from sleep mode using the SPI read,
2082:Core/Src/deca_device.c ****  * the device will wake up on chip select line going low if the line is held low for at least 500us
2083:Core/Src/deca_device.c ****  * To define the length depending on the time one wants to hold
2084:Core/Src/deca_device.c ****  * the chip select line low, use the following formula:
2085:Core/Src/deca_device.c ****  *
2086:Core/Src/deca_device.c ****  *      length (bytes) = time (s) * byte_rate (Hz)
2087:Core/Src/deca_device.c ****  *
2088:Core/Src/deca_device.c ****  * where fastest byte_rate is spi_rate (Hz) / 8 if the SPI is sending the bytes back-to-back.
2089:Core/Src/deca_device.c ****  * To save time and power, a system designer could determine byte_rate value more precisely.
2090:Core/Src/deca_device.c ****  *
2091:Core/Src/deca_device.c ****  * NOTE: Alternatively the device can be waken up with WAKE_UP pin if configured for that operation
2092:Core/Src/deca_device.c ****  *
2093:Core/Src/deca_device.c ****  * input parameters
2094:Core/Src/deca_device.c ****  * @param buff   - this is a pointer to the dummy buffer which will be used in the SPI read transac
2095:Core/Src/deca_device.c ****  * @param length - this is the length of the dummy buffer
2096:Core/Src/deca_device.c ****  *
2097:Core/Src/deca_device.c ****  * output parameters
2098:Core/Src/deca_device.c ****  *
2099:Core/Src/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error
2100:Core/Src/deca_device.c ****  */
2101:Core/Src/deca_device.c **** int dwt_spicswakeup(uint8 *buff, uint16 length)
2102:Core/Src/deca_device.c **** {
 2761              		.loc 1 2102 1 is_stmt 1 view -0
 2762              		.cfi_startproc
 2763              		@ args = 0, pretend = 0, frame = 0
 2764              		@ frame_needed = 0, uses_anonymous_args = 0
 2765              		.loc 1 2102 1 is_stmt 0 view .LVU623
 2766 0000 38B5     		push	{r3, r4, r5, lr}
 2767              	.LCFI75:
 2768              		.cfi_def_cfa_offset 16
 2769              		.cfi_offset 3, -16
 2770              		.cfi_offset 4, -12
 2771              		.cfi_offset 5, -8
 2772              		.cfi_offset 14, -4
 2773 0002 0546     		mov	r5, r0
 2774 0004 0C46     		mov	r4, r1
2103:Core/Src/deca_device.c ****     if(dwt_readdevid() != DWT_DEVICE_ID) // Device was in deep sleep (the first read fails)
 2775              		.loc 1 2103 5 is_stmt 1 view .LVU624
 2776              		.loc 1 2103 8 is_stmt 0 view .LVU625
 2777 0006 FFF7FEFF 		bl	dwt_readdevid
 2778              	.LVL246:
 2779              		.loc 1 2103 7 view .LVU626
 2780 000a 0C4B     		ldr	r3, .L165
 2781 000c 9842     		cmp	r0, r3
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 90


 2782 000e 0FD0     		beq	.L162
2104:Core/Src/deca_device.c ****     {
2105:Core/Src/deca_device.c ****         // Need to keep chip select line low for at least 500us
2106:Core/Src/deca_device.c ****         dwt_readfromdevice(0x0, 0x0, length, buff); // Do a long read to wake up the chip (hold the
 2783              		.loc 1 2106 9 is_stmt 1 view .LVU627
 2784 0010 2B46     		mov	r3, r5
 2785 0012 2246     		mov	r2, r4
 2786 0014 0021     		movs	r1, #0
 2787 0016 0846     		mov	r0, r1
 2788 0018 FFF7FEFF 		bl	dwt_readfromdevice
 2789              	.LVL247:
2107:Core/Src/deca_device.c **** 
2108:Core/Src/deca_device.c ****         // Need 5ms for XTAL to start and stabilise (could wait for PLL lock IRQ status bit !!!)
2109:Core/Src/deca_device.c ****         // NOTE: Polling of the STATUS register is not possible unless frequency is < 3MHz
2110:Core/Src/deca_device.c ****         deca_sleep(5);
 2790              		.loc 1 2110 9 view .LVU628
 2791 001c 0520     		movs	r0, #5
 2792 001e FFF7FEFF 		bl	deca_sleep
 2793              	.LVL248:
2111:Core/Src/deca_device.c ****     }
2112:Core/Src/deca_device.c ****     else
2113:Core/Src/deca_device.c ****     {
2114:Core/Src/deca_device.c ****         return DWT_SUCCESS;
2115:Core/Src/deca_device.c ****     }
2116:Core/Src/deca_device.c ****     // DEBUG - check if still in sleep mode
2117:Core/Src/deca_device.c ****     if(dwt_readdevid() != DWT_DEVICE_ID)
 2794              		.loc 1 2117 5 view .LVU629
 2795              		.loc 1 2117 8 is_stmt 0 view .LVU630
 2796 0022 FFF7FEFF 		bl	dwt_readdevid
 2797              	.LVL249:
 2798              		.loc 1 2117 7 view .LVU631
 2799 0026 054B     		ldr	r3, .L165
 2800 0028 9842     		cmp	r0, r3
 2801 002a 03D1     		bne	.L163
2118:Core/Src/deca_device.c ****     {
2119:Core/Src/deca_device.c ****         return DWT_ERROR;
2120:Core/Src/deca_device.c ****     }
2121:Core/Src/deca_device.c **** 
2122:Core/Src/deca_device.c ****     return DWT_SUCCESS;
 2802              		.loc 1 2122 12 view .LVU632
 2803 002c 0020     		movs	r0, #0
 2804              	.L160:
2123:Core/Src/deca_device.c **** }
 2805              		.loc 1 2123 1 view .LVU633
 2806 002e 38BD     		pop	{r3, r4, r5, pc}
 2807              	.LVL250:
 2808              	.L162:
2114:Core/Src/deca_device.c ****     }
 2809              		.loc 1 2114 16 view .LVU634
 2810 0030 0020     		movs	r0, #0
 2811 0032 FCE7     		b	.L160
 2812              	.L163:
2119:Core/Src/deca_device.c ****     }
 2813              		.loc 1 2119 16 view .LVU635
 2814 0034 4FF0FF30 		mov	r0, #-1
 2815 0038 F9E7     		b	.L160
 2816              	.L166:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 91


 2817 003a 00BF     		.align	2
 2818              	.L165:
 2819 003c 3001CADE 		.word	-557186768
 2820              		.cfi_endproc
 2821              	.LFE59:
 2823              		.section	.text._dwt_configlde,"ax",%progbits
 2824              		.align	1
 2825              		.global	_dwt_configlde
 2826              		.syntax unified
 2827              		.thumb
 2828              		.thumb_func
 2830              	_dwt_configlde:
 2831              	.LVL251:
 2832              	.LFB60:
2124:Core/Src/deca_device.c **** 
2125:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2126:Core/Src/deca_device.c ****  * @fn _dwt_configlde()
2127:Core/Src/deca_device.c ****  *
2128:Core/Src/deca_device.c ****  * @brief configure LDE algorithm parameters
2129:Core/Src/deca_device.c ****  *
2130:Core/Src/deca_device.c ****  * input parameters
2131:Core/Src/deca_device.c ****  * @param prf   -   this is the PRF index (0 or 1) 0 corresponds to 16 and 1 to 64 PRF
2132:Core/Src/deca_device.c ****  *
2133:Core/Src/deca_device.c ****  * output parameters
2134:Core/Src/deca_device.c ****  *
2135:Core/Src/deca_device.c ****  * no return value
2136:Core/Src/deca_device.c ****  */
2137:Core/Src/deca_device.c **** void _dwt_configlde(int prfIndex)
2138:Core/Src/deca_device.c **** {
 2833              		.loc 1 2138 1 is_stmt 1 view -0
 2834              		.cfi_startproc
 2835              		@ args = 0, pretend = 0, frame = 0
 2836              		@ frame_needed = 0, uses_anonymous_args = 0
 2837              		.loc 1 2138 1 is_stmt 0 view .LVU637
 2838 0000 10B5     		push	{r4, lr}
 2839              	.LCFI76:
 2840              		.cfi_def_cfa_offset 8
 2841              		.cfi_offset 4, -8
 2842              		.cfi_offset 14, -4
 2843 0002 0446     		mov	r4, r0
2139:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(LDE_IF_ID, LDE_CFG1_OFFSET, LDE_PARAM1); // 8-bit configuration register
 2844              		.loc 1 2139 5 is_stmt 1 view .LVU638
 2845 0004 6D22     		movs	r2, #109
 2846 0006 40F60601 		movw	r1, #2054
 2847 000a 2E20     		movs	r0, #46
 2848              	.LVL252:
 2849              		.loc 1 2139 5 is_stmt 0 view .LVU639
 2850 000c FFF7FEFF 		bl	dwt_write8bitoffsetreg
 2851              	.LVL253:
2140:Core/Src/deca_device.c **** 
2141:Core/Src/deca_device.c ****     if(prfIndex)
 2852              		.loc 1 2141 5 is_stmt 1 view .LVU640
 2853              		.loc 1 2141 7 is_stmt 0 view .LVU641
 2854 0010 3CB1     		cbz	r4, .L168
2142:Core/Src/deca_device.c ****     {
2143:Core/Src/deca_device.c ****         dwt_write16bitoffsetreg( LDE_IF_ID, LDE_CFG2_OFFSET, (uint16) LDE_PARAM3_64); // 16-bit LDE
 2855              		.loc 1 2143 9 is_stmt 1 view .LVU642
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 92


 2856 0012 40F20762 		movw	r2, #1543
 2857 0016 41F60601 		movw	r1, #6150
 2858 001a 2E20     		movs	r0, #46
 2859 001c FFF7FEFF 		bl	dwt_write16bitoffsetreg
 2860              	.LVL254:
 2861              	.L167:
2144:Core/Src/deca_device.c ****     }
2145:Core/Src/deca_device.c ****     else
2146:Core/Src/deca_device.c ****     {
2147:Core/Src/deca_device.c ****         dwt_write16bitoffsetreg( LDE_IF_ID, LDE_CFG2_OFFSET, (uint16) LDE_PARAM3_16);
2148:Core/Src/deca_device.c ****     }
2149:Core/Src/deca_device.c **** }
 2862              		.loc 1 2149 1 is_stmt 0 view .LVU643
 2863 0020 10BD     		pop	{r4, pc}
 2864              	.LVL255:
 2865              	.L168:
2147:Core/Src/deca_device.c ****     }
 2866              		.loc 1 2147 9 is_stmt 1 view .LVU644
 2867 0022 41F20762 		movw	r2, #5639
 2868 0026 41F60601 		movw	r1, #6150
 2869 002a 2E20     		movs	r0, #46
 2870 002c FFF7FEFF 		bl	dwt_write16bitoffsetreg
 2871              	.LVL256:
 2872              		.loc 1 2149 1 is_stmt 0 view .LVU645
 2873 0030 F6E7     		b	.L167
 2874              		.cfi_endproc
 2875              	.LFE60:
 2877              		.section	.text.dwt_configure,"ax",%progbits
 2878              		.align	1
 2879              		.global	dwt_configure
 2880              		.syntax unified
 2881              		.thumb
 2882              		.thumb_func
 2884              	dwt_configure:
 2885              	.LVL257:
 2886              	.LFB17:
 661:Core/Src/deca_device.c ****     uint8 nsSfd_result  = 0;
 2887              		.loc 1 661 1 is_stmt 1 view -0
 2888              		.cfi_startproc
 2889              		@ args = 0, pretend = 0, frame = 0
 2890              		@ frame_needed = 0, uses_anonymous_args = 0
 661:Core/Src/deca_device.c ****     uint8 nsSfd_result  = 0;
 2891              		.loc 1 661 1 is_stmt 0 view .LVU647
 2892 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2893              	.LCFI77:
 2894              		.cfi_def_cfa_offset 24
 2895              		.cfi_offset 4, -24
 2896              		.cfi_offset 5, -20
 2897              		.cfi_offset 6, -16
 2898              		.cfi_offset 7, -12
 2899              		.cfi_offset 8, -8
 2900              		.cfi_offset 14, -4
 2901 0004 0446     		mov	r4, r0
 662:Core/Src/deca_device.c ****     uint8 useDWnsSFD = 0;
 2902              		.loc 1 662 5 is_stmt 1 view .LVU648
 2903              	.LVL258:
 663:Core/Src/deca_device.c ****     uint8 chan = config->chan ;
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 93


 2904              		.loc 1 663 5 view .LVU649
 664:Core/Src/deca_device.c ****     uint32 regval ;
 2905              		.loc 1 664 5 view .LVU650
 664:Core/Src/deca_device.c ****     uint32 regval ;
 2906              		.loc 1 664 11 is_stmt 0 view .LVU651
 2907 0006 0578     		ldrb	r5, [r0]	@ zero_extendqisi2
 2908              	.LVL259:
 665:Core/Src/deca_device.c ****     uint16 reg16 = lde_replicaCoeff[config->rxCode];
 2909              		.loc 1 665 5 is_stmt 1 view .LVU652
 666:Core/Src/deca_device.c ****     uint8 prfIndex = config->prf - DWT_PRF_16M;
 2910              		.loc 1 666 5 view .LVU653
 666:Core/Src/deca_device.c ****     uint8 prfIndex = config->prf - DWT_PRF_16M;
 2911              		.loc 1 666 43 is_stmt 0 view .LVU654
 2912 0008 4279     		ldrb	r2, [r0, #5]	@ zero_extendqisi2
 666:Core/Src/deca_device.c ****     uint8 prfIndex = config->prf - DWT_PRF_16M;
 2913              		.loc 1 666 12 view .LVU655
 2914 000a 794B     		ldr	r3, .L188
 2915 000c 33F81280 		ldrh	r8, [r3, r2, lsl #1]
 2916              	.LVL260:
 667:Core/Src/deca_device.c ****     uint8 bw = ((chan == 4) || (chan == 7)) ? 1 : 0 ; // Select wide or narrow band
 2917              		.loc 1 667 5 is_stmt 1 view .LVU656
 667:Core/Src/deca_device.c ****     uint8 bw = ((chan == 4) || (chan == 7)) ? 1 : 0 ; // Select wide or narrow band
 2918              		.loc 1 667 28 is_stmt 0 view .LVU657
 2919 0010 4678     		ldrb	r6, [r0, #1]	@ zero_extendqisi2
 667:Core/Src/deca_device.c ****     uint8 bw = ((chan == 4) || (chan == 7)) ? 1 : 0 ; // Select wide or narrow band
 2920              		.loc 1 667 11 view .LVU658
 2921 0012 013E     		subs	r6, r6, #1
 2922 0014 F6B2     		uxtb	r6, r6
 2923              	.LVL261:
 668:Core/Src/deca_device.c **** 
 2924              		.loc 1 668 5 is_stmt 1 view .LVU659
 668:Core/Src/deca_device.c **** 
 2925              		.loc 1 668 49 is_stmt 0 view .LVU660
 2926 0016 042D     		cmp	r5, #4
 2927 0018 00F0C680 		beq	.L180
 668:Core/Src/deca_device.c **** 
 2928              		.loc 1 668 49 discriminator 2 view .LVU661
 2929 001c 072D     		cmp	r5, #7
 2930 001e 00F0C180 		beq	.L184
 668:Core/Src/deca_device.c **** 
 2931              		.loc 1 668 49 view .LVU662
 2932 0022 0027     		movs	r7, #0
 2933              	.L172:
 2934              	.LVL262:
 685:Core/Src/deca_device.c ****     {
 2935              		.loc 1 685 5 is_stmt 1 discriminator 6 view .LVU663
 685:Core/Src/deca_device.c ****     {
 2936              		.loc 1 685 29 is_stmt 0 discriminator 6 view .LVU664
 2937 0024 E379     		ldrb	r3, [r4, #7]	@ zero_extendqisi2
 685:Core/Src/deca_device.c ****     {
 2938              		.loc 1 685 7 discriminator 6 view .LVU665
 2939 0026 002B     		cmp	r3, #0
 2940 0028 40F0C080 		bne	.L173
 687:Core/Src/deca_device.c ****         reg16 >>= 3; // lde_replicaCoeff must be divided by 8
 2941              		.loc 1 687 9 is_stmt 1 view .LVU666
 687:Core/Src/deca_device.c ****         reg16 >>= 3; // lde_replicaCoeff must be divided by 8
 2942              		.loc 1 687 33 is_stmt 0 view .LVU667
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 94


 2943 002c 714B     		ldr	r3, .L188+4
 2944 002e 1A68     		ldr	r2, [r3]
 2945 0030 1369     		ldr	r3, [r2, #16]
 2946 0032 43F48003 		orr	r3, r3, #4194304
 2947 0036 1361     		str	r3, [r2, #16]
 688:Core/Src/deca_device.c ****     }
 2948              		.loc 1 688 9 is_stmt 1 view .LVU668
 688:Core/Src/deca_device.c ****     }
 2949              		.loc 1 688 15 is_stmt 0 view .LVU669
 2950 0038 4FEAD808 		lsr	r8, r8, #3
 2951              	.LVL263:
 2952              	.L174:
 695:Core/Src/deca_device.c **** 
 2953              		.loc 1 695 5 is_stmt 1 view .LVU670
 695:Core/Src/deca_device.c **** 
 2954              		.loc 1 695 17 is_stmt 0 view .LVU671
 2955 003c 6D4B     		ldr	r3, .L188+4
 2956 003e 1968     		ldr	r1, [r3]
 695:Core/Src/deca_device.c **** 
 2957              		.loc 1 695 38 view .LVU672
 2958 0040 237A     		ldrb	r3, [r4, #8]	@ zero_extendqisi2
 695:Core/Src/deca_device.c **** 
 2959              		.loc 1 695 30 view .LVU673
 2960 0042 8B72     		strb	r3, [r1, #10]
 697:Core/Src/deca_device.c ****     pdw1000local->sysCFGreg |= (SYS_CFG_PHR_MODE_11 & ((uint32)config->phrMode << SYS_CFG_PHR_MODE_
 2961              		.loc 1 697 5 is_stmt 1 view .LVU674
 697:Core/Src/deca_device.c ****     pdw1000local->sysCFGreg |= (SYS_CFG_PHR_MODE_11 & ((uint32)config->phrMode << SYS_CFG_PHR_MODE_
 2962              		.loc 1 697 29 is_stmt 0 view .LVU675
 2963 0044 0A69     		ldr	r2, [r1, #16]
 2964 0046 22F44032 		bic	r2, r2, #196608
 2965 004a 0A61     		str	r2, [r1, #16]
 698:Core/Src/deca_device.c **** 
 2966              		.loc 1 698 5 is_stmt 1 view .LVU676
 698:Core/Src/deca_device.c **** 
 2967              		.loc 1 698 70 is_stmt 0 view .LVU677
 2968 004c 237A     		ldrb	r3, [r4, #8]	@ zero_extendqisi2
 698:Core/Src/deca_device.c **** 
 2969              		.loc 1 698 80 view .LVU678
 2970 004e 1B04     		lsls	r3, r3, #16
 698:Core/Src/deca_device.c **** 
 2971              		.loc 1 698 53 view .LVU679
 2972 0050 03F44033 		and	r3, r3, #196608
 698:Core/Src/deca_device.c **** 
 2973              		.loc 1 698 29 view .LVU680
 2974 0054 1A43     		orrs	r2, r2, r3
 2975 0056 0A61     		str	r2, [r1, #16]
 700:Core/Src/deca_device.c ****     // Set the lde_replicaCoeff
 2976              		.loc 1 700 5 is_stmt 1 view .LVU681
 2977 0058 0021     		movs	r1, #0
 2978 005a 0420     		movs	r0, #4
 2979              	.LVL264:
 700:Core/Src/deca_device.c ****     // Set the lde_replicaCoeff
 2980              		.loc 1 700 5 is_stmt 0 view .LVU682
 2981 005c FFF7FEFF 		bl	dwt_write32bitoffsetreg
 2982              	.LVL265:
 702:Core/Src/deca_device.c **** 
 2983              		.loc 1 702 5 is_stmt 1 view .LVU683
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 95


 2984 0060 4246     		mov	r2, r8
 2985 0062 42F60401 		movw	r1, #10244
 2986 0066 2E20     		movs	r0, #46
 2987 0068 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 2988              	.LVL266:
 704:Core/Src/deca_device.c **** 
 2989              		.loc 1 704 5 view .LVU684
 2990 006c 3046     		mov	r0, r6
 2991 006e FFF7FEFF 		bl	_dwt_configlde
 2992              	.LVL267:
 707:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(FS_CTRL_ID, FS_PLLTUNE_OFFSET, fs_pll_tune[chan_idx[chan]]);
 2993              		.loc 1 707 5 view .LVU685
 707:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(FS_CTRL_ID, FS_PLLTUNE_OFFSET, fs_pll_tune[chan_idx[chan]]);
 2994              		.loc 1 707 78 is_stmt 0 view .LVU686
 2995 0072 614B     		ldr	r3, .L188+8
 2996 0074 13F80580 		ldrb	r8, [r3, r5]	@ zero_extendqisi2
 2997              	.LVL268:
 707:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(FS_CTRL_ID, FS_PLLTUNE_OFFSET, fs_pll_tune[chan_idx[chan]]);
 2998              		.loc 1 707 5 view .LVU687
 2999 0078 604B     		ldr	r3, .L188+12
 3000 007a 53F82820 		ldr	r2, [r3, r8, lsl #2]
 3001 007e 0721     		movs	r1, #7
 3002 0080 2B20     		movs	r0, #43
 3003 0082 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 3004              	.LVL269:
 708:Core/Src/deca_device.c **** 
 3005              		.loc 1 708 5 is_stmt 1 view .LVU688
 3006 0086 5E4B     		ldr	r3, .L188+16
 3007 0088 13F80820 		ldrb	r2, [r3, r8]	@ zero_extendqisi2
 3008 008c 0B21     		movs	r1, #11
 3009 008e 2B20     		movs	r0, #43
 3010 0090 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 3011              	.LVL270:
 711:Core/Src/deca_device.c **** 
 3012              		.loc 1 711 5 view .LVU689
 3013 0094 FFB2     		uxtb	r7, r7
 711:Core/Src/deca_device.c **** 
 3014              		.loc 1 711 5 is_stmt 0 view .LVU690
 3015 0096 5B4B     		ldr	r3, .L188+20
 3016 0098 DA5D     		ldrb	r2, [r3, r7]	@ zero_extendqisi2
 3017 009a 0B21     		movs	r1, #11
 3018 009c 2820     		movs	r0, #40
 3019 009e FFF7FEFF 		bl	dwt_write8bitoffsetreg
 3020              	.LVL271:
 715:Core/Src/deca_device.c **** 
 3021              		.loc 1 715 5 is_stmt 1 view .LVU691
 3022 00a2 594B     		ldr	r3, .L188+24
 3023 00a4 53F82820 		ldr	r2, [r3, r8, lsl #2]
 3024 00a8 0C21     		movs	r1, #12
 3025 00aa 2820     		movs	r0, #40
 3026 00ac FFF7FEFF 		bl	dwt_write32bitoffsetreg
 3027              	.LVL272:
 719:Core/Src/deca_device.c **** 
 3028              		.loc 1 719 5 view .LVU692
 719:Core/Src/deca_device.c **** 
 3029              		.loc 1 719 73 is_stmt 0 view .LVU693
 3030 00b0 E279     		ldrb	r2, [r4, #7]	@ zero_extendqisi2
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 96


 719:Core/Src/deca_device.c **** 
 3031              		.loc 1 719 91 view .LVU694
 3032 00b2 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
 719:Core/Src/deca_device.c **** 
 3033              		.loc 1 719 5 view .LVU695
 3034 00b4 03EB4203 		add	r3, r3, r2, lsl #1
 3035 00b8 544A     		ldr	r2, .L188+28
 3036 00ba 32F81320 		ldrh	r2, [r2, r3, lsl #1]
 3037 00be 0221     		movs	r1, #2
 3038 00c0 2720     		movs	r0, #39
 3039 00c2 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 3040              	.LVL273:
 722:Core/Src/deca_device.c **** 
 3041              		.loc 1 722 5 is_stmt 1 view .LVU696
 3042 00c6 524B     		ldr	r3, .L188+32
 3043 00c8 33F81620 		ldrh	r2, [r3, r6, lsl #1]
 3044 00cc 0421     		movs	r1, #4
 3045 00ce 2720     		movs	r0, #39
 3046 00d0 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 3047              	.LVL274:
 724:Core/Src/deca_device.c ****     {
 3048              		.loc 1 724 5 view .LVU697
 724:Core/Src/deca_device.c ****     {
 3049              		.loc 1 724 14 is_stmt 0 view .LVU698
 3050 00d4 E379     		ldrb	r3, [r4, #7]	@ zero_extendqisi2
 724:Core/Src/deca_device.c ****     {
 3051              		.loc 1 724 7 view .LVU699
 3052 00d6 002B     		cmp	r3, #0
 3053 00d8 6FD0     		beq	.L185
 730:Core/Src/deca_device.c ****         {
 3054              		.loc 1 730 9 is_stmt 1 view .LVU700
 730:Core/Src/deca_device.c ****         {
 3055              		.loc 1 730 18 is_stmt 0 view .LVU701
 3056 00da A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 730:Core/Src/deca_device.c ****         {
 3057              		.loc 1 730 11 view .LVU702
 3058 00dc 042B     		cmp	r3, #4
 3059 00de 72D0     		beq	.L186
 737:Core/Src/deca_device.c ****             dwt_write8bitoffsetreg(DRX_CONF_ID, DRX_TUNE4H_OFFSET, DRX_TUNE4H_PRE128PLUS);
 3060              		.loc 1 737 13 is_stmt 1 view .LVU703
 3061 00e0 2022     		movs	r2, #32
 3062 00e2 0621     		movs	r1, #6
 3063 00e4 2720     		movs	r0, #39
 3064 00e6 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 3065              	.LVL275:
 738:Core/Src/deca_device.c ****         }
 3066              		.loc 1 738 13 view .LVU704
 3067 00ea 2822     		movs	r2, #40
 3068 00ec 2621     		movs	r1, #38
 3069 00ee 2720     		movs	r0, #39
 3070 00f0 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 3071              	.LVL276:
 3072              	.L176:
 743:Core/Src/deca_device.c **** 
 3073              		.loc 1 743 5 view .LVU705
 743:Core/Src/deca_device.c **** 
 3074              		.loc 1 743 94 is_stmt 0 view .LVU706
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 97


 3075 00f4 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 743:Core/Src/deca_device.c **** 
 3076              		.loc 1 743 5 view .LVU707
 3077 00f6 03EB8603 		add	r3, r3, r6, lsl #2
 3078 00fa 464A     		ldr	r2, .L188+36
 3079 00fc 52F82320 		ldr	r2, [r2, r3, lsl #2]
 3080 0100 0821     		movs	r1, #8
 3081 0102 2720     		movs	r0, #39
 3082 0104 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 3083              	.LVL277:
 747:Core/Src/deca_device.c ****     {
 3084              		.loc 1 747 5 is_stmt 1 view .LVU708
 747:Core/Src/deca_device.c ****     {
 3085              		.loc 1 747 14 is_stmt 0 view .LVU709
 3086 0108 6389     		ldrh	r3, [r4, #10]
 747:Core/Src/deca_device.c ****     {
 3087              		.loc 1 747 7 view .LVU710
 3088 010a 13B9     		cbnz	r3, .L178
 749:Core/Src/deca_device.c ****     }
 3089              		.loc 1 749 9 is_stmt 1 view .LVU711
 749:Core/Src/deca_device.c ****     }
 3090              		.loc 1 749 23 is_stmt 0 view .LVU712
 3091 010c 41F24103 		movw	r3, #4161
 3092 0110 6381     		strh	r3, [r4, #10]	@ movhi
 3093              	.L178:
 751:Core/Src/deca_device.c **** 
 3094              		.loc 1 751 5 is_stmt 1 view .LVU713
 3095 0112 6289     		ldrh	r2, [r4, #10]
 3096 0114 2021     		movs	r1, #32
 3097 0116 2720     		movs	r0, #39
 3098 0118 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 3099              	.LVL278:
 754:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg( AGC_CFG_STS_ID, 0x4, agc_config.target[prfIndex]);
 3100              		.loc 1 754 5 view .LVU714
 3101 011c 3E4F     		ldr	r7, .L188+40
 3102              	.LVL279:
 754:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg( AGC_CFG_STS_ID, 0x4, agc_config.target[prfIndex]);
 3103              		.loc 1 754 5 is_stmt 0 view .LVU715
 3104 011e 3A68     		ldr	r2, [r7]
 3105 0120 0C21     		movs	r1, #12
 3106 0122 2320     		movs	r0, #35
 3107 0124 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 3108              	.LVL280:
 755:Core/Src/deca_device.c **** 
 3109              		.loc 1 755 5 is_stmt 1 view .LVU716
 3110 0128 07EB4606 		add	r6, r7, r6, lsl #1
 3111              	.LVL281:
 755:Core/Src/deca_device.c **** 
 3112              		.loc 1 755 5 is_stmt 0 view .LVU717
 3113 012c B288     		ldrh	r2, [r6, #4]
 3114 012e 0421     		movs	r1, #4
 3115 0130 2320     		movs	r0, #35
 3116 0132 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 3117              	.LVL282:
 758:Core/Src/deca_device.c ****     {
 3118              		.loc 1 758 5 is_stmt 1 view .LVU718
 758:Core/Src/deca_device.c ****     {
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 98


 3119              		.loc 1 758 14 is_stmt 0 view .LVU719
 3120 0136 A279     		ldrb	r2, [r4, #6]	@ zero_extendqisi2
 758:Core/Src/deca_device.c ****     {
 3121              		.loc 1 758 7 view .LVU720
 3122 0138 002A     		cmp	r2, #0
 3123 013a 4FD1     		bne	.L187
 663:Core/Src/deca_device.c ****     uint8 chan = config->chan ;
 3124              		.loc 1 663 11 view .LVU721
 3125 013c 1146     		mov	r1, r2
 3126              	.LVL283:
 3127              	.L179:
 765:Core/Src/deca_device.c ****               (CHAN_CTRL_RX_CHAN_MASK & (chan << CHAN_CTRL_RX_CHAN_SHIFT)) | // Receive Channel
 3128              		.loc 1 765 5 is_stmt 1 view .LVU722
 765:Core/Src/deca_device.c ****               (CHAN_CTRL_RX_CHAN_MASK & (chan << CHAN_CTRL_RX_CHAN_SHIFT)) | // Receive Channel
 3129              		.loc 1 765 39 is_stmt 0 view .LVU723
 3130 013e 05F00F03 		and	r3, r5, #15
 766:Core/Src/deca_device.c ****               (CHAN_CTRL_RXFPRF_MASK & ((uint32)config->prf << CHAN_CTRL_RXFPRF_SHIFT)) | // RX PRF
 3131              		.loc 1 766 47 view .LVU724
 3132 0142 2D01     		lsls	r5, r5, #4
 3133              	.LVL284:
 766:Core/Src/deca_device.c ****               (CHAN_CTRL_RXFPRF_MASK & ((uint32)config->prf << CHAN_CTRL_RXFPRF_SHIFT)) | // RX PRF
 3134              		.loc 1 766 39 view .LVU725
 3135 0144 EDB2     		uxtb	r5, r5
 765:Core/Src/deca_device.c ****               (CHAN_CTRL_RX_CHAN_MASK & (chan << CHAN_CTRL_RX_CHAN_SHIFT)) | // Receive Channel
 3136              		.loc 1 765 76 view .LVU726
 3137 0146 2B43     		orrs	r3, r3, r5
 767:Core/Src/deca_device.c ****               ((CHAN_CTRL_TNSSFD|CHAN_CTRL_RNSSFD) & ((uint32)nsSfd_result << CHAN_CTRL_TNSSFD_SHIF
 3138              		.loc 1 767 55 view .LVU727
 3139 0148 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 767:Core/Src/deca_device.c ****               ((CHAN_CTRL_TNSSFD|CHAN_CTRL_RNSSFD) & ((uint32)nsSfd_result << CHAN_CTRL_TNSSFD_SHIF
 3140              		.loc 1 767 61 view .LVU728
 3141 014a 8004     		lsls	r0, r0, #18
 767:Core/Src/deca_device.c ****               ((CHAN_CTRL_TNSSFD|CHAN_CTRL_RNSSFD) & ((uint32)nsSfd_result << CHAN_CTRL_TNSSFD_SHIF
 3142              		.loc 1 767 38 view .LVU729
 3143 014c 00F44020 		and	r0, r0, #786432
 766:Core/Src/deca_device.c ****               (CHAN_CTRL_RXFPRF_MASK & ((uint32)config->prf << CHAN_CTRL_RXFPRF_SHIFT)) | // RX PRF
 3144              		.loc 1 766 76 view .LVU730
 3145 0150 0343     		orrs	r3, r3, r0
 768:Core/Src/deca_device.c ****               (CHAN_CTRL_DWSFD & ((uint32)useDWnsSFD << CHAN_CTRL_DWSFD_SHIFT)) | // Use DW nsSFD
 3146              		.loc 1 768 76 view .LVU731
 3147 0152 1205     		lsls	r2, r2, #20
 3148              	.LVL285:
 768:Core/Src/deca_device.c ****               (CHAN_CTRL_DWSFD & ((uint32)useDWnsSFD << CHAN_CTRL_DWSFD_SHIFT)) | // Use DW nsSFD
 3149              		.loc 1 768 52 view .LVU732
 3150 0154 02F44012 		and	r2, r2, #3145728
 767:Core/Src/deca_device.c ****               ((CHAN_CTRL_TNSSFD|CHAN_CTRL_RNSSFD) & ((uint32)nsSfd_result << CHAN_CTRL_TNSSFD_SHIF
 3151              		.loc 1 767 89 view .LVU733
 3152 0158 1343     		orrs	r3, r3, r2
 769:Core/Src/deca_device.c ****               (CHAN_CTRL_TX_PCOD_MASK & ((uint32)config->txCode << CHAN_CTRL_TX_PCOD_SHIFT)) | // T
 3153              		.loc 1 769 54 view .LVU734
 3154 015a 4A04     		lsls	r2, r1, #17
 769:Core/Src/deca_device.c ****               (CHAN_CTRL_TX_PCOD_MASK & ((uint32)config->txCode << CHAN_CTRL_TX_PCOD_SHIFT)) | // T
 3155              		.loc 1 769 32 view .LVU735
 3156 015c 02F40032 		and	r2, r2, #131072
 768:Core/Src/deca_device.c ****               (CHAN_CTRL_DWSFD & ((uint32)useDWnsSFD << CHAN_CTRL_DWSFD_SHIFT)) | // Use DW nsSFD
 3157              		.loc 1 768 104 view .LVU736
 3158 0160 1343     		orrs	r3, r3, r2
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 99


 770:Core/Src/deca_device.c ****               (CHAN_CTRL_RX_PCOD_MASK & ((uint32)config->rxCode << CHAN_CTRL_RX_PCOD_SHIFT)) ; // R
 3159              		.loc 1 770 56 view .LVU737
 3160 0162 2279     		ldrb	r2, [r4, #4]	@ zero_extendqisi2
 770:Core/Src/deca_device.c ****               (CHAN_CTRL_RX_PCOD_MASK & ((uint32)config->rxCode << CHAN_CTRL_RX_PCOD_SHIFT)) ; // R
 3161              		.loc 1 770 65 view .LVU738
 3162 0164 9205     		lsls	r2, r2, #22
 770:Core/Src/deca_device.c ****               (CHAN_CTRL_RX_PCOD_MASK & ((uint32)config->rxCode << CHAN_CTRL_RX_PCOD_SHIFT)) ; // R
 3163              		.loc 1 770 39 view .LVU739
 3164 0166 02F0F862 		and	r2, r2, #130023424
 769:Core/Src/deca_device.c ****               (CHAN_CTRL_TX_PCOD_MASK & ((uint32)config->txCode << CHAN_CTRL_TX_PCOD_SHIFT)) | // T
 3165              		.loc 1 769 81 view .LVU740
 3166 016a 1343     		orrs	r3, r3, r2
 771:Core/Src/deca_device.c **** 
 3167              		.loc 1 771 56 view .LVU741
 3168 016c 6279     		ldrb	r2, [r4, #5]	@ zero_extendqisi2
 3169              	.LVL286:
 773:Core/Src/deca_device.c **** 
 3170              		.loc 1 773 5 is_stmt 1 view .LVU742
 3171 016e 43EAC262 		orr	r2, r3, r2, lsl #27
 3172              	.LVL287:
 773:Core/Src/deca_device.c **** 
 3173              		.loc 1 773 5 is_stmt 0 view .LVU743
 3174 0172 0021     		movs	r1, #0
 3175              	.LVL288:
 773:Core/Src/deca_device.c **** 
 3176              		.loc 1 773 5 view .LVU744
 3177 0174 1F20     		movs	r0, #31
 3178 0176 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 3179              	.LVL289:
 776:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, pdw1000local->txFCTRL);
 3180              		.loc 1 776 5 is_stmt 1 view .LVU745
 776:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, pdw1000local->txFCTRL);
 3181              		.loc 1 776 45 is_stmt 0 view .LVU746
 3182 017a A278     		ldrb	r2, [r4, #2]	@ zero_extendqisi2
 776:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, pdw1000local->txFCTRL);
 3183              		.loc 1 776 70 view .LVU747
 3184 017c 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 776:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, pdw1000local->txFCTRL);
 3185              		.loc 1 776 30 view .LVU748
 3186 017e 1343     		orrs	r3, r3, r2
 776:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, pdw1000local->txFCTRL);
 3187              		.loc 1 776 118 view .LVU749
 3188 0180 E279     		ldrb	r2, [r4, #7]	@ zero_extendqisi2
 776:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, pdw1000local->txFCTRL);
 3189              		.loc 1 776 129 view .LVU750
 3190 0182 5203     		lsls	r2, r2, #13
 776:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, pdw1000local->txFCTRL);
 3191              		.loc 1 776 17 view .LVU751
 3192 0184 1B49     		ldr	r1, .L188+4
 3193 0186 0968     		ldr	r1, [r1]
 776:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, pdw1000local->txFCTRL);
 3194              		.loc 1 776 101 view .LVU752
 3195 0188 42EA0342 		orr	r2, r2, r3, lsl #16
 776:Core/Src/deca_device.c ****     dwt_write32bitreg(TX_FCTRL_ID, pdw1000local->txFCTRL);
 3196              		.loc 1 776 27 view .LVU753
 3197 018c CA60     		str	r2, [r1, #12]
 777:Core/Src/deca_device.c **** 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 100


 3198              		.loc 1 777 5 is_stmt 1 view .LVU754
 3199 018e 0021     		movs	r1, #0
 3200 0190 0820     		movs	r0, #8
 3201 0192 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 3202              	.LVL290:
 783:Core/Src/deca_device.c **** } // end dwt_configure()
 3203              		.loc 1 783 5 view .LVU755
 3204 0196 4222     		movs	r2, #66
 3205 0198 0021     		movs	r1, #0
 3206 019a 0D20     		movs	r0, #13
 3207 019c FFF7FEFF 		bl	dwt_write8bitoffsetreg
 3208              	.LVL291:
 784:Core/Src/deca_device.c **** 
 3209              		.loc 1 784 1 is_stmt 0 view .LVU756
 3210 01a0 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3211              	.LVL292:
 3212              	.L184:
 668:Core/Src/deca_device.c **** 
 3213              		.loc 1 668 49 view .LVU757
 3214 01a4 0127     		movs	r7, #1
 3215 01a6 3DE7     		b	.L172
 3216              	.L180:
 3217 01a8 0127     		movs	r7, #1
 3218 01aa 3BE7     		b	.L172
 3219              	.LVL293:
 3220              	.L173:
 692:Core/Src/deca_device.c ****     }
 3221              		.loc 1 692 9 is_stmt 1 view .LVU758
 692:Core/Src/deca_device.c ****     }
 3222              		.loc 1 692 33 is_stmt 0 view .LVU759
 3223 01ac 114B     		ldr	r3, .L188+4
 3224 01ae 1A68     		ldr	r2, [r3]
 3225 01b0 1369     		ldr	r3, [r2, #16]
 3226 01b2 23F48003 		bic	r3, r3, #4194304
 3227 01b6 1361     		str	r3, [r2, #16]
 3228 01b8 40E7     		b	.L174
 3229              	.LVL294:
 3230              	.L185:
 726:Core/Src/deca_device.c ****     }
 3231              		.loc 1 726 9 is_stmt 1 view .LVU760
 3232 01ba 6422     		movs	r2, #100
 3233 01bc 0621     		movs	r1, #6
 3234 01be 2720     		movs	r0, #39
 3235 01c0 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 3236              	.LVL295:
 3237 01c4 96E7     		b	.L176
 3238              	.L186:
 732:Core/Src/deca_device.c ****             dwt_write8bitoffsetreg(DRX_CONF_ID, DRX_TUNE4H_OFFSET, DRX_TUNE4H_PRE64);
 3239              		.loc 1 732 13 view .LVU761
 3240 01c6 1022     		movs	r2, #16
 3241 01c8 0621     		movs	r1, #6
 3242 01ca 2720     		movs	r0, #39
 3243 01cc FFF7FEFF 		bl	dwt_write16bitoffsetreg
 3244              	.LVL296:
 733:Core/Src/deca_device.c ****         }
 3245              		.loc 1 733 13 view .LVU762
 3246 01d0 1022     		movs	r2, #16
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 101


 3247 01d2 2621     		movs	r1, #38
 3248 01d4 2720     		movs	r0, #39
 3249 01d6 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 3250              	.LVL297:
 3251 01da 8BE7     		b	.L176
 3252              	.LVL298:
 3253              	.L187:
 761:Core/Src/deca_device.c ****         nsSfd_result = 3 ;
 3254              		.loc 1 761 9 view .LVU763
 761:Core/Src/deca_device.c ****         nsSfd_result = 3 ;
 3255              		.loc 1 761 67 is_stmt 0 view .LVU764
 3256 01dc E379     		ldrb	r3, [r4, #7]	@ zero_extendqisi2
 761:Core/Src/deca_device.c ****         nsSfd_result = 3 ;
 3257              		.loc 1 761 9 view .LVU765
 3258 01de 0F4A     		ldr	r2, .L188+44
 3259 01e0 D25C     		ldrb	r2, [r2, r3]	@ zero_extendqisi2
 3260 01e2 0021     		movs	r1, #0
 3261 01e4 2120     		movs	r0, #33
 3262 01e6 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 3263              	.LVL299:
 762:Core/Src/deca_device.c ****         useDWnsSFD = 1 ;
 3264              		.loc 1 762 9 is_stmt 1 view .LVU766
 763:Core/Src/deca_device.c ****     }
 3265              		.loc 1 763 9 view .LVU767
 763:Core/Src/deca_device.c ****     }
 3266              		.loc 1 763 20 is_stmt 0 view .LVU768
 3267 01ea 0121     		movs	r1, #1
 762:Core/Src/deca_device.c ****         useDWnsSFD = 1 ;
 3268              		.loc 1 762 22 view .LVU769
 3269 01ec 0322     		movs	r2, #3
 3270 01ee A6E7     		b	.L179
 3271              	.L189:
 3272              		.align	2
 3273              	.L188:
 3274 01f0 00000000 		.word	lde_replicaCoeff
 3275 01f4 00000000 		.word	.LANCHOR1
 3276 01f8 00000000 		.word	chan_idx
 3277 01fc 00000000 		.word	fs_pll_cfg
 3278 0200 00000000 		.word	fs_pll_tune
 3279 0204 00000000 		.word	rx_config
 3280 0208 00000000 		.word	tx_config
 3281 020c 00000000 		.word	sftsh
 3282 0210 00000000 		.word	dtune1
 3283 0214 00000000 		.word	digital_bb_config
 3284 0218 00000000 		.word	agc_config
 3285 021c 00000000 		.word	dwnsSFDlen
 3286              		.cfi_endproc
 3287              	.LFE17:
 3289              		.section	.text.dwt_setsmarttxpower,"ax",%progbits
 3290              		.align	1
 3291              		.global	dwt_setsmarttxpower
 3292              		.syntax unified
 3293              		.thumb
 3294              		.thumb_func
 3296              	dwt_setsmarttxpower:
 3297              	.LVL300:
 3298              	.LFB63:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 102


2150:Core/Src/deca_device.c **** 
2151:Core/Src/deca_device.c **** 
2152:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2153:Core/Src/deca_device.c ****  * @fn _dwt_loaducodefromrom()
2154:Core/Src/deca_device.c ****  *
2155:Core/Src/deca_device.c ****  * @brief  load ucode from OTP MEMORY or ROM
2156:Core/Src/deca_device.c ****  *
2157:Core/Src/deca_device.c ****  * input parameters
2158:Core/Src/deca_device.c ****  *
2159:Core/Src/deca_device.c ****  * output parameters
2160:Core/Src/deca_device.c ****  *
2161:Core/Src/deca_device.c ****  * no return value
2162:Core/Src/deca_device.c ****  */
2163:Core/Src/deca_device.c **** void _dwt_loaducodefromrom(void)
2164:Core/Src/deca_device.c **** {
2165:Core/Src/deca_device.c ****     // Set up clocks
2166:Core/Src/deca_device.c ****     _dwt_enableclocks(FORCE_LDE);
2167:Core/Src/deca_device.c **** 
2168:Core/Src/deca_device.c ****     // Kick off the LDE load
2169:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(OTP_IF_ID, OTP_CTRL, OTP_CTRL_LDELOAD); // Set load LDE kick bit
2170:Core/Src/deca_device.c **** 
2171:Core/Src/deca_device.c ****     deca_sleep(1); // Allow time for code to upload (should take up to 120 us)
2172:Core/Src/deca_device.c **** 
2173:Core/Src/deca_device.c ****     // Default clocks (ENABLE_ALL_SEQ)
2174:Core/Src/deca_device.c ****     _dwt_enableclocks(ENABLE_ALL_SEQ); // Enable clocks for sequencing
2175:Core/Src/deca_device.c **** }
2176:Core/Src/deca_device.c **** 
2177:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2178:Core/Src/deca_device.c ****  * @fn dwt_loadopsettabfromotp()
2179:Core/Src/deca_device.c ****  *
2180:Core/Src/deca_device.c ****  * @brief This is used to select which Operational Parameter Set table to load from OTP memory
2181:Core/Src/deca_device.c ****  *
2182:Core/Src/deca_device.c ****  * input parameters
2183:Core/Src/deca_device.c ****  * @param ops_sel - Operational Parameter Set table to load:
2184:Core/Src/deca_device.c ****  *                  DWT_OPSET_64LEN = 0x0 - load the operational parameter set table for 64 length 
2185:Core/Src/deca_device.c ****  *                  DWT_OPSET_TIGHT = 0x1 - load the operational parameter set table for tight xtal
2186:Core/Src/deca_device.c ****  *                  DWT_OPSET_DEFLT = 0x2 - load the default operational parameter set table (this 
2187:Core/Src/deca_device.c ****  *
2188:Core/Src/deca_device.c ****  * output parameters
2189:Core/Src/deca_device.c ****  *
2190:Core/Src/deca_device.c ****  * no return value
2191:Core/Src/deca_device.c ****  */
2192:Core/Src/deca_device.c **** void dwt_loadopsettabfromotp(uint8 ops_sel)
2193:Core/Src/deca_device.c **** {
2194:Core/Src/deca_device.c ****     uint16 reg = ((ops_sel << OTP_SF_OPS_SEL_SHFT) & OTP_SF_OPS_SEL_MASK) | OTP_SF_OPS_KICK; // Sel
2195:Core/Src/deca_device.c **** 
2196:Core/Src/deca_device.c ****     // Set up clocks
2197:Core/Src/deca_device.c ****     _dwt_enableclocks(FORCE_LDE);
2198:Core/Src/deca_device.c **** 
2199:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(OTP_IF_ID, OTP_SF, reg);
2200:Core/Src/deca_device.c **** 
2201:Core/Src/deca_device.c ****     // Default clocks (ENABLE_ALL_SEQ)
2202:Core/Src/deca_device.c ****     _dwt_enableclocks(ENABLE_ALL_SEQ); // Enable clocks for sequencing
2203:Core/Src/deca_device.c **** 
2204:Core/Src/deca_device.c **** }
2205:Core/Src/deca_device.c **** 
2206:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 103


2207:Core/Src/deca_device.c ****  * @fn dwt_setsmarttxpower()
2208:Core/Src/deca_device.c ****  *
2209:Core/Src/deca_device.c ****  * @brief This call enables or disables the smart TX power feature.
2210:Core/Src/deca_device.c ****  *
2211:Core/Src/deca_device.c ****  * input parameters
2212:Core/Src/deca_device.c ****  * @param enable - this enables or disables the TX smart power (1 = enable, 0 = disable)
2213:Core/Src/deca_device.c ****  *
2214:Core/Src/deca_device.c ****  * output parameters
2215:Core/Src/deca_device.c ****  *
2216:Core/Src/deca_device.c ****  * no return value
2217:Core/Src/deca_device.c ****  */
2218:Core/Src/deca_device.c **** void dwt_setsmarttxpower(int enable)
2219:Core/Src/deca_device.c **** {
 3299              		.loc 1 2219 1 is_stmt 1 view -0
 3300              		.cfi_startproc
 3301              		@ args = 0, pretend = 0, frame = 0
 3302              		@ frame_needed = 0, uses_anonymous_args = 0
 3303              		.loc 1 2219 1 is_stmt 0 view .LVU771
 3304 0000 38B5     		push	{r3, r4, r5, lr}
 3305              	.LCFI78:
 3306              		.cfi_def_cfa_offset 16
 3307              		.cfi_offset 3, -16
 3308              		.cfi_offset 4, -12
 3309              		.cfi_offset 5, -8
 3310              		.cfi_offset 14, -4
 3311 0002 0446     		mov	r4, r0
2220:Core/Src/deca_device.c ****     // Config system register
2221:Core/Src/deca_device.c ****     pdw1000local->sysCFGreg = dwt_read32bitreg(SYS_CFG_ID) ; // Read sysconfig register
 3312              		.loc 1 2221 5 is_stmt 1 view .LVU772
 3313              		.loc 1 2221 17 is_stmt 0 view .LVU773
 3314 0004 0E4B     		ldr	r3, .L194
 3315 0006 1D68     		ldr	r5, [r3]
 3316              		.loc 1 2221 31 view .LVU774
 3317 0008 0021     		movs	r1, #0
 3318 000a 0420     		movs	r0, #4
 3319              	.LVL301:
 3320              		.loc 1 2221 31 view .LVU775
 3321 000c FFF7FEFF 		bl	dwt_read32bitoffsetreg
 3322              	.LVL302:
 3323              		.loc 1 2221 29 view .LVU776
 3324 0010 2861     		str	r0, [r5, #16]
2222:Core/Src/deca_device.c **** 
2223:Core/Src/deca_device.c ****     // Disable smart power configuration
2224:Core/Src/deca_device.c ****     if(enable)
 3325              		.loc 1 2224 5 is_stmt 1 view .LVU777
 3326              		.loc 1 2224 7 is_stmt 0 view .LVU778
 3327 0012 6CB1     		cbz	r4, .L191
2225:Core/Src/deca_device.c ****     {
2226:Core/Src/deca_device.c ****         pdw1000local->sysCFGreg &= ~(SYS_CFG_DIS_STXP) ;
 3328              		.loc 1 2226 9 is_stmt 1 view .LVU779
 3329              		.loc 1 2226 33 is_stmt 0 view .LVU780
 3330 0014 0A4B     		ldr	r3, .L194
 3331 0016 1A68     		ldr	r2, [r3]
 3332 0018 1369     		ldr	r3, [r2, #16]
 3333 001a 23F48023 		bic	r3, r3, #262144
 3334 001e 1361     		str	r3, [r2, #16]
 3335              	.L192:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 104


2227:Core/Src/deca_device.c ****     }
2228:Core/Src/deca_device.c ****     else
2229:Core/Src/deca_device.c ****     {
2230:Core/Src/deca_device.c ****         pdw1000local->sysCFGreg |= SYS_CFG_DIS_STXP ;
2231:Core/Src/deca_device.c ****     }
2232:Core/Src/deca_device.c **** 
2233:Core/Src/deca_device.c ****     dwt_write32bitreg(SYS_CFG_ID,pdw1000local->sysCFGreg) ;
 3336              		.loc 1 2233 5 is_stmt 1 view .LVU781
 3337 0020 074B     		ldr	r3, .L194
 3338 0022 1B68     		ldr	r3, [r3]
 3339 0024 1A69     		ldr	r2, [r3, #16]
 3340 0026 0021     		movs	r1, #0
 3341 0028 0420     		movs	r0, #4
 3342 002a FFF7FEFF 		bl	dwt_write32bitoffsetreg
 3343              	.LVL303:
2234:Core/Src/deca_device.c **** }
 3344              		.loc 1 2234 1 is_stmt 0 view .LVU782
 3345 002e 38BD     		pop	{r3, r4, r5, pc}
 3346              	.LVL304:
 3347              	.L191:
2230:Core/Src/deca_device.c ****     }
 3348              		.loc 1 2230 9 is_stmt 1 view .LVU783
2230:Core/Src/deca_device.c ****     }
 3349              		.loc 1 2230 33 is_stmt 0 view .LVU784
 3350 0030 034B     		ldr	r3, .L194
 3351 0032 1A68     		ldr	r2, [r3]
 3352 0034 1369     		ldr	r3, [r2, #16]
 3353 0036 43F48023 		orr	r3, r3, #262144
 3354 003a 1361     		str	r3, [r2, #16]
 3355 003c F0E7     		b	.L192
 3356              	.L195:
 3357 003e 00BF     		.align	2
 3358              	.L194:
 3359 0040 00000000 		.word	.LANCHOR1
 3360              		.cfi_endproc
 3361              	.LFE63:
 3363              		.section	.text.dwt_enableautoack,"ax",%progbits
 3364              		.align	1
 3365              		.global	dwt_enableautoack
 3366              		.syntax unified
 3367              		.thumb
 3368              		.thumb_func
 3370              	dwt_enableautoack:
 3371              	.LVL305:
 3372              	.LFB64:
2235:Core/Src/deca_device.c **** 
2236:Core/Src/deca_device.c **** 
2237:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2238:Core/Src/deca_device.c ****  * @fn dwt_enableautoack()
2239:Core/Src/deca_device.c ****  *
2240:Core/Src/deca_device.c ****  * @brief This call enables the auto-ACK feature. If the responseDelayTime (parameter) is 0, the AC
2241:Core/Src/deca_device.c ****  * otherwise it will be sent with a programmed delay (in symbols), max is 255.
2242:Core/Src/deca_device.c ****  * NOTE: needs to have frame filtering enabled as well
2243:Core/Src/deca_device.c ****  *
2244:Core/Src/deca_device.c ****  * input parameters
2245:Core/Src/deca_device.c ****  * @param responseDelayTime - if non-zero the ACK is sent after this delay, max is 255.
2246:Core/Src/deca_device.c ****  *
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 105


2247:Core/Src/deca_device.c ****  * output parameters
2248:Core/Src/deca_device.c ****  *
2249:Core/Src/deca_device.c ****  * no return value
2250:Core/Src/deca_device.c ****  */
2251:Core/Src/deca_device.c **** void dwt_enableautoack(uint8 responseDelayTime)
2252:Core/Src/deca_device.c **** {
 3373              		.loc 1 2252 1 is_stmt 1 view -0
 3374              		.cfi_startproc
 3375              		@ args = 0, pretend = 0, frame = 0
 3376              		@ frame_needed = 0, uses_anonymous_args = 0
 3377              		.loc 1 2252 1 is_stmt 0 view .LVU786
 3378 0000 08B5     		push	{r3, lr}
 3379              	.LCFI79:
 3380              		.cfi_def_cfa_offset 8
 3381              		.cfi_offset 3, -8
 3382              		.cfi_offset 14, -4
 3383 0002 0246     		mov	r2, r0
2253:Core/Src/deca_device.c ****     // Set auto ACK reply delay
2254:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(ACK_RESP_T_ID, ACK_RESP_T_ACK_TIM_OFFSET, responseDelayTime); // In symb
 3384              		.loc 1 2254 5 is_stmt 1 view .LVU787
 3385 0004 0321     		movs	r1, #3
 3386 0006 1A20     		movs	r0, #26
 3387              	.LVL306:
 3388              		.loc 1 2254 5 is_stmt 0 view .LVU788
 3389 0008 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 3390              	.LVL307:
2255:Core/Src/deca_device.c ****     // Enable auto ACK
2256:Core/Src/deca_device.c ****     pdw1000local->sysCFGreg |= SYS_CFG_AUTOACK;
 3391              		.loc 1 2256 5 is_stmt 1 view .LVU789
 3392              		.loc 1 2256 29 is_stmt 0 view .LVU790
 3393 000c 054B     		ldr	r3, .L198
 3394 000e 1B68     		ldr	r3, [r3]
 3395 0010 1A69     		ldr	r2, [r3, #16]
 3396 0012 42F08042 		orr	r2, r2, #1073741824
 3397 0016 1A61     		str	r2, [r3, #16]
2257:Core/Src/deca_device.c ****     dwt_write32bitreg(SYS_CFG_ID,pdw1000local->sysCFGreg) ;
 3398              		.loc 1 2257 5 is_stmt 1 view .LVU791
 3399 0018 0021     		movs	r1, #0
 3400 001a 0420     		movs	r0, #4
 3401 001c FFF7FEFF 		bl	dwt_write32bitoffsetreg
 3402              	.LVL308:
2258:Core/Src/deca_device.c **** }
 3403              		.loc 1 2258 1 is_stmt 0 view .LVU792
 3404 0020 08BD     		pop	{r3, pc}
 3405              	.L199:
 3406 0022 00BF     		.align	2
 3407              	.L198:
 3408 0024 00000000 		.word	.LANCHOR1
 3409              		.cfi_endproc
 3410              	.LFE64:
 3412              		.section	.text.dwt_setdblrxbuffmode,"ax",%progbits
 3413              		.align	1
 3414              		.global	dwt_setdblrxbuffmode
 3415              		.syntax unified
 3416              		.thumb
 3417              		.thumb_func
 3419              	dwt_setdblrxbuffmode:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 106


 3420              	.LVL309:
 3421              	.LFB65:
2259:Core/Src/deca_device.c **** 
2260:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2261:Core/Src/deca_device.c ****  * @fn dwt_setdblrxbuffmode()
2262:Core/Src/deca_device.c ****  *
2263:Core/Src/deca_device.c ****  * @brief This call enables the double receive buffer mode
2264:Core/Src/deca_device.c ****  *
2265:Core/Src/deca_device.c ****  * input parameters
2266:Core/Src/deca_device.c ****  * @param enable - 1 to enable, 0 to disable the double buffer mode
2267:Core/Src/deca_device.c ****  *
2268:Core/Src/deca_device.c ****  * output parameters
2269:Core/Src/deca_device.c ****  *
2270:Core/Src/deca_device.c ****  * no return value
2271:Core/Src/deca_device.c ****  */
2272:Core/Src/deca_device.c **** void dwt_setdblrxbuffmode(int enable)
2273:Core/Src/deca_device.c **** {
 3422              		.loc 1 2273 1 is_stmt 1 view -0
 3423              		.cfi_startproc
 3424              		@ args = 0, pretend = 0, frame = 0
 3425              		@ frame_needed = 0, uses_anonymous_args = 0
 3426              		.loc 1 2273 1 is_stmt 0 view .LVU794
 3427 0000 08B5     		push	{r3, lr}
 3428              	.LCFI80:
 3429              		.cfi_def_cfa_offset 8
 3430              		.cfi_offset 3, -8
 3431              		.cfi_offset 14, -4
2274:Core/Src/deca_device.c ****     if(enable)
 3432              		.loc 1 2274 5 is_stmt 1 view .LVU795
 3433              		.loc 1 2274 7 is_stmt 0 view .LVU796
 3434 0002 78B1     		cbz	r0, .L201
2275:Core/Src/deca_device.c ****     {
2276:Core/Src/deca_device.c ****         // Enable double RX buffer mode
2277:Core/Src/deca_device.c ****         pdw1000local->sysCFGreg &= ~SYS_CFG_DIS_DRXB;
 3435              		.loc 1 2277 9 is_stmt 1 view .LVU797
 3436              		.loc 1 2277 33 is_stmt 0 view .LVU798
 3437 0004 0C4B     		ldr	r3, .L204
 3438 0006 1B68     		ldr	r3, [r3]
 3439 0008 1A69     		ldr	r2, [r3, #16]
 3440 000a 22F48052 		bic	r2, r2, #4096
 3441 000e 1A61     		str	r2, [r3, #16]
2278:Core/Src/deca_device.c ****         pdw1000local->dblbuffon = 1;
 3442              		.loc 1 2278 9 is_stmt 1 view .LVU799
 3443              		.loc 1 2278 33 is_stmt 0 view .LVU800
 3444 0010 0122     		movs	r2, #1
 3445 0012 1A75     		strb	r2, [r3, #20]
 3446              	.L202:
2279:Core/Src/deca_device.c ****     }
2280:Core/Src/deca_device.c ****     else
2281:Core/Src/deca_device.c ****     {
2282:Core/Src/deca_device.c ****         // Disable double RX buffer mode
2283:Core/Src/deca_device.c ****         pdw1000local->sysCFGreg |= SYS_CFG_DIS_DRXB;
2284:Core/Src/deca_device.c ****         pdw1000local->dblbuffon = 0;
2285:Core/Src/deca_device.c ****     }
2286:Core/Src/deca_device.c **** 
2287:Core/Src/deca_device.c ****     dwt_write32bitreg(SYS_CFG_ID,pdw1000local->sysCFGreg) ;
 3447              		.loc 1 2287 5 is_stmt 1 view .LVU801
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 107


 3448 0014 084B     		ldr	r3, .L204
 3449 0016 1B68     		ldr	r3, [r3]
 3450 0018 1A69     		ldr	r2, [r3, #16]
 3451 001a 0021     		movs	r1, #0
 3452 001c 0420     		movs	r0, #4
 3453              	.LVL310:
 3454              		.loc 1 2287 5 is_stmt 0 view .LVU802
 3455 001e FFF7FEFF 		bl	dwt_write32bitoffsetreg
 3456              	.LVL311:
2288:Core/Src/deca_device.c **** }
 3457              		.loc 1 2288 1 view .LVU803
 3458 0022 08BD     		pop	{r3, pc}
 3459              	.LVL312:
 3460              	.L201:
2283:Core/Src/deca_device.c ****         pdw1000local->dblbuffon = 0;
 3461              		.loc 1 2283 9 is_stmt 1 view .LVU804
2283:Core/Src/deca_device.c ****         pdw1000local->dblbuffon = 0;
 3462              		.loc 1 2283 33 is_stmt 0 view .LVU805
 3463 0024 044B     		ldr	r3, .L204
 3464 0026 1B68     		ldr	r3, [r3]
 3465 0028 1A69     		ldr	r2, [r3, #16]
 3466 002a 42F48052 		orr	r2, r2, #4096
 3467 002e 1A61     		str	r2, [r3, #16]
2284:Core/Src/deca_device.c ****     }
 3468              		.loc 1 2284 9 is_stmt 1 view .LVU806
2284:Core/Src/deca_device.c ****     }
 3469              		.loc 1 2284 33 is_stmt 0 view .LVU807
 3470 0030 0022     		movs	r2, #0
 3471 0032 1A75     		strb	r2, [r3, #20]
 3472 0034 EEE7     		b	.L202
 3473              	.L205:
 3474 0036 00BF     		.align	2
 3475              	.L204:
 3476 0038 00000000 		.word	.LANCHOR1
 3477              		.cfi_endproc
 3478              	.LFE65:
 3480              		.section	.text.dwt_setrxaftertxdelay,"ax",%progbits
 3481              		.align	1
 3482              		.global	dwt_setrxaftertxdelay
 3483              		.syntax unified
 3484              		.thumb
 3485              		.thumb_func
 3487              	dwt_setrxaftertxdelay:
 3488              	.LVL313:
 3489              	.LFB66:
2289:Core/Src/deca_device.c **** 
2290:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2291:Core/Src/deca_device.c ****  * @fn dwt_setrxaftertxdelay()
2292:Core/Src/deca_device.c ****  *
2293:Core/Src/deca_device.c ****  * @brief This sets the receiver turn on delay time after a transmission of a frame
2294:Core/Src/deca_device.c ****  *
2295:Core/Src/deca_device.c ****  * input parameters
2296:Core/Src/deca_device.c ****  * @param rxDelayTime - (20 bits) - the delay is in UWB microseconds
2297:Core/Src/deca_device.c ****  *
2298:Core/Src/deca_device.c ****  * output parameters
2299:Core/Src/deca_device.c ****  *
2300:Core/Src/deca_device.c ****  * no return value
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 108


2301:Core/Src/deca_device.c ****  */
2302:Core/Src/deca_device.c **** void dwt_setrxaftertxdelay(uint32 rxDelayTime)
2303:Core/Src/deca_device.c **** {
 3490              		.loc 1 2303 1 is_stmt 1 view -0
 3491              		.cfi_startproc
 3492              		@ args = 0, pretend = 0, frame = 0
 3493              		@ frame_needed = 0, uses_anonymous_args = 0
 3494              		.loc 1 2303 1 is_stmt 0 view .LVU809
 3495 0000 10B5     		push	{r4, lr}
 3496              	.LCFI81:
 3497              		.cfi_def_cfa_offset 8
 3498              		.cfi_offset 4, -8
 3499              		.cfi_offset 14, -4
 3500 0002 0446     		mov	r4, r0
2304:Core/Src/deca_device.c ****     uint32 val = dwt_read32bitreg(ACK_RESP_T_ID) ; // Read ACK_RESP_T_ID register
 3501              		.loc 1 2304 5 is_stmt 1 view .LVU810
 3502              		.loc 1 2304 18 is_stmt 0 view .LVU811
 3503 0004 0021     		movs	r1, #0
 3504 0006 1A20     		movs	r0, #26
 3505              	.LVL314:
 3506              		.loc 1 2304 18 view .LVU812
 3507 0008 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 3508              	.LVL315:
2305:Core/Src/deca_device.c **** 
2306:Core/Src/deca_device.c ****     val &= ~(ACK_RESP_T_W4R_TIM_MASK) ; // Clear the timer (19:0)
 3509              		.loc 1 2306 5 is_stmt 1 view .LVU813
 3510              		.loc 1 2306 9 is_stmt 0 view .LVU814
 3511 000c 000D     		lsrs	r0, r0, #20
 3512              	.LVL316:
 3513              		.loc 1 2306 9 view .LVU815
 3514 000e 0005     		lsls	r0, r0, #20
 3515              	.LVL317:
2307:Core/Src/deca_device.c **** 
2308:Core/Src/deca_device.c ****     val |= (rxDelayTime & ACK_RESP_T_W4R_TIM_MASK) ; // In UWB microseconds (e.g. turn the receiver
 3516              		.loc 1 2308 5 is_stmt 1 view .LVU816
 3517              		.loc 1 2308 25 is_stmt 0 view .LVU817
 3518 0010 C4F31302 		ubfx	r2, r4, #0, #20
 3519              	.LVL318:
2309:Core/Src/deca_device.c **** 
2310:Core/Src/deca_device.c ****     dwt_write32bitreg(ACK_RESP_T_ID, val) ;
 3520              		.loc 1 2310 5 is_stmt 1 view .LVU818
 3521 0014 0243     		orrs	r2, r2, r0
 3522              	.LVL319:
 3523              		.loc 1 2310 5 is_stmt 0 view .LVU819
 3524 0016 0021     		movs	r1, #0
 3525 0018 1A20     		movs	r0, #26
 3526 001a FFF7FEFF 		bl	dwt_write32bitoffsetreg
 3527              	.LVL320:
2311:Core/Src/deca_device.c **** }
 3528              		.loc 1 2311 1 view .LVU820
 3529 001e 10BD     		pop	{r4, pc}
 3530              		.loc 1 2311 1 view .LVU821
 3531              		.cfi_endproc
 3532              	.LFE66:
 3534              		.section	.text.dwt_setcallbacks,"ax",%progbits
 3535              		.align	1
 3536              		.global	dwt_setcallbacks
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 109


 3537              		.syntax unified
 3538              		.thumb
 3539              		.thumb_func
 3541              	dwt_setcallbacks:
 3542              	.LVL321:
 3543              	.LFB67:
2312:Core/Src/deca_device.c **** 
2313:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2314:Core/Src/deca_device.c ****  * @fn dwt_setcallbacks()
2315:Core/Src/deca_device.c ****  *
2316:Core/Src/deca_device.c ****  * @brief This function is used to register the different callbacks called when one of the correspo
2317:Core/Src/deca_device.c ****  *
2318:Core/Src/deca_device.c ****  * NOTE: Callbacks can be undefined (set to NULL). In this case, dwt_isr() will process the event a
2319:Core/Src/deca_device.c ****  * callback will not be called.
2320:Core/Src/deca_device.c ****  *
2321:Core/Src/deca_device.c ****  * input parameters
2322:Core/Src/deca_device.c ****  * @param cbTxDone - the pointer to the TX confirmation event callback function
2323:Core/Src/deca_device.c ****  * @param cbRxOk - the pointer to the RX good frame event callback function
2324:Core/Src/deca_device.c ****  * @param cbRxTo - the pointer to the RX timeout events callback function
2325:Core/Src/deca_device.c ****  * @param cbRxErr - the pointer to the RX error events callback function
2326:Core/Src/deca_device.c ****  *
2327:Core/Src/deca_device.c ****  * output parameters
2328:Core/Src/deca_device.c ****  *
2329:Core/Src/deca_device.c ****  * no return value
2330:Core/Src/deca_device.c ****  */
2331:Core/Src/deca_device.c **** void dwt_setcallbacks(dwt_cb_t cbTxDone, dwt_cb_t cbRxOk, dwt_cb_t cbRxTo, dwt_cb_t cbRxErr)
2332:Core/Src/deca_device.c **** {
 3544              		.loc 1 2332 1 is_stmt 1 view -0
 3545              		.cfi_startproc
 3546              		@ args = 0, pretend = 0, frame = 0
 3547              		@ frame_needed = 0, uses_anonymous_args = 0
 3548              		@ link register save eliminated.
 3549              		.loc 1 2332 1 is_stmt 0 view .LVU823
 3550 0000 10B4     		push	{r4}
 3551              	.LCFI82:
 3552              		.cfi_def_cfa_offset 4
 3553              		.cfi_offset 4, -4
2333:Core/Src/deca_device.c ****     pdw1000local->cbTxDone = cbTxDone;
 3554              		.loc 1 2333 5 is_stmt 1 view .LVU824
 3555              		.loc 1 2333 17 is_stmt 0 view .LVU825
 3556 0002 044C     		ldr	r4, .L210
 3557 0004 2468     		ldr	r4, [r4]
 3558              		.loc 1 2333 28 view .LVU826
 3559 0006 A062     		str	r0, [r4, #40]
2334:Core/Src/deca_device.c ****     pdw1000local->cbRxOk = cbRxOk;
 3560              		.loc 1 2334 5 is_stmt 1 view .LVU827
 3561              		.loc 1 2334 26 is_stmt 0 view .LVU828
 3562 0008 E162     		str	r1, [r4, #44]
2335:Core/Src/deca_device.c ****     pdw1000local->cbRxTo = cbRxTo;
 3563              		.loc 1 2335 5 is_stmt 1 view .LVU829
 3564              		.loc 1 2335 26 is_stmt 0 view .LVU830
 3565 000a 2263     		str	r2, [r4, #48]
2336:Core/Src/deca_device.c ****     pdw1000local->cbRxErr = cbRxErr;
 3566              		.loc 1 2336 5 is_stmt 1 view .LVU831
 3567              		.loc 1 2336 27 is_stmt 0 view .LVU832
 3568 000c 6363     		str	r3, [r4, #52]
2337:Core/Src/deca_device.c **** }
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 110


 3569              		.loc 1 2337 1 view .LVU833
 3570 000e 10BC     		pop	{r4}
 3571              	.LCFI83:
 3572              		.cfi_restore 4
 3573              		.cfi_def_cfa_offset 0
 3574 0010 7047     		bx	lr
 3575              	.L211:
 3576 0012 00BF     		.align	2
 3577              	.L210:
 3578 0014 00000000 		.word	.LANCHOR1
 3579              		.cfi_endproc
 3580              	.LFE67:
 3582              		.section	.text.dwt_checkirq,"ax",%progbits
 3583              		.align	1
 3584              		.global	dwt_checkirq
 3585              		.syntax unified
 3586              		.thumb
 3587              		.thumb_func
 3589              	dwt_checkirq:
 3590              	.LFB68:
2338:Core/Src/deca_device.c **** 
2339:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2340:Core/Src/deca_device.c ****  * @fn dwt_checkirq()
2341:Core/Src/deca_device.c ****  *
2342:Core/Src/deca_device.c ****  * @brief This function checks if the IRQ line is active - this is used instead of interrupt handle
2343:Core/Src/deca_device.c ****  *
2344:Core/Src/deca_device.c ****  * input parameters
2345:Core/Src/deca_device.c ****  *
2346:Core/Src/deca_device.c ****  * output parameters
2347:Core/Src/deca_device.c ****  *
2348:Core/Src/deca_device.c ****  * return value is 1 if the IRQS bit is set and 0 otherwise
2349:Core/Src/deca_device.c ****  */
2350:Core/Src/deca_device.c **** uint8 dwt_checkirq(void)
2351:Core/Src/deca_device.c **** {
 3591              		.loc 1 2351 1 is_stmt 1 view -0
 3592              		.cfi_startproc
 3593              		@ args = 0, pretend = 0, frame = 0
 3594              		@ frame_needed = 0, uses_anonymous_args = 0
 3595 0000 08B5     		push	{r3, lr}
 3596              	.LCFI84:
 3597              		.cfi_def_cfa_offset 8
 3598              		.cfi_offset 3, -8
 3599              		.cfi_offset 14, -4
2352:Core/Src/deca_device.c ****     return (dwt_read8bitoffsetreg(SYS_STATUS_ID, SYS_STATUS_OFFSET) & SYS_STATUS_IRQS); // Reading 
 3600              		.loc 1 2352 5 view .LVU835
 3601              		.loc 1 2352 13 is_stmt 0 view .LVU836
 3602 0002 0021     		movs	r1, #0
 3603 0004 0F20     		movs	r0, #15
 3604 0006 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 3605              	.LVL322:
2353:Core/Src/deca_device.c **** }
 3606              		.loc 1 2353 1 view .LVU837
 3607 000a 00F00100 		and	r0, r0, #1
 3608 000e 08BD     		pop	{r3, pc}
 3609              		.cfi_endproc
 3610              	.LFE68:
 3612              		.section	.text.dwt_setleds,"ax",%progbits
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 111


 3613              		.align	1
 3614              		.global	dwt_setleds
 3615              		.syntax unified
 3616              		.thumb
 3617              		.thumb_func
 3619              	dwt_setleds:
 3620              	.LVL323:
 3621              	.LFB71:
2354:Core/Src/deca_device.c **** 
2355:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2356:Core/Src/deca_device.c ****  * @fn dwt_isr()
2357:Core/Src/deca_device.c ****  *
2358:Core/Src/deca_device.c ****  * @brief This is the DW1000's general Interrupt Service Routine. It will process/report the follow
2359:Core/Src/deca_device.c ****  *          - RXFCG (through cbRxOk callback)
2360:Core/Src/deca_device.c ****  *          - TXFRS (through cbTxDone callback)
2361:Core/Src/deca_device.c ****  *          - RXRFTO/RXPTO (through cbRxTo callback)
2362:Core/Src/deca_device.c ****  *          - RXPHE/RXFCE/RXRFSL/RXSFDTO/AFFREJ/LDEERR (through cbRxTo cbRxErr)
2363:Core/Src/deca_device.c ****  *        For all events, corresponding interrupts are cleared and necessary resets are performed. 
2364:Core/Src/deca_device.c ****  *        received frame information and frame control are read before calling the callback. If dou
2365:Core/Src/deca_device.c ****  *        will also toggle between reception buffers once the reception callback processing has end
2366:Core/Src/deca_device.c ****  *
2367:Core/Src/deca_device.c ****  *        /!\ This version of the ISR supports double buffering but does not support automatic RX r
2368:Core/Src/deca_device.c ****  *
2369:Core/Src/deca_device.c ****  * NOTE:  In PC based system using (Cheetah or ARM) USB to SPI converter there can be no interrupts
2370:Core/Src/deca_device.c ****  *        to take the place of it and operate in a polled way. In an embedded system this function 
2371:Core/Src/deca_device.c ****  *        on any of the interrupts described above.
2372:Core/Src/deca_device.c **** 
2373:Core/Src/deca_device.c ****  * input parameters
2374:Core/Src/deca_device.c ****  *
2375:Core/Src/deca_device.c ****  * output parameters
2376:Core/Src/deca_device.c ****  *
2377:Core/Src/deca_device.c ****  * no return value
2378:Core/Src/deca_device.c ****  */
2379:Core/Src/deca_device.c **** void dwt_isr(void)
2380:Core/Src/deca_device.c **** {
2381:Core/Src/deca_device.c ****     uint32 status = pdw1000local->cbData.status = dwt_read32bitreg(SYS_STATUS_ID); // Read status r
2382:Core/Src/deca_device.c **** 
2383:Core/Src/deca_device.c ****     // Handle RX good frame event
2384:Core/Src/deca_device.c ****     if(status & SYS_STATUS_RXFCG)
2385:Core/Src/deca_device.c ****     {
2386:Core/Src/deca_device.c ****         uint16 finfo16;
2387:Core/Src/deca_device.c ****         uint16 len;
2388:Core/Src/deca_device.c **** 
2389:Core/Src/deca_device.c ****         dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_ALL_RX_GOOD); // Clear all receive status bits
2390:Core/Src/deca_device.c **** 
2391:Core/Src/deca_device.c ****         pdw1000local->cbData.rx_flags = 0;
2392:Core/Src/deca_device.c **** 
2393:Core/Src/deca_device.c ****         // Read frame info - Only the first two bytes of the register are used here.
2394:Core/Src/deca_device.c ****         finfo16 = dwt_read16bitoffsetreg(RX_FINFO_ID, RX_FINFO_OFFSET);
2395:Core/Src/deca_device.c **** 
2396:Core/Src/deca_device.c ****         // Report frame length - Standard frame length up to 127, extended frame length up to 1023 
2397:Core/Src/deca_device.c ****         len = finfo16 & RX_FINFO_RXFL_MASK_1023;
2398:Core/Src/deca_device.c ****         if(pdw1000local->longFrames == 0)
2399:Core/Src/deca_device.c ****         {
2400:Core/Src/deca_device.c ****             len &= RX_FINFO_RXFLEN_MASK;
2401:Core/Src/deca_device.c ****         }
2402:Core/Src/deca_device.c ****         pdw1000local->cbData.datalength = len;
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 112


2403:Core/Src/deca_device.c **** 
2404:Core/Src/deca_device.c ****         // Report ranging bit
2405:Core/Src/deca_device.c ****         if(finfo16 & RX_FINFO_RNG)
2406:Core/Src/deca_device.c ****         {
2407:Core/Src/deca_device.c ****             pdw1000local->cbData.rx_flags |= DWT_CB_DATA_RX_FLAG_RNG;
2408:Core/Src/deca_device.c ****         }
2409:Core/Src/deca_device.c **** 
2410:Core/Src/deca_device.c ****         // Report frame control - First bytes of the received frame.
2411:Core/Src/deca_device.c ****         dwt_readfromdevice(RX_BUFFER_ID, 0, FCTRL_LEN_MAX, pdw1000local->cbData.fctrl);
2412:Core/Src/deca_device.c **** 
2413:Core/Src/deca_device.c ****         // Because of a previous frame not being received properly, AAT bit can be set upon the pro
2414:Core/Src/deca_device.c ****         // acknowledgement (ACK frame is not actually sent though). If the AAT bit is set, check AC
2415:Core/Src/deca_device.c ****         // implementation works only for IEEE802.15.4-2011 compliant frames).
2416:Core/Src/deca_device.c ****         // This issue is not documented at the time of writing this code. It should be in next rele
2417:Core/Src/deca_device.c ****         if((status & SYS_STATUS_AAT) && ((pdw1000local->cbData.fctrl[0] & FCTRL_ACK_REQ_MASK) == 0)
2418:Core/Src/deca_device.c ****         {
2419:Core/Src/deca_device.c ****             dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_AAT); // Clear AAT status bit in register
2420:Core/Src/deca_device.c ****             pdw1000local->cbData.status &= ~SYS_STATUS_AAT; // Clear AAT status bit in callback dat
2421:Core/Src/deca_device.c ****             pdw1000local->wait4resp = 0;
2422:Core/Src/deca_device.c ****         }
2423:Core/Src/deca_device.c **** 
2424:Core/Src/deca_device.c ****         // Call the corresponding callback if present
2425:Core/Src/deca_device.c ****         if(pdw1000local->cbRxOk != NULL)
2426:Core/Src/deca_device.c ****         {
2427:Core/Src/deca_device.c ****             pdw1000local->cbRxOk(&pdw1000local->cbData);
2428:Core/Src/deca_device.c ****         }
2429:Core/Src/deca_device.c **** 
2430:Core/Src/deca_device.c ****         if (pdw1000local->dblbuffon)
2431:Core/Src/deca_device.c ****         {
2432:Core/Src/deca_device.c ****             // Toggle the Host side Receive Buffer Pointer
2433:Core/Src/deca_device.c ****             dwt_write8bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_HRBT_OFFSET, 1);
2434:Core/Src/deca_device.c ****         }
2435:Core/Src/deca_device.c ****     }
2436:Core/Src/deca_device.c **** 
2437:Core/Src/deca_device.c ****     // Handle TX confirmation event
2438:Core/Src/deca_device.c ****     if(status & SYS_STATUS_TXFRS)
2439:Core/Src/deca_device.c ****     {
2440:Core/Src/deca_device.c ****         dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_ALL_TX); // Clear TX event bits
2441:Core/Src/deca_device.c **** 
2442:Core/Src/deca_device.c ****         // In the case where this TXFRS interrupt is due to the automatic transmission of an ACK so
2443:Core/Src/deca_device.c ****         // that we receive through using wait4resp to a previous TX (and assuming that the IRQ proc
2444:Core/Src/deca_device.c ****         // we need to handle the IC issue which turns on the RX again in this situation (i.e. becau
2445:Core/Src/deca_device.c ****         // ACK TX).
2446:Core/Src/deca_device.c ****         // See section "Transmit and automatically wait for response" in DW1000 User Manual
2447:Core/Src/deca_device.c ****         if((status & SYS_STATUS_AAT) && pdw1000local->wait4resp)
2448:Core/Src/deca_device.c ****         {
2449:Core/Src/deca_device.c ****             dwt_forcetrxoff(); // Turn the RX off
2450:Core/Src/deca_device.c ****             dwt_rxreset(); // Reset in case we were late and a frame was already being received
2451:Core/Src/deca_device.c ****         }
2452:Core/Src/deca_device.c **** 
2453:Core/Src/deca_device.c ****         // Call the corresponding callback if present
2454:Core/Src/deca_device.c ****         if(pdw1000local->cbTxDone != NULL)
2455:Core/Src/deca_device.c ****         {
2456:Core/Src/deca_device.c ****             pdw1000local->cbTxDone(&pdw1000local->cbData);
2457:Core/Src/deca_device.c ****         }
2458:Core/Src/deca_device.c ****     }
2459:Core/Src/deca_device.c **** 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 113


2460:Core/Src/deca_device.c ****     // Handle frame reception/preamble detect timeout events
2461:Core/Src/deca_device.c ****     if(status & SYS_STATUS_ALL_RX_TO)
2462:Core/Src/deca_device.c ****     {
2463:Core/Src/deca_device.c ****         dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_RXRFTO); // Clear RX timeout event bits
2464:Core/Src/deca_device.c **** 
2465:Core/Src/deca_device.c ****         pdw1000local->wait4resp = 0;
2466:Core/Src/deca_device.c **** 
2467:Core/Src/deca_device.c ****         // Because of an issue with receiver restart after error conditions, an RX reset must be ap
2468:Core/Src/deca_device.c ****         // the next good frame's timestamp is computed correctly.
2469:Core/Src/deca_device.c ****         // See section "RX Message timestamp" in DW1000 User Manual.
2470:Core/Src/deca_device.c ****         dwt_forcetrxoff();
2471:Core/Src/deca_device.c ****         dwt_rxreset();
2472:Core/Src/deca_device.c **** 
2473:Core/Src/deca_device.c ****         // Call the corresponding callback if present
2474:Core/Src/deca_device.c ****         if(pdw1000local->cbRxTo != NULL)
2475:Core/Src/deca_device.c ****         {
2476:Core/Src/deca_device.c ****             pdw1000local->cbRxTo(&pdw1000local->cbData);
2477:Core/Src/deca_device.c ****         }
2478:Core/Src/deca_device.c ****     }
2479:Core/Src/deca_device.c **** 
2480:Core/Src/deca_device.c ****     // Handle RX errors events
2481:Core/Src/deca_device.c ****     if(status & SYS_STATUS_ALL_RX_ERR)
2482:Core/Src/deca_device.c ****     {
2483:Core/Src/deca_device.c ****         dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_ALL_RX_ERR); // Clear RX error event bits
2484:Core/Src/deca_device.c **** 
2485:Core/Src/deca_device.c ****         pdw1000local->wait4resp = 0;
2486:Core/Src/deca_device.c **** 
2487:Core/Src/deca_device.c ****         // Because of an issue with receiver restart after error conditions, an RX reset must be ap
2488:Core/Src/deca_device.c ****         // the next good frame's timestamp is computed correctly.
2489:Core/Src/deca_device.c ****         // See section "RX Message timestamp" in DW1000 User Manual.
2490:Core/Src/deca_device.c ****         dwt_forcetrxoff();
2491:Core/Src/deca_device.c ****         dwt_rxreset();
2492:Core/Src/deca_device.c **** 
2493:Core/Src/deca_device.c ****         // Call the corresponding callback if present
2494:Core/Src/deca_device.c ****         if(pdw1000local->cbRxErr != NULL)
2495:Core/Src/deca_device.c ****         {
2496:Core/Src/deca_device.c ****             pdw1000local->cbRxErr(&pdw1000local->cbData);
2497:Core/Src/deca_device.c ****         }
2498:Core/Src/deca_device.c ****     }
2499:Core/Src/deca_device.c **** }
2500:Core/Src/deca_device.c **** 
2501:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2502:Core/Src/deca_device.c ****  * @fn dwt_isr_lplisten()
2503:Core/Src/deca_device.c ****  *
2504:Core/Src/deca_device.c ****  * @brief This is the DW1000's Interrupt Service Routine to use when low-power listening scheme is 
2505:Core/Src/deca_device.c ****  *        only process/report the RXFCG event (through cbRxOk callback).
2506:Core/Src/deca_device.c ****  *        It clears RXFCG interrupt and reads received frame information and frame control before c
2507:Core/Src/deca_device.c ****  *
2508:Core/Src/deca_device.c ****  *        /!\ This version of the ISR is designed for single buffering case only!
2509:Core/Src/deca_device.c ****  *
2510:Core/Src/deca_device.c ****  * input parameters
2511:Core/Src/deca_device.c ****  *
2512:Core/Src/deca_device.c ****  * output parameters
2513:Core/Src/deca_device.c ****  *
2514:Core/Src/deca_device.c ****  * no return value
2515:Core/Src/deca_device.c ****  */
2516:Core/Src/deca_device.c **** void dwt_lowpowerlistenisr(void)
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 114


2517:Core/Src/deca_device.c **** {
2518:Core/Src/deca_device.c ****     uint32 status = pdw1000local->cbData.status = dwt_read32bitreg(SYS_STATUS_ID); // Read status r
2519:Core/Src/deca_device.c ****     uint16 finfo16;
2520:Core/Src/deca_device.c ****     uint16 len;
2521:Core/Src/deca_device.c **** 
2522:Core/Src/deca_device.c ****     // The only interrupt handled when in low-power listening mode is RX good frame so proceed dire
2523:Core/Src/deca_device.c **** 
2524:Core/Src/deca_device.c ****     // Deactivate low-power listening before clearing the interrupt. If not, the DW1000 will go bac
2525:Core/Src/deca_device.c ****     dwt_setlowpowerlistening(0);
2526:Core/Src/deca_device.c **** 
2527:Core/Src/deca_device.c ****     dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_ALL_RX_GOOD); // Clear all receive status bits
2528:Core/Src/deca_device.c **** 
2529:Core/Src/deca_device.c ****     pdw1000local->cbData.rx_flags = 0;
2530:Core/Src/deca_device.c **** 
2531:Core/Src/deca_device.c ****     // Read frame info - Only the first two bytes of the register are used here.
2532:Core/Src/deca_device.c ****     finfo16 = dwt_read16bitoffsetreg(RX_FINFO_ID, 0);
2533:Core/Src/deca_device.c **** 
2534:Core/Src/deca_device.c ****     // Report frame length - Standard frame length up to 127, extended frame length up to 1023 byte
2535:Core/Src/deca_device.c ****     len = finfo16 & RX_FINFO_RXFL_MASK_1023;
2536:Core/Src/deca_device.c ****     if(pdw1000local->longFrames == 0)
2537:Core/Src/deca_device.c ****     {
2538:Core/Src/deca_device.c ****         len &= RX_FINFO_RXFLEN_MASK;
2539:Core/Src/deca_device.c ****     }
2540:Core/Src/deca_device.c ****     pdw1000local->cbData.datalength = len;
2541:Core/Src/deca_device.c **** 
2542:Core/Src/deca_device.c ****     // Report ranging bit
2543:Core/Src/deca_device.c ****     if(finfo16 & RX_FINFO_RNG)
2544:Core/Src/deca_device.c ****     {
2545:Core/Src/deca_device.c ****         pdw1000local->cbData.rx_flags |= DWT_CB_DATA_RX_FLAG_RNG;
2546:Core/Src/deca_device.c ****     }
2547:Core/Src/deca_device.c **** 
2548:Core/Src/deca_device.c ****     // Report frame control - First bytes of the received frame.
2549:Core/Src/deca_device.c ****     dwt_readfromdevice(RX_BUFFER_ID, 0, FCTRL_LEN_MAX, pdw1000local->cbData.fctrl);
2550:Core/Src/deca_device.c **** 
2551:Core/Src/deca_device.c ****     // Because of a previous frame not being received properly, AAT bit can be set upon the proper 
2552:Core/Src/deca_device.c ****     // acknowledgement (ACK frame is not actually sent though). If the AAT bit is set, check ACK re
2553:Core/Src/deca_device.c ****     // implementation works only for IEEE802.15.4-2011 compliant frames).
2554:Core/Src/deca_device.c ****     // This issue is not documented at the time of writing this code. It should be in next release 
2555:Core/Src/deca_device.c ****     if((status & SYS_STATUS_AAT) && ((pdw1000local->cbData.fctrl[0] & FCTRL_ACK_REQ_MASK) == 0))
2556:Core/Src/deca_device.c ****     {
2557:Core/Src/deca_device.c ****         dwt_write32bitreg(SYS_STATUS_ID, SYS_STATUS_AAT); // Clear AAT status bit in register
2558:Core/Src/deca_device.c ****         pdw1000local->cbData.status &= ~SYS_STATUS_AAT; // Clear AAT status bit in callback data re
2559:Core/Src/deca_device.c ****         pdw1000local->wait4resp = 0;
2560:Core/Src/deca_device.c ****     }
2561:Core/Src/deca_device.c **** 
2562:Core/Src/deca_device.c ****     // Call the corresponding callback if present
2563:Core/Src/deca_device.c ****     if(pdw1000local->cbRxOk != NULL)
2564:Core/Src/deca_device.c ****     {
2565:Core/Src/deca_device.c ****         pdw1000local->cbRxOk(&pdw1000local->cbData);
2566:Core/Src/deca_device.c ****     }
2567:Core/Src/deca_device.c **** }
2568:Core/Src/deca_device.c **** 
2569:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2570:Core/Src/deca_device.c ****  * @fn dwt_setleds()
2571:Core/Src/deca_device.c ****  *
2572:Core/Src/deca_device.c ****  * @brief This is used to set up Tx/Rx GPIOs which could be used to control LEDs
2573:Core/Src/deca_device.c ****  * Note: not completely IC dependent, also needs board with LEDS fitted on right I/O lines
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 115


2574:Core/Src/deca_device.c ****  *       this function enables GPIOs 2 and 3 which are connected to LED3 and LED4 on EVB1000
2575:Core/Src/deca_device.c ****  *
2576:Core/Src/deca_device.c ****  * input parameters
2577:Core/Src/deca_device.c ****  * @param mode - this is a bit field interpreted as follows:
2578:Core/Src/deca_device.c ****  *          - bit 0: 1 to enable LEDs, 0 to disable them
2579:Core/Src/deca_device.c ****  *          - bit 1: 1 to make LEDs blink once on init. Only valid if bit 0 is set (enable LEDs)
2580:Core/Src/deca_device.c ****  *          - bit 2 to 7: reserved
2581:Core/Src/deca_device.c ****  *
2582:Core/Src/deca_device.c ****  * output parameters none
2583:Core/Src/deca_device.c ****  *
2584:Core/Src/deca_device.c ****  * no return value
2585:Core/Src/deca_device.c ****  */
2586:Core/Src/deca_device.c **** void dwt_setleds(uint8 mode)
2587:Core/Src/deca_device.c **** {
 3622              		.loc 1 2587 1 is_stmt 1 view -0
 3623              		.cfi_startproc
 3624              		@ args = 0, pretend = 0, frame = 0
 3625              		@ frame_needed = 0, uses_anonymous_args = 0
 3626              		.loc 1 2587 1 is_stmt 0 view .LVU839
 3627 0000 38B5     		push	{r3, r4, r5, lr}
 3628              	.LCFI85:
 3629              		.cfi_def_cfa_offset 16
 3630              		.cfi_offset 3, -16
 3631              		.cfi_offset 4, -12
 3632              		.cfi_offset 5, -8
 3633              		.cfi_offset 14, -4
2588:Core/Src/deca_device.c ****     uint32 reg;
 3634              		.loc 1 2588 5 is_stmt 1 view .LVU840
2589:Core/Src/deca_device.c **** 
2590:Core/Src/deca_device.c ****     if (mode & DWT_LEDS_ENABLE)
 3635              		.loc 1 2590 5 view .LVU841
 3636              		.loc 1 2590 8 is_stmt 0 view .LVU842
 3637 0002 10F0010F 		tst	r0, #1
 3638 0006 2AD0     		beq	.L215
 3639 0008 0446     		mov	r4, r0
2591:Core/Src/deca_device.c ****     {
2592:Core/Src/deca_device.c ****         // Set up MFIO for LED output.
2593:Core/Src/deca_device.c ****         reg = dwt_read32bitoffsetreg(GPIO_CTRL_ID, GPIO_MODE_OFFSET);
 3640              		.loc 1 2593 9 is_stmt 1 view .LVU843
 3641              		.loc 1 2593 15 is_stmt 0 view .LVU844
 3642 000a 0021     		movs	r1, #0
 3643 000c 2620     		movs	r0, #38
 3644              	.LVL324:
 3645              		.loc 1 2593 15 view .LVU845
 3646 000e FFF7FEFF 		bl	dwt_read32bitoffsetreg
 3647              	.LVL325:
2594:Core/Src/deca_device.c ****         reg &= ~(GPIO_MSGP2_MASK | GPIO_MSGP3_MASK);
 3648              		.loc 1 2594 9 is_stmt 1 view .LVU846
 3649              		.loc 1 2594 13 is_stmt 0 view .LVU847
 3650 0012 20F47052 		bic	r2, r0, #15360
 3651              	.LVL326:
2595:Core/Src/deca_device.c ****         reg |= (GPIO_PIN2_RXLED | GPIO_PIN3_TXLED);
 3652              		.loc 1 2595 9 is_stmt 1 view .LVU848
2596:Core/Src/deca_device.c ****         dwt_write32bitoffsetreg(GPIO_CTRL_ID, GPIO_MODE_OFFSET, reg);
 3653              		.loc 1 2596 9 view .LVU849
 3654 0016 42F4A052 		orr	r2, r2, #5120
 3655              	.LVL327:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 116


 3656              		.loc 1 2596 9 is_stmt 0 view .LVU850
 3657 001a 0021     		movs	r1, #0
 3658 001c 2620     		movs	r0, #38
 3659 001e FFF7FEFF 		bl	dwt_write32bitoffsetreg
 3660              	.LVL328:
2597:Core/Src/deca_device.c **** 
2598:Core/Src/deca_device.c ****         // Enable LP Oscillator to run from counter and turn on de-bounce clock.
2599:Core/Src/deca_device.c ****         reg = dwt_read32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET);
 3661              		.loc 1 2599 9 is_stmt 1 view .LVU851
 3662              		.loc 1 2599 15 is_stmt 0 view .LVU852
 3663 0022 0021     		movs	r1, #0
 3664 0024 3620     		movs	r0, #54
 3665 0026 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 3666              	.LVL329:
2600:Core/Src/deca_device.c ****         reg |= (PMSC_CTRL0_GPDCE | PMSC_CTRL0_KHZCLEN);
 3667              		.loc 1 2600 9 is_stmt 1 view .LVU853
2601:Core/Src/deca_device.c ****         dwt_write32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, reg);
 3668              		.loc 1 2601 9 view .LVU854
 3669 002a 40F40402 		orr	r2, r0, #8650752
 3670              	.LVL330:
 3671              		.loc 1 2601 9 is_stmt 0 view .LVU855
 3672 002e 0021     		movs	r1, #0
 3673 0030 3620     		movs	r0, #54
 3674 0032 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 3675              	.LVL331:
2602:Core/Src/deca_device.c **** 
2603:Core/Src/deca_device.c ****         // Enable LEDs to blink and set default blink time.
2604:Core/Src/deca_device.c ****         reg = PMSC_LEDC_BLNKEN | PMSC_LEDC_BLINK_TIME_DEF;
 3676              		.loc 1 2604 9 is_stmt 1 view .LVU856
2605:Core/Src/deca_device.c ****         // Make LEDs blink once if requested.
2606:Core/Src/deca_device.c ****         if (mode & DWT_LEDS_INIT_BLINK)
 3677              		.loc 1 2606 9 view .LVU857
 3678              		.loc 1 2606 12 is_stmt 0 view .LVU858
 3679 0036 14F00204 		ands	r4, r4, #2
 3680 003a 0ED1     		bne	.L218
2604:Core/Src/deca_device.c ****         // Make LEDs blink once if requested.
 3681              		.loc 1 2604 13 view .LVU859
 3682 003c 4FF48875 		mov	r5, #272
 3683              	.L216:
 3684              	.LVL332:
2607:Core/Src/deca_device.c ****         {
2608:Core/Src/deca_device.c ****             reg |= PMSC_LEDC_BLINK_NOW_ALL;
2609:Core/Src/deca_device.c ****         }
2610:Core/Src/deca_device.c ****         dwt_write32bitoffsetreg(PMSC_ID, PMSC_LEDC_OFFSET, reg);
 3685              		.loc 1 2610 9 is_stmt 1 view .LVU860
 3686 0040 2A46     		mov	r2, r5
 3687 0042 2821     		movs	r1, #40
 3688 0044 3620     		movs	r0, #54
 3689 0046 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 3690              	.LVL333:
2611:Core/Src/deca_device.c ****         // Clear force blink bits if needed.
2612:Core/Src/deca_device.c ****         if(mode & DWT_LEDS_INIT_BLINK)
 3691              		.loc 1 2612 9 view .LVU861
 3692              		.loc 1 2612 11 is_stmt 0 view .LVU862
 3693 004a 94B1     		cbz	r4, .L214
2613:Core/Src/deca_device.c ****         {
2614:Core/Src/deca_device.c ****             reg &= ~PMSC_LEDC_BLINK_NOW_ALL;
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 117


 3694              		.loc 1 2614 13 is_stmt 1 view .LVU863
 3695              	.LVL334:
2615:Core/Src/deca_device.c ****             dwt_write32bitoffsetreg(PMSC_ID, PMSC_LEDC_OFFSET, reg);
 3696              		.loc 1 2615 13 view .LVU864
 3697 004c 05F48872 		and	r2, r5, #272
 3698 0050 2821     		movs	r1, #40
 3699 0052 3620     		movs	r0, #54
 3700 0054 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 3701              	.LVL335:
 3702 0058 0BE0     		b	.L214
 3703              	.LVL336:
 3704              	.L218:
2608:Core/Src/deca_device.c ****         }
 3705              		.loc 1 2608 17 is_stmt 0 view .LVU865
 3706 005a 064D     		ldr	r5, .L220
 3707 005c F0E7     		b	.L216
 3708              	.LVL337:
 3709              	.L215:
2616:Core/Src/deca_device.c ****         }
2617:Core/Src/deca_device.c ****     }
2618:Core/Src/deca_device.c ****     else
2619:Core/Src/deca_device.c ****     {
2620:Core/Src/deca_device.c ****         // Clear the GPIO bits that are used for LED control.
2621:Core/Src/deca_device.c ****         reg = dwt_read32bitoffsetreg(GPIO_CTRL_ID, GPIO_MODE_OFFSET);
 3710              		.loc 1 2621 9 is_stmt 1 view .LVU866
 3711              		.loc 1 2621 15 is_stmt 0 view .LVU867
 3712 005e 0021     		movs	r1, #0
 3713 0060 2620     		movs	r0, #38
 3714              	.LVL338:
 3715              		.loc 1 2621 15 view .LVU868
 3716 0062 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 3717              	.LVL339:
2622:Core/Src/deca_device.c ****         reg &= ~(GPIO_MSGP2_MASK | GPIO_MSGP3_MASK);
 3718              		.loc 1 2622 9 is_stmt 1 view .LVU869
2623:Core/Src/deca_device.c ****         dwt_write32bitoffsetreg(GPIO_CTRL_ID, GPIO_MODE_OFFSET, reg);
 3719              		.loc 1 2623 9 view .LVU870
 3720 0066 20F47052 		bic	r2, r0, #15360
 3721              	.LVL340:
 3722              		.loc 1 2623 9 is_stmt 0 view .LVU871
 3723 006a 0021     		movs	r1, #0
 3724 006c 2620     		movs	r0, #38
 3725 006e FFF7FEFF 		bl	dwt_write32bitoffsetreg
 3726              	.LVL341:
 3727              	.L214:
2624:Core/Src/deca_device.c ****     }
2625:Core/Src/deca_device.c **** }
 3728              		.loc 1 2625 1 view .LVU872
 3729 0072 38BD     		pop	{r3, r4, r5, pc}
 3730              	.L221:
 3731              		.align	2
 3732              	.L220:
 3733 0074 10010F00 		.word	983312
 3734              		.cfi_endproc
 3735              	.LFE71:
 3737              		.section	.text._dwt_enableclocks,"ax",%progbits
 3738              		.align	1
 3739              		.global	_dwt_enableclocks
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 118


 3740              		.syntax unified
 3741              		.thumb
 3742              		.thumb_func
 3744              	_dwt_enableclocks:
 3745              	.LVL342:
 3746              	.LFB72:
2626:Core/Src/deca_device.c **** 
2627:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2628:Core/Src/deca_device.c ****  * @fn _dwt_enableclocks()
2629:Core/Src/deca_device.c ****  *
2630:Core/Src/deca_device.c ****  * @brief function to enable/disable clocks to particular digital blocks/system
2631:Core/Src/deca_device.c ****  *
2632:Core/Src/deca_device.c ****  * input parameters
2633:Core/Src/deca_device.c ****  * @param clocks - set of clocks to enable/disable
2634:Core/Src/deca_device.c ****  *
2635:Core/Src/deca_device.c ****  * output parameters none
2636:Core/Src/deca_device.c ****  *
2637:Core/Src/deca_device.c ****  * no return value
2638:Core/Src/deca_device.c ****  */
2639:Core/Src/deca_device.c **** void _dwt_enableclocks(int clocks)
2640:Core/Src/deca_device.c **** {
 3747              		.loc 1 2640 1 is_stmt 1 view -0
 3748              		.cfi_startproc
 3749              		@ args = 0, pretend = 0, frame = 8
 3750              		@ frame_needed = 0, uses_anonymous_args = 0
 3751              		.loc 1 2640 1 is_stmt 0 view .LVU874
 3752 0000 10B5     		push	{r4, lr}
 3753              	.LCFI86:
 3754              		.cfi_def_cfa_offset 8
 3755              		.cfi_offset 4, -8
 3756              		.cfi_offset 14, -4
 3757 0002 82B0     		sub	sp, sp, #8
 3758              	.LCFI87:
 3759              		.cfi_def_cfa_offset 16
 3760 0004 0446     		mov	r4, r0
2641:Core/Src/deca_device.c ****     uint8 reg[2];
 3761              		.loc 1 2641 5 is_stmt 1 view .LVU875
2642:Core/Src/deca_device.c **** 
2643:Core/Src/deca_device.c ****     dwt_readfromdevice(PMSC_ID, PMSC_CTRL0_OFFSET, 2, reg);
 3762              		.loc 1 2643 5 view .LVU876
 3763 0006 01AB     		add	r3, sp, #4
 3764 0008 0222     		movs	r2, #2
 3765 000a 0021     		movs	r1, #0
 3766 000c 3620     		movs	r0, #54
 3767              	.LVL343:
 3768              		.loc 1 2643 5 is_stmt 0 view .LVU877
 3769 000e FFF7FEFF 		bl	dwt_readfromdevice
 3770              	.LVL344:
2644:Core/Src/deca_device.c ****     switch(clocks)
 3771              		.loc 1 2644 5 is_stmt 1 view .LVU878
 3772 0012 0E2C     		cmp	r4, #14
 3773 0014 12D8     		bhi	.L223
 3774 0016 DFE804F0 		tbb	[pc, r4]
 3775              	.L225:
 3776 001a 20       		.byte	(.L233-.L225)/2
 3777 001b 08       		.byte	(.L232-.L225)/2
 3778 001c 29       		.byte	(.L231-.L225)/2
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 119


 3779 001d 11       		.byte	(.L223-.L225)/2
 3780 001e 11       		.byte	(.L223-.L225)/2
 3781 001f 11       		.byte	(.L223-.L225)/2
 3782 0020 11       		.byte	(.L223-.L225)/2
 3783 0021 32       		.byte	(.L230-.L225)/2
 3784 0022 41       		.byte	(.L229-.L225)/2
 3785 0023 11       		.byte	(.L223-.L225)/2
 3786 0024 11       		.byte	(.L223-.L225)/2
 3787 0025 4E       		.byte	(.L228-.L225)/2
 3788 0026 55       		.byte	(.L227-.L225)/2
 3789 0027 5C       		.byte	(.L226-.L225)/2
 3790 0028 65       		.byte	(.L224-.L225)/2
 3791 0029 00       		.p2align 1
 3792              	.L232:
2645:Core/Src/deca_device.c ****     {
2646:Core/Src/deca_device.c ****         case ENABLE_ALL_SEQ:
2647:Core/Src/deca_device.c ****         {
2648:Core/Src/deca_device.c ****             reg[0] = 0x00 ;
 3793              		.loc 1 2648 13 view .LVU879
 3794              		.loc 1 2648 20 is_stmt 0 view .LVU880
 3795 002a 0023     		movs	r3, #0
 3796 002c 8DF80430 		strb	r3, [sp, #4]
2649:Core/Src/deca_device.c ****             reg[1] = reg[1] & 0xfe;
 3797              		.loc 1 2649 13 is_stmt 1 view .LVU881
 3798              		.loc 1 2649 25 is_stmt 0 view .LVU882
 3799 0030 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 3800              		.loc 1 2649 29 view .LVU883
 3801 0034 03F0FE03 		and	r3, r3, #254
 3802              		.loc 1 2649 20 view .LVU884
 3803 0038 8DF80530 		strb	r3, [sp, #5]
2650:Core/Src/deca_device.c ****         }
2651:Core/Src/deca_device.c ****         break;
 3804              		.loc 1 2651 9 is_stmt 1 view .LVU885
 3805              	.L223:
2652:Core/Src/deca_device.c ****         case FORCE_SYS_XTI:
2653:Core/Src/deca_device.c ****         {
2654:Core/Src/deca_device.c ****             // System and RX
2655:Core/Src/deca_device.c ****             reg[0] = 0x01 | (reg[0] & 0xfc);
2656:Core/Src/deca_device.c ****         }
2657:Core/Src/deca_device.c ****         break;
2658:Core/Src/deca_device.c ****         case FORCE_SYS_PLL:
2659:Core/Src/deca_device.c ****         {
2660:Core/Src/deca_device.c ****             // System
2661:Core/Src/deca_device.c ****             reg[0] = 0x02 | (reg[0] & 0xfc);
2662:Core/Src/deca_device.c ****         }
2663:Core/Src/deca_device.c ****         break;
2664:Core/Src/deca_device.c ****         case READ_ACC_ON:
2665:Core/Src/deca_device.c ****         {
2666:Core/Src/deca_device.c ****             reg[0] = 0x48 | (reg[0] & 0xb3);
2667:Core/Src/deca_device.c ****             reg[1] = 0x80 | reg[1];
2668:Core/Src/deca_device.c ****         }
2669:Core/Src/deca_device.c ****         break;
2670:Core/Src/deca_device.c ****         case READ_ACC_OFF:
2671:Core/Src/deca_device.c ****         {
2672:Core/Src/deca_device.c ****             reg[0] = reg[0] & 0xb3;
2673:Core/Src/deca_device.c ****             reg[1] = 0x7f & reg[1];
2674:Core/Src/deca_device.c ****         }
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 120


2675:Core/Src/deca_device.c ****         break;
2676:Core/Src/deca_device.c ****         case FORCE_OTP_ON:
2677:Core/Src/deca_device.c ****         {
2678:Core/Src/deca_device.c ****             reg[1] = 0x02 | reg[1];
2679:Core/Src/deca_device.c ****         }
2680:Core/Src/deca_device.c ****         break;
2681:Core/Src/deca_device.c ****         case FORCE_OTP_OFF:
2682:Core/Src/deca_device.c ****         {
2683:Core/Src/deca_device.c ****             reg[1] = reg[1] & 0xfd;
2684:Core/Src/deca_device.c ****         }
2685:Core/Src/deca_device.c ****         break;
2686:Core/Src/deca_device.c ****         case FORCE_TX_PLL:
2687:Core/Src/deca_device.c ****         {
2688:Core/Src/deca_device.c ****             reg[0] = 0x20 | (reg[0] & 0xcf);
2689:Core/Src/deca_device.c ****         }
2690:Core/Src/deca_device.c ****         break;
2691:Core/Src/deca_device.c ****         case FORCE_LDE:
2692:Core/Src/deca_device.c ****         {
2693:Core/Src/deca_device.c ****             reg[0] = 0x01;
2694:Core/Src/deca_device.c ****             reg[1] = 0x03;
2695:Core/Src/deca_device.c ****         }
2696:Core/Src/deca_device.c ****         break;
2697:Core/Src/deca_device.c ****         default:
2698:Core/Src/deca_device.c ****         break;
2699:Core/Src/deca_device.c ****     }
2700:Core/Src/deca_device.c **** 
2701:Core/Src/deca_device.c **** 
2702:Core/Src/deca_device.c ****     // Need to write lower byte separately before setting the higher byte(s)
2703:Core/Src/deca_device.c ****     dwt_writetodevice(PMSC_ID, PMSC_CTRL0_OFFSET, 1, &reg[0]);
 3806              		.loc 1 2703 5 view .LVU886
 3807 003c 01AB     		add	r3, sp, #4
 3808 003e 0122     		movs	r2, #1
 3809 0040 0021     		movs	r1, #0
 3810 0042 3620     		movs	r0, #54
 3811 0044 FFF7FEFF 		bl	dwt_writetodevice
 3812              	.LVL345:
2704:Core/Src/deca_device.c ****     dwt_writetodevice(PMSC_ID, 0x1, 1, &reg[1]);
 3813              		.loc 1 2704 5 view .LVU887
 3814 0048 0DF10503 		add	r3, sp, #5
 3815 004c 0122     		movs	r2, #1
 3816 004e 1146     		mov	r1, r2
 3817 0050 3620     		movs	r0, #54
 3818 0052 FFF7FEFF 		bl	dwt_writetodevice
 3819              	.LVL346:
2705:Core/Src/deca_device.c **** 
2706:Core/Src/deca_device.c **** } // end _dwt_enableclocks()
 3820              		.loc 1 2706 1 is_stmt 0 view .LVU888
 3821 0056 02B0     		add	sp, sp, #8
 3822              	.LCFI88:
 3823              		.cfi_remember_state
 3824              		.cfi_def_cfa_offset 8
 3825              		@ sp needed
 3826 0058 10BD     		pop	{r4, pc}
 3827              	.LVL347:
 3828              	.L233:
 3829              	.LCFI89:
 3830              		.cfi_restore_state
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 121


2655:Core/Src/deca_device.c ****         }
 3831              		.loc 1 2655 13 is_stmt 1 view .LVU889
2655:Core/Src/deca_device.c ****         }
 3832              		.loc 1 2655 33 is_stmt 0 view .LVU890
 3833 005a 9DF90430 		ldrsb	r3, [sp, #4]
2655:Core/Src/deca_device.c ****         }
 3834              		.loc 1 2655 37 view .LVU891
 3835 005e 23F00303 		bic	r3, r3, #3
2655:Core/Src/deca_device.c ****         }
 3836              		.loc 1 2655 27 view .LVU892
 3837 0062 43F00103 		orr	r3, r3, #1
2655:Core/Src/deca_device.c ****         }
 3838              		.loc 1 2655 20 view .LVU893
 3839 0066 8DF80430 		strb	r3, [sp, #4]
2657:Core/Src/deca_device.c ****         case FORCE_SYS_PLL:
 3840              		.loc 1 2657 9 is_stmt 1 view .LVU894
 3841 006a E7E7     		b	.L223
 3842              	.L231:
2661:Core/Src/deca_device.c ****         }
 3843              		.loc 1 2661 13 view .LVU895
2661:Core/Src/deca_device.c ****         }
 3844              		.loc 1 2661 33 is_stmt 0 view .LVU896
 3845 006c 9DF90430 		ldrsb	r3, [sp, #4]
2661:Core/Src/deca_device.c ****         }
 3846              		.loc 1 2661 37 view .LVU897
 3847 0070 23F00303 		bic	r3, r3, #3
2661:Core/Src/deca_device.c ****         }
 3848              		.loc 1 2661 27 view .LVU898
 3849 0074 43F00203 		orr	r3, r3, #2
2661:Core/Src/deca_device.c ****         }
 3850              		.loc 1 2661 20 view .LVU899
 3851 0078 8DF80430 		strb	r3, [sp, #4]
2663:Core/Src/deca_device.c ****         case READ_ACC_ON:
 3852              		.loc 1 2663 9 is_stmt 1 view .LVU900
 3853 007c DEE7     		b	.L223
 3854              	.L230:
2666:Core/Src/deca_device.c ****             reg[1] = 0x80 | reg[1];
 3855              		.loc 1 2666 13 view .LVU901
2666:Core/Src/deca_device.c ****             reg[1] = 0x80 | reg[1];
 3856              		.loc 1 2666 33 is_stmt 0 view .LVU902
 3857 007e 9DF90430 		ldrsb	r3, [sp, #4]
2666:Core/Src/deca_device.c ****             reg[1] = 0x80 | reg[1];
 3858              		.loc 1 2666 37 view .LVU903
 3859 0082 23F04C03 		bic	r3, r3, #76
2666:Core/Src/deca_device.c ****             reg[1] = 0x80 | reg[1];
 3860              		.loc 1 2666 27 view .LVU904
 3861 0086 43F04803 		orr	r3, r3, #72
2666:Core/Src/deca_device.c ****             reg[1] = 0x80 | reg[1];
 3862              		.loc 1 2666 20 view .LVU905
 3863 008a 8DF80430 		strb	r3, [sp, #4]
2667:Core/Src/deca_device.c ****         }
 3864              		.loc 1 2667 13 is_stmt 1 view .LVU906
2667:Core/Src/deca_device.c ****         }
 3865              		.loc 1 2667 32 is_stmt 0 view .LVU907
 3866 008e 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
2667:Core/Src/deca_device.c ****         }
 3867              		.loc 1 2667 20 view .LVU908
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 122


 3868 0092 63F07F03 		orn	r3, r3, #127
 3869 0096 8DF80530 		strb	r3, [sp, #5]
2669:Core/Src/deca_device.c ****         case READ_ACC_OFF:
 3870              		.loc 1 2669 9 is_stmt 1 view .LVU909
 3871 009a CFE7     		b	.L223
 3872              	.L229:
2672:Core/Src/deca_device.c ****             reg[1] = 0x7f & reg[1];
 3873              		.loc 1 2672 13 view .LVU910
2672:Core/Src/deca_device.c ****             reg[1] = 0x7f & reg[1];
 3874              		.loc 1 2672 25 is_stmt 0 view .LVU911
 3875 009c 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
2672:Core/Src/deca_device.c ****             reg[1] = 0x7f & reg[1];
 3876              		.loc 1 2672 29 view .LVU912
 3877 00a0 03F0B303 		and	r3, r3, #179
2672:Core/Src/deca_device.c ****             reg[1] = 0x7f & reg[1];
 3878              		.loc 1 2672 20 view .LVU913
 3879 00a4 8DF80430 		strb	r3, [sp, #4]
2673:Core/Src/deca_device.c ****         }
 3880              		.loc 1 2673 13 is_stmt 1 view .LVU914
2673:Core/Src/deca_device.c ****         }
 3881              		.loc 1 2673 32 is_stmt 0 view .LVU915
 3882 00a8 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
2673:Core/Src/deca_device.c ****         }
 3883              		.loc 1 2673 27 view .LVU916
 3884 00ac 03F07F03 		and	r3, r3, #127
2673:Core/Src/deca_device.c ****         }
 3885              		.loc 1 2673 20 view .LVU917
 3886 00b0 8DF80530 		strb	r3, [sp, #5]
2675:Core/Src/deca_device.c ****         case FORCE_OTP_ON:
 3887              		.loc 1 2675 9 is_stmt 1 view .LVU918
 3888 00b4 C2E7     		b	.L223
 3889              	.L228:
2678:Core/Src/deca_device.c ****         }
 3890              		.loc 1 2678 13 view .LVU919
2678:Core/Src/deca_device.c ****         }
 3891              		.loc 1 2678 32 is_stmt 0 view .LVU920
 3892 00b6 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
2678:Core/Src/deca_device.c ****         }
 3893              		.loc 1 2678 20 view .LVU921
 3894 00ba 43F00203 		orr	r3, r3, #2
 3895 00be 8DF80530 		strb	r3, [sp, #5]
2680:Core/Src/deca_device.c ****         case FORCE_OTP_OFF:
 3896              		.loc 1 2680 9 is_stmt 1 view .LVU922
 3897 00c2 BBE7     		b	.L223
 3898              	.L227:
2683:Core/Src/deca_device.c ****         }
 3899              		.loc 1 2683 13 view .LVU923
2683:Core/Src/deca_device.c ****         }
 3900              		.loc 1 2683 25 is_stmt 0 view .LVU924
 3901 00c4 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
2683:Core/Src/deca_device.c ****         }
 3902              		.loc 1 2683 29 view .LVU925
 3903 00c8 03F0FD03 		and	r3, r3, #253
2683:Core/Src/deca_device.c ****         }
 3904              		.loc 1 2683 20 view .LVU926
 3905 00cc 8DF80530 		strb	r3, [sp, #5]
2685:Core/Src/deca_device.c ****         case FORCE_TX_PLL:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 123


 3906              		.loc 1 2685 9 is_stmt 1 view .LVU927
 3907 00d0 B4E7     		b	.L223
 3908              	.L226:
2688:Core/Src/deca_device.c ****         }
 3909              		.loc 1 2688 13 view .LVU928
2688:Core/Src/deca_device.c ****         }
 3910              		.loc 1 2688 33 is_stmt 0 view .LVU929
 3911 00d2 9DF90430 		ldrsb	r3, [sp, #4]
2688:Core/Src/deca_device.c ****         }
 3912              		.loc 1 2688 37 view .LVU930
 3913 00d6 23F03003 		bic	r3, r3, #48
2688:Core/Src/deca_device.c ****         }
 3914              		.loc 1 2688 27 view .LVU931
 3915 00da 43F02003 		orr	r3, r3, #32
2688:Core/Src/deca_device.c ****         }
 3916              		.loc 1 2688 20 view .LVU932
 3917 00de 8DF80430 		strb	r3, [sp, #4]
2690:Core/Src/deca_device.c ****         case FORCE_LDE:
 3918              		.loc 1 2690 9 is_stmt 1 view .LVU933
 3919 00e2 ABE7     		b	.L223
 3920              	.L224:
2693:Core/Src/deca_device.c ****             reg[1] = 0x03;
 3921              		.loc 1 2693 13 view .LVU934
2693:Core/Src/deca_device.c ****             reg[1] = 0x03;
 3922              		.loc 1 2693 20 is_stmt 0 view .LVU935
 3923 00e4 0123     		movs	r3, #1
 3924 00e6 8DF80430 		strb	r3, [sp, #4]
2694:Core/Src/deca_device.c ****         }
 3925              		.loc 1 2694 13 is_stmt 1 view .LVU936
2694:Core/Src/deca_device.c ****         }
 3926              		.loc 1 2694 20 is_stmt 0 view .LVU937
 3927 00ea 0323     		movs	r3, #3
 3928 00ec 8DF80530 		strb	r3, [sp, #5]
2696:Core/Src/deca_device.c ****         default:
 3929              		.loc 1 2696 9 is_stmt 1 view .LVU938
 3930 00f0 A4E7     		b	.L223
 3931              		.cfi_endproc
 3932              	.LFE72:
 3934              		.section	.text.dwt_readaccdata,"ax",%progbits
 3935              		.align	1
 3936              		.global	dwt_readaccdata
 3937              		.syntax unified
 3938              		.thumb
 3939              		.thumb_func
 3941              	dwt_readaccdata:
 3942              	.LVL348:
 3943              	.LFB23:
 934:Core/Src/deca_device.c ****     // Force on the ACC clocks if we are sequenced
 3944              		.loc 1 934 1 view -0
 3945              		.cfi_startproc
 3946              		@ args = 0, pretend = 0, frame = 0
 3947              		@ frame_needed = 0, uses_anonymous_args = 0
 934:Core/Src/deca_device.c ****     // Force on the ACC clocks if we are sequenced
 3948              		.loc 1 934 1 is_stmt 0 view .LVU940
 3949 0000 70B5     		push	{r4, r5, r6, lr}
 3950              	.LCFI90:
 3951              		.cfi_def_cfa_offset 16
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 124


 3952              		.cfi_offset 4, -16
 3953              		.cfi_offset 5, -12
 3954              		.cfi_offset 6, -8
 3955              		.cfi_offset 14, -4
 3956 0002 0646     		mov	r6, r0
 3957 0004 0D46     		mov	r5, r1
 3958 0006 1446     		mov	r4, r2
 936:Core/Src/deca_device.c **** 
 3959              		.loc 1 936 5 is_stmt 1 view .LVU941
 3960 0008 0720     		movs	r0, #7
 3961              	.LVL349:
 936:Core/Src/deca_device.c **** 
 3962              		.loc 1 936 5 is_stmt 0 view .LVU942
 3963 000a FFF7FEFF 		bl	_dwt_enableclocks
 3964              	.LVL350:
 938:Core/Src/deca_device.c **** 
 3965              		.loc 1 938 5 is_stmt 1 view .LVU943
 3966 000e 3346     		mov	r3, r6
 3967 0010 2A46     		mov	r2, r5
 3968 0012 2146     		mov	r1, r4
 3969 0014 2520     		movs	r0, #37
 3970 0016 FFF7FEFF 		bl	dwt_readfromdevice
 3971              	.LVL351:
 940:Core/Src/deca_device.c **** }
 3972              		.loc 1 940 5 view .LVU944
 3973 001a 0820     		movs	r0, #8
 3974 001c FFF7FEFF 		bl	_dwt_enableclocks
 3975              	.LVL352:
 941:Core/Src/deca_device.c **** 
 3976              		.loc 1 941 1 is_stmt 0 view .LVU945
 3977 0020 70BD     		pop	{r4, r5, r6, pc}
 941:Core/Src/deca_device.c **** 
 3978              		.loc 1 941 1 view .LVU946
 3979              		.cfi_endproc
 3980              	.LFE23:
 3982              		.section	.text.dwt_otpread,"ax",%progbits
 3983              		.align	1
 3984              		.global	dwt_otpread
 3985              		.syntax unified
 3986              		.thumb
 3987              		.thumb_func
 3989              	dwt_otpread:
 3990              	.LVL353:
 3991              	.LFB47:
1542:Core/Src/deca_device.c ****     int i;
 3992              		.loc 1 1542 1 is_stmt 1 view -0
 3993              		.cfi_startproc
 3994              		@ args = 0, pretend = 0, frame = 0
 3995              		@ frame_needed = 0, uses_anonymous_args = 0
1542:Core/Src/deca_device.c ****     int i;
 3996              		.loc 1 1542 1 is_stmt 0 view .LVU948
 3997 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3998              	.LCFI91:
 3999              		.cfi_def_cfa_offset 24
 4000              		.cfi_offset 3, -24
 4001              		.cfi_offset 4, -20
 4002              		.cfi_offset 5, -16
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 125


 4003              		.cfi_offset 6, -12
 4004              		.cfi_offset 7, -8
 4005              		.cfi_offset 14, -4
 4006 0002 0746     		mov	r7, r0
 4007 0004 0E46     		mov	r6, r1
 4008 0006 1546     		mov	r5, r2
1543:Core/Src/deca_device.c **** 
 4009              		.loc 1 1543 5 is_stmt 1 view .LVU949
1545:Core/Src/deca_device.c **** 
 4010              		.loc 1 1545 5 view .LVU950
 4011 0008 0020     		movs	r0, #0
 4012              	.LVL354:
1545:Core/Src/deca_device.c **** 
 4013              		.loc 1 1545 5 is_stmt 0 view .LVU951
 4014 000a FFF7FEFF 		bl	_dwt_enableclocks
 4015              	.LVL355:
1547:Core/Src/deca_device.c ****     {
 4016              		.loc 1 1547 5 is_stmt 1 view .LVU952
1547:Core/Src/deca_device.c ****     {
 4017              		.loc 1 1547 10 is_stmt 0 view .LVU953
 4018 000e 0024     		movs	r4, #0
1547:Core/Src/deca_device.c ****     {
 4019              		.loc 1 1547 5 view .LVU954
 4020 0010 06E0     		b	.L238
 4021              	.LVL356:
 4022              	.L239:
1549:Core/Src/deca_device.c ****     }
 4023              		.loc 1 1549 9 is_stmt 1 discriminator 3 view .LVU955
1549:Core/Src/deca_device.c ****     }
 4024              		.loc 1 1549 20 is_stmt 0 discriminator 3 view .LVU956
 4025 0012 3819     		adds	r0, r7, r4
 4026 0014 80B2     		uxth	r0, r0
 4027 0016 FFF7FEFF 		bl	_dwt_otpread
 4028              	.LVL357:
1549:Core/Src/deca_device.c ****     }
 4029              		.loc 1 1549 18 discriminator 3 view .LVU957
 4030 001a 46F82400 		str	r0, [r6, r4, lsl #2]
1547:Core/Src/deca_device.c ****     {
 4031              		.loc 1 1547 24 is_stmt 1 discriminator 3 view .LVU958
1547:Core/Src/deca_device.c ****     {
 4032              		.loc 1 1547 25 is_stmt 0 discriminator 3 view .LVU959
 4033 001e 0134     		adds	r4, r4, #1
 4034              	.LVL358:
 4035              	.L238:
1547:Core/Src/deca_device.c ****     {
 4036              		.loc 1 1547 14 is_stmt 1 discriminator 1 view .LVU960
1547:Core/Src/deca_device.c ****     {
 4037              		.loc 1 1547 5 is_stmt 0 discriminator 1 view .LVU961
 4038 0020 A542     		cmp	r5, r4
 4039 0022 F6DC     		bgt	.L239
1552:Core/Src/deca_device.c **** 
 4040              		.loc 1 1552 5 is_stmt 1 view .LVU962
 4041 0024 0120     		movs	r0, #1
 4042 0026 FFF7FEFF 		bl	_dwt_enableclocks
 4043              	.LVL359:
1554:Core/Src/deca_device.c **** }
 4044              		.loc 1 1554 5 view .LVU963
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 126


1555:Core/Src/deca_device.c **** 
 4045              		.loc 1 1555 1 is_stmt 0 view .LVU964
 4046 002a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
1555:Core/Src/deca_device.c **** 
 4047              		.loc 1 1555 1 view .LVU965
 4048              		.cfi_endproc
 4049              	.LFE47:
 4051              		.section	.text.dwt_otpwriteandverify,"ax",%progbits
 4052              		.align	1
 4053              		.global	dwt_otpwriteandverify
 4054              		.syntax unified
 4055              		.thumb
 4056              		.thumb_func
 4058              	dwt_otpwriteandverify:
 4059              	.LVL360:
 4060              	.LFB51:
1802:Core/Src/deca_device.c ****     int prog_ok = DWT_SUCCESS;
 4061              		.loc 1 1802 1 is_stmt 1 view -0
 4062              		.cfi_startproc
 4063              		@ args = 0, pretend = 0, frame = 0
 4064              		@ frame_needed = 0, uses_anonymous_args = 0
1802:Core/Src/deca_device.c ****     int prog_ok = DWT_SUCCESS;
 4065              		.loc 1 1802 1 is_stmt 0 view .LVU967
 4066 0000 70B5     		push	{r4, r5, r6, lr}
 4067              	.LCFI92:
 4068              		.cfi_def_cfa_offset 16
 4069              		.cfi_offset 4, -16
 4070              		.cfi_offset 5, -12
 4071              		.cfi_offset 6, -8
 4072              		.cfi_offset 14, -4
 4073 0002 0546     		mov	r5, r0
 4074 0004 0E46     		mov	r6, r1
1803:Core/Src/deca_device.c ****     int retry = 0;
 4075              		.loc 1 1803 5 is_stmt 1 view .LVU968
 4076              	.LVL361:
1804:Core/Src/deca_device.c ****     // Firstly set the system clock to crystal
 4077              		.loc 1 1804 5 view .LVU969
1806:Core/Src/deca_device.c **** 
 4078              		.loc 1 1806 5 view .LVU970
 4079 0006 0020     		movs	r0, #0
 4080              	.LVL362:
1806:Core/Src/deca_device.c **** 
 4081              		.loc 1 1806 5 is_stmt 0 view .LVU971
 4082 0008 FFF7FEFF 		bl	_dwt_enableclocks
 4083              	.LVL363:
1813:Core/Src/deca_device.c **** 
 4084              		.loc 1 1813 5 is_stmt 1 view .LVU972
 4085 000c 0120     		movs	r0, #1
 4086 000e FFF7FEFF 		bl	_dwt_otpsetmrregs
 4087              	.LVL364:
1804:Core/Src/deca_device.c ****     // Firstly set the system clock to crystal
 4088              		.loc 1 1804 9 is_stmt 0 view .LVU973
 4089 0012 0024     		movs	r4, #0
 4090              	.LVL365:
 4091              	.L243:
1816:Core/Src/deca_device.c ****     {
 4092              		.loc 1 1816 5 is_stmt 1 view .LVU974
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 127


1818:Core/Src/deca_device.c **** 
 4093              		.loc 1 1818 9 view .LVU975
 4094 0014 3146     		mov	r1, r6
 4095 0016 2846     		mov	r0, r5
 4096 0018 FFF7FEFF 		bl	_dwt_otpprogword32
 4097              	.LVL366:
1820:Core/Src/deca_device.c ****         {
 4098              		.loc 1 1820 9 view .LVU976
1820:Core/Src/deca_device.c ****         {
 4099              		.loc 1 1820 12 is_stmt 0 view .LVU977
 4100 001c 3046     		mov	r0, r6
 4101 001e FFF7FEFF 		bl	_dwt_otpread
 4102              	.LVL367:
1820:Core/Src/deca_device.c ****         {
 4103              		.loc 1 1820 11 view .LVU978
 4104 0022 A842     		cmp	r0, r5
 4105 0024 02D0     		beq	.L242
1824:Core/Src/deca_device.c ****         if(retry==10)
 4106              		.loc 1 1824 9 is_stmt 1 view .LVU979
1824:Core/Src/deca_device.c ****         if(retry==10)
 4107              		.loc 1 1824 14 is_stmt 0 view .LVU980
 4108 0026 0134     		adds	r4, r4, #1
 4109              	.LVL368:
1825:Core/Src/deca_device.c ****         {
 4110              		.loc 1 1825 9 is_stmt 1 view .LVU981
1825:Core/Src/deca_device.c ****         {
 4111              		.loc 1 1825 11 is_stmt 0 view .LVU982
 4112 0028 0A2C     		cmp	r4, #10
 4113 002a F3D1     		bne	.L243
 4114              	.L242:
1833:Core/Src/deca_device.c **** 
 4115              		.loc 1 1833 5 is_stmt 1 view .LVU983
 4116 002c 0420     		movs	r0, #4
 4117 002e FFF7FEFF 		bl	_dwt_otpsetmrregs
 4118              	.LVL369:
1835:Core/Src/deca_device.c ****     {
 4119              		.loc 1 1835 5 view .LVU984
1835:Core/Src/deca_device.c ****     {
 4120              		.loc 1 1835 8 is_stmt 0 view .LVU985
 4121 0032 3046     		mov	r0, r6
 4122 0034 FFF7FEFF 		bl	_dwt_otpread
 4123              	.LVL370:
1835:Core/Src/deca_device.c ****     {
 4124              		.loc 1 1835 7 view .LVU986
 4125 0038 A842     		cmp	r0, r5
 4126 003a 05D1     		bne	.L245
1803:Core/Src/deca_device.c ****     int retry = 0;
 4127              		.loc 1 1803 9 view .LVU987
 4128 003c 0024     		movs	r4, #0
 4129              	.LVL371:
 4130              	.L244:
1840:Core/Src/deca_device.c **** 
 4131              		.loc 1 1840 5 is_stmt 1 view .LVU988
 4132 003e 0020     		movs	r0, #0
 4133 0040 FFF7FEFF 		bl	_dwt_otpsetmrregs
 4134              	.LVL372:
1842:Core/Src/deca_device.c **** }
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 128


 4135              		.loc 1 1842 5 view .LVU989
1843:Core/Src/deca_device.c **** 
 4136              		.loc 1 1843 1 is_stmt 0 view .LVU990
 4137 0044 2046     		mov	r0, r4
 4138 0046 70BD     		pop	{r4, r5, r6, pc}
 4139              	.LVL373:
 4140              	.L245:
1837:Core/Src/deca_device.c ****     }
 4141              		.loc 1 1837 17 view .LVU991
 4142 0048 4FF0FF34 		mov	r4, #-1
 4143              	.LVL374:
1837:Core/Src/deca_device.c ****     }
 4144              		.loc 1 1837 17 view .LVU992
 4145 004c F7E7     		b	.L244
 4146              		.cfi_endproc
 4147              	.LFE51:
 4149              		.section	.text.dwt_configuresleepcnt,"ax",%progbits
 4150              		.align	1
 4151              		.global	dwt_configuresleepcnt
 4152              		.syntax unified
 4153              		.thumb
 4154              		.thumb_func
 4156              	dwt_configuresleepcnt:
 4157              	.LVL375:
 4158              	.LFB55:
1913:Core/Src/deca_device.c ****     // Force system clock to crystal
 4159              		.loc 1 1913 1 is_stmt 1 view -0
 4160              		.cfi_startproc
 4161              		@ args = 0, pretend = 0, frame = 0
 4162              		@ frame_needed = 0, uses_anonymous_args = 0
1913:Core/Src/deca_device.c ****     // Force system clock to crystal
 4163              		.loc 1 1913 1 is_stmt 0 view .LVU994
 4164 0000 10B5     		push	{r4, lr}
 4165              	.LCFI93:
 4166              		.cfi_def_cfa_offset 8
 4167              		.cfi_offset 4, -8
 4168              		.cfi_offset 14, -4
 4169 0002 0446     		mov	r4, r0
1915:Core/Src/deca_device.c **** 
 4170              		.loc 1 1915 5 is_stmt 1 view .LVU995
 4171 0004 0020     		movs	r0, #0
 4172              	.LVL376:
1915:Core/Src/deca_device.c **** 
 4173              		.loc 1 1915 5 is_stmt 0 view .LVU996
 4174 0006 FFF7FEFF 		bl	_dwt_enableclocks
 4175              	.LVL377:
1918:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG1_OFFSET, 0x00);
 4176              		.loc 1 1918 5 is_stmt 1 view .LVU997
 4177 000a 0022     		movs	r2, #0
 4178 000c 0621     		movs	r1, #6
 4179 000e 2C20     		movs	r0, #44
 4180 0010 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4181              	.LVL378:
1919:Core/Src/deca_device.c **** 
 4182              		.loc 1 1919 5 view .LVU998
 4183 0014 0022     		movs	r2, #0
 4184 0016 0A21     		movs	r1, #10
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 129


 4185 0018 2C20     		movs	r0, #44
 4186 001a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4187              	.LVL379:
1922:Core/Src/deca_device.c **** 
 4188              		.loc 1 1922 5 view .LVU999
 4189 001e FFF7FEFF 		bl	_dwt_aonconfigupload
 4190              	.LVL380:
1925:Core/Src/deca_device.c ****     _dwt_aonconfigupload();
 4191              		.loc 1 1925 5 view .LVU1000
 4192 0022 2246     		mov	r2, r4
 4193 0024 0821     		movs	r1, #8
 4194 0026 2C20     		movs	r0, #44
 4195 0028 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 4196              	.LVL381:
1926:Core/Src/deca_device.c **** 
 4197              		.loc 1 1926 5 view .LVU1001
 4198 002c FFF7FEFF 		bl	_dwt_aonconfigupload
 4199              	.LVL382:
1929:Core/Src/deca_device.c ****     _dwt_aonconfigupload();
 4200              		.loc 1 1929 5 view .LVU1002
 4201 0030 0122     		movs	r2, #1
 4202 0032 0A21     		movs	r1, #10
 4203 0034 2C20     		movs	r0, #44
 4204 0036 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4205              	.LVL383:
1930:Core/Src/deca_device.c **** 
 4206              		.loc 1 1930 5 view .LVU1003
 4207 003a FFF7FEFF 		bl	_dwt_aonconfigupload
 4208              	.LVL384:
1933:Core/Src/deca_device.c **** }
 4209              		.loc 1 1933 5 view .LVU1004
 4210 003e 0120     		movs	r0, #1
 4211 0040 FFF7FEFF 		bl	_dwt_enableclocks
 4212              	.LVL385:
1934:Core/Src/deca_device.c **** 
 4213              		.loc 1 1934 1 is_stmt 0 view .LVU1005
 4214 0044 10BD     		pop	{r4, pc}
 4215              		.cfi_endproc
 4216              	.LFE55:
 4218              		.section	.text.dwt_calibratesleepcnt,"ax",%progbits
 4219              		.align	1
 4220              		.global	dwt_calibratesleepcnt
 4221              		.syntax unified
 4222              		.thumb
 4223              		.thumb_func
 4225              	dwt_calibratesleepcnt:
 4226              	.LFB56:
1951:Core/Src/deca_device.c ****     uint16 result;
 4227              		.loc 1 1951 1 is_stmt 1 view -0
 4228              		.cfi_startproc
 4229              		@ args = 0, pretend = 0, frame = 0
 4230              		@ frame_needed = 0, uses_anonymous_args = 0
 4231 0000 10B5     		push	{r4, lr}
 4232              	.LCFI94:
 4233              		.cfi_def_cfa_offset 8
 4234              		.cfi_offset 4, -8
 4235              		.cfi_offset 14, -4
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 130


1952:Core/Src/deca_device.c **** 
 4236              		.loc 1 1952 5 view .LVU1007
1955:Core/Src/deca_device.c ****     _dwt_aonconfigupload();
 4237              		.loc 1 1955 5 view .LVU1008
 4238 0002 0422     		movs	r2, #4
 4239 0004 0A21     		movs	r1, #10
 4240 0006 2C20     		movs	r0, #44
 4241 0008 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4242              	.LVL386:
1956:Core/Src/deca_device.c **** 
 4243              		.loc 1 1956 5 view .LVU1009
 4244 000c FFF7FEFF 		bl	_dwt_aonconfigupload
 4245              	.LVL387:
1959:Core/Src/deca_device.c ****     _dwt_aonconfigupload();
 4246              		.loc 1 1959 5 view .LVU1010
 4247 0010 0022     		movs	r2, #0
 4248 0012 0A21     		movs	r1, #10
 4249 0014 2C20     		movs	r0, #44
 4250 0016 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4251              	.LVL388:
1960:Core/Src/deca_device.c **** 
 4252              		.loc 1 1960 5 view .LVU1011
 4253 001a FFF7FEFF 		bl	_dwt_aonconfigupload
 4254              	.LVL389:
1963:Core/Src/deca_device.c **** 
 4255              		.loc 1 1963 5 view .LVU1012
 4256 001e 0020     		movs	r0, #0
 4257 0020 FFF7FEFF 		bl	_dwt_enableclocks
 4258              	.LVL390:
1965:Core/Src/deca_device.c **** 
 4259              		.loc 1 1965 5 view .LVU1013
 4260 0024 0120     		movs	r0, #1
 4261 0026 FFF7FEFF 		bl	deca_sleep
 4262              	.LVL391:
1969:Core/Src/deca_device.c **** 
 4263              		.loc 1 1969 5 view .LVU1014
 4264 002a 7622     		movs	r2, #118
 4265 002c 0421     		movs	r1, #4
 4266 002e 2C20     		movs	r0, #44
 4267 0030 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4268              	.LVL392:
1972:Core/Src/deca_device.c **** 
 4269              		.loc 1 1972 5 view .LVU1015
 4270 0034 8022     		movs	r2, #128
 4271 0036 0221     		movs	r1, #2
 4272 0038 2C20     		movs	r0, #44
 4273 003a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4274              	.LVL393:
1975:Core/Src/deca_device.c **** 
 4275              		.loc 1 1975 5 view .LVU1016
 4276 003e 8822     		movs	r2, #136
 4277 0040 0221     		movs	r1, #2
 4278 0042 2C20     		movs	r0, #44
 4279 0044 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4280              	.LVL394:
1978:Core/Src/deca_device.c ****     result <<= 8;
 4281              		.loc 1 1978 5 view .LVU1017
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 131


1978:Core/Src/deca_device.c ****     result <<= 8;
 4282              		.loc 1 1978 14 is_stmt 0 view .LVU1018
 4283 0048 0321     		movs	r1, #3
 4284 004a 2C20     		movs	r0, #44
 4285 004c FFF7FEFF 		bl	dwt_read8bitoffsetreg
 4286              	.LVL395:
1978:Core/Src/deca_device.c ****     result <<= 8;
 4287              		.loc 1 1978 12 view .LVU1019
 4288 0050 84B2     		uxth	r4, r0
 4289              	.LVL396:
1979:Core/Src/deca_device.c **** 
 4290              		.loc 1 1979 5 is_stmt 1 view .LVU1020
1979:Core/Src/deca_device.c **** 
 4291              		.loc 1 1979 12 is_stmt 0 view .LVU1021
 4292 0052 2402     		lsls	r4, r4, #8
 4293              	.LVL397:
1979:Core/Src/deca_device.c **** 
 4294              		.loc 1 1979 12 view .LVU1022
 4295 0054 A4B2     		uxth	r4, r4
 4296              	.LVL398:
1982:Core/Src/deca_device.c **** 
 4297              		.loc 1 1982 5 is_stmt 1 view .LVU1023
 4298 0056 7522     		movs	r2, #117
 4299 0058 0421     		movs	r1, #4
 4300 005a 2C20     		movs	r0, #44
 4301 005c FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4302              	.LVL399:
1985:Core/Src/deca_device.c **** 
 4303              		.loc 1 1985 5 view .LVU1024
 4304 0060 8022     		movs	r2, #128
 4305 0062 0221     		movs	r1, #2
 4306 0064 2C20     		movs	r0, #44
 4307 0066 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4308              	.LVL400:
1988:Core/Src/deca_device.c **** 
 4309              		.loc 1 1988 5 view .LVU1025
 4310 006a 8822     		movs	r2, #136
 4311 006c 0221     		movs	r1, #2
 4312 006e 2C20     		movs	r0, #44
 4313 0070 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4314              	.LVL401:
1991:Core/Src/deca_device.c **** 
 4315              		.loc 1 1991 5 view .LVU1026
1991:Core/Src/deca_device.c **** 
 4316              		.loc 1 1991 15 is_stmt 0 view .LVU1027
 4317 0074 0321     		movs	r1, #3
 4318 0076 2C20     		movs	r0, #44
 4319 0078 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 4320              	.LVL402:
 4321 007c 80B2     		uxth	r0, r0
1991:Core/Src/deca_device.c **** 
 4322              		.loc 1 1991 12 view .LVU1028
 4323 007e 0443     		orrs	r4, r4, r0
 4324              	.LVL403:
1994:Core/Src/deca_device.c **** 
 4325              		.loc 1 1994 5 is_stmt 1 view .LVU1029
 4326 0080 0022     		movs	r2, #0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 132


 4327 0082 0221     		movs	r1, #2
 4328 0084 2C20     		movs	r0, #44
 4329 0086 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4330              	.LVL404:
1997:Core/Src/deca_device.c **** 
 4331              		.loc 1 1997 5 view .LVU1030
 4332 008a 0120     		movs	r0, #1
 4333 008c FFF7FEFF 		bl	_dwt_enableclocks
 4334              	.LVL405:
2001:Core/Src/deca_device.c **** }
 4335              		.loc 1 2001 5 view .LVU1031
2002:Core/Src/deca_device.c **** 
 4336              		.loc 1 2002 1 is_stmt 0 view .LVU1032
 4337 0090 2046     		mov	r0, r4
 4338 0092 10BD     		pop	{r4, pc}
2002:Core/Src/deca_device.c **** 
 4339              		.loc 1 2002 1 view .LVU1033
 4340              		.cfi_endproc
 4341              	.LFE56:
 4343              		.section	.text._dwt_loaducodefromrom,"ax",%progbits
 4344              		.align	1
 4345              		.global	_dwt_loaducodefromrom
 4346              		.syntax unified
 4347              		.thumb
 4348              		.thumb_func
 4350              	_dwt_loaducodefromrom:
 4351              	.LFB61:
2164:Core/Src/deca_device.c ****     // Set up clocks
 4352              		.loc 1 2164 1 is_stmt 1 view -0
 4353              		.cfi_startproc
 4354              		@ args = 0, pretend = 0, frame = 0
 4355              		@ frame_needed = 0, uses_anonymous_args = 0
 4356 0000 08B5     		push	{r3, lr}
 4357              	.LCFI95:
 4358              		.cfi_def_cfa_offset 8
 4359              		.cfi_offset 3, -8
 4360              		.cfi_offset 14, -4
2166:Core/Src/deca_device.c **** 
 4361              		.loc 1 2166 5 view .LVU1035
 4362 0002 0E20     		movs	r0, #14
 4363 0004 FFF7FEFF 		bl	_dwt_enableclocks
 4364              	.LVL406:
2169:Core/Src/deca_device.c **** 
 4365              		.loc 1 2169 5 view .LVU1036
 4366 0008 4FF40042 		mov	r2, #32768
 4367 000c 0621     		movs	r1, #6
 4368 000e 2D20     		movs	r0, #45
 4369 0010 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 4370              	.LVL407:
2171:Core/Src/deca_device.c **** 
 4371              		.loc 1 2171 5 view .LVU1037
 4372 0014 0120     		movs	r0, #1
 4373 0016 FFF7FEFF 		bl	deca_sleep
 4374              	.LVL408:
2174:Core/Src/deca_device.c **** }
 4375              		.loc 1 2174 5 view .LVU1038
 4376 001a 0120     		movs	r0, #1
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 133


 4377 001c FFF7FEFF 		bl	_dwt_enableclocks
 4378              	.LVL409:
2175:Core/Src/deca_device.c **** 
 4379              		.loc 1 2175 1 is_stmt 0 view .LVU1039
 4380 0020 08BD     		pop	{r3, pc}
 4381              		.cfi_endproc
 4382              	.LFE61:
 4384              		.section	.text.dwt_loadopsettabfromotp,"ax",%progbits
 4385              		.align	1
 4386              		.global	dwt_loadopsettabfromotp
 4387              		.syntax unified
 4388              		.thumb
 4389              		.thumb_func
 4391              	dwt_loadopsettabfromotp:
 4392              	.LVL410:
 4393              	.LFB62:
2193:Core/Src/deca_device.c ****     uint16 reg = ((ops_sel << OTP_SF_OPS_SEL_SHFT) & OTP_SF_OPS_SEL_MASK) | OTP_SF_OPS_KICK; // Sel
 4394              		.loc 1 2193 1 is_stmt 1 view -0
 4395              		.cfi_startproc
 4396              		@ args = 0, pretend = 0, frame = 0
 4397              		@ frame_needed = 0, uses_anonymous_args = 0
2193:Core/Src/deca_device.c ****     uint16 reg = ((ops_sel << OTP_SF_OPS_SEL_SHFT) & OTP_SF_OPS_SEL_MASK) | OTP_SF_OPS_KICK; // Sel
 4398              		.loc 1 2193 1 is_stmt 0 view .LVU1041
 4399 0000 10B5     		push	{r4, lr}
 4400              	.LCFI96:
 4401              		.cfi_def_cfa_offset 8
 4402              		.cfi_offset 4, -8
 4403              		.cfi_offset 14, -4
2194:Core/Src/deca_device.c **** 
 4404              		.loc 1 2194 5 is_stmt 1 view .LVU1042
2194:Core/Src/deca_device.c **** 
 4405              		.loc 1 2194 28 is_stmt 0 view .LVU1043
 4406 0002 4401     		lsls	r4, r0, #5
2194:Core/Src/deca_device.c **** 
 4407              		.loc 1 2194 52 view .LVU1044
 4408 0004 04F06004 		and	r4, r4, #96
2194:Core/Src/deca_device.c **** 
 4409              		.loc 1 2194 12 view .LVU1045
 4410 0008 44F00104 		orr	r4, r4, #1
 4411              	.LVL411:
2197:Core/Src/deca_device.c **** 
 4412              		.loc 1 2197 5 is_stmt 1 view .LVU1046
 4413 000c 0E20     		movs	r0, #14
 4414              	.LVL412:
2197:Core/Src/deca_device.c **** 
 4415              		.loc 1 2197 5 is_stmt 0 view .LVU1047
 4416 000e FFF7FEFF 		bl	_dwt_enableclocks
 4417              	.LVL413:
2199:Core/Src/deca_device.c **** 
 4418              		.loc 1 2199 5 is_stmt 1 view .LVU1048
 4419 0012 2246     		mov	r2, r4
 4420 0014 1221     		movs	r1, #18
 4421 0016 2D20     		movs	r0, #45
 4422 0018 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 4423              	.LVL414:
2202:Core/Src/deca_device.c **** 
 4424              		.loc 1 2202 5 view .LVU1049
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 134


 4425 001c 0120     		movs	r0, #1
 4426 001e FFF7FEFF 		bl	_dwt_enableclocks
 4427              	.LVL415:
2204:Core/Src/deca_device.c **** 
 4428              		.loc 1 2204 1 is_stmt 0 view .LVU1050
 4429 0022 10BD     		pop	{r4, pc}
2204:Core/Src/deca_device.c **** 
 4430              		.loc 1 2204 1 view .LVU1051
 4431              		.cfi_endproc
 4432              	.LFE62:
 4434              		.section	.text._dwt_disablesequencing,"ax",%progbits
 4435              		.align	1
 4436              		.global	_dwt_disablesequencing
 4437              		.syntax unified
 4438              		.thumb
 4439              		.thumb_func
 4441              	_dwt_disablesequencing:
 4442              	.LFB73:
2707:Core/Src/deca_device.c **** 
2708:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2709:Core/Src/deca_device.c ****  * @fn _dwt_disablesequencing()
2710:Core/Src/deca_device.c ****  *
2711:Core/Src/deca_device.c ****  * @brief This function disables the TX blocks sequencing, it disables PMSC control of RF blocks, s
2712:Core/Src/deca_device.c ****  *
2713:Core/Src/deca_device.c ****  * input parameters none
2714:Core/Src/deca_device.c ****  *
2715:Core/Src/deca_device.c ****  * output parameters none
2716:Core/Src/deca_device.c ****  *
2717:Core/Src/deca_device.c ****  * no return value
2718:Core/Src/deca_device.c ****  */
2719:Core/Src/deca_device.c **** void _dwt_disablesequencing(void) // Disable sequencing and go to state "INIT"
2720:Core/Src/deca_device.c **** {
 4443              		.loc 1 2720 1 is_stmt 1 view -0
 4444              		.cfi_startproc
 4445              		@ args = 0, pretend = 0, frame = 0
 4446              		@ frame_needed = 0, uses_anonymous_args = 0
 4447 0000 08B5     		push	{r3, lr}
 4448              	.LCFI97:
 4449              		.cfi_def_cfa_offset 8
 4450              		.cfi_offset 3, -8
 4451              		.cfi_offset 14, -4
2721:Core/Src/deca_device.c ****     _dwt_enableclocks(FORCE_SYS_XTI); // Set system clock to XTI
 4452              		.loc 1 2721 5 view .LVU1053
 4453 0002 0020     		movs	r0, #0
 4454 0004 FFF7FEFF 		bl	_dwt_enableclocks
 4455              	.LVL416:
2722:Core/Src/deca_device.c **** 
2723:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET, PMSC_CTRL1_PKTSEQ_DISABLE); // Disable PMSC
 4456              		.loc 1 2723 5 view .LVU1054
 4457 0008 0022     		movs	r2, #0
 4458 000a 0421     		movs	r1, #4
 4459 000c 3620     		movs	r0, #54
 4460 000e FFF7FEFF 		bl	dwt_write16bitoffsetreg
 4461              	.LVL417:
2724:Core/Src/deca_device.c **** }
 4462              		.loc 1 2724 1 is_stmt 0 view .LVU1055
 4463 0012 08BD     		pop	{r3, pc}
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 135


 4464              		.cfi_endproc
 4465              	.LFE73:
 4467              		.section	.text.dwt_setdelayedtrxtime,"ax",%progbits
 4468              		.align	1
 4469              		.global	dwt_setdelayedtrxtime
 4470              		.syntax unified
 4471              		.thumb
 4472              		.thumb_func
 4474              	dwt_setdelayedtrxtime:
 4475              	.LVL418:
 4476              	.LFB74:
2725:Core/Src/deca_device.c **** 
2726:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2727:Core/Src/deca_device.c ****  * @fn dwt_setdelayedtrxtime()
2728:Core/Src/deca_device.c ****  *
2729:Core/Src/deca_device.c ****  * @brief This API function configures the delayed transmit time or the delayed RX on time
2730:Core/Src/deca_device.c ****  *
2731:Core/Src/deca_device.c ****  * input parameters
2732:Core/Src/deca_device.c ****  * @param starttime - the TX/RX start time (the 32 bits should be the high 32 bits of the system ti
2733:Core/Src/deca_device.c ****  * or at which to turn on the receiver)
2734:Core/Src/deca_device.c ****  *
2735:Core/Src/deca_device.c ****  * output parameters none
2736:Core/Src/deca_device.c ****  *
2737:Core/Src/deca_device.c ****  * no return value
2738:Core/Src/deca_device.c ****  */
2739:Core/Src/deca_device.c **** void dwt_setdelayedtrxtime(uint32 starttime)
2740:Core/Src/deca_device.c **** {
 4477              		.loc 1 2740 1 is_stmt 1 view -0
 4478              		.cfi_startproc
 4479              		@ args = 0, pretend = 0, frame = 0
 4480              		@ frame_needed = 0, uses_anonymous_args = 0
 4481              		.loc 1 2740 1 is_stmt 0 view .LVU1057
 4482 0000 08B5     		push	{r3, lr}
 4483              	.LCFI98:
 4484              		.cfi_def_cfa_offset 8
 4485              		.cfi_offset 3, -8
 4486              		.cfi_offset 14, -4
 4487 0002 0246     		mov	r2, r0
2741:Core/Src/deca_device.c ****     dwt_write32bitoffsetreg(DX_TIME_ID, 1, starttime); // Write at offset 1 as the lower 9 bits of 
 4488              		.loc 1 2741 5 is_stmt 1 view .LVU1058
 4489 0004 0121     		movs	r1, #1
 4490 0006 0A20     		movs	r0, #10
 4491              	.LVL419:
 4492              		.loc 1 2741 5 is_stmt 0 view .LVU1059
 4493 0008 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 4494              	.LVL420:
2742:Core/Src/deca_device.c **** 
2743:Core/Src/deca_device.c **** } // end dwt_setdelayedtrxtime()
 4495              		.loc 1 2743 1 view .LVU1060
 4496 000c 08BD     		pop	{r3, pc}
 4497              		.cfi_endproc
 4498              	.LFE74:
 4500              		.section	.text.dwt_starttx,"ax",%progbits
 4501              		.align	1
 4502              		.global	dwt_starttx
 4503              		.syntax unified
 4504              		.thumb
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 136


 4505              		.thumb_func
 4507              	dwt_starttx:
 4508              	.LVL421:
 4509              	.LFB75:
2744:Core/Src/deca_device.c **** 
2745:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2746:Core/Src/deca_device.c ****  * @fn dwt_starttx()
2747:Core/Src/deca_device.c ****  *
2748:Core/Src/deca_device.c ****  * @brief This call initiates the transmission, input parameter indicates which TX mode is used see
2749:Core/Src/deca_device.c ****  *
2750:Core/Src/deca_device.c ****  * input parameters:
2751:Core/Src/deca_device.c ****  * @param mode - if mode = DWT_START_TX_IMMEDIATE - immediate TX (no response expected)
2752:Core/Src/deca_device.c ****  *               if mode = DWT_START_TX_DELAYED - delayed TX (no response expected)
2753:Core/Src/deca_device.c ****  *               if mode = DWT_START_TX_IMMEDIATE | DWT_RESPONSE_EXPECTED - immediate TX (response 
2754:Core/Src/deca_device.c ****  *               if mode = DWT_START_TX_DELAYED | DWT_RESPONSE_EXPECTED - delayed TX (response expe
2755:Core/Src/deca_device.c ****  *
2756:Core/Src/deca_device.c ****  * output parameters
2757:Core/Src/deca_device.c ****  *
2758:Core/Src/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error (e.g. a delayed transmission will be can
2759:Core/Src/deca_device.c ****  */
2760:Core/Src/deca_device.c **** 
2761:Core/Src/deca_device.c **** int dwt_starttx(uint8 mode)
2762:Core/Src/deca_device.c **** {
 4510              		.loc 1 2762 1 is_stmt 1 view -0
 4511              		.cfi_startproc
 4512              		@ args = 0, pretend = 0, frame = 0
 4513              		@ frame_needed = 0, uses_anonymous_args = 0
 4514              		.loc 1 2762 1 is_stmt 0 view .LVU1062
 4515 0000 08B5     		push	{r3, lr}
 4516              	.LCFI99:
 4517              		.cfi_def_cfa_offset 8
 4518              		.cfi_offset 3, -8
 4519              		.cfi_offset 14, -4
2763:Core/Src/deca_device.c ****     int retval = DWT_SUCCESS ;
 4520              		.loc 1 2763 5 is_stmt 1 view .LVU1063
 4521              	.LVL422:
2764:Core/Src/deca_device.c ****     uint8 temp  = 0x00;
 4522              		.loc 1 2764 5 view .LVU1064
2765:Core/Src/deca_device.c ****     uint16 checkTxOK = 0 ;
 4523              		.loc 1 2765 5 view .LVU1065
2766:Core/Src/deca_device.c **** 
2767:Core/Src/deca_device.c ****     if(mode & DWT_RESPONSE_EXPECTED)
 4524              		.loc 1 2767 5 view .LVU1066
 4525              		.loc 1 2767 7 is_stmt 0 view .LVU1067
 4526 0002 10F00202 		ands	r2, r0, #2
 4527 0006 04D0     		beq	.L260
2768:Core/Src/deca_device.c ****     {
2769:Core/Src/deca_device.c ****         temp = (uint8)SYS_CTRL_WAIT4RESP ; // Set wait4response bit
 4528              		.loc 1 2769 9 is_stmt 1 view .LVU1068
 4529              	.LVL423:
2770:Core/Src/deca_device.c ****         pdw1000local->wait4resp = 1;
 4530              		.loc 1 2770 9 view .LVU1069
 4531              		.loc 1 2770 21 is_stmt 0 view .LVU1070
 4532 0008 134B     		ldr	r3, .L266
 4533 000a 1B68     		ldr	r3, [r3]
 4534              		.loc 1 2770 33 view .LVU1071
 4535 000c 0122     		movs	r2, #1
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 137


 4536 000e 5A75     		strb	r2, [r3, #21]
2769:Core/Src/deca_device.c ****         pdw1000local->wait4resp = 1;
 4537              		.loc 1 2769 14 view .LVU1072
 4538 0010 8022     		movs	r2, #128
 4539              	.LVL424:
 4540              	.L260:
2771:Core/Src/deca_device.c ****     }
2772:Core/Src/deca_device.c **** 
2773:Core/Src/deca_device.c ****     if (mode & DWT_START_TX_DELAYED)
 4541              		.loc 1 2773 5 is_stmt 1 view .LVU1073
 4542              		.loc 1 2773 8 is_stmt 0 view .LVU1074
 4543 0012 10F0010F 		tst	r0, #1
 4544 0016 16D0     		beq	.L261
2774:Core/Src/deca_device.c ****     {
2775:Core/Src/deca_device.c ****         // Both SYS_CTRL_TXSTRT and SYS_CTRL_TXDLYS to correctly enable TX
2776:Core/Src/deca_device.c ****         temp |= (uint8)(SYS_CTRL_TXDLYS | SYS_CTRL_TXSTRT) ;
 4545              		.loc 1 2776 9 is_stmt 1 view .LVU1075
 4546              	.LVL425:
2777:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_OFFSET, temp);
 4547              		.loc 1 2777 9 view .LVU1076
 4548 0018 42F00602 		orr	r2, r2, #6
 4549              	.LVL426:
 4550              		.loc 1 2777 9 is_stmt 0 view .LVU1077
 4551 001c 0021     		movs	r1, #0
 4552 001e 0D20     		movs	r0, #13
 4553              	.LVL427:
 4554              		.loc 1 2777 9 view .LVU1078
 4555 0020 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4556              	.LVL428:
2778:Core/Src/deca_device.c ****         checkTxOK = dwt_read16bitoffsetreg(SYS_STATUS_ID, 3); // Read at offset 3 to get the upper 
 4557              		.loc 1 2778 9 is_stmt 1 view .LVU1079
 4558              		.loc 1 2778 21 is_stmt 0 view .LVU1080
 4559 0024 0321     		movs	r1, #3
 4560 0026 0F20     		movs	r0, #15
 4561 0028 FFF7FEFF 		bl	dwt_read16bitoffsetreg
 4562              	.LVL429:
2779:Core/Src/deca_device.c ****         if ((checkTxOK & SYS_STATUS_TXERR) == 0) // Transmit Delayed Send set over Half a Period aw
 4563              		.loc 1 2779 9 is_stmt 1 view .LVU1081
 4564              		.loc 1 2779 12 is_stmt 0 view .LVU1082
 4565 002c 10F4816F 		tst	r0, #1032
 4566 0030 01D1     		bne	.L265
2780:Core/Src/deca_device.c ****         {
2781:Core/Src/deca_device.c ****             retval = DWT_SUCCESS ; // All okay
 4567              		.loc 1 2781 20 view .LVU1083
 4568 0032 0020     		movs	r0, #0
 4569              	.LVL430:
2782:Core/Src/deca_device.c ****         }
2783:Core/Src/deca_device.c ****         else
2784:Core/Src/deca_device.c ****         {
2785:Core/Src/deca_device.c ****             // If HPDWARN or TXPUTE are set this indicates that the TXDLYS was set too late for the
2786:Core/Src/deca_device.c ****             // remedial action is to cancel delayed send and report error
2787:Core/Src/deca_device.c ****             dwt_write8bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_OFFSET, (uint8)SYS_CTRL_TRXOFF);
2788:Core/Src/deca_device.c ****             retval = DWT_ERROR ; // Failed !
2789:Core/Src/deca_device.c ****         }
2790:Core/Src/deca_device.c ****     }
2791:Core/Src/deca_device.c ****     else
2792:Core/Src/deca_device.c ****     {
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 138


2793:Core/Src/deca_device.c ****         temp |= (uint8)SYS_CTRL_TXSTRT ;
2794:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_OFFSET, temp);
2795:Core/Src/deca_device.c ****     }
2796:Core/Src/deca_device.c **** 
2797:Core/Src/deca_device.c ****     return retval;
 4570              		.loc 1 2797 5 is_stmt 1 view .LVU1084
 4571              		.loc 1 2797 12 is_stmt 0 view .LVU1085
 4572 0034 0EE0     		b	.L259
 4573              	.LVL431:
 4574              	.L265:
2787:Core/Src/deca_device.c ****             retval = DWT_ERROR ; // Failed !
 4575              		.loc 1 2787 13 is_stmt 1 view .LVU1086
 4576 0036 4022     		movs	r2, #64
 4577 0038 0021     		movs	r1, #0
 4578 003a 0D20     		movs	r0, #13
 4579              	.LVL432:
2787:Core/Src/deca_device.c ****             retval = DWT_ERROR ; // Failed !
 4580              		.loc 1 2787 13 is_stmt 0 view .LVU1087
 4581 003c FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4582              	.LVL433:
2788:Core/Src/deca_device.c ****         }
 4583              		.loc 1 2788 13 is_stmt 1 view .LVU1088
2788:Core/Src/deca_device.c ****         }
 4584              		.loc 1 2788 20 is_stmt 0 view .LVU1089
 4585 0040 4FF0FF30 		mov	r0, #-1
 4586 0044 06E0     		b	.L259
 4587              	.LVL434:
 4588              	.L261:
2793:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_OFFSET, temp);
 4589              		.loc 1 2793 9 is_stmt 1 view .LVU1090
2794:Core/Src/deca_device.c ****     }
 4590              		.loc 1 2794 9 view .LVU1091
 4591 0046 42F00202 		orr	r2, r2, #2
 4592              	.LVL435:
2794:Core/Src/deca_device.c ****     }
 4593              		.loc 1 2794 9 is_stmt 0 view .LVU1092
 4594 004a 0021     		movs	r1, #0
 4595 004c 0D20     		movs	r0, #13
 4596              	.LVL436:
2794:Core/Src/deca_device.c ****     }
 4597              		.loc 1 2794 9 view .LVU1093
 4598 004e FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4599              	.LVL437:
2763:Core/Src/deca_device.c ****     uint8 temp  = 0x00;
 4600              		.loc 1 2763 9 view .LVU1094
 4601 0052 0020     		movs	r0, #0
 4602              	.LVL438:
 4603              	.L259:
2798:Core/Src/deca_device.c **** 
2799:Core/Src/deca_device.c **** } // end dwt_starttx()
 4604              		.loc 1 2799 1 view .LVU1095
 4605 0054 08BD     		pop	{r3, pc}
 4606              	.L267:
 4607 0056 00BF     		.align	2
 4608              	.L266:
 4609 0058 00000000 		.word	.LANCHOR1
 4610              		.cfi_endproc
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 139


 4611              	.LFE75:
 4613              		.section	.text.dwt_syncrxbufptrs,"ax",%progbits
 4614              		.align	1
 4615              		.global	dwt_syncrxbufptrs
 4616              		.syntax unified
 4617              		.thumb
 4618              		.thumb_func
 4620              	dwt_syncrxbufptrs:
 4621              	.LFB77:
2800:Core/Src/deca_device.c **** 
2801:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2802:Core/Src/deca_device.c ****  * @fn dwt_forcetrxoff()
2803:Core/Src/deca_device.c ****  *
2804:Core/Src/deca_device.c ****  * @brief This is used to turn off the transceiver
2805:Core/Src/deca_device.c ****  *
2806:Core/Src/deca_device.c ****  * input parameters
2807:Core/Src/deca_device.c ****  *
2808:Core/Src/deca_device.c ****  * output parameters
2809:Core/Src/deca_device.c ****  *
2810:Core/Src/deca_device.c ****  * no return value
2811:Core/Src/deca_device.c ****  */
2812:Core/Src/deca_device.c **** void dwt_forcetrxoff(void)
2813:Core/Src/deca_device.c **** {
2814:Core/Src/deca_device.c ****     decaIrqStatus_t stat ;
2815:Core/Src/deca_device.c ****     uint32 mask;
2816:Core/Src/deca_device.c **** 
2817:Core/Src/deca_device.c ****     mask = dwt_read32bitreg(SYS_MASK_ID) ; // Read set interrupt mask
2818:Core/Src/deca_device.c **** 
2819:Core/Src/deca_device.c ****     // Need to beware of interrupts occurring in the middle of following read modify write cycle
2820:Core/Src/deca_device.c ****     // We can disable the radio, but before the status is cleared an interrupt can be set (e.g. the
2821:Core/Src/deca_device.c ****     // event has just happened before the radio was disabled)
2822:Core/Src/deca_device.c ****     // thus we need to disable interrupt during this operation
2823:Core/Src/deca_device.c ****     stat = decamutexon() ;
2824:Core/Src/deca_device.c **** 
2825:Core/Src/deca_device.c ****     dwt_write32bitreg(SYS_MASK_ID, 0) ; // Clear interrupt mask - so we don't get any unwanted even
2826:Core/Src/deca_device.c **** 
2827:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_OFFSET, (uint8)SYS_CTRL_TRXOFF) ; // Disable the r
2828:Core/Src/deca_device.c **** 
2829:Core/Src/deca_device.c ****     // Forcing Transceiver off - so we do not want to see any new events that may have happened
2830:Core/Src/deca_device.c ****     dwt_write32bitreg(SYS_STATUS_ID, (SYS_STATUS_ALL_TX | SYS_STATUS_ALL_RX_ERR | SYS_STATUS_ALL_RX
2831:Core/Src/deca_device.c **** 
2832:Core/Src/deca_device.c ****     dwt_syncrxbufptrs();
2833:Core/Src/deca_device.c **** 
2834:Core/Src/deca_device.c ****     dwt_write32bitreg(SYS_MASK_ID, mask) ; // Set interrupt mask to what it was
2835:Core/Src/deca_device.c **** 
2836:Core/Src/deca_device.c ****     // Enable/restore interrupts again...
2837:Core/Src/deca_device.c ****     decamutexoff(stat) ;
2838:Core/Src/deca_device.c ****     pdw1000local->wait4resp = 0;
2839:Core/Src/deca_device.c **** 
2840:Core/Src/deca_device.c **** } // end deviceforcetrxoff()
2841:Core/Src/deca_device.c **** 
2842:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2843:Core/Src/deca_device.c ****  * @fn dwt_syncrxbufptrs()
2844:Core/Src/deca_device.c ****  *
2845:Core/Src/deca_device.c ****  * @brief this function synchronizes rx buffer pointers
2846:Core/Src/deca_device.c ****  * need to make sure that the host/IC buffer pointers are aligned before starting RX
2847:Core/Src/deca_device.c ****  *
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 140


2848:Core/Src/deca_device.c ****  * input parameters:
2849:Core/Src/deca_device.c ****  *
2850:Core/Src/deca_device.c ****  * output parameters
2851:Core/Src/deca_device.c ****  *
2852:Core/Src/deca_device.c ****  * no return value
2853:Core/Src/deca_device.c ****  */
2854:Core/Src/deca_device.c **** void dwt_syncrxbufptrs(void)
2855:Core/Src/deca_device.c **** {
 4622              		.loc 1 2855 1 is_stmt 1 view -0
 4623              		.cfi_startproc
 4624              		@ args = 0, pretend = 0, frame = 0
 4625              		@ frame_needed = 0, uses_anonymous_args = 0
 4626 0000 08B5     		push	{r3, lr}
 4627              	.LCFI100:
 4628              		.cfi_def_cfa_offset 8
 4629              		.cfi_offset 3, -8
 4630              		.cfi_offset 14, -4
2856:Core/Src/deca_device.c ****     uint8  buff ;
 4631              		.loc 1 2856 5 view .LVU1097
2857:Core/Src/deca_device.c ****     // Need to make sure that the host/IC buffer pointers are aligned before starting RX
2858:Core/Src/deca_device.c ****     buff = dwt_read8bitoffsetreg(SYS_STATUS_ID, 3); // Read 1 byte at offset 3 to get the 4th byte 
 4632              		.loc 1 2858 5 view .LVU1098
 4633              		.loc 1 2858 12 is_stmt 0 view .LVU1099
 4634 0002 0321     		movs	r1, #3
 4635 0004 0F20     		movs	r0, #15
 4636 0006 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 4637              	.LVL439:
2859:Core/Src/deca_device.c **** 
2860:Core/Src/deca_device.c ****     if((buff & (SYS_STATUS_ICRBP >> 24)) !=     // IC side Receive Buffer Pointer
 4638              		.loc 1 2860 5 is_stmt 1 view .LVU1100
 4639              		.loc 1 2860 42 is_stmt 0 view .LVU1101
 4640 000a 80EA4000 		eor	r0, r0, r0, lsl #1
 4641              	.LVL440:
 4642              		.loc 1 2860 7 view .LVU1102
 4643 000e 10F0800F 		tst	r0, #128
 4644 0012 00D1     		bne	.L271
 4645              	.L268:
2861:Core/Src/deca_device.c ****        ((buff & (SYS_STATUS_HSRBP>>24)) << 1) ) // Host Side Receive Buffer Pointer
2862:Core/Src/deca_device.c ****     {
2863:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_HRBT_OFFSET , 0x01) ; // We need to swap RX bu
2864:Core/Src/deca_device.c ****     }
2865:Core/Src/deca_device.c **** }
 4646              		.loc 1 2865 1 view .LVU1103
 4647 0014 08BD     		pop	{r3, pc}
 4648              	.L271:
2863:Core/Src/deca_device.c ****     }
 4649              		.loc 1 2863 9 is_stmt 1 view .LVU1104
 4650 0016 0122     		movs	r2, #1
 4651 0018 0321     		movs	r1, #3
 4652 001a 0D20     		movs	r0, #13
 4653 001c FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4654              	.LVL441:
 4655              		.loc 1 2865 1 is_stmt 0 view .LVU1105
 4656 0020 F8E7     		b	.L268
 4657              		.cfi_endproc
 4658              	.LFE77:
 4660              		.section	.text.dwt_forcetrxoff,"ax",%progbits
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 141


 4661              		.align	1
 4662              		.global	dwt_forcetrxoff
 4663              		.syntax unified
 4664              		.thumb
 4665              		.thumb_func
 4667              	dwt_forcetrxoff:
 4668              	.LFB76:
2813:Core/Src/deca_device.c ****     decaIrqStatus_t stat ;
 4669              		.loc 1 2813 1 is_stmt 1 view -0
 4670              		.cfi_startproc
 4671              		@ args = 0, pretend = 0, frame = 0
 4672              		@ frame_needed = 0, uses_anonymous_args = 0
 4673 0000 38B5     		push	{r3, r4, r5, lr}
 4674              	.LCFI101:
 4675              		.cfi_def_cfa_offset 16
 4676              		.cfi_offset 3, -16
 4677              		.cfi_offset 4, -12
 4678              		.cfi_offset 5, -8
 4679              		.cfi_offset 14, -4
2814:Core/Src/deca_device.c ****     uint32 mask;
 4680              		.loc 1 2814 5 view .LVU1107
2815:Core/Src/deca_device.c **** 
 4681              		.loc 1 2815 5 view .LVU1108
2817:Core/Src/deca_device.c **** 
 4682              		.loc 1 2817 5 view .LVU1109
2817:Core/Src/deca_device.c **** 
 4683              		.loc 1 2817 12 is_stmt 0 view .LVU1110
 4684 0002 0021     		movs	r1, #0
 4685 0004 0E20     		movs	r0, #14
 4686 0006 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 4687              	.LVL442:
 4688 000a 0546     		mov	r5, r0
 4689              	.LVL443:
2823:Core/Src/deca_device.c **** 
 4690              		.loc 1 2823 5 is_stmt 1 view .LVU1111
2823:Core/Src/deca_device.c **** 
 4691              		.loc 1 2823 12 is_stmt 0 view .LVU1112
 4692 000c FFF7FEFF 		bl	decamutexon
 4693              	.LVL444:
2823:Core/Src/deca_device.c **** 
 4694              		.loc 1 2823 12 view .LVU1113
 4695 0010 0446     		mov	r4, r0
 4696              	.LVL445:
2825:Core/Src/deca_device.c **** 
 4697              		.loc 1 2825 5 is_stmt 1 view .LVU1114
 4698 0012 0022     		movs	r2, #0
 4699 0014 1146     		mov	r1, r2
 4700 0016 0E20     		movs	r0, #14
 4701              	.LVL446:
2825:Core/Src/deca_device.c **** 
 4702              		.loc 1 2825 5 is_stmt 0 view .LVU1115
 4703 0018 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 4704              	.LVL447:
2827:Core/Src/deca_device.c **** 
 4705              		.loc 1 2827 5 is_stmt 1 view .LVU1116
 4706 001c 4022     		movs	r2, #64
 4707 001e 0021     		movs	r1, #0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 142


 4708 0020 0D20     		movs	r0, #13
 4709 0022 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 4710              	.LVL448:
2830:Core/Src/deca_device.c **** 
 4711              		.loc 1 2830 5 view .LVU1117
 4712 0026 0A4A     		ldr	r2, .L274
 4713 0028 0021     		movs	r1, #0
 4714 002a 0F20     		movs	r0, #15
 4715 002c FFF7FEFF 		bl	dwt_write32bitoffsetreg
 4716              	.LVL449:
2832:Core/Src/deca_device.c **** 
 4717              		.loc 1 2832 5 view .LVU1118
 4718 0030 FFF7FEFF 		bl	dwt_syncrxbufptrs
 4719              	.LVL450:
2834:Core/Src/deca_device.c **** 
 4720              		.loc 1 2834 5 view .LVU1119
 4721 0034 2A46     		mov	r2, r5
 4722 0036 0021     		movs	r1, #0
 4723 0038 0E20     		movs	r0, #14
 4724 003a FFF7FEFF 		bl	dwt_write32bitoffsetreg
 4725              	.LVL451:
2837:Core/Src/deca_device.c ****     pdw1000local->wait4resp = 0;
 4726              		.loc 1 2837 5 view .LVU1120
 4727 003e 2046     		mov	r0, r4
 4728 0040 FFF7FEFF 		bl	decamutexoff
 4729              	.LVL452:
2838:Core/Src/deca_device.c **** 
 4730              		.loc 1 2838 5 view .LVU1121
2838:Core/Src/deca_device.c **** 
 4731              		.loc 1 2838 17 is_stmt 0 view .LVU1122
 4732 0044 034B     		ldr	r3, .L274+4
 4733 0046 1B68     		ldr	r3, [r3]
2838:Core/Src/deca_device.c **** 
 4734              		.loc 1 2838 29 view .LVU1123
 4735 0048 0022     		movs	r2, #0
 4736 004a 5A75     		strb	r2, [r3, #21]
2840:Core/Src/deca_device.c **** 
 4737              		.loc 1 2840 1 view .LVU1124
 4738 004c 38BD     		pop	{r3, r4, r5, pc}
 4739              	.LVL453:
 4740              	.L275:
2840:Core/Src/deca_device.c **** 
 4741              		.loc 1 2840 1 view .LVU1125
 4742 004e 00BF     		.align	2
 4743              	.L274:
 4744 0050 F8FF2724 		.word	606601208
 4745 0054 00000000 		.word	.LANCHOR1
 4746              		.cfi_endproc
 4747              	.LFE76:
 4749              		.section	.text.dwt_setsniffmode,"ax",%progbits
 4750              		.align	1
 4751              		.global	dwt_setsniffmode
 4752              		.syntax unified
 4753              		.thumb
 4754              		.thumb_func
 4756              	dwt_setsniffmode:
 4757              	.LVL454:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 143


 4758              	.LFB78:
2866:Core/Src/deca_device.c **** 
2867:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2868:Core/Src/deca_device.c ****  * @fn dwt_setsniffmode()
2869:Core/Src/deca_device.c ****  *
2870:Core/Src/deca_device.c ****  * @brief enable/disable and configure SNIFF mode.
2871:Core/Src/deca_device.c ****  *
2872:Core/Src/deca_device.c ****  * SNIFF mode is a low-power reception mode where the receiver is sequenced on and off instead of b
2873:Core/Src/deca_device.c ****  * The time spent in each state (on/off) is specified through the parameters below.
2874:Core/Src/deca_device.c ****  * See DW1000 User Manual section 4.5 "Low-Power SNIFF mode" for more details.
2875:Core/Src/deca_device.c ****  *
2876:Core/Src/deca_device.c ****  * input parameters:
2877:Core/Src/deca_device.c ****  * @param enable - 1 to enable SNIFF mode, 0 to disable. When 0, all other parameters are not taken
2878:Core/Src/deca_device.c ****  * @param timeOn - duration of receiver ON phase, expressed in multiples of PAC size. The counter a
2879:Core/Src/deca_device.c ****  *                 size to the value set. Min value that can be set is 1 (i.e. an ON time of 2 PAC 
2880:Core/Src/deca_device.c ****  * @param timeOff - duration of receiver OFF phase, expressed in multiples of 128/125 s (~1 s). M
2881:Core/Src/deca_device.c ****  *
2882:Core/Src/deca_device.c ****  * output parameters
2883:Core/Src/deca_device.c ****  *
2884:Core/Src/deca_device.c ****  * no return value
2885:Core/Src/deca_device.c ****  */
2886:Core/Src/deca_device.c **** void dwt_setsniffmode(int enable, uint8 timeOn, uint8 timeOff)
2887:Core/Src/deca_device.c **** {
 4759              		.loc 1 2887 1 is_stmt 1 view -0
 4760              		.cfi_startproc
 4761              		@ args = 0, pretend = 0, frame = 0
 4762              		@ frame_needed = 0, uses_anonymous_args = 0
 4763              		.loc 1 2887 1 is_stmt 0 view .LVU1127
 4764 0000 08B5     		push	{r3, lr}
 4765              	.LCFI102:
 4766              		.cfi_def_cfa_offset 8
 4767              		.cfi_offset 3, -8
 4768              		.cfi_offset 14, -4
2888:Core/Src/deca_device.c ****     uint32 pmsc_reg;
 4769              		.loc 1 2888 5 is_stmt 1 view .LVU1128
2889:Core/Src/deca_device.c ****     if (enable)
 4770              		.loc 1 2889 5 view .LVU1129
 4771              		.loc 1 2889 8 is_stmt 0 view .LVU1130
 4772 0002 90B1     		cbz	r0, .L277
 4773              	.LBB2:
2890:Core/Src/deca_device.c ****     {
2891:Core/Src/deca_device.c ****         /* Configure ON/OFF times and enable PLL2 on/off sequencing by SNIFF mode. */
2892:Core/Src/deca_device.c ****         uint16 sniff_reg = (((uint16)timeOff << 8) | timeOn) & RX_SNIFF_MASK;
 4774              		.loc 1 2892 9 is_stmt 1 view .LVU1131
 4775              		.loc 1 2892 52 is_stmt 0 view .LVU1132
 4776 0004 41EA0221 		orr	r1, r1, r2, lsl #8
 4777              	.LVL455:
 4778              		.loc 1 2892 16 view .LVU1133
 4779 0008 21F0F002 		bic	r2, r1, #240
 4780              	.LVL456:
2893:Core/Src/deca_device.c ****         dwt_write16bitoffsetreg(RX_SNIFF_ID, RX_SNIFF_OFFSET, sniff_reg);
 4781              		.loc 1 2893 9 is_stmt 1 view .LVU1134
 4782 000c 0021     		movs	r1, #0
 4783 000e 1D20     		movs	r0, #29
 4784              	.LVL457:
 4785              		.loc 1 2893 9 is_stmt 0 view .LVU1135
 4786 0010 FFF7FEFF 		bl	dwt_write16bitoffsetreg
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 144


 4787              	.LVL458:
2894:Core/Src/deca_device.c ****         pmsc_reg = dwt_read32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET);
 4788              		.loc 1 2894 9 is_stmt 1 view .LVU1136
 4789              		.loc 1 2894 20 is_stmt 0 view .LVU1137
 4790 0014 0021     		movs	r1, #0
 4791 0016 3620     		movs	r0, #54
 4792 0018 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 4793              	.LVL459:
2895:Core/Src/deca_device.c ****         pmsc_reg |= PMSC_CTRL0_PLL2_SEQ_EN;
 4794              		.loc 1 2895 9 is_stmt 1 view .LVU1138
2896:Core/Src/deca_device.c ****         dwt_write32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, pmsc_reg);
 4795              		.loc 1 2896 9 view .LVU1139
 4796 001c 40F08072 		orr	r2, r0, #16777216
 4797              	.LVL460:
 4798              		.loc 1 2896 9 is_stmt 0 view .LVU1140
 4799 0020 0021     		movs	r1, #0
 4800 0022 3620     		movs	r0, #54
 4801 0024 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 4802              	.LVL461:
 4803              	.L276:
 4804              		.loc 1 2896 9 view .LVU1141
 4805              	.LBE2:
2897:Core/Src/deca_device.c ****     }
2898:Core/Src/deca_device.c ****     else
2899:Core/Src/deca_device.c ****     {
2900:Core/Src/deca_device.c ****         /* Clear ON/OFF times and disable PLL2 on/off sequencing by SNIFF mode. */
2901:Core/Src/deca_device.c ****         dwt_write16bitoffsetreg(RX_SNIFF_ID, RX_SNIFF_OFFSET, 0x0000);
2902:Core/Src/deca_device.c ****         pmsc_reg = dwt_read32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET);
2903:Core/Src/deca_device.c ****         pmsc_reg &= ~PMSC_CTRL0_PLL2_SEQ_EN;
2904:Core/Src/deca_device.c ****         dwt_write32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, pmsc_reg);
2905:Core/Src/deca_device.c ****     }
2906:Core/Src/deca_device.c **** }
 4806              		.loc 1 2906 1 view .LVU1142
 4807 0028 08BD     		pop	{r3, pc}
 4808              	.LVL462:
 4809              	.L277:
2901:Core/Src/deca_device.c ****         pmsc_reg = dwt_read32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET);
 4810              		.loc 1 2901 9 is_stmt 1 view .LVU1143
 4811 002a 0022     		movs	r2, #0
 4812              	.LVL463:
2901:Core/Src/deca_device.c ****         pmsc_reg = dwt_read32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET);
 4813              		.loc 1 2901 9 is_stmt 0 view .LVU1144
 4814 002c 1146     		mov	r1, r2
 4815              	.LVL464:
2901:Core/Src/deca_device.c ****         pmsc_reg = dwt_read32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET);
 4816              		.loc 1 2901 9 view .LVU1145
 4817 002e 1D20     		movs	r0, #29
 4818              	.LVL465:
2901:Core/Src/deca_device.c ****         pmsc_reg = dwt_read32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET);
 4819              		.loc 1 2901 9 view .LVU1146
 4820 0030 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 4821              	.LVL466:
2902:Core/Src/deca_device.c ****         pmsc_reg &= ~PMSC_CTRL0_PLL2_SEQ_EN;
 4822              		.loc 1 2902 9 is_stmt 1 view .LVU1147
2902:Core/Src/deca_device.c ****         pmsc_reg &= ~PMSC_CTRL0_PLL2_SEQ_EN;
 4823              		.loc 1 2902 20 is_stmt 0 view .LVU1148
 4824 0034 0021     		movs	r1, #0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 145


 4825 0036 3620     		movs	r0, #54
 4826 0038 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 4827              	.LVL467:
2903:Core/Src/deca_device.c ****         dwt_write32bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, pmsc_reg);
 4828              		.loc 1 2903 9 is_stmt 1 view .LVU1149
2904:Core/Src/deca_device.c ****     }
 4829              		.loc 1 2904 9 view .LVU1150
 4830 003c 20F08072 		bic	r2, r0, #16777216
 4831              	.LVL468:
2904:Core/Src/deca_device.c ****     }
 4832              		.loc 1 2904 9 is_stmt 0 view .LVU1151
 4833 0040 0021     		movs	r1, #0
 4834 0042 3620     		movs	r0, #54
 4835 0044 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 4836              	.LVL469:
 4837              		.loc 1 2906 1 view .LVU1152
 4838 0048 EEE7     		b	.L276
 4839              		.cfi_endproc
 4840              	.LFE78:
 4842              		.section	.text.dwt_setlowpowerlistening,"ax",%progbits
 4843              		.align	1
 4844              		.global	dwt_setlowpowerlistening
 4845              		.syntax unified
 4846              		.thumb
 4847              		.thumb_func
 4849              	dwt_setlowpowerlistening:
 4850              	.LVL470:
 4851              	.LFB79:
2907:Core/Src/deca_device.c **** 
2908:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2909:Core/Src/deca_device.c ****  * @fn dwt_setlowpowerlistening()
2910:Core/Src/deca_device.c ****  *
2911:Core/Src/deca_device.c ****  * @brief enable/disable low-power listening mode.
2912:Core/Src/deca_device.c ****  *
2913:Core/Src/deca_device.c ****  * Low-power listening is a feature whereby the DW1000 is predominantly in the SLEEP state but wake
2914:Core/Src/deca_device.c ****  * this "long sleep"), for a very short time to sample the air for a preamble sequence. This preamb
2915:Core/Src/deca_device.c ****  * phase is actually two reception phases separated by a "short sleep" time. See DW1000 User Manual
2916:Core/Src/deca_device.c ****  * Listening" for more details.
2917:Core/Src/deca_device.c ****  *
2918:Core/Src/deca_device.c ****  * NOTE: Before enabling low-power listening, the following functions have to be called to fully co
2919:Core/Src/deca_device.c ****  *           - dwt_configuresleep() to configure long sleep phase. "mode" parameter should at least
2920:Core/Src/deca_device.c ****  *             DWT_CONFIG and DWT_RX_EN set and "wake" parameter should at least have both DWT_WAKE
2921:Core/Src/deca_device.c ****  *           - dwt_calibratesleepcnt() and dwt_configuresleepcnt() to define the "long sleep" phase
2922:Core/Src/deca_device.c ****  *           - dwt_setsnoozetime() to define the "short sleep" phase duration.
2923:Core/Src/deca_device.c ****  *           - dwt_setpreambledetecttimeout() to define the reception phases duration.
2924:Core/Src/deca_device.c ****  *           - dwt_setinterrupt() to activate RX good frame interrupt (DWT_INT_RFCG) only.
2925:Core/Src/deca_device.c ****  *       When configured, low-power listening mode can be triggered either by putting the DW1000 to
2926:Core/Src/deca_device.c ****  *       dwt_entersleep()) or by activating reception (using dwt_rxenable()).
2927:Core/Src/deca_device.c ****  *
2928:Core/Src/deca_device.c ****  *       Please refer to the low-power listening examples (examples 8a/8b accompanying the API dist
2929:Core/Src/deca_device.c ****  *       website). They form a working example code that shows how to use low-power listening corre
2930:Core/Src/deca_device.c ****  *
2931:Core/Src/deca_device.c ****  * input parameters:
2932:Core/Src/deca_device.c ****  * @param enable - 1 to enable low-power listening, 0 to disable.
2933:Core/Src/deca_device.c ****  *
2934:Core/Src/deca_device.c ****  * output parameters
2935:Core/Src/deca_device.c ****  *
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 146


2936:Core/Src/deca_device.c ****  * no return value
2937:Core/Src/deca_device.c ****  */
2938:Core/Src/deca_device.c **** void dwt_setlowpowerlistening(int enable)
2939:Core/Src/deca_device.c **** {
 4852              		.loc 1 2939 1 is_stmt 1 view -0
 4853              		.cfi_startproc
 4854              		@ args = 0, pretend = 0, frame = 0
 4855              		@ frame_needed = 0, uses_anonymous_args = 0
 4856              		.loc 1 2939 1 is_stmt 0 view .LVU1154
 4857 0000 10B5     		push	{r4, lr}
 4858              	.LCFI103:
 4859              		.cfi_def_cfa_offset 8
 4860              		.cfi_offset 4, -8
 4861              		.cfi_offset 14, -4
 4862 0002 0446     		mov	r4, r0
2940:Core/Src/deca_device.c ****     uint32 pmsc_reg = dwt_read32bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET);
 4863              		.loc 1 2940 5 is_stmt 1 view .LVU1155
 4864              		.loc 1 2940 23 is_stmt 0 view .LVU1156
 4865 0004 0421     		movs	r1, #4
 4866 0006 3620     		movs	r0, #54
 4867              	.LVL471:
 4868              		.loc 1 2940 23 view .LVU1157
 4869 0008 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 4870              	.LVL472:
2941:Core/Src/deca_device.c ****     if (enable)
 4871              		.loc 1 2941 5 is_stmt 1 view .LVU1158
 4872              		.loc 1 2941 8 is_stmt 0 view .LVU1159
 4873 000c 34B1     		cbz	r4, .L281
2942:Core/Src/deca_device.c ****     {
2943:Core/Src/deca_device.c ****         /* Configure RX to sleep and snooze features. */
2944:Core/Src/deca_device.c ****         pmsc_reg |= (PMSC_CTRL1_ARXSLP | PMSC_CTRL1_SNOZE);
 4874              		.loc 1 2944 9 is_stmt 1 view .LVU1160
 4875              		.loc 1 2944 18 is_stmt 0 view .LVU1161
 4876 000e 40F44052 		orr	r2, r0, #12288
 4877              	.LVL473:
 4878              	.L282:
2945:Core/Src/deca_device.c ****     }
2946:Core/Src/deca_device.c ****     else
2947:Core/Src/deca_device.c ****     {
2948:Core/Src/deca_device.c ****         /* Reset RX to sleep and snooze features. */
2949:Core/Src/deca_device.c ****         pmsc_reg &= ~(PMSC_CTRL1_ARXSLP | PMSC_CTRL1_SNOZE);
2950:Core/Src/deca_device.c ****     }
2951:Core/Src/deca_device.c ****     dwt_write32bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET, pmsc_reg);
 4879              		.loc 1 2951 5 is_stmt 1 view .LVU1162
 4880 0012 0421     		movs	r1, #4
 4881 0014 3620     		movs	r0, #54
 4882 0016 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 4883              	.LVL474:
2952:Core/Src/deca_device.c **** }
 4884              		.loc 1 2952 1 is_stmt 0 view .LVU1163
 4885 001a 10BD     		pop	{r4, pc}
 4886              	.LVL475:
 4887              	.L281:
2949:Core/Src/deca_device.c ****     }
 4888              		.loc 1 2949 9 is_stmt 1 view .LVU1164
2949:Core/Src/deca_device.c ****     }
 4889              		.loc 1 2949 18 is_stmt 0 view .LVU1165
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 147


 4890 001c 20F44052 		bic	r2, r0, #12288
 4891              	.LVL476:
2949:Core/Src/deca_device.c ****     }
 4892              		.loc 1 2949 18 view .LVU1166
 4893 0020 F7E7     		b	.L282
 4894              		.cfi_endproc
 4895              	.LFE79:
 4897              		.section	.text.dwt_lowpowerlistenisr,"ax",%progbits
 4898              		.align	1
 4899              		.global	dwt_lowpowerlistenisr
 4900              		.syntax unified
 4901              		.thumb
 4902              		.thumb_func
 4904              	dwt_lowpowerlistenisr:
 4905              	.LFB70:
2517:Core/Src/deca_device.c ****     uint32 status = pdw1000local->cbData.status = dwt_read32bitreg(SYS_STATUS_ID); // Read status r
 4906              		.loc 1 2517 1 is_stmt 1 view -0
 4907              		.cfi_startproc
 4908              		@ args = 0, pretend = 0, frame = 0
 4909              		@ frame_needed = 0, uses_anonymous_args = 0
 4910 0000 70B5     		push	{r4, r5, r6, lr}
 4911              	.LCFI104:
 4912              		.cfi_def_cfa_offset 16
 4913              		.cfi_offset 4, -16
 4914              		.cfi_offset 5, -12
 4915              		.cfi_offset 6, -8
 4916              		.cfi_offset 14, -4
2518:Core/Src/deca_device.c ****     uint16 finfo16;
 4917              		.loc 1 2518 5 view .LVU1168
2518:Core/Src/deca_device.c ****     uint16 finfo16;
 4918              		.loc 1 2518 33 is_stmt 0 view .LVU1169
 4919 0002 274D     		ldr	r5, .L292
 4920 0004 2E68     		ldr	r6, [r5]
2518:Core/Src/deca_device.c ****     uint16 finfo16;
 4921              		.loc 1 2518 51 view .LVU1170
 4922 0006 0021     		movs	r1, #0
 4923 0008 0F20     		movs	r0, #15
 4924 000a FFF7FEFF 		bl	dwt_read32bitoffsetreg
 4925              	.LVL477:
 4926 000e 0446     		mov	r4, r0
2518:Core/Src/deca_device.c ****     uint16 finfo16;
 4927              		.loc 1 2518 49 view .LVU1171
 4928 0010 F061     		str	r0, [r6, #28]
 4929              	.LVL478:
2519:Core/Src/deca_device.c ****     uint16 len;
 4930              		.loc 1 2519 5 is_stmt 1 view .LVU1172
2520:Core/Src/deca_device.c **** 
 4931              		.loc 1 2520 5 view .LVU1173
2525:Core/Src/deca_device.c **** 
 4932              		.loc 1 2525 5 view .LVU1174
 4933 0012 0020     		movs	r0, #0
 4934              	.LVL479:
2525:Core/Src/deca_device.c **** 
 4935              		.loc 1 2525 5 is_stmt 0 view .LVU1175
 4936 0014 FFF7FEFF 		bl	dwt_setlowpowerlistening
 4937              	.LVL480:
2527:Core/Src/deca_device.c **** 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 148


 4938              		.loc 1 2527 5 is_stmt 1 view .LVU1176
 4939 0018 4FF4DE42 		mov	r2, #28416
 4940 001c 0021     		movs	r1, #0
 4941 001e 0F20     		movs	r0, #15
 4942 0020 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 4943              	.LVL481:
2529:Core/Src/deca_device.c **** 
 4944              		.loc 1 2529 5 view .LVU1177
2529:Core/Src/deca_device.c **** 
 4945              		.loc 1 2529 17 is_stmt 0 view .LVU1178
 4946 0024 2B68     		ldr	r3, [r5]
2529:Core/Src/deca_device.c **** 
 4947              		.loc 1 2529 35 view .LVU1179
 4948 0026 0021     		movs	r1, #0
 4949 0028 83F82410 		strb	r1, [r3, #36]
2532:Core/Src/deca_device.c **** 
 4950              		.loc 1 2532 5 is_stmt 1 view .LVU1180
2532:Core/Src/deca_device.c **** 
 4951              		.loc 1 2532 15 is_stmt 0 view .LVU1181
 4952 002c 1020     		movs	r0, #16
 4953 002e FFF7FEFF 		bl	dwt_read16bitoffsetreg
 4954              	.LVL482:
2535:Core/Src/deca_device.c ****     if(pdw1000local->longFrames == 0)
 4955              		.loc 1 2535 5 is_stmt 1 view .LVU1182
2535:Core/Src/deca_device.c ****     if(pdw1000local->longFrames == 0)
 4956              		.loc 1 2535 9 is_stmt 0 view .LVU1183
 4957 0032 C0F30902 		ubfx	r2, r0, #0, #10
 4958              	.LVL483:
2536:Core/Src/deca_device.c ****     {
 4959              		.loc 1 2536 5 is_stmt 1 view .LVU1184
2536:Core/Src/deca_device.c ****     {
 4960              		.loc 1 2536 20 is_stmt 0 view .LVU1185
 4961 0036 2B68     		ldr	r3, [r5]
 4962 0038 997A     		ldrb	r1, [r3, #10]	@ zero_extendqisi2
2536:Core/Src/deca_device.c ****     {
 4963              		.loc 1 2536 7 view .LVU1186
 4964 003a 09B9     		cbnz	r1, .L285
2538:Core/Src/deca_device.c ****     }
 4965              		.loc 1 2538 9 is_stmt 1 view .LVU1187
2538:Core/Src/deca_device.c ****     }
 4966              		.loc 1 2538 13 is_stmt 0 view .LVU1188
 4967 003c 00F07F02 		and	r2, r0, #127
 4968              	.LVL484:
 4969              	.L285:
2540:Core/Src/deca_device.c **** 
 4970              		.loc 1 2540 5 is_stmt 1 view .LVU1189
2540:Core/Src/deca_device.c **** 
 4971              		.loc 1 2540 37 is_stmt 0 view .LVU1190
 4972 0040 1A84     		strh	r2, [r3, #32]	@ movhi
2543:Core/Src/deca_device.c ****     {
 4973              		.loc 1 2543 5 is_stmt 1 view .LVU1191
2543:Core/Src/deca_device.c ****     {
 4974              		.loc 1 2543 7 is_stmt 0 view .LVU1192
 4975 0042 10F4004F 		tst	r0, #32768
 4976 0046 16D1     		bne	.L290
 4977              	.LVL485:
 4978              	.L286:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 149


2549:Core/Src/deca_device.c **** 
 4979              		.loc 1 2549 5 is_stmt 1 view .LVU1193
 4980 0048 2233     		adds	r3, r3, #34
 4981              	.LVL486:
2549:Core/Src/deca_device.c **** 
 4982              		.loc 1 2549 5 is_stmt 0 view .LVU1194
 4983 004a 0222     		movs	r2, #2
 4984 004c 0021     		movs	r1, #0
 4985 004e 1120     		movs	r0, #17
 4986              	.LVL487:
2549:Core/Src/deca_device.c **** 
 4987              		.loc 1 2549 5 view .LVU1195
 4988 0050 FFF7FEFF 		bl	dwt_readfromdevice
 4989              	.LVL488:
2555:Core/Src/deca_device.c ****     {
 4990              		.loc 1 2555 5 is_stmt 1 view .LVU1196
2555:Core/Src/deca_device.c ****     {
 4991              		.loc 1 2555 7 is_stmt 0 view .LVU1197
 4992 0054 14F0080F 		tst	r4, #8
 4993 0058 06D0     		beq	.L287
2555:Core/Src/deca_device.c ****     {
 4994              		.loc 1 2555 51 discriminator 1 view .LVU1198
 4995 005a 114B     		ldr	r3, .L292
 4996 005c 1B68     		ldr	r3, [r3]
2555:Core/Src/deca_device.c ****     {
 4997              		.loc 1 2555 65 discriminator 1 view .LVU1199
 4998 005e 93F82230 		ldrb	r3, [r3, #34]	@ zero_extendqisi2
2555:Core/Src/deca_device.c ****     {
 4999              		.loc 1 2555 34 discriminator 1 view .LVU1200
 5000 0062 13F0200F 		tst	r3, #32
 5001 0066 0DD0     		beq	.L291
 5002              	.L287:
2563:Core/Src/deca_device.c ****     {
 5003              		.loc 1 2563 5 is_stmt 1 view .LVU1201
2563:Core/Src/deca_device.c ****     {
 5004              		.loc 1 2563 20 is_stmt 0 view .LVU1202
 5005 0068 0D4B     		ldr	r3, .L292
 5006 006a 1868     		ldr	r0, [r3]
 5007 006c C36A     		ldr	r3, [r0, #44]
2563:Core/Src/deca_device.c ****     {
 5008              		.loc 1 2563 7 view .LVU1203
 5009 006e 0BB1     		cbz	r3, .L284
2565:Core/Src/deca_device.c ****     }
 5010              		.loc 1 2565 9 is_stmt 1 view .LVU1204
 5011 0070 1C30     		adds	r0, r0, #28
 5012 0072 9847     		blx	r3
 5013              	.LVL489:
 5014              	.L284:
2567:Core/Src/deca_device.c **** 
 5015              		.loc 1 2567 1 is_stmt 0 view .LVU1205
 5016 0074 70BD     		pop	{r4, r5, r6, pc}
 5017              	.LVL490:
 5018              	.L290:
2545:Core/Src/deca_device.c ****     }
 5019              		.loc 1 2545 9 is_stmt 1 view .LVU1206
2545:Core/Src/deca_device.c ****     }
 5020              		.loc 1 2545 39 is_stmt 0 view .LVU1207
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 150


 5021 0076 93F82420 		ldrb	r2, [r3, #36]	@ zero_extendqisi2
 5022              	.LVL491:
2545:Core/Src/deca_device.c ****     }
 5023              		.loc 1 2545 39 view .LVU1208
 5024 007a 42F00102 		orr	r2, r2, #1
 5025 007e 83F82420 		strb	r2, [r3, #36]
 5026 0082 E1E7     		b	.L286
 5027              	.LVL492:
 5028              	.L291:
2557:Core/Src/deca_device.c ****         pdw1000local->cbData.status &= ~SYS_STATUS_AAT; // Clear AAT status bit in callback data re
 5029              		.loc 1 2557 9 is_stmt 1 view .LVU1209
 5030 0084 0822     		movs	r2, #8
 5031 0086 0021     		movs	r1, #0
 5032 0088 0F20     		movs	r0, #15
 5033 008a FFF7FEFF 		bl	dwt_write32bitoffsetreg
 5034              	.LVL493:
2558:Core/Src/deca_device.c ****         pdw1000local->wait4resp = 0;
 5035              		.loc 1 2558 9 view .LVU1210
2558:Core/Src/deca_device.c ****         pdw1000local->wait4resp = 0;
 5036              		.loc 1 2558 37 is_stmt 0 view .LVU1211
 5037 008e 044B     		ldr	r3, .L292
 5038 0090 1B68     		ldr	r3, [r3]
 5039 0092 DA69     		ldr	r2, [r3, #28]
 5040 0094 22F00802 		bic	r2, r2, #8
 5041 0098 DA61     		str	r2, [r3, #28]
2559:Core/Src/deca_device.c ****     }
 5042              		.loc 1 2559 9 is_stmt 1 view .LVU1212
2559:Core/Src/deca_device.c ****     }
 5043              		.loc 1 2559 33 is_stmt 0 view .LVU1213
 5044 009a 0022     		movs	r2, #0
 5045 009c 5A75     		strb	r2, [r3, #21]
 5046 009e E3E7     		b	.L287
 5047              	.L293:
 5048              		.align	2
 5049              	.L292:
 5050 00a0 00000000 		.word	.LANCHOR1
 5051              		.cfi_endproc
 5052              	.LFE70:
 5054              		.section	.text.dwt_setsnoozetime,"ax",%progbits
 5055              		.align	1
 5056              		.global	dwt_setsnoozetime
 5057              		.syntax unified
 5058              		.thumb
 5059              		.thumb_func
 5061              	dwt_setsnoozetime:
 5062              	.LVL494:
 5063              	.LFB80:
2953:Core/Src/deca_device.c **** 
2954:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2955:Core/Src/deca_device.c ****  * @fn dwt_setsnoozetime()
2956:Core/Src/deca_device.c ****  *
2957:Core/Src/deca_device.c ****  * @brief Set duration of "short sleep" phase when in low-power listening mode.
2958:Core/Src/deca_device.c ****  *
2959:Core/Src/deca_device.c ****  * input parameters:
2960:Core/Src/deca_device.c ****  * @param snooze_time - "short sleep" phase duration, expressed in multiples of 512/19.2 s (~26.7 
2961:Core/Src/deca_device.c ****  *                      automatically adds 1 to the value set. The smallest working value that shou
2962:Core/Src/deca_device.c ****  *                      i.e. giving a snooze time of 2 units (or ~53 s).
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 151


2963:Core/Src/deca_device.c ****  *
2964:Core/Src/deca_device.c ****  * output parameters
2965:Core/Src/deca_device.c ****  *
2966:Core/Src/deca_device.c ****  * no return value
2967:Core/Src/deca_device.c ****  */
2968:Core/Src/deca_device.c **** void dwt_setsnoozetime(uint8 snooze_time)
2969:Core/Src/deca_device.c **** {
 5064              		.loc 1 2969 1 is_stmt 1 view -0
 5065              		.cfi_startproc
 5066              		@ args = 0, pretend = 0, frame = 0
 5067              		@ frame_needed = 0, uses_anonymous_args = 0
 5068              		.loc 1 2969 1 is_stmt 0 view .LVU1215
 5069 0000 08B5     		push	{r3, lr}
 5070              	.LCFI105:
 5071              		.cfi_def_cfa_offset 8
 5072              		.cfi_offset 3, -8
 5073              		.cfi_offset 14, -4
 5074 0002 0246     		mov	r2, r0
2970:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_SNOZT_OFFSET, snooze_time);
 5075              		.loc 1 2970 5 is_stmt 1 view .LVU1216
 5076 0004 0C21     		movs	r1, #12
 5077 0006 3620     		movs	r0, #54
 5078              	.LVL495:
 5079              		.loc 1 2970 5 is_stmt 0 view .LVU1217
 5080 0008 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 5081              	.LVL496:
2971:Core/Src/deca_device.c **** }
 5082              		.loc 1 2971 1 view .LVU1218
 5083 000c 08BD     		pop	{r3, pc}
 5084              		.cfi_endproc
 5085              	.LFE80:
 5087              		.section	.text.dwt_rxenable,"ax",%progbits
 5088              		.align	1
 5089              		.global	dwt_rxenable
 5090              		.syntax unified
 5091              		.thumb
 5092              		.thumb_func
 5094              	dwt_rxenable:
 5095              	.LVL497:
 5096              	.LFB81:
2972:Core/Src/deca_device.c **** 
2973:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
2974:Core/Src/deca_device.c ****  * @fn dwt_rxenable()
2975:Core/Src/deca_device.c ****  *
2976:Core/Src/deca_device.c ****  * @brief This call turns on the receiver, can be immediate or delayed (depending on the mode param
2977:Core/Src/deca_device.c ****  * "late" error the receiver will only be turned on if the DWT_IDLE_ON_DLY_ERR is not set.
2978:Core/Src/deca_device.c ****  * The receiver will stay turned on, listening to any messages until
2979:Core/Src/deca_device.c ****  * it either receives a good frame, an error (CRC, PHY header, Reed Solomon) or  it times out (SFD,
2980:Core/Src/deca_device.c ****  *
2981:Core/Src/deca_device.c ****  * input parameters
2982:Core/Src/deca_device.c ****  * @param mode - this can be one of the following allowed values:
2983:Core/Src/deca_device.c ****  *
2984:Core/Src/deca_device.c ****  * DWT_START_RX_IMMEDIATE      0 used to enbale receiver immediately
2985:Core/Src/deca_device.c ****  * DWT_START_RX_DELAYED        1 used to set up delayed RX, if "late" error triggers, then the RX w
2986:Core/Src/deca_device.c ****  * (DWT_START_RX_DELAYED | DWT_IDLE_ON_DLY_ERR) 3 used to disable re-enabling of receiver if delaye
2987:Core/Src/deca_device.c ****  * (DWT_START_RX_IMMEDIATE | DWT_NO_SYNC_PTRS) 4 used to re-enable RX without trying to sync IC and
2988:Core/Src/deca_device.c ****  *                                               performing manual RX re-enabling in double bufferi
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 152


2989:Core/Src/deca_device.c ****  *
2990:Core/Src/deca_device.c ****  * returns DWT_SUCCESS for success, or DWT_ERROR for error (e.g. a delayed receive enable will be t
2991:Core/Src/deca_device.c ****  */
2992:Core/Src/deca_device.c **** int dwt_rxenable(int mode)
2993:Core/Src/deca_device.c **** {
 5097              		.loc 1 2993 1 is_stmt 1 view -0
 5098              		.cfi_startproc
 5099              		@ args = 0, pretend = 0, frame = 0
 5100              		@ frame_needed = 0, uses_anonymous_args = 0
 5101              		.loc 1 2993 1 is_stmt 0 view .LVU1220
 5102 0000 38B5     		push	{r3, r4, r5, lr}
 5103              	.LCFI106:
 5104              		.cfi_def_cfa_offset 16
 5105              		.cfi_offset 3, -16
 5106              		.cfi_offset 4, -12
 5107              		.cfi_offset 5, -8
 5108              		.cfi_offset 14, -4
 5109 0002 0446     		mov	r4, r0
2994:Core/Src/deca_device.c ****     uint16 temp ;
 5110              		.loc 1 2994 5 is_stmt 1 view .LVU1221
2995:Core/Src/deca_device.c ****     uint8 temp1 ;
 5111              		.loc 1 2995 5 view .LVU1222
2996:Core/Src/deca_device.c **** 
2997:Core/Src/deca_device.c ****     if ((mode & DWT_NO_SYNC_PTRS) == 0)
 5112              		.loc 1 2997 5 view .LVU1223
 5113              		.loc 1 2997 8 is_stmt 0 view .LVU1224
 5114 0004 10F0040F 		tst	r0, #4
 5115 0008 0BD0     		beq	.L304
 5116              	.LVL498:
 5117              	.L297:
2998:Core/Src/deca_device.c ****     {
2999:Core/Src/deca_device.c ****         dwt_syncrxbufptrs();
3000:Core/Src/deca_device.c ****     }
3001:Core/Src/deca_device.c **** 
3002:Core/Src/deca_device.c ****     temp = (uint16)SYS_CTRL_RXENAB ;
 5118              		.loc 1 3002 5 is_stmt 1 view .LVU1225
3003:Core/Src/deca_device.c **** 
3004:Core/Src/deca_device.c ****     if (mode & DWT_START_RX_DELAYED)
 5119              		.loc 1 3004 5 view .LVU1226
 5120              		.loc 1 3004 8 is_stmt 0 view .LVU1227
 5121 000a 14F00105 		ands	r5, r4, #1
 5122 000e 0BD1     		bne	.L301
3002:Core/Src/deca_device.c **** 
 5123              		.loc 1 3002 10 view .LVU1228
 5124 0010 4FF48072 		mov	r2, #256
 5125              	.L298:
 5126              	.LVL499:
3005:Core/Src/deca_device.c ****     {
3006:Core/Src/deca_device.c ****         temp |= (uint16)SYS_CTRL_RXDLYE ;
3007:Core/Src/deca_device.c ****     }
3008:Core/Src/deca_device.c **** 
3009:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_OFFSET, temp);
 5127              		.loc 1 3009 5 is_stmt 1 view .LVU1229
 5128 0014 0021     		movs	r1, #0
 5129 0016 0D20     		movs	r0, #13
 5130 0018 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 5131              	.LVL500:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 153


3010:Core/Src/deca_device.c **** 
3011:Core/Src/deca_device.c ****     if (mode & DWT_START_RX_DELAYED) // check for errors
 5132              		.loc 1 3011 5 view .LVU1230
 5133              		.loc 1 3011 8 is_stmt 0 view .LVU1231
 5134 001c 3DB9     		cbnz	r5, .L305
 5135              	.L296:
3012:Core/Src/deca_device.c ****     {
3013:Core/Src/deca_device.c ****         temp1 = dwt_read8bitoffsetreg(SYS_STATUS_ID, 3); // Read 1 byte at offset 3 to get the 4th 
3014:Core/Src/deca_device.c ****         if ((temp1 & (SYS_STATUS_HPDWARN >> 24)) != 0) // if delay has passed do immediate RX on un
3015:Core/Src/deca_device.c ****         {
3016:Core/Src/deca_device.c ****             dwt_forcetrxoff(); // turn the delayed receive off
3017:Core/Src/deca_device.c **** 
3018:Core/Src/deca_device.c ****             if((mode & DWT_IDLE_ON_DLY_ERR) == 0) // if DWT_IDLE_ON_DLY_ERR not set then re-enable 
3019:Core/Src/deca_device.c ****             {
3020:Core/Src/deca_device.c ****                 dwt_write16bitoffsetreg(SYS_CTRL_ID, SYS_CTRL_OFFSET, SYS_CTRL_RXENAB);
3021:Core/Src/deca_device.c ****             }
3022:Core/Src/deca_device.c ****             return DWT_ERROR; // return warning indication
3023:Core/Src/deca_device.c ****         }
3024:Core/Src/deca_device.c ****     }
3025:Core/Src/deca_device.c **** 
3026:Core/Src/deca_device.c ****     return DWT_SUCCESS;
3027:Core/Src/deca_device.c **** } // end dwt_rxenable()
 5136              		.loc 1 3027 1 view .LVU1232
 5137 001e 2846     		mov	r0, r5
 5138 0020 38BD     		pop	{r3, r4, r5, pc}
 5139              	.LVL501:
 5140              	.L304:
2999:Core/Src/deca_device.c ****     }
 5141              		.loc 1 2999 9 is_stmt 1 view .LVU1233
 5142 0022 FFF7FEFF 		bl	dwt_syncrxbufptrs
 5143              	.LVL502:
2999:Core/Src/deca_device.c ****     }
 5144              		.loc 1 2999 9 is_stmt 0 view .LVU1234
 5145 0026 F0E7     		b	.L297
 5146              	.LVL503:
 5147              	.L301:
3006:Core/Src/deca_device.c ****     }
 5148              		.loc 1 3006 14 view .LVU1235
 5149 0028 4FF44072 		mov	r2, #768
 5150 002c F2E7     		b	.L298
 5151              	.LVL504:
 5152              	.L305:
3013:Core/Src/deca_device.c ****         if ((temp1 & (SYS_STATUS_HPDWARN >> 24)) != 0) // if delay has passed do immediate RX on un
 5153              		.loc 1 3013 9 is_stmt 1 view .LVU1236
3013:Core/Src/deca_device.c ****         if ((temp1 & (SYS_STATUS_HPDWARN >> 24)) != 0) // if delay has passed do immediate RX on un
 5154              		.loc 1 3013 17 is_stmt 0 view .LVU1237
 5155 002e 0321     		movs	r1, #3
 5156 0030 0F20     		movs	r0, #15
 5157 0032 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 5158              	.LVL505:
3014:Core/Src/deca_device.c ****         {
 5159              		.loc 1 3014 9 is_stmt 1 view .LVU1238
3014:Core/Src/deca_device.c ****         {
 5160              		.loc 1 3014 12 is_stmt 0 view .LVU1239
 5161 0036 10F0080F 		tst	r0, #8
 5162 003a 01D1     		bne	.L306
3026:Core/Src/deca_device.c **** } // end dwt_rxenable()
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 154


 5163              		.loc 1 3026 12 view .LVU1240
 5164 003c 0025     		movs	r5, #0
 5165 003e EEE7     		b	.L296
 5166              	.L306:
3016:Core/Src/deca_device.c **** 
 5167              		.loc 1 3016 13 is_stmt 1 view .LVU1241
 5168 0040 FFF7FEFF 		bl	dwt_forcetrxoff
 5169              	.LVL506:
3018:Core/Src/deca_device.c ****             {
 5170              		.loc 1 3018 13 view .LVU1242
3018:Core/Src/deca_device.c ****             {
 5171              		.loc 1 3018 15 is_stmt 0 view .LVU1243
 5172 0044 14F0020F 		tst	r4, #2
 5173 0048 02D0     		beq	.L307
 5174              	.L300:
3022:Core/Src/deca_device.c ****         }
 5175              		.loc 1 3022 13 is_stmt 1 view .LVU1244
3022:Core/Src/deca_device.c ****         }
 5176              		.loc 1 3022 20 is_stmt 0 view .LVU1245
 5177 004a 4FF0FF35 		mov	r5, #-1
 5178 004e E6E7     		b	.L296
 5179              	.L307:
3020:Core/Src/deca_device.c ****             }
 5180              		.loc 1 3020 17 is_stmt 1 view .LVU1246
 5181 0050 4FF48072 		mov	r2, #256
 5182 0054 0021     		movs	r1, #0
 5183 0056 0D20     		movs	r0, #13
 5184 0058 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 5185              	.LVL507:
 5186 005c F5E7     		b	.L300
 5187              		.cfi_endproc
 5188              	.LFE81:
 5190              		.section	.text.dwt_setrxtimeout,"ax",%progbits
 5191              		.align	1
 5192              		.global	dwt_setrxtimeout
 5193              		.syntax unified
 5194              		.thumb
 5195              		.thumb_func
 5197              	dwt_setrxtimeout:
 5198              	.LVL508:
 5199              	.LFB82:
3028:Core/Src/deca_device.c **** 
3029:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3030:Core/Src/deca_device.c ****  * @fn dwt_setrxtimeout()
3031:Core/Src/deca_device.c ****  *
3032:Core/Src/deca_device.c ****  * @brief This call enables RX timeout (SY_STAT_RFTO event)
3033:Core/Src/deca_device.c ****  *
3034:Core/Src/deca_device.c ****  * input parameters
3035:Core/Src/deca_device.c ****  * @param time - how long the receiver remains on from the RX enable command
3036:Core/Src/deca_device.c ****  *               The time parameter used here is in 1.0256 us (512/499.2MHz) units
3037:Core/Src/deca_device.c ****  *               If set to 0 the timeout is disabled.
3038:Core/Src/deca_device.c ****  *
3039:Core/Src/deca_device.c ****  * output parameters
3040:Core/Src/deca_device.c ****  *
3041:Core/Src/deca_device.c ****  * no return value
3042:Core/Src/deca_device.c ****  */
3043:Core/Src/deca_device.c **** void dwt_setrxtimeout(uint16 time)
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 155


3044:Core/Src/deca_device.c **** {
 5200              		.loc 1 3044 1 view -0
 5201              		.cfi_startproc
 5202              		@ args = 0, pretend = 0, frame = 0
 5203              		@ frame_needed = 0, uses_anonymous_args = 0
 5204              		.loc 1 3044 1 is_stmt 0 view .LVU1248
 5205 0000 38B5     		push	{r3, r4, r5, lr}
 5206              	.LCFI107:
 5207              		.cfi_def_cfa_offset 16
 5208              		.cfi_offset 3, -16
 5209              		.cfi_offset 4, -12
 5210              		.cfi_offset 5, -8
 5211              		.cfi_offset 14, -4
 5212 0002 0546     		mov	r5, r0
3045:Core/Src/deca_device.c ****     uint8 temp ;
 5213              		.loc 1 3045 5 is_stmt 1 view .LVU1249
3046:Core/Src/deca_device.c **** 
3047:Core/Src/deca_device.c ****     temp = dwt_read8bitoffsetreg(SYS_CFG_ID, 3); // Read at offset 3 to get the upper byte only
 5214              		.loc 1 3047 5 view .LVU1250
 5215              		.loc 1 3047 12 is_stmt 0 view .LVU1251
 5216 0004 0321     		movs	r1, #3
 5217 0006 0420     		movs	r0, #4
 5218              	.LVL509:
 5219              		.loc 1 3047 12 view .LVU1252
 5220 0008 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 5221              	.LVL510:
 5222 000c 0446     		mov	r4, r0
 5223              	.LVL511:
3048:Core/Src/deca_device.c **** 
3049:Core/Src/deca_device.c ****     if(time > 0)
 5224              		.loc 1 3049 5 is_stmt 1 view .LVU1253
 5225              		.loc 1 3049 7 is_stmt 0 view .LVU1254
 5226 000e 95B1     		cbz	r5, .L309
3050:Core/Src/deca_device.c ****     {
3051:Core/Src/deca_device.c ****         dwt_write16bitoffsetreg(RX_FWTO_ID, RX_FWTO_OFFSET, time) ;
 5227              		.loc 1 3051 9 is_stmt 1 view .LVU1255
 5228 0010 2A46     		mov	r2, r5
 5229 0012 0021     		movs	r1, #0
 5230 0014 0C20     		movs	r0, #12
 5231              	.LVL512:
 5232              		.loc 1 3051 9 is_stmt 0 view .LVU1256
 5233 0016 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 5234              	.LVL513:
3052:Core/Src/deca_device.c **** 
3053:Core/Src/deca_device.c ****         temp |= (uint8)(SYS_CFG_RXWTOE>>24); // Shift RXWTOE mask as we read the upper byte only
 5235              		.loc 1 3053 9 is_stmt 1 view .LVU1257
 5236              		.loc 1 3053 14 is_stmt 0 view .LVU1258
 5237 001a 44F01002 		orr	r2, r4, #16
 5238              	.LVL514:
3054:Core/Src/deca_device.c ****         // OR in 32bit value (1 bit set), I know this is in high byte.
3055:Core/Src/deca_device.c ****         pdw1000local->sysCFGreg |= SYS_CFG_RXWTOE;
 5239              		.loc 1 3055 9 is_stmt 1 view .LVU1259
 5240              		.loc 1 3055 33 is_stmt 0 view .LVU1260
 5241 001e 0C4B     		ldr	r3, .L312
 5242 0020 1968     		ldr	r1, [r3]
 5243 0022 0B69     		ldr	r3, [r1, #16]
 5244 0024 43F08053 		orr	r3, r3, #268435456
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 156


 5245 0028 0B61     		str	r3, [r1, #16]
3056:Core/Src/deca_device.c **** 
3057:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(SYS_CFG_ID, 3, temp); // Write at offset 3 to write the upper byte o
 5246              		.loc 1 3057 9 is_stmt 1 view .LVU1261
 5247 002a D2B2     		uxtb	r2, r2
 5248              		.loc 1 3057 9 is_stmt 0 view .LVU1262
 5249 002c 0321     		movs	r1, #3
 5250 002e 0420     		movs	r0, #4
 5251 0030 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 5252              	.LVL515:
 5253              	.L308:
3058:Core/Src/deca_device.c ****     }
3059:Core/Src/deca_device.c ****     else
3060:Core/Src/deca_device.c ****     {
3061:Core/Src/deca_device.c ****         temp &= ~((uint8)(SYS_CFG_RXWTOE>>24)); // Shift RXWTOE mask as we read the upper byte only
3062:Core/Src/deca_device.c ****         // AND in inverted 32bit value (1 bit clear), I know this is in high byte.
3063:Core/Src/deca_device.c ****         pdw1000local->sysCFGreg &= ~(SYS_CFG_RXWTOE);
3064:Core/Src/deca_device.c **** 
3065:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(SYS_CFG_ID, 3, temp); // Write at offset 3 to write the upper byte o
3066:Core/Src/deca_device.c ****     }
3067:Core/Src/deca_device.c **** 
3068:Core/Src/deca_device.c **** } // end dwt_setrxtimeout()
 5254              		.loc 1 3068 1 view .LVU1263
 5255 0034 38BD     		pop	{r3, r4, r5, pc}
 5256              	.LVL516:
 5257              	.L309:
3061:Core/Src/deca_device.c ****         // AND in inverted 32bit value (1 bit clear), I know this is in high byte.
 5258              		.loc 1 3061 9 is_stmt 1 view .LVU1264
3063:Core/Src/deca_device.c **** 
 5259              		.loc 1 3063 9 view .LVU1265
3063:Core/Src/deca_device.c **** 
 5260              		.loc 1 3063 33 is_stmt 0 view .LVU1266
 5261 0036 064B     		ldr	r3, .L312
 5262 0038 1A68     		ldr	r2, [r3]
 5263 003a 1369     		ldr	r3, [r2, #16]
 5264 003c 23F08053 		bic	r3, r3, #268435456
 5265 0040 1361     		str	r3, [r2, #16]
3065:Core/Src/deca_device.c ****     }
 5266              		.loc 1 3065 9 is_stmt 1 view .LVU1267
 5267 0042 00F0EF02 		and	r2, r0, #239
 5268 0046 0321     		movs	r1, #3
 5269 0048 0420     		movs	r0, #4
 5270              	.LVL517:
3065:Core/Src/deca_device.c ****     }
 5271              		.loc 1 3065 9 is_stmt 0 view .LVU1268
 5272 004a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 5273              	.LVL518:
 5274              		.loc 1 3068 1 view .LVU1269
 5275 004e F1E7     		b	.L308
 5276              	.L313:
 5277              		.align	2
 5278              	.L312:
 5279 0050 00000000 		.word	.LANCHOR1
 5280              		.cfi_endproc
 5281              	.LFE82:
 5283              		.section	.text.dwt_setpreambledetecttimeout,"ax",%progbits
 5284              		.align	1
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 157


 5285              		.global	dwt_setpreambledetecttimeout
 5286              		.syntax unified
 5287              		.thumb
 5288              		.thumb_func
 5290              	dwt_setpreambledetecttimeout:
 5291              	.LVL519:
 5292              	.LFB83:
3069:Core/Src/deca_device.c **** 
3070:Core/Src/deca_device.c **** 
3071:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3072:Core/Src/deca_device.c ****  * @fn dwt_setpreambledetecttimeout()
3073:Core/Src/deca_device.c ****  *
3074:Core/Src/deca_device.c ****  * @brief This call enables preamble timeout (SY_STAT_RXPTO event)
3075:Core/Src/deca_device.c ****  *
3076:Core/Src/deca_device.c ****  * input parameters
3077:Core/Src/deca_device.c ****  * @param  timeout - Preamble detection timeout, expressed in multiples of PAC size. The counter au
3078:Core/Src/deca_device.c ****  *                   size to the value set. Min value that can be set is 1 (i.e. a timeout of 2 PAC
3079:Core/Src/deca_device.c ****  *
3080:Core/Src/deca_device.c ****  *                   Note: value of 0 disables the preamble timeout
3081:Core/Src/deca_device.c ****  * output parameters
3082:Core/Src/deca_device.c ****  *
3083:Core/Src/deca_device.c ****  * no return value
3084:Core/Src/deca_device.c ****  */
3085:Core/Src/deca_device.c **** void dwt_setpreambledetecttimeout(uint16 timeout)
3086:Core/Src/deca_device.c **** {
 5293              		.loc 1 3086 1 is_stmt 1 view -0
 5294              		.cfi_startproc
 5295              		@ args = 0, pretend = 0, frame = 0
 5296              		@ frame_needed = 0, uses_anonymous_args = 0
 5297              		.loc 1 3086 1 is_stmt 0 view .LVU1271
 5298 0000 08B5     		push	{r3, lr}
 5299              	.LCFI108:
 5300              		.cfi_def_cfa_offset 8
 5301              		.cfi_offset 3, -8
 5302              		.cfi_offset 14, -4
 5303 0002 0246     		mov	r2, r0
3087:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(DRX_CONF_ID, DRX_PRETOC_OFFSET, timeout);
 5304              		.loc 1 3087 5 is_stmt 1 view .LVU1272
 5305 0004 2421     		movs	r1, #36
 5306 0006 2720     		movs	r0, #39
 5307              	.LVL520:
 5308              		.loc 1 3087 5 is_stmt 0 view .LVU1273
 5309 0008 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 5310              	.LVL521:
3088:Core/Src/deca_device.c **** }
 5311              		.loc 1 3088 1 view .LVU1274
 5312 000c 08BD     		pop	{r3, pc}
 5313              		.cfi_endproc
 5314              	.LFE83:
 5316              		.section	.text.dwt_setinterrupt,"ax",%progbits
 5317              		.align	1
 5318              		.global	dwt_setinterrupt
 5319              		.syntax unified
 5320              		.thumb
 5321              		.thumb_func
 5323              	dwt_setinterrupt:
 5324              	.LVL522:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 158


 5325              	.LFB84:
3089:Core/Src/deca_device.c **** 
3090:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3091:Core/Src/deca_device.c ****  * @fn void dwt_setinterrupt()
3092:Core/Src/deca_device.c ****  *
3093:Core/Src/deca_device.c ****  * @brief This function enables the specified events to trigger an interrupt.
3094:Core/Src/deca_device.c ****  * The following events can be enabled:
3095:Core/Src/deca_device.c ****  * DWT_INT_TFRS         0x00000080          // frame sent
3096:Core/Src/deca_device.c ****  * DWT_INT_RFCG         0x00004000          // frame received with good CRC
3097:Core/Src/deca_device.c ****  * DWT_INT_RPHE         0x00001000          // receiver PHY header error
3098:Core/Src/deca_device.c ****  * DWT_INT_RFCE         0x00008000          // receiver CRC error
3099:Core/Src/deca_device.c ****  * DWT_INT_RFSL         0x00010000          // receiver sync loss error
3100:Core/Src/deca_device.c ****  * DWT_INT_RFTO         0x00020000          // frame wait timeout
3101:Core/Src/deca_device.c ****  * DWT_INT_RXPTO        0x00200000          // preamble detect timeout
3102:Core/Src/deca_device.c ****  * DWT_INT_SFDT         0x04000000          // SFD timeout
3103:Core/Src/deca_device.c ****  * DWT_INT_ARFE         0x20000000          // frame rejected (due to frame filtering configuration
3104:Core/Src/deca_device.c ****  *
3105:Core/Src/deca_device.c ****  *
3106:Core/Src/deca_device.c ****  * input parameters:
3107:Core/Src/deca_device.c ****  * @param bitmask - sets the events which will generate interrupt
3108:Core/Src/deca_device.c ****  * @param operation - if set to 1 the interrupts (only the ones selected in the bitmask) are enable
3109:Core/Src/deca_device.c ****  *                  - if set to 2 the interrupts in the bitmask are forced to selected state - i.e.
3110:Core/Src/deca_device.c ****  *
3111:Core/Src/deca_device.c ****  * output parameters
3112:Core/Src/deca_device.c ****  *
3113:Core/Src/deca_device.c ****  * no return value
3114:Core/Src/deca_device.c ****  */
3115:Core/Src/deca_device.c **** void dwt_setinterrupt(uint32 bitmask, uint8 operation)
3116:Core/Src/deca_device.c **** {
 5326              		.loc 1 3116 1 is_stmt 1 view -0
 5327              		.cfi_startproc
 5328              		@ args = 0, pretend = 0, frame = 0
 5329              		@ frame_needed = 0, uses_anonymous_args = 0
 5330              		.loc 1 3116 1 is_stmt 0 view .LVU1276
 5331 0000 70B5     		push	{r4, r5, r6, lr}
 5332              	.LCFI109:
 5333              		.cfi_def_cfa_offset 16
 5334              		.cfi_offset 4, -16
 5335              		.cfi_offset 5, -12
 5336              		.cfi_offset 6, -8
 5337              		.cfi_offset 14, -4
 5338 0002 0646     		mov	r6, r0
 5339 0004 0C46     		mov	r4, r1
3117:Core/Src/deca_device.c ****     decaIrqStatus_t stat ;
 5340              		.loc 1 3117 5 is_stmt 1 view .LVU1277
3118:Core/Src/deca_device.c ****     uint32 mask ;
 5341              		.loc 1 3118 5 view .LVU1278
3119:Core/Src/deca_device.c **** 
3120:Core/Src/deca_device.c ****     // Need to beware of interrupts occurring in the middle of following read modify write cycle
3121:Core/Src/deca_device.c ****     stat = decamutexon() ;
 5342              		.loc 1 3121 5 view .LVU1279
 5343              		.loc 1 3121 12 is_stmt 0 view .LVU1280
 5344 0006 FFF7FEFF 		bl	decamutexon
 5345              	.LVL523:
 5346              		.loc 1 3121 12 view .LVU1281
 5347 000a 0546     		mov	r5, r0
 5348              	.LVL524:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 159


3122:Core/Src/deca_device.c **** 
3123:Core/Src/deca_device.c ****     if(operation == 2)
 5349              		.loc 1 3123 5 is_stmt 1 view .LVU1282
 5350              		.loc 1 3123 7 is_stmt 0 view .LVU1283
 5351 000c 022C     		cmp	r4, #2
 5352 000e 0FD0     		beq	.L322
3124:Core/Src/deca_device.c ****     {
3125:Core/Src/deca_device.c ****         dwt_write32bitreg(SYS_MASK_ID, bitmask) ; // New value
3126:Core/Src/deca_device.c ****     }
3127:Core/Src/deca_device.c ****     else
3128:Core/Src/deca_device.c ****     {
3129:Core/Src/deca_device.c ****         mask = dwt_read32bitreg(SYS_MASK_ID) ; // Read register
 5353              		.loc 1 3129 9 is_stmt 1 view .LVU1284
 5354              		.loc 1 3129 16 is_stmt 0 view .LVU1285
 5355 0010 0021     		movs	r1, #0
 5356 0012 0E20     		movs	r0, #14
 5357              	.LVL525:
 5358              		.loc 1 3129 16 view .LVU1286
 5359 0014 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 5360              	.LVL526:
3130:Core/Src/deca_device.c ****         if(operation == 1)
 5361              		.loc 1 3130 9 is_stmt 1 view .LVU1287
 5362              		.loc 1 3130 11 is_stmt 0 view .LVU1288
 5363 0018 012C     		cmp	r4, #1
 5364 001a 0FD0     		beq	.L323
3131:Core/Src/deca_device.c ****         {
3132:Core/Src/deca_device.c ****             mask |= bitmask ;
3133:Core/Src/deca_device.c ****         }
3134:Core/Src/deca_device.c ****         else
3135:Core/Src/deca_device.c ****         {
3136:Core/Src/deca_device.c ****             mask &= ~bitmask ; // Clear the bit
 5365              		.loc 1 3136 13 is_stmt 1 view .LVU1289
 5366              		.loc 1 3136 18 is_stmt 0 view .LVU1290
 5367 001c 20EA0602 		bic	r2, r0, r6
 5368              	.LVL527:
 5369              	.L320:
3137:Core/Src/deca_device.c ****         }
3138:Core/Src/deca_device.c ****         dwt_write32bitreg(SYS_MASK_ID, mask) ; // New value
 5370              		.loc 1 3138 9 is_stmt 1 view .LVU1291
 5371 0020 0021     		movs	r1, #0
 5372 0022 0E20     		movs	r0, #14
 5373 0024 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 5374              	.LVL528:
 5375              	.L318:
3139:Core/Src/deca_device.c ****     }
3140:Core/Src/deca_device.c **** 
3141:Core/Src/deca_device.c ****     decamutexoff(stat) ;
 5376              		.loc 1 3141 5 view .LVU1292
 5377 0028 2846     		mov	r0, r5
 5378 002a FFF7FEFF 		bl	decamutexoff
 5379              	.LVL529:
3142:Core/Src/deca_device.c **** }
 5380              		.loc 1 3142 1 is_stmt 0 view .LVU1293
 5381 002e 70BD     		pop	{r4, r5, r6, pc}
 5382              	.LVL530:
 5383              	.L322:
3125:Core/Src/deca_device.c ****     }
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 160


 5384              		.loc 1 3125 9 is_stmt 1 view .LVU1294
 5385 0030 3246     		mov	r2, r6
 5386 0032 0021     		movs	r1, #0
 5387 0034 0E20     		movs	r0, #14
 5388              	.LVL531:
3125:Core/Src/deca_device.c ****     }
 5389              		.loc 1 3125 9 is_stmt 0 view .LVU1295
 5390 0036 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 5391              	.LVL532:
 5392 003a F5E7     		b	.L318
 5393              	.LVL533:
 5394              	.L323:
3132:Core/Src/deca_device.c ****         }
 5395              		.loc 1 3132 13 is_stmt 1 view .LVU1296
3132:Core/Src/deca_device.c ****         }
 5396              		.loc 1 3132 18 is_stmt 0 view .LVU1297
 5397 003c 40EA0602 		orr	r2, r0, r6
 5398              	.LVL534:
3132:Core/Src/deca_device.c ****         }
 5399              		.loc 1 3132 18 view .LVU1298
 5400 0040 EEE7     		b	.L320
 5401              		.cfi_endproc
 5402              	.LFE84:
 5404              		.section	.text.dwt_configeventcounters,"ax",%progbits
 5405              		.align	1
 5406              		.global	dwt_configeventcounters
 5407              		.syntax unified
 5408              		.thumb
 5409              		.thumb_func
 5411              	dwt_configeventcounters:
 5412              	.LVL535:
 5413              	.LFB85:
3143:Core/Src/deca_device.c **** 
3144:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3145:Core/Src/deca_device.c ****  * @fn dwt_configeventcounters()
3146:Core/Src/deca_device.c ****  *
3147:Core/Src/deca_device.c ****  * @brief This is used to enable/disable the event counter in the IC
3148:Core/Src/deca_device.c ****  *
3149:Core/Src/deca_device.c ****  * input parameters
3150:Core/Src/deca_device.c ****  * @param - enable - 1 enables (and reset), 0 disables the event counters
3151:Core/Src/deca_device.c ****  * output parameters
3152:Core/Src/deca_device.c ****  *
3153:Core/Src/deca_device.c ****  * no return value
3154:Core/Src/deca_device.c ****  */
3155:Core/Src/deca_device.c **** void dwt_configeventcounters(int enable)
3156:Core/Src/deca_device.c **** {
 5414              		.loc 1 3156 1 is_stmt 1 view -0
 5415              		.cfi_startproc
 5416              		@ args = 0, pretend = 0, frame = 0
 5417              		@ frame_needed = 0, uses_anonymous_args = 0
 5418              		.loc 1 3156 1 is_stmt 0 view .LVU1300
 5419 0000 10B5     		push	{r4, lr}
 5420              	.LCFI110:
 5421              		.cfi_def_cfa_offset 8
 5422              		.cfi_offset 4, -8
 5423              		.cfi_offset 14, -4
 5424 0002 0446     		mov	r4, r0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 161


3157:Core/Src/deca_device.c ****     // Need to clear and disable, can't just clear
3158:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(DIG_DIAG_ID, EVC_CTRL_OFFSET, (uint8)(EVC_CLR));
 5425              		.loc 1 3158 5 is_stmt 1 view .LVU1301
 5426 0004 0222     		movs	r2, #2
 5427 0006 0021     		movs	r1, #0
 5428 0008 2F20     		movs	r0, #47
 5429              	.LVL536:
 5430              		.loc 1 3158 5 is_stmt 0 view .LVU1302
 5431 000a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 5432              	.LVL537:
3159:Core/Src/deca_device.c **** 
3160:Core/Src/deca_device.c ****     if(enable)
 5433              		.loc 1 3160 5 is_stmt 1 view .LVU1303
 5434              		.loc 1 3160 7 is_stmt 0 view .LVU1304
 5435 000e 04B9     		cbnz	r4, .L327
 5436              	.L324:
3161:Core/Src/deca_device.c ****     {
3162:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(DIG_DIAG_ID, EVC_CTRL_OFFSET, (uint8)(EVC_EN)); // Enable
3163:Core/Src/deca_device.c ****     }
3164:Core/Src/deca_device.c **** }
 5437              		.loc 1 3164 1 view .LVU1305
 5438 0010 10BD     		pop	{r4, pc}
 5439              	.LVL538:
 5440              	.L327:
3162:Core/Src/deca_device.c ****     }
 5441              		.loc 1 3162 9 is_stmt 1 view .LVU1306
 5442 0012 0122     		movs	r2, #1
 5443 0014 0021     		movs	r1, #0
 5444 0016 2F20     		movs	r0, #47
 5445 0018 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 5446              	.LVL539:
 5447              		.loc 1 3164 1 is_stmt 0 view .LVU1307
 5448 001c F8E7     		b	.L324
 5449              		.cfi_endproc
 5450              	.LFE85:
 5452              		.section	.text.dwt_readeventcounters,"ax",%progbits
 5453              		.align	1
 5454              		.global	dwt_readeventcounters
 5455              		.syntax unified
 5456              		.thumb
 5457              		.thumb_func
 5459              	dwt_readeventcounters:
 5460              	.LVL540:
 5461              	.LFB86:
3165:Core/Src/deca_device.c **** 
3166:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3167:Core/Src/deca_device.c ****  * @fn dwt_readeventcounters()
3168:Core/Src/deca_device.c ****  *
3169:Core/Src/deca_device.c ****  * @brief This is used to read the event counters in the IC
3170:Core/Src/deca_device.c ****  *
3171:Core/Src/deca_device.c ****  * input parameters
3172:Core/Src/deca_device.c ****  * @param counters - pointer to the dwt_deviceentcnts_t structure which will hold the read data
3173:Core/Src/deca_device.c ****  *
3174:Core/Src/deca_device.c ****  * output parameters
3175:Core/Src/deca_device.c ****  *
3176:Core/Src/deca_device.c ****  * no return value
3177:Core/Src/deca_device.c ****  */
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 162


3178:Core/Src/deca_device.c **** void dwt_readeventcounters(dwt_deviceentcnts_t *counters)
3179:Core/Src/deca_device.c **** {
 5462              		.loc 1 3179 1 is_stmt 1 view -0
 5463              		.cfi_startproc
 5464              		@ args = 0, pretend = 0, frame = 0
 5465              		@ frame_needed = 0, uses_anonymous_args = 0
 5466              		.loc 1 3179 1 is_stmt 0 view .LVU1309
 5467 0000 10B5     		push	{r4, lr}
 5468              	.LCFI111:
 5469              		.cfi_def_cfa_offset 8
 5470              		.cfi_offset 4, -8
 5471              		.cfi_offset 14, -4
 5472 0002 0446     		mov	r4, r0
3180:Core/Src/deca_device.c ****     uint32 temp;
 5473              		.loc 1 3180 5 is_stmt 1 view .LVU1310
3181:Core/Src/deca_device.c **** 
3182:Core/Src/deca_device.c ****     temp= dwt_read32bitoffsetreg(DIG_DIAG_ID, EVC_PHE_OFFSET); // Read sync loss (31-16), PHE (15-0
 5474              		.loc 1 3182 5 view .LVU1311
 5475              		.loc 1 3182 11 is_stmt 0 view .LVU1312
 5476 0004 0421     		movs	r1, #4
 5477 0006 2F20     		movs	r0, #47
 5478              	.LVL541:
 5479              		.loc 1 3182 11 view .LVU1313
 5480 0008 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 5481              	.LVL542:
3183:Core/Src/deca_device.c ****     counters->PHE = temp & 0xFFF;
 5482              		.loc 1 3183 5 is_stmt 1 view .LVU1314
 5483              		.loc 1 3183 26 is_stmt 0 view .LVU1315
 5484 000c C0F30B03 		ubfx	r3, r0, #0, #12
 5485              		.loc 1 3183 19 view .LVU1316
 5486 0010 2380     		strh	r3, [r4]	@ movhi
3184:Core/Src/deca_device.c ****     counters->RSL = (temp >> 16) & 0xFFF;
 5487              		.loc 1 3184 5 is_stmt 1 view .LVU1317
 5488              		.loc 1 3184 34 is_stmt 0 view .LVU1318
 5489 0012 C0F30B40 		ubfx	r0, r0, #16, #12
 5490              	.LVL543:
 5491              		.loc 1 3184 19 view .LVU1319
 5492 0016 6080     		strh	r0, [r4, #2]	@ movhi
3185:Core/Src/deca_device.c **** 
3186:Core/Src/deca_device.c ****     temp = dwt_read32bitoffsetreg(DIG_DIAG_ID, EVC_FCG_OFFSET); // Read CRC bad (31-16), CRC good (
 5493              		.loc 1 3186 5 is_stmt 1 view .LVU1320
 5494              		.loc 1 3186 12 is_stmt 0 view .LVU1321
 5495 0018 0821     		movs	r1, #8
 5496 001a 2F20     		movs	r0, #47
 5497 001c FFF7FEFF 		bl	dwt_read32bitoffsetreg
 5498              	.LVL544:
3187:Core/Src/deca_device.c ****     counters->CRCG = temp & 0xFFF;
 5499              		.loc 1 3187 5 is_stmt 1 view .LVU1322
 5500              		.loc 1 3187 27 is_stmt 0 view .LVU1323
 5501 0020 C0F30B03 		ubfx	r3, r0, #0, #12
 5502              		.loc 1 3187 20 view .LVU1324
 5503 0024 A380     		strh	r3, [r4, #4]	@ movhi
3188:Core/Src/deca_device.c ****     counters->CRCB = (temp >> 16) & 0xFFF;
 5504              		.loc 1 3188 5 is_stmt 1 view .LVU1325
 5505              		.loc 1 3188 35 is_stmt 0 view .LVU1326
 5506 0026 C0F30B40 		ubfx	r0, r0, #16, #12
 5507              	.LVL545:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 163


 5508              		.loc 1 3188 20 view .LVU1327
 5509 002a E080     		strh	r0, [r4, #6]	@ movhi
3189:Core/Src/deca_device.c **** 
3190:Core/Src/deca_device.c ****     temp = dwt_read32bitoffsetreg(DIG_DIAG_ID, EVC_FFR_OFFSET); // Overruns (31-16), address errors
 5510              		.loc 1 3190 5 is_stmt 1 view .LVU1328
 5511              		.loc 1 3190 12 is_stmt 0 view .LVU1329
 5512 002c 0C21     		movs	r1, #12
 5513 002e 2F20     		movs	r0, #47
 5514 0030 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 5515              	.LVL546:
3191:Core/Src/deca_device.c ****     counters->ARFE = temp & 0xFFF;
 5516              		.loc 1 3191 5 is_stmt 1 view .LVU1330
 5517              		.loc 1 3191 27 is_stmt 0 view .LVU1331
 5518 0034 C0F30B03 		ubfx	r3, r0, #0, #12
 5519              		.loc 1 3191 20 view .LVU1332
 5520 0038 2381     		strh	r3, [r4, #8]	@ movhi
3192:Core/Src/deca_device.c ****     counters->OVER = (temp >> 16) & 0xFFF;
 5521              		.loc 1 3192 5 is_stmt 1 view .LVU1333
 5522              		.loc 1 3192 35 is_stmt 0 view .LVU1334
 5523 003a C0F30B40 		ubfx	r0, r0, #16, #12
 5524              	.LVL547:
 5525              		.loc 1 3192 20 view .LVU1335
 5526 003e 6081     		strh	r0, [r4, #10]	@ movhi
3193:Core/Src/deca_device.c **** 
3194:Core/Src/deca_device.c ****     temp = dwt_read32bitoffsetreg(DIG_DIAG_ID, EVC_STO_OFFSET); // Read PTO (31-16), SFDTO (15-0)
 5527              		.loc 1 3194 5 is_stmt 1 view .LVU1336
 5528              		.loc 1 3194 12 is_stmt 0 view .LVU1337
 5529 0040 1021     		movs	r1, #16
 5530 0042 2F20     		movs	r0, #47
 5531 0044 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 5532              	.LVL548:
3195:Core/Src/deca_device.c ****     counters->PTO = (temp >> 16) & 0xFFF;
 5533              		.loc 1 3195 5 is_stmt 1 view .LVU1338
 5534              		.loc 1 3195 34 is_stmt 0 view .LVU1339
 5535 0048 C0F30B43 		ubfx	r3, r0, #16, #12
 5536              		.loc 1 3195 19 view .LVU1340
 5537 004c E381     		strh	r3, [r4, #14]	@ movhi
3196:Core/Src/deca_device.c ****     counters->SFDTO = temp & 0xFFF;
 5538              		.loc 1 3196 5 is_stmt 1 view .LVU1341
 5539              		.loc 1 3196 28 is_stmt 0 view .LVU1342
 5540 004e C0F30B00 		ubfx	r0, r0, #0, #12
 5541              	.LVL549:
 5542              		.loc 1 3196 21 view .LVU1343
 5543 0052 A081     		strh	r0, [r4, #12]	@ movhi
3197:Core/Src/deca_device.c **** 
3198:Core/Src/deca_device.c ****     temp = dwt_read32bitoffsetreg(DIG_DIAG_ID, EVC_FWTO_OFFSET); // Read RX TO (31-16), TXFRAME (15
 5544              		.loc 1 3198 5 is_stmt 1 view .LVU1344
 5545              		.loc 1 3198 12 is_stmt 0 view .LVU1345
 5546 0054 1421     		movs	r1, #20
 5547 0056 2F20     		movs	r0, #47
 5548 0058 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 5549              	.LVL550:
3199:Core/Src/deca_device.c ****     counters->TXF = (temp >> 16) & 0xFFF;
 5550              		.loc 1 3199 5 is_stmt 1 view .LVU1346
 5551              		.loc 1 3199 34 is_stmt 0 view .LVU1347
 5552 005c C0F30B43 		ubfx	r3, r0, #16, #12
 5553              		.loc 1 3199 19 view .LVU1348
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 164


 5554 0060 6382     		strh	r3, [r4, #18]	@ movhi
3200:Core/Src/deca_device.c ****     counters->RTO = temp & 0xFFF;
 5555              		.loc 1 3200 5 is_stmt 1 view .LVU1349
 5556              		.loc 1 3200 26 is_stmt 0 view .LVU1350
 5557 0062 C0F30B00 		ubfx	r0, r0, #0, #12
 5558              	.LVL551:
 5559              		.loc 1 3200 19 view .LVU1351
 5560 0066 2082     		strh	r0, [r4, #16]	@ movhi
3201:Core/Src/deca_device.c **** 
3202:Core/Src/deca_device.c ****     temp = dwt_read32bitoffsetreg(DIG_DIAG_ID, EVC_HPW_OFFSET); // Read half period warning events
 5561              		.loc 1 3202 5 is_stmt 1 view .LVU1352
 5562              		.loc 1 3202 12 is_stmt 0 view .LVU1353
 5563 0068 1821     		movs	r1, #24
 5564 006a 2F20     		movs	r0, #47
 5565 006c FFF7FEFF 		bl	dwt_read32bitoffsetreg
 5566              	.LVL552:
3203:Core/Src/deca_device.c ****     counters->HPW = temp & 0xFFF;
 5567              		.loc 1 3203 5 is_stmt 1 view .LVU1354
 5568              		.loc 1 3203 26 is_stmt 0 view .LVU1355
 5569 0070 C0F30B03 		ubfx	r3, r0, #0, #12
 5570              		.loc 1 3203 19 view .LVU1356
 5571 0074 A382     		strh	r3, [r4, #20]	@ movhi
3204:Core/Src/deca_device.c ****     counters->TXW = (temp >> 16) & 0xFFF;                       // Power-up warning events
 5572              		.loc 1 3204 5 is_stmt 1 view .LVU1357
 5573              		.loc 1 3204 34 is_stmt 0 view .LVU1358
 5574 0076 C0F30B40 		ubfx	r0, r0, #16, #12
 5575              	.LVL553:
 5576              		.loc 1 3204 19 view .LVU1359
 5577 007a E082     		strh	r0, [r4, #22]	@ movhi
3205:Core/Src/deca_device.c **** 
3206:Core/Src/deca_device.c **** }
 5578              		.loc 1 3206 1 view .LVU1360
 5579 007c 10BD     		pop	{r4, pc}
 5580              		.loc 1 3206 1 view .LVU1361
 5581              		.cfi_endproc
 5582              	.LFE86:
 5584              		.section	.text.dwt_rxreset,"ax",%progbits
 5585              		.align	1
 5586              		.global	dwt_rxreset
 5587              		.syntax unified
 5588              		.thumb
 5589              		.thumb_func
 5591              	dwt_rxreset:
 5592              	.LFB87:
3207:Core/Src/deca_device.c **** 
3208:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3209:Core/Src/deca_device.c ****  * @fn dwt_rxreset()
3210:Core/Src/deca_device.c ****  *
3211:Core/Src/deca_device.c ****  * @brief this function resets the receiver of the DW1000
3212:Core/Src/deca_device.c ****  *
3213:Core/Src/deca_device.c ****  * input parameters:
3214:Core/Src/deca_device.c ****  *
3215:Core/Src/deca_device.c ****  * output parameters
3216:Core/Src/deca_device.c ****  *
3217:Core/Src/deca_device.c ****  * no return value
3218:Core/Src/deca_device.c ****  */
3219:Core/Src/deca_device.c **** void dwt_rxreset(void)
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 165


3220:Core/Src/deca_device.c **** {
 5593              		.loc 1 3220 1 is_stmt 1 view -0
 5594              		.cfi_startproc
 5595              		@ args = 0, pretend = 0, frame = 0
 5596              		@ frame_needed = 0, uses_anonymous_args = 0
 5597 0000 08B5     		push	{r3, lr}
 5598              	.LCFI112:
 5599              		.cfi_def_cfa_offset 8
 5600              		.cfi_offset 3, -8
 5601              		.cfi_offset 14, -4
3221:Core/Src/deca_device.c ****     // Set RX reset
3222:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_SOFTRESET_OFFSET, PMSC_CTRL0_RESET_RX);
 5602              		.loc 1 3222 5 view .LVU1363
 5603 0002 E022     		movs	r2, #224
 5604 0004 0321     		movs	r1, #3
 5605 0006 3620     		movs	r0, #54
 5606 0008 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 5607              	.LVL554:
3223:Core/Src/deca_device.c **** 
3224:Core/Src/deca_device.c ****     // Clear RX reset
3225:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_SOFTRESET_OFFSET, PMSC_CTRL0_RESET_CLEAR);
 5608              		.loc 1 3225 5 view .LVU1364
 5609 000c F022     		movs	r2, #240
 5610 000e 0321     		movs	r1, #3
 5611 0010 3620     		movs	r0, #54
 5612 0012 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 5613              	.LVL555:
3226:Core/Src/deca_device.c **** }
 5614              		.loc 1 3226 1 is_stmt 0 view .LVU1365
 5615 0016 08BD     		pop	{r3, pc}
 5616              		.cfi_endproc
 5617              	.LFE87:
 5619              		.section	.text.dwt_isr,"ax",%progbits
 5620              		.align	1
 5621              		.global	dwt_isr
 5622              		.syntax unified
 5623              		.thumb
 5624              		.thumb_func
 5626              	dwt_isr:
 5627              	.LFB69:
2380:Core/Src/deca_device.c ****     uint32 status = pdw1000local->cbData.status = dwt_read32bitreg(SYS_STATUS_ID); // Read status r
 5628              		.loc 1 2380 1 is_stmt 1 view -0
 5629              		.cfi_startproc
 5630              		@ args = 0, pretend = 0, frame = 0
 5631              		@ frame_needed = 0, uses_anonymous_args = 0
 5632 0000 38B5     		push	{r3, r4, r5, lr}
 5633              	.LCFI113:
 5634              		.cfi_def_cfa_offset 16
 5635              		.cfi_offset 3, -16
 5636              		.cfi_offset 4, -12
 5637              		.cfi_offset 5, -8
 5638              		.cfi_offset 14, -4
2381:Core/Src/deca_device.c **** 
 5639              		.loc 1 2381 5 view .LVU1367
2381:Core/Src/deca_device.c **** 
 5640              		.loc 1 2381 33 is_stmt 0 view .LVU1368
 5641 0002 534B     		ldr	r3, .L350
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 166


 5642 0004 1D68     		ldr	r5, [r3]
2381:Core/Src/deca_device.c **** 
 5643              		.loc 1 2381 51 view .LVU1369
 5644 0006 0021     		movs	r1, #0
 5645 0008 0F20     		movs	r0, #15
 5646 000a FFF7FEFF 		bl	dwt_read32bitoffsetreg
 5647              	.LVL556:
 5648 000e 0446     		mov	r4, r0
2381:Core/Src/deca_device.c **** 
 5649              		.loc 1 2381 49 view .LVU1370
 5650 0010 E861     		str	r0, [r5, #28]
 5651              	.LVL557:
2384:Core/Src/deca_device.c ****     {
 5652              		.loc 1 2384 5 is_stmt 1 view .LVU1371
2384:Core/Src/deca_device.c ****     {
 5653              		.loc 1 2384 7 is_stmt 0 view .LVU1372
 5654 0012 10F4804F 		tst	r0, #16384
 5655 0016 09D1     		bne	.L343
 5656              	.LVL558:
 5657              	.L333:
2438:Core/Src/deca_device.c ****     {
 5658              		.loc 1 2438 5 is_stmt 1 view .LVU1373
2438:Core/Src/deca_device.c ****     {
 5659              		.loc 1 2438 7 is_stmt 0 view .LVU1374
 5660 0018 14F0800F 		tst	r4, #128
 5661 001c 55D1     		bne	.L344
 5662              	.L338:
2461:Core/Src/deca_device.c ****     {
 5663              		.loc 1 2461 5 is_stmt 1 view .LVU1375
2461:Core/Src/deca_device.c ****     {
 5664              		.loc 1 2461 7 is_stmt 0 view .LVU1376
 5665 001e 14F4081F 		tst	r4, #2228224
 5666 0022 6BD1     		bne	.L345
 5667              	.L340:
2481:Core/Src/deca_device.c ****     {
 5668              		.loc 1 2481 5 is_stmt 1 view .LVU1377
2481:Core/Src/deca_device.c ****     {
 5669              		.loc 1 2481 7 is_stmt 0 view .LVU1378
 5670 0024 4B4B     		ldr	r3, .L350+4
 5671 0026 1C42     		tst	r4, r3
 5672 0028 7DD1     		bne	.L346
 5673              	.LVL559:
 5674              	.L332:
2499:Core/Src/deca_device.c **** 
 5675              		.loc 1 2499 1 view .LVU1379
 5676 002a 38BD     		pop	{r3, r4, r5, pc}
 5677              	.LVL560:
 5678              	.L343:
 5679              	.LBB3:
2386:Core/Src/deca_device.c ****         uint16 len;
 5680              		.loc 1 2386 9 is_stmt 1 view .LVU1380
2387:Core/Src/deca_device.c **** 
 5681              		.loc 1 2387 9 view .LVU1381
2389:Core/Src/deca_device.c **** 
 5682              		.loc 1 2389 9 view .LVU1382
 5683 002c 4FF4DE42 		mov	r2, #28416
 5684 0030 0021     		movs	r1, #0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 167


 5685 0032 0F20     		movs	r0, #15
 5686              	.LVL561:
2389:Core/Src/deca_device.c **** 
 5687              		.loc 1 2389 9 is_stmt 0 view .LVU1383
 5688 0034 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 5689              	.LVL562:
2391:Core/Src/deca_device.c **** 
 5690              		.loc 1 2391 9 is_stmt 1 view .LVU1384
2391:Core/Src/deca_device.c **** 
 5691              		.loc 1 2391 21 is_stmt 0 view .LVU1385
 5692 0038 454D     		ldr	r5, .L350
 5693 003a 2B68     		ldr	r3, [r5]
2391:Core/Src/deca_device.c **** 
 5694              		.loc 1 2391 39 view .LVU1386
 5695 003c 0021     		movs	r1, #0
 5696 003e 83F82410 		strb	r1, [r3, #36]
2394:Core/Src/deca_device.c **** 
 5697              		.loc 1 2394 9 is_stmt 1 view .LVU1387
2394:Core/Src/deca_device.c **** 
 5698              		.loc 1 2394 19 is_stmt 0 view .LVU1388
 5699 0042 1020     		movs	r0, #16
 5700 0044 FFF7FEFF 		bl	dwt_read16bitoffsetreg
 5701              	.LVL563:
2397:Core/Src/deca_device.c ****         if(pdw1000local->longFrames == 0)
 5702              		.loc 1 2397 9 is_stmt 1 view .LVU1389
2397:Core/Src/deca_device.c ****         if(pdw1000local->longFrames == 0)
 5703              		.loc 1 2397 13 is_stmt 0 view .LVU1390
 5704 0048 C0F30902 		ubfx	r2, r0, #0, #10
 5705              	.LVL564:
2398:Core/Src/deca_device.c ****         {
 5706              		.loc 1 2398 9 is_stmt 1 view .LVU1391
2398:Core/Src/deca_device.c ****         {
 5707              		.loc 1 2398 24 is_stmt 0 view .LVU1392
 5708 004c 2B68     		ldr	r3, [r5]
 5709 004e 997A     		ldrb	r1, [r3, #10]	@ zero_extendqisi2
2398:Core/Src/deca_device.c ****         {
 5710              		.loc 1 2398 11 view .LVU1393
 5711 0050 09B9     		cbnz	r1, .L334
2400:Core/Src/deca_device.c ****         }
 5712              		.loc 1 2400 13 is_stmt 1 view .LVU1394
2400:Core/Src/deca_device.c ****         }
 5713              		.loc 1 2400 17 is_stmt 0 view .LVU1395
 5714 0052 00F07F02 		and	r2, r0, #127
 5715              	.LVL565:
 5716              	.L334:
2402:Core/Src/deca_device.c **** 
 5717              		.loc 1 2402 9 is_stmt 1 view .LVU1396
2402:Core/Src/deca_device.c **** 
 5718              		.loc 1 2402 41 is_stmt 0 view .LVU1397
 5719 0056 1A84     		strh	r2, [r3, #32]	@ movhi
2405:Core/Src/deca_device.c ****         {
 5720              		.loc 1 2405 9 is_stmt 1 view .LVU1398
2405:Core/Src/deca_device.c ****         {
 5721              		.loc 1 2405 11 is_stmt 0 view .LVU1399
 5722 0058 10F4004F 		tst	r0, #32768
 5723 005c 20D1     		bne	.L347
 5724              	.LVL566:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 168


 5725              	.L335:
2411:Core/Src/deca_device.c **** 
 5726              		.loc 1 2411 9 is_stmt 1 view .LVU1400
 5727 005e 2233     		adds	r3, r3, #34
 5728              	.LVL567:
2411:Core/Src/deca_device.c **** 
 5729              		.loc 1 2411 9 is_stmt 0 view .LVU1401
 5730 0060 0222     		movs	r2, #2
 5731 0062 0021     		movs	r1, #0
 5732 0064 1120     		movs	r0, #17
 5733              	.LVL568:
2411:Core/Src/deca_device.c **** 
 5734              		.loc 1 2411 9 view .LVU1402
 5735 0066 FFF7FEFF 		bl	dwt_readfromdevice
 5736              	.LVL569:
2417:Core/Src/deca_device.c ****         {
 5737              		.loc 1 2417 9 is_stmt 1 view .LVU1403
2417:Core/Src/deca_device.c ****         {
 5738              		.loc 1 2417 11 is_stmt 0 view .LVU1404
 5739 006a 14F0080F 		tst	r4, #8
 5740 006e 06D0     		beq	.L336
2417:Core/Src/deca_device.c ****         {
 5741              		.loc 1 2417 55 discriminator 1 view .LVU1405
 5742 0070 374B     		ldr	r3, .L350
 5743 0072 1B68     		ldr	r3, [r3]
2417:Core/Src/deca_device.c ****         {
 5744              		.loc 1 2417 69 discriminator 1 view .LVU1406
 5745 0074 93F82230 		ldrb	r3, [r3, #34]	@ zero_extendqisi2
2417:Core/Src/deca_device.c ****         {
 5746              		.loc 1 2417 38 discriminator 1 view .LVU1407
 5747 0078 13F0200F 		tst	r3, #32
 5748 007c 17D0     		beq	.L348
 5749              	.L336:
2425:Core/Src/deca_device.c ****         {
 5750              		.loc 1 2425 9 is_stmt 1 view .LVU1408
2425:Core/Src/deca_device.c ****         {
 5751              		.loc 1 2425 24 is_stmt 0 view .LVU1409
 5752 007e 344B     		ldr	r3, .L350
 5753 0080 1868     		ldr	r0, [r3]
 5754 0082 C36A     		ldr	r3, [r0, #44]
2425:Core/Src/deca_device.c ****         {
 5755              		.loc 1 2425 11 view .LVU1410
 5756 0084 0BB1     		cbz	r3, .L337
2427:Core/Src/deca_device.c ****         }
 5757              		.loc 1 2427 13 is_stmt 1 view .LVU1411
 5758 0086 1C30     		adds	r0, r0, #28
 5759 0088 9847     		blx	r3
 5760              	.LVL570:
 5761              	.L337:
2430:Core/Src/deca_device.c ****         {
 5762              		.loc 1 2430 9 view .LVU1412
2430:Core/Src/deca_device.c ****         {
 5763              		.loc 1 2430 25 is_stmt 0 view .LVU1413
 5764 008a 314B     		ldr	r3, .L350
 5765 008c 1B68     		ldr	r3, [r3]
 5766 008e 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
2430:Core/Src/deca_device.c ****         {
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 169


 5767              		.loc 1 2430 12 view .LVU1414
 5768 0090 002B     		cmp	r3, #0
 5769 0092 C1D0     		beq	.L333
2433:Core/Src/deca_device.c ****         }
 5770              		.loc 1 2433 13 is_stmt 1 view .LVU1415
 5771 0094 0122     		movs	r2, #1
 5772 0096 0321     		movs	r1, #3
 5773 0098 0D20     		movs	r0, #13
 5774 009a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 5775              	.LVL571:
 5776 009e BBE7     		b	.L333
 5777              	.LVL572:
 5778              	.L347:
2407:Core/Src/deca_device.c ****         }
 5779              		.loc 1 2407 13 view .LVU1416
2407:Core/Src/deca_device.c ****         }
 5780              		.loc 1 2407 43 is_stmt 0 view .LVU1417
 5781 00a0 93F82420 		ldrb	r2, [r3, #36]	@ zero_extendqisi2
 5782              	.LVL573:
2407:Core/Src/deca_device.c ****         }
 5783              		.loc 1 2407 43 view .LVU1418
 5784 00a4 42F00102 		orr	r2, r2, #1
 5785 00a8 83F82420 		strb	r2, [r3, #36]
 5786 00ac D7E7     		b	.L335
 5787              	.LVL574:
 5788              	.L348:
2419:Core/Src/deca_device.c ****             pdw1000local->cbData.status &= ~SYS_STATUS_AAT; // Clear AAT status bit in callback dat
 5789              		.loc 1 2419 13 is_stmt 1 view .LVU1419
 5790 00ae 0822     		movs	r2, #8
 5791 00b0 0021     		movs	r1, #0
 5792 00b2 0F20     		movs	r0, #15
 5793 00b4 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 5794              	.LVL575:
2420:Core/Src/deca_device.c ****             pdw1000local->wait4resp = 0;
 5795              		.loc 1 2420 13 view .LVU1420
2420:Core/Src/deca_device.c ****             pdw1000local->wait4resp = 0;
 5796              		.loc 1 2420 41 is_stmt 0 view .LVU1421
 5797 00b8 254B     		ldr	r3, .L350
 5798 00ba 1B68     		ldr	r3, [r3]
 5799 00bc DA69     		ldr	r2, [r3, #28]
 5800 00be 22F00802 		bic	r2, r2, #8
 5801 00c2 DA61     		str	r2, [r3, #28]
2421:Core/Src/deca_device.c ****         }
 5802              		.loc 1 2421 13 is_stmt 1 view .LVU1422
2421:Core/Src/deca_device.c ****         }
 5803              		.loc 1 2421 37 is_stmt 0 view .LVU1423
 5804 00c4 0022     		movs	r2, #0
 5805 00c6 5A75     		strb	r2, [r3, #21]
 5806 00c8 D9E7     		b	.L336
 5807              	.L344:
2421:Core/Src/deca_device.c ****         }
 5808              		.loc 1 2421 37 view .LVU1424
 5809              	.LBE3:
2440:Core/Src/deca_device.c **** 
 5810              		.loc 1 2440 9 is_stmt 1 view .LVU1425
 5811 00ca F822     		movs	r2, #248
 5812 00cc 0021     		movs	r1, #0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 170


 5813 00ce 0F20     		movs	r0, #15
 5814 00d0 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 5815              	.LVL576:
2447:Core/Src/deca_device.c ****         {
 5816              		.loc 1 2447 9 view .LVU1426
2447:Core/Src/deca_device.c ****         {
 5817              		.loc 1 2447 11 is_stmt 0 view .LVU1427
 5818 00d4 14F0080F 		tst	r4, #8
 5819 00d8 03D0     		beq	.L339
2447:Core/Src/deca_device.c ****         {
 5820              		.loc 1 2447 53 discriminator 1 view .LVU1428
 5821 00da 1D4B     		ldr	r3, .L350
 5822 00dc 1B68     		ldr	r3, [r3]
 5823 00de 5B7D     		ldrb	r3, [r3, #21]	@ zero_extendqisi2
2447:Core/Src/deca_device.c ****         {
 5824              		.loc 1 2447 38 discriminator 1 view .LVU1429
 5825 00e0 3BB9     		cbnz	r3, .L349
 5826              	.L339:
2454:Core/Src/deca_device.c ****         {
 5827              		.loc 1 2454 9 is_stmt 1 view .LVU1430
2454:Core/Src/deca_device.c ****         {
 5828              		.loc 1 2454 24 is_stmt 0 view .LVU1431
 5829 00e2 1B4B     		ldr	r3, .L350
 5830 00e4 1868     		ldr	r0, [r3]
 5831 00e6 836A     		ldr	r3, [r0, #40]
2454:Core/Src/deca_device.c ****         {
 5832              		.loc 1 2454 11 view .LVU1432
 5833 00e8 002B     		cmp	r3, #0
 5834 00ea 98D0     		beq	.L338
2456:Core/Src/deca_device.c ****         }
 5835              		.loc 1 2456 13 is_stmt 1 view .LVU1433
 5836 00ec 1C30     		adds	r0, r0, #28
 5837 00ee 9847     		blx	r3
 5838              	.LVL577:
 5839 00f0 95E7     		b	.L338
 5840              	.L349:
2449:Core/Src/deca_device.c ****             dwt_rxreset(); // Reset in case we were late and a frame was already being received
 5841              		.loc 1 2449 13 view .LVU1434
 5842 00f2 FFF7FEFF 		bl	dwt_forcetrxoff
 5843              	.LVL578:
2450:Core/Src/deca_device.c ****         }
 5844              		.loc 1 2450 13 view .LVU1435
 5845 00f6 FFF7FEFF 		bl	dwt_rxreset
 5846              	.LVL579:
 5847 00fa F2E7     		b	.L339
 5848              	.L345:
2463:Core/Src/deca_device.c **** 
 5849              		.loc 1 2463 9 view .LVU1436
 5850 00fc 4FF40032 		mov	r2, #131072
 5851 0100 0021     		movs	r1, #0
 5852 0102 0F20     		movs	r0, #15
 5853 0104 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 5854              	.LVL580:
2465:Core/Src/deca_device.c **** 
 5855              		.loc 1 2465 9 view .LVU1437
2465:Core/Src/deca_device.c **** 
 5856              		.loc 1 2465 21 is_stmt 0 view .LVU1438
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 171


 5857 0108 114D     		ldr	r5, .L350
 5858 010a 2B68     		ldr	r3, [r5]
2465:Core/Src/deca_device.c **** 
 5859              		.loc 1 2465 33 view .LVU1439
 5860 010c 0022     		movs	r2, #0
 5861 010e 5A75     		strb	r2, [r3, #21]
2470:Core/Src/deca_device.c ****         dwt_rxreset();
 5862              		.loc 1 2470 9 is_stmt 1 view .LVU1440
 5863 0110 FFF7FEFF 		bl	dwt_forcetrxoff
 5864              	.LVL581:
2471:Core/Src/deca_device.c **** 
 5865              		.loc 1 2471 9 view .LVU1441
 5866 0114 FFF7FEFF 		bl	dwt_rxreset
 5867              	.LVL582:
2474:Core/Src/deca_device.c ****         {
 5868              		.loc 1 2474 9 view .LVU1442
2474:Core/Src/deca_device.c ****         {
 5869              		.loc 1 2474 24 is_stmt 0 view .LVU1443
 5870 0118 2868     		ldr	r0, [r5]
 5871 011a 036B     		ldr	r3, [r0, #48]
2474:Core/Src/deca_device.c ****         {
 5872              		.loc 1 2474 11 view .LVU1444
 5873 011c 002B     		cmp	r3, #0
 5874 011e 81D0     		beq	.L340
2476:Core/Src/deca_device.c ****         }
 5875              		.loc 1 2476 13 is_stmt 1 view .LVU1445
 5876 0120 1C30     		adds	r0, r0, #28
 5877 0122 9847     		blx	r3
 5878              	.LVL583:
 5879 0124 7EE7     		b	.L340
 5880              	.L346:
2483:Core/Src/deca_device.c **** 
 5881              		.loc 1 2483 9 view .LVU1446
 5882 0126 1A46     		mov	r2, r3
 5883 0128 0021     		movs	r1, #0
 5884 012a 0F20     		movs	r0, #15
 5885 012c FFF7FEFF 		bl	dwt_write32bitoffsetreg
 5886              	.LVL584:
2485:Core/Src/deca_device.c **** 
 5887              		.loc 1 2485 9 view .LVU1447
2485:Core/Src/deca_device.c **** 
 5888              		.loc 1 2485 21 is_stmt 0 view .LVU1448
 5889 0130 074C     		ldr	r4, .L350
 5890              	.LVL585:
2485:Core/Src/deca_device.c **** 
 5891              		.loc 1 2485 21 view .LVU1449
 5892 0132 2368     		ldr	r3, [r4]
2485:Core/Src/deca_device.c **** 
 5893              		.loc 1 2485 33 view .LVU1450
 5894 0134 0022     		movs	r2, #0
 5895 0136 5A75     		strb	r2, [r3, #21]
2490:Core/Src/deca_device.c ****         dwt_rxreset();
 5896              		.loc 1 2490 9 is_stmt 1 view .LVU1451
 5897 0138 FFF7FEFF 		bl	dwt_forcetrxoff
 5898              	.LVL586:
2491:Core/Src/deca_device.c **** 
 5899              		.loc 1 2491 9 view .LVU1452
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 172


 5900 013c FFF7FEFF 		bl	dwt_rxreset
 5901              	.LVL587:
2494:Core/Src/deca_device.c ****         {
 5902              		.loc 1 2494 9 view .LVU1453
2494:Core/Src/deca_device.c ****         {
 5903              		.loc 1 2494 24 is_stmt 0 view .LVU1454
 5904 0140 2068     		ldr	r0, [r4]
 5905 0142 436B     		ldr	r3, [r0, #52]
2494:Core/Src/deca_device.c ****         {
 5906              		.loc 1 2494 11 view .LVU1455
 5907 0144 002B     		cmp	r3, #0
 5908 0146 3FF470AF 		beq	.L332
2496:Core/Src/deca_device.c ****         }
 5909              		.loc 1 2496 13 is_stmt 1 view .LVU1456
 5910 014a 1C30     		adds	r0, r0, #28
 5911 014c 9847     		blx	r3
 5912              	.LVL588:
2499:Core/Src/deca_device.c **** 
 5913              		.loc 1 2499 1 is_stmt 0 view .LVU1457
 5914 014e 6CE7     		b	.L332
 5915              	.L351:
 5916              		.align	2
 5917              	.L350:
 5918 0150 00000000 		.word	.LANCHOR1
 5919 0154 00900524 		.word	604344320
 5920              		.cfi_endproc
 5921              	.LFE69:
 5923              		.section	.text.dwt_softreset,"ax",%progbits
 5924              		.align	1
 5925              		.global	dwt_softreset
 5926              		.syntax unified
 5927              		.thumb
 5928              		.thumb_func
 5930              	dwt_softreset:
 5931              	.LFB88:
3227:Core/Src/deca_device.c **** 
3228:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3229:Core/Src/deca_device.c ****  * @fn dwt_softreset()
3230:Core/Src/deca_device.c ****  *
3231:Core/Src/deca_device.c ****  * @brief this function resets the DW1000
3232:Core/Src/deca_device.c ****  *
3233:Core/Src/deca_device.c ****  * input parameters:
3234:Core/Src/deca_device.c ****  *
3235:Core/Src/deca_device.c ****  * output parameters
3236:Core/Src/deca_device.c ****  *
3237:Core/Src/deca_device.c ****  * no return value
3238:Core/Src/deca_device.c ****  */
3239:Core/Src/deca_device.c **** void dwt_softreset(void)
3240:Core/Src/deca_device.c **** {
 5932              		.loc 1 3240 1 is_stmt 1 view -0
 5933              		.cfi_startproc
 5934              		@ args = 0, pretend = 0, frame = 0
 5935              		@ frame_needed = 0, uses_anonymous_args = 0
 5936 0000 08B5     		push	{r3, lr}
 5937              	.LCFI114:
 5938              		.cfi_def_cfa_offset 8
 5939              		.cfi_offset 3, -8
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 173


 5940              		.cfi_offset 14, -4
3241:Core/Src/deca_device.c ****     _dwt_disablesequencing();
 5941              		.loc 1 3241 5 view .LVU1459
 5942 0002 FFF7FEFF 		bl	_dwt_disablesequencing
 5943              	.LVL589:
3242:Core/Src/deca_device.c **** 
3243:Core/Src/deca_device.c ****     // Clear any AON auto download bits (as reset will trigger AON download)
3244:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(AON_ID, AON_WCFG_OFFSET, 0x00);
 5944              		.loc 1 3244 5 view .LVU1460
 5945 0006 0022     		movs	r2, #0
 5946 0008 1146     		mov	r1, r2
 5947 000a 2C20     		movs	r0, #44
 5948 000c FFF7FEFF 		bl	dwt_write16bitoffsetreg
 5949              	.LVL590:
3245:Core/Src/deca_device.c ****     // Clear the wake-up configuration
3246:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(AON_ID, AON_CFG0_OFFSET, 0x00);
 5950              		.loc 1 3246 5 view .LVU1461
 5951 0010 0022     		movs	r2, #0
 5952 0012 0621     		movs	r1, #6
 5953 0014 2C20     		movs	r0, #44
 5954 0016 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 5955              	.LVL591:
3247:Core/Src/deca_device.c ****     // Upload the new configuration
3248:Core/Src/deca_device.c ****     _dwt_aonarrayupload();
 5956              		.loc 1 3248 5 view .LVU1462
 5957 001a FFF7FEFF 		bl	_dwt_aonarrayupload
 5958              	.LVL592:
3249:Core/Src/deca_device.c **** 
3250:Core/Src/deca_device.c ****     // Reset HIF, TX, RX and PMSC (set the reset bits)
3251:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_SOFTRESET_OFFSET, PMSC_CTRL0_RESET_ALL);
 5959              		.loc 1 3251 5 view .LVU1463
 5960 001e 0022     		movs	r2, #0
 5961 0020 0321     		movs	r1, #3
 5962 0022 3620     		movs	r0, #54
 5963 0024 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 5964              	.LVL593:
3252:Core/Src/deca_device.c **** 
3253:Core/Src/deca_device.c ****     // DW1000 needs a 10us sleep to let clk PLL lock after reset - the PLL will automatically lock 
3254:Core/Src/deca_device.c ****     // Could also have polled the PLL lock flag, but then the SPI needs to be < 3MHz !! So a simple
3255:Core/Src/deca_device.c ****     deca_sleep(1);
 5965              		.loc 1 3255 5 view .LVU1464
 5966 0028 0120     		movs	r0, #1
 5967 002a FFF7FEFF 		bl	deca_sleep
 5968              	.LVL594:
3256:Core/Src/deca_device.c **** 
3257:Core/Src/deca_device.c ****     // Clear the reset bits
3258:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_SOFTRESET_OFFSET, PMSC_CTRL0_RESET_CLEAR);
 5969              		.loc 1 3258 5 view .LVU1465
 5970 002e F022     		movs	r2, #240
 5971 0030 0321     		movs	r1, #3
 5972 0032 3620     		movs	r0, #54
 5973 0034 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 5974              	.LVL595:
3259:Core/Src/deca_device.c **** 
3260:Core/Src/deca_device.c ****     pdw1000local->wait4resp = 0;
 5975              		.loc 1 3260 5 view .LVU1466
 5976              		.loc 1 3260 17 is_stmt 0 view .LVU1467
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 174


 5977 0038 024B     		ldr	r3, .L354
 5978 003a 1B68     		ldr	r3, [r3]
 5979              		.loc 1 3260 29 view .LVU1468
 5980 003c 0022     		movs	r2, #0
 5981 003e 5A75     		strb	r2, [r3, #21]
3261:Core/Src/deca_device.c **** }
 5982              		.loc 1 3261 1 view .LVU1469
 5983 0040 08BD     		pop	{r3, pc}
 5984              	.L355:
 5985 0042 00BF     		.align	2
 5986              	.L354:
 5987 0044 00000000 		.word	.LANCHOR1
 5988              		.cfi_endproc
 5989              	.LFE88:
 5991              		.section	.text.dwt_setxtaltrim,"ax",%progbits
 5992              		.align	1
 5993              		.global	dwt_setxtaltrim
 5994              		.syntax unified
 5995              		.thumb
 5996              		.thumb_func
 5998              	dwt_setxtaltrim:
 5999              	.LVL596:
 6000              	.LFB89:
3262:Core/Src/deca_device.c **** 
3263:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3264:Core/Src/deca_device.c ****  * @fn dwt_setxtaltrim()
3265:Core/Src/deca_device.c ****  *
3266:Core/Src/deca_device.c ****  * @brief This is used to adjust the crystal frequency
3267:Core/Src/deca_device.c ****  *
3268:Core/Src/deca_device.c ****  * input parameters:
3269:Core/Src/deca_device.c ****  * @param   value - crystal trim value (in range 0x0 to 0x1F) 31 steps (~1.5ppm per step)
3270:Core/Src/deca_device.c ****  *
3271:Core/Src/deca_device.c ****  * output parameters
3272:Core/Src/deca_device.c ****  *
3273:Core/Src/deca_device.c ****  * no return value
3274:Core/Src/deca_device.c ****  */
3275:Core/Src/deca_device.c **** void dwt_setxtaltrim(uint8 value)
3276:Core/Src/deca_device.c **** {
 6001              		.loc 1 3276 1 is_stmt 1 view -0
 6002              		.cfi_startproc
 6003              		@ args = 0, pretend = 0, frame = 0
 6004              		@ frame_needed = 0, uses_anonymous_args = 0
 6005              		.loc 1 3276 1 is_stmt 0 view .LVU1471
 6006 0000 08B5     		push	{r3, lr}
 6007              	.LCFI115:
 6008              		.cfi_def_cfa_offset 8
 6009              		.cfi_offset 3, -8
 6010              		.cfi_offset 14, -4
3277:Core/Src/deca_device.c ****     // The 3 MSb in this 8-bit register must be kept to 0b011 to avoid any malfunction.
3278:Core/Src/deca_device.c ****     uint8 reg_val = (3 << 5) | (value & FS_XTALT_MASK);
 6011              		.loc 1 3278 5 is_stmt 1 view .LVU1472
 6012              		.loc 1 3278 39 is_stmt 0 view .LVU1473
 6013 0002 00F01F02 		and	r2, r0, #31
 6014              	.LVL597:
3279:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(FS_CTRL_ID, FS_XTALT_OFFSET, reg_val);
 6015              		.loc 1 3279 5 is_stmt 1 view .LVU1474
 6016 0006 42F06002 		orr	r2, r2, #96
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 175


 6017              	.LVL598:
 6018              		.loc 1 3279 5 is_stmt 0 view .LVU1475
 6019 000a 0E21     		movs	r1, #14
 6020 000c 2B20     		movs	r0, #43
 6021              	.LVL599:
 6022              		.loc 1 3279 5 view .LVU1476
 6023 000e FFF7FEFF 		bl	dwt_write8bitoffsetreg
 6024              	.LVL600:
3280:Core/Src/deca_device.c **** }
 6025              		.loc 1 3280 1 view .LVU1477
 6026 0012 08BD     		pop	{r3, pc}
 6027              		.cfi_endproc
 6028              	.LFE89:
 6030              		.section	.text.dwt_initialise,"ax",%progbits
 6031              		.align	1
 6032              		.global	dwt_initialise
 6033              		.syntax unified
 6034              		.thumb
 6035              		.thumb_func
 6037              	dwt_initialise:
 6038              	.LVL601:
 6039              	.LFB2:
 174:Core/Src/deca_device.c ****     uint16 otp_xtaltrim_and_rev = 0;
 6040              		.loc 1 174 1 is_stmt 1 view -0
 6041              		.cfi_startproc
 6042              		@ args = 0, pretend = 0, frame = 0
 6043              		@ frame_needed = 0, uses_anonymous_args = 0
 174:Core/Src/deca_device.c ****     uint16 otp_xtaltrim_and_rev = 0;
 6044              		.loc 1 174 1 is_stmt 0 view .LVU1479
 6045 0000 70B5     		push	{r4, r5, r6, lr}
 6046              	.LCFI116:
 6047              		.cfi_def_cfa_offset 16
 6048              		.cfi_offset 4, -16
 6049              		.cfi_offset 5, -12
 6050              		.cfi_offset 6, -8
 6051              		.cfi_offset 14, -4
 6052 0002 0446     		mov	r4, r0
 175:Core/Src/deca_device.c ****     uint32 ldo_tune = 0;
 6053              		.loc 1 175 5 is_stmt 1 view .LVU1480
 6054              	.LVL602:
 176:Core/Src/deca_device.c **** 
 6055              		.loc 1 176 5 view .LVU1481
 178:Core/Src/deca_device.c ****     pdw1000local->wait4resp = 0; // - set to 0 - meaning wait for response not active
 6056              		.loc 1 178 5 view .LVU1482
 178:Core/Src/deca_device.c ****     pdw1000local->wait4resp = 0; // - set to 0 - meaning wait for response not active
 6057              		.loc 1 178 17 is_stmt 0 view .LVU1483
 6058 0004 6B4B     		ldr	r3, .L390
 6059 0006 1B68     		ldr	r3, [r3]
 178:Core/Src/deca_device.c ****     pdw1000local->wait4resp = 0; // - set to 0 - meaning wait for response not active
 6060              		.loc 1 178 29 view .LVU1484
 6061 0008 0022     		movs	r2, #0
 6062 000a 1A75     		strb	r2, [r3, #20]
 179:Core/Src/deca_device.c ****     pdw1000local->sleep_mode = 0; // - set to 0 - meaning sleep mode has not been configured
 6063              		.loc 1 179 5 is_stmt 1 view .LVU1485
 179:Core/Src/deca_device.c ****     pdw1000local->sleep_mode = 0; // - set to 0 - meaning sleep mode has not been configured
 6064              		.loc 1 179 29 is_stmt 0 view .LVU1486
 6065 000c 5A75     		strb	r2, [r3, #21]
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 176


 180:Core/Src/deca_device.c **** 
 6066              		.loc 1 180 5 is_stmt 1 view .LVU1487
 180:Core/Src/deca_device.c **** 
 6067              		.loc 1 180 30 is_stmt 0 view .LVU1488
 6068 000e DA82     		strh	r2, [r3, #22]	@ movhi
 182:Core/Src/deca_device.c ****     pdw1000local->cbRxOk = NULL;
 6069              		.loc 1 182 5 is_stmt 1 view .LVU1489
 182:Core/Src/deca_device.c ****     pdw1000local->cbRxOk = NULL;
 6070              		.loc 1 182 28 is_stmt 0 view .LVU1490
 6071 0010 9A62     		str	r2, [r3, #40]
 183:Core/Src/deca_device.c ****     pdw1000local->cbRxTo = NULL;
 6072              		.loc 1 183 5 is_stmt 1 view .LVU1491
 183:Core/Src/deca_device.c ****     pdw1000local->cbRxTo = NULL;
 6073              		.loc 1 183 26 is_stmt 0 view .LVU1492
 6074 0012 DA62     		str	r2, [r3, #44]
 184:Core/Src/deca_device.c ****     pdw1000local->cbRxErr = NULL;
 6075              		.loc 1 184 5 is_stmt 1 view .LVU1493
 184:Core/Src/deca_device.c ****     pdw1000local->cbRxErr = NULL;
 6076              		.loc 1 184 26 is_stmt 0 view .LVU1494
 6077 0014 1A63     		str	r2, [r3, #48]
 185:Core/Src/deca_device.c **** 
 6078              		.loc 1 185 5 is_stmt 1 view .LVU1495
 185:Core/Src/deca_device.c **** 
 6079              		.loc 1 185 27 is_stmt 0 view .LVU1496
 6080 0016 5A63     		str	r2, [r3, #52]
 192:Core/Src/deca_device.c ****     {
 6081              		.loc 1 192 5 is_stmt 1 view .LVU1497
 192:Core/Src/deca_device.c ****     {
 6082              		.loc 1 192 26 is_stmt 0 view .LVU1498
 6083 0018 FFF7FEFF 		bl	dwt_readdevid
 6084              	.LVL603:
 192:Core/Src/deca_device.c ****     {
 6085              		.loc 1 192 8 view .LVU1499
 6086 001c 664B     		ldr	r3, .L390+4
 6087 001e 9842     		cmp	r0, r3
 6088 0020 40F0C480 		bne	.L381
 197:Core/Src/deca_device.c ****     {
 6089              		.loc 1 197 5 is_stmt 1 view .LVU1500
 197:Core/Src/deca_device.c ****     {
 6090              		.loc 1 197 7 is_stmt 0 view .LVU1501
 6091 0024 14F00205 		ands	r5, r4, #2
 6092 0028 1CD0     		beq	.L384
 6093              	.L360:
 202:Core/Src/deca_device.c ****     {
 6094              		.loc 1 202 5 is_stmt 1 view .LVU1502
 202:Core/Src/deca_device.c ****     {
 6095              		.loc 1 202 7 is_stmt 0 view .LVU1503
 6096 002a 15B1     		cbz	r5, .L361
 202:Core/Src/deca_device.c ****     {
 6097              		.loc 1 202 8 discriminator 1 view .LVU1504
 6098 002c 14F0F80F 		tst	r4, #248
 6099 0030 02D1     		bne	.L362
 6100              	.L361:
 204:Core/Src/deca_device.c ****     }                                  // when not reading from OTP, clocks don't need to change.
 6101              		.loc 1 204 9 is_stmt 1 view .LVU1505
 6102 0032 0020     		movs	r0, #0
 6103 0034 FFF7FEFF 		bl	_dwt_enableclocks
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 177


 6104              	.LVL604:
 6105              	.L362:
 208:Core/Src/deca_device.c **** 
 6106              		.loc 1 208 5 view .LVU1506
 6107 0038 0422     		movs	r2, #4
 6108 003a 0021     		movs	r1, #0
 6109 003c 2420     		movs	r0, #36
 6110 003e FFF7FEFF 		bl	dwt_write8bitoffsetreg
 6111              	.LVL605:
 213:Core/Src/deca_device.c ****     {
 6112              		.loc 1 213 5 view .LVU1507
 213:Core/Src/deca_device.c ****     {
 6113              		.loc 1 213 7 is_stmt 0 view .LVU1508
 6114 0042 F5B9     		cbnz	r5, .L363
 216:Core/Src/deca_device.c ****         if((ldo_tune & 0xFF) != 0)
 6115              		.loc 1 216 9 is_stmt 1 view .LVU1509
 216:Core/Src/deca_device.c ****         if((ldo_tune & 0xFF) != 0)
 6116              		.loc 1 216 20 is_stmt 0 view .LVU1510
 6117 0044 0420     		movs	r0, #4
 6118 0046 FFF7FEFF 		bl	_dwt_otpread
 6119              	.LVL606:
 217:Core/Src/deca_device.c ****         {
 6120              		.loc 1 217 9 is_stmt 1 view .LVU1511
 217:Core/Src/deca_device.c ****         {
 6121              		.loc 1 217 11 is_stmt 0 view .LVU1512
 6122 004a 10F0FF0F 		tst	r0, #255
 6123 004e 0CD1     		bne	.L385
 6124              	.LVL607:
 6125              	.L364:
 230:Core/Src/deca_device.c ****     {
 6126              		.loc 1 230 5 is_stmt 1 view .LVU1513
 230:Core/Src/deca_device.c ****     {
 6127              		.loc 1 230 7 is_stmt 0 view .LVU1514
 6128 0050 2DB3     		cbz	r5, .L365
 230:Core/Src/deca_device.c ****     {
 6129              		.loc 1 230 67 discriminator 1 view .LVU1515
 6130 0052 04F00A03 		and	r3, r4, #10
 230:Core/Src/deca_device.c ****     {
 6131              		.loc 1 230 37 discriminator 1 view .LVU1516
 6132 0056 0A2B     		cmp	r3, #10
 6133 0058 21D0     		beq	.L365
 237:Core/Src/deca_device.c ****                                   // (DWT_DW_WAKE_UP bit is set), set otprev to 0
 6134              		.loc 1 237 9 is_stmt 1 view .LVU1517
 237:Core/Src/deca_device.c ****                                   // (DWT_DW_WAKE_UP bit is set), set otprev to 0
 6135              		.loc 1 237 21 is_stmt 0 view .LVU1518
 6136 005a 564B     		ldr	r3, .L390
 6137 005c 1A68     		ldr	r2, [r3]
 237:Core/Src/deca_device.c ****                                   // (DWT_DW_WAKE_UP bit is set), set otprev to 0
 6138              		.loc 1 237 30 view .LVU1519
 6139 005e 0023     		movs	r3, #0
 6140 0060 D372     		strb	r3, [r2, #11]
 6141 0062 25E0     		b	.L367
 6142              	.LVL608:
 6143              	.L384:
 199:Core/Src/deca_device.c ****     }
 6144              		.loc 1 199 9 is_stmt 1 view .LVU1520
 6145 0064 FFF7FEFF 		bl	dwt_softreset
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 178


 6146              	.LVL609:
 6147 0068 DFE7     		b	.L360
 6148              	.LVL610:
 6149              	.L385:
 220:Core/Src/deca_device.c ****             pdw1000local->sleep_mode |= AON_WCFG_ONW_LLDO; // LDO tune must be kicked at wake-up
 6150              		.loc 1 220 13 view .LVU1521
 6151 006a 0222     		movs	r2, #2
 6152 006c 1221     		movs	r1, #18
 6153 006e 2D20     		movs	r0, #45
 6154              	.LVL611:
 220:Core/Src/deca_device.c ****             pdw1000local->sleep_mode |= AON_WCFG_ONW_LLDO; // LDO tune must be kicked at wake-up
 6155              		.loc 1 220 13 is_stmt 0 view .LVU1522
 6156 0070 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 6157              	.LVL612:
 221:Core/Src/deca_device.c ****         }
 6158              		.loc 1 221 13 is_stmt 1 view .LVU1523
 221:Core/Src/deca_device.c ****         }
 6159              		.loc 1 221 38 is_stmt 0 view .LVU1524
 6160 0074 4F4B     		ldr	r3, .L390
 6161 0076 1A68     		ldr	r2, [r3]
 6162 0078 D38A     		ldrh	r3, [r2, #22]
 6163 007a 43F48053 		orr	r3, r3, #4096
 6164 007e D382     		strh	r3, [r2, #22]	@ movhi
 6165 0080 E6E7     		b	.L364
 6166              	.LVL613:
 6167              	.L363:
 226:Core/Src/deca_device.c ****             pdw1000local->sleep_mode |= AON_WCFG_ONW_LLDO;
 6168              		.loc 1 226 9 is_stmt 1 view .LVU1525
 226:Core/Src/deca_device.c ****             pdw1000local->sleep_mode |= AON_WCFG_ONW_LLDO;
 6169              		.loc 1 226 12 is_stmt 0 view .LVU1526
 6170 0082 3021     		movs	r1, #48
 6171 0084 2820     		movs	r0, #40
 6172 0086 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 6173              	.LVL614:
 226:Core/Src/deca_device.c ****             pdw1000local->sleep_mode |= AON_WCFG_ONW_LLDO;
 6174              		.loc 1 226 11 view .LVU1527
 6175 008a B0F1883F 		cmp	r0, #-2004318072
 6176 008e DFD0     		beq	.L364
 227:Core/Src/deca_device.c ****     }
 6177              		.loc 1 227 13 is_stmt 1 view .LVU1528
 227:Core/Src/deca_device.c ****     }
 6178              		.loc 1 227 38 is_stmt 0 view .LVU1529
 6179 0090 484B     		ldr	r3, .L390
 6180 0092 1A68     		ldr	r2, [r3]
 6181 0094 D38A     		ldrh	r3, [r2, #22]
 6182 0096 43F48053 		orr	r3, r3, #4096
 6183 009a D382     		strh	r3, [r2, #22]	@ movhi
 6184 009c D8E7     		b	.L364
 6185              	.LVL615:
 6186              	.L365:
 233:Core/Src/deca_device.c ****         pdw1000local->otprev = (otp_xtaltrim_and_rev >> 8) & 0xff;          // OTP revision is the 
 6187              		.loc 1 233 9 is_stmt 1 view .LVU1530
 233:Core/Src/deca_device.c ****         pdw1000local->otprev = (otp_xtaltrim_and_rev >> 8) & 0xff;          // OTP revision is the 
 6188              		.loc 1 233 32 is_stmt 0 view .LVU1531
 6189 009e 1E20     		movs	r0, #30
 6190 00a0 FFF7FEFF 		bl	_dwt_otpread
 6191              	.LVL616:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 179


 233:Core/Src/deca_device.c ****         pdw1000local->otprev = (otp_xtaltrim_and_rev >> 8) & 0xff;          // OTP revision is the 
 6192              		.loc 1 233 30 view .LVU1532
 6193 00a4 83B2     		uxth	r3, r0
 6194              	.LVL617:
 234:Core/Src/deca_device.c ****     }
 6195              		.loc 1 234 9 is_stmt 1 view .LVU1533
 234:Core/Src/deca_device.c ****     }
 6196              		.loc 1 234 21 is_stmt 0 view .LVU1534
 6197 00a6 434A     		ldr	r2, .L390
 6198 00a8 1268     		ldr	r2, [r2]
 234:Core/Src/deca_device.c ****     }
 6199              		.loc 1 234 30 view .LVU1535
 6200 00aa C0F30720 		ubfx	r0, r0, #8, #8
 6201 00ae D072     		strb	r0, [r2, #11]
 6202              	.LVL618:
 6203              	.L367:
 240:Core/Src/deca_device.c ****     {
 6204              		.loc 1 240 5 is_stmt 1 view .LVU1536
 240:Core/Src/deca_device.c ****     {
 6205              		.loc 1 240 7 is_stmt 0 view .LVU1537
 6206 00b0 35B9     		cbnz	r5, .L368
 243:Core/Src/deca_device.c ****         {
 6207              		.loc 1 243 9 is_stmt 1 view .LVU1538
 243:Core/Src/deca_device.c ****         {
 6208              		.loc 1 243 12 is_stmt 0 view .LVU1539
 6209 00b2 13F01F0F 		tst	r3, #31
 6210 00b6 00D1     		bne	.L369
 245:Core/Src/deca_device.c ****         }
 6211              		.loc 1 245 34 view .LVU1540
 6212 00b8 1023     		movs	r3, #16
 6213              	.LVL619:
 6214              	.L369:
 248:Core/Src/deca_device.c ****     }
 6215              		.loc 1 248 9 is_stmt 1 view .LVU1541
 6216 00ba D8B2     		uxtb	r0, r3
 6217 00bc FFF7FEFF 		bl	dwt_setxtaltrim
 6218              	.LVL620:
 6219              	.L368:
 251:Core/Src/deca_device.c ****     {
 6220              		.loc 1 251 5 view .LVU1542
 251:Core/Src/deca_device.c ****     {
 6221              		.loc 1 251 7 is_stmt 0 view .LVU1543
 6222 00c0 14F0100F 		tst	r4, #16
 6223 00c4 40D1     		bne	.L386
 258:Core/Src/deca_device.c ****     }
 6224              		.loc 1 258 9 is_stmt 1 view .LVU1544
 258:Core/Src/deca_device.c ****     }
 6225              		.loc 1 258 21 is_stmt 0 view .LVU1545
 6226 00c6 3B4B     		ldr	r3, .L390
 6227 00c8 1B68     		ldr	r3, [r3]
 258:Core/Src/deca_device.c ****     }
 6228              		.loc 1 258 30 view .LVU1546
 6229 00ca 0022     		movs	r2, #0
 6230 00cc 1A60     		str	r2, [r3]
 6231              	.L371:
 261:Core/Src/deca_device.c ****     {
 6232              		.loc 1 261 5 is_stmt 1 view .LVU1547
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 180


 261:Core/Src/deca_device.c ****     {
 6233              		.loc 1 261 7 is_stmt 0 view .LVU1548
 6234 00ce 14F0200F 		tst	r4, #32
 6235 00d2 40D1     		bne	.L387
 268:Core/Src/deca_device.c ****     }
 6236              		.loc 1 268 9 is_stmt 1 view .LVU1549
 268:Core/Src/deca_device.c ****     }
 6237              		.loc 1 268 21 is_stmt 0 view .LVU1550
 6238 00d4 374B     		ldr	r3, .L390
 6239 00d6 1B68     		ldr	r3, [r3]
 268:Core/Src/deca_device.c ****     }
 6240              		.loc 1 268 29 view .LVU1551
 6241 00d8 0022     		movs	r2, #0
 6242 00da 5A60     		str	r2, [r3, #4]
 6243              	.L373:
 271:Core/Src/deca_device.c ****     {
 6244              		.loc 1 271 5 is_stmt 1 view .LVU1552
 271:Core/Src/deca_device.c ****     {
 6245              		.loc 1 271 7 is_stmt 0 view .LVU1553
 6246 00dc 14F0400F 		tst	r4, #64
 6247 00e0 40D1     		bne	.L388
 278:Core/Src/deca_device.c ****     }
 6248              		.loc 1 278 9 is_stmt 1 view .LVU1554
 278:Core/Src/deca_device.c ****     }
 6249              		.loc 1 278 21 is_stmt 0 view .LVU1555
 6250 00e2 344B     		ldr	r3, .L390
 6251 00e4 1B68     		ldr	r3, [r3]
 278:Core/Src/deca_device.c ****     }
 6252              		.loc 1 278 29 view .LVU1556
 6253 00e6 0022     		movs	r2, #0
 6254 00e8 1A72     		strb	r2, [r3, #8]
 6255              	.L375:
 281:Core/Src/deca_device.c ****     {
 6256              		.loc 1 281 5 is_stmt 1 view .LVU1557
 281:Core/Src/deca_device.c ****     {
 6257              		.loc 1 281 7 is_stmt 0 view .LVU1558
 6258 00ea 14F0800F 		tst	r4, #128
 6259 00ee 40D1     		bne	.L389
 288:Core/Src/deca_device.c ****     }
 6260              		.loc 1 288 9 is_stmt 1 view .LVU1559
 288:Core/Src/deca_device.c ****     }
 6261              		.loc 1 288 21 is_stmt 0 view .LVU1560
 6262 00f0 304B     		ldr	r3, .L390
 6263 00f2 1B68     		ldr	r3, [r3]
 288:Core/Src/deca_device.c ****     }
 6264              		.loc 1 288 29 view .LVU1561
 6265 00f4 0022     		movs	r2, #0
 6266 00f6 5A72     		strb	r2, [r3, #9]
 6267              	.L377:
 292:Core/Src/deca_device.c ****     {
 6268              		.loc 1 292 5 is_stmt 1 view .LVU1562
 292:Core/Src/deca_device.c ****     {
 6269              		.loc 1 292 7 is_stmt 0 view .LVU1563
 6270 00f8 002D     		cmp	r5, #0
 6271 00fa 4DD1     		bne	.L378
 294:Core/Src/deca_device.c ****         {
 6272              		.loc 1 294 9 is_stmt 1 view .LVU1564
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 181


 294:Core/Src/deca_device.c ****         {
 6273              		.loc 1 294 11 is_stmt 0 view .LVU1565
 6274 00fc 14F0010F 		tst	r4, #1
 6275 0100 3ED0     		beq	.L379
 296:Core/Src/deca_device.c ****             pdw1000local->sleep_mode |= AON_WCFG_ONW_LLDE; // microcode must be loaded at wake-up i
 6276              		.loc 1 296 13 is_stmt 1 view .LVU1566
 6277 0102 FFF7FEFF 		bl	_dwt_loaducodefromrom
 6278              	.LVL621:
 297:Core/Src/deca_device.c ****         }
 6279              		.loc 1 297 13 view .LVU1567
 297:Core/Src/deca_device.c ****         }
 6280              		.loc 1 297 38 is_stmt 0 view .LVU1568
 6281 0106 2B4B     		ldr	r3, .L390
 6282 0108 1A68     		ldr	r2, [r3]
 6283 010a D38A     		ldrh	r3, [r2, #22]
 6284 010c 43F40063 		orr	r3, r3, #2048
 6285 0110 D382     		strh	r3, [r2, #22]	@ movhi
 6286              	.L380:
 314:Core/Src/deca_device.c **** 
 6287              		.loc 1 314 5 is_stmt 1 view .LVU1569
 6288 0112 0120     		movs	r0, #1
 6289 0114 FFF7FEFF 		bl	_dwt_enableclocks
 6290              	.LVL622:
 317:Core/Src/deca_device.c **** 
 6291              		.loc 1 317 5 view .LVU1570
 6292 0118 0022     		movs	r2, #0
 6293 011a 0A21     		movs	r1, #10
 6294 011c 2C20     		movs	r0, #44
 6295 011e FFF7FEFF 		bl	dwt_write8bitoffsetreg
 6296              	.LVL623:
 320:Core/Src/deca_device.c ****     pdw1000local->longFrames = (pdw1000local->sysCFGreg & SYS_CFG_PHR_MODE_11) >> SYS_CFG_PHR_MODE_
 6297              		.loc 1 320 5 view .LVU1571
 320:Core/Src/deca_device.c ****     pdw1000local->longFrames = (pdw1000local->sysCFGreg & SYS_CFG_PHR_MODE_11) >> SYS_CFG_PHR_MODE_
 6298              		.loc 1 320 17 is_stmt 0 view .LVU1572
 6299 0122 244C     		ldr	r4, .L390
 6300              	.LVL624:
 320:Core/Src/deca_device.c ****     pdw1000local->longFrames = (pdw1000local->sysCFGreg & SYS_CFG_PHR_MODE_11) >> SYS_CFG_PHR_MODE_
 6301              		.loc 1 320 17 view .LVU1573
 6302 0124 2568     		ldr	r5, [r4]
 320:Core/Src/deca_device.c ****     pdw1000local->longFrames = (pdw1000local->sysCFGreg & SYS_CFG_PHR_MODE_11) >> SYS_CFG_PHR_MODE_
 6303              		.loc 1 320 31 view .LVU1574
 6304 0126 0021     		movs	r1, #0
 6305 0128 0420     		movs	r0, #4
 6306 012a FFF7FEFF 		bl	dwt_read32bitoffsetreg
 6307              	.LVL625:
 320:Core/Src/deca_device.c ****     pdw1000local->longFrames = (pdw1000local->sysCFGreg & SYS_CFG_PHR_MODE_11) >> SYS_CFG_PHR_MODE_
 6308              		.loc 1 320 29 view .LVU1575
 6309 012e 2861     		str	r0, [r5, #16]
 321:Core/Src/deca_device.c **** 
 6310              		.loc 1 321 5 is_stmt 1 view .LVU1576
 321:Core/Src/deca_device.c **** 
 6311              		.loc 1 321 45 is_stmt 0 view .LVU1577
 6312 0130 2468     		ldr	r4, [r4]
 321:Core/Src/deca_device.c **** 
 6313              		.loc 1 321 80 view .LVU1578
 6314 0132 638A     		ldrh	r3, [r4, #18]
 6315 0134 03F00303 		and	r3, r3, #3
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 182


 321:Core/Src/deca_device.c **** 
 6316              		.loc 1 321 30 view .LVU1579
 6317 0138 A372     		strb	r3, [r4, #10]
 323:Core/Src/deca_device.c **** 
 6318              		.loc 1 323 5 is_stmt 1 view .LVU1580
 323:Core/Src/deca_device.c **** 
 6319              		.loc 1 323 29 is_stmt 0 view .LVU1581
 6320 013a 0021     		movs	r1, #0
 6321 013c 0820     		movs	r0, #8
 6322 013e FFF7FEFF 		bl	dwt_read32bitoffsetreg
 6323              	.LVL626:
 323:Core/Src/deca_device.c **** 
 6324              		.loc 1 323 27 view .LVU1582
 6325 0142 E060     		str	r0, [r4, #12]
 325:Core/Src/deca_device.c **** 
 6326              		.loc 1 325 5 is_stmt 1 view .LVU1583
 325:Core/Src/deca_device.c **** 
 6327              		.loc 1 325 12 is_stmt 0 view .LVU1584
 6328 0144 0020     		movs	r0, #0
 6329              	.L358:
 327:Core/Src/deca_device.c **** 
 6330              		.loc 1 327 1 view .LVU1585
 6331 0146 70BD     		pop	{r4, r5, r6, pc}
 6332              	.LVL627:
 6333              	.L386:
 254:Core/Src/deca_device.c ****     }
 6334              		.loc 1 254 9 is_stmt 1 view .LVU1586
 254:Core/Src/deca_device.c ****     }
 6335              		.loc 1 254 21 is_stmt 0 view .LVU1587
 6336 0148 1A4B     		ldr	r3, .L390
 6337 014a 1E68     		ldr	r6, [r3]
 254:Core/Src/deca_device.c ****     }
 6338              		.loc 1 254 32 view .LVU1588
 6339 014c 0620     		movs	r0, #6
 6340 014e FFF7FEFF 		bl	_dwt_otpread
 6341              	.LVL628:
 254:Core/Src/deca_device.c ****     }
 6342              		.loc 1 254 30 view .LVU1589
 6343 0152 3060     		str	r0, [r6]
 6344 0154 BBE7     		b	.L371
 6345              	.L387:
 264:Core/Src/deca_device.c ****     }
 6346              		.loc 1 264 9 is_stmt 1 view .LVU1590
 264:Core/Src/deca_device.c ****     }
 6347              		.loc 1 264 21 is_stmt 0 view .LVU1591
 6348 0156 174B     		ldr	r3, .L390
 6349 0158 1E68     		ldr	r6, [r3]
 264:Core/Src/deca_device.c ****     }
 6350              		.loc 1 264 31 view .LVU1592
 6351 015a 0720     		movs	r0, #7
 6352 015c FFF7FEFF 		bl	_dwt_otpread
 6353              	.LVL629:
 264:Core/Src/deca_device.c ****     }
 6354              		.loc 1 264 29 view .LVU1593
 6355 0160 7060     		str	r0, [r6, #4]
 6356 0162 BBE7     		b	.L373
 6357              	.L388:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 183


 274:Core/Src/deca_device.c ****     }
 6358              		.loc 1 274 9 is_stmt 1 view .LVU1594
 274:Core/Src/deca_device.c ****     }
 6359              		.loc 1 274 31 is_stmt 0 view .LVU1595
 6360 0164 0820     		movs	r0, #8
 6361 0166 FFF7FEFF 		bl	_dwt_otpread
 6362              	.LVL630:
 274:Core/Src/deca_device.c ****     }
 6363              		.loc 1 274 21 view .LVU1596
 6364 016a 124B     		ldr	r3, .L390
 6365 016c 1B68     		ldr	r3, [r3]
 274:Core/Src/deca_device.c ****     }
 6366              		.loc 1 274 29 view .LVU1597
 6367 016e 1872     		strb	r0, [r3, #8]
 6368 0170 BBE7     		b	.L375
 6369              	.L389:
 284:Core/Src/deca_device.c ****     }
 6370              		.loc 1 284 9 is_stmt 1 view .LVU1598
 284:Core/Src/deca_device.c ****     }
 6371              		.loc 1 284 31 is_stmt 0 view .LVU1599
 6372 0172 0920     		movs	r0, #9
 6373 0174 FFF7FEFF 		bl	_dwt_otpread
 6374              	.LVL631:
 284:Core/Src/deca_device.c ****     }
 6375              		.loc 1 284 21 view .LVU1600
 6376 0178 0E4B     		ldr	r3, .L390
 6377 017a 1B68     		ldr	r3, [r3]
 284:Core/Src/deca_device.c ****     }
 6378              		.loc 1 284 29 view .LVU1601
 6379 017c 5872     		strb	r0, [r3, #9]
 6380 017e BBE7     		b	.L377
 6381              	.L379:
 6382              	.LBB4:
 301:Core/Src/deca_device.c ****             rega &= 0xFDFF ; // Clear LDERUN bit
 6383              		.loc 1 301 13 is_stmt 1 view .LVU1602
 301:Core/Src/deca_device.c ****             rega &= 0xFDFF ; // Clear LDERUN bit
 6384              		.loc 1 301 27 is_stmt 0 view .LVU1603
 6385 0180 0521     		movs	r1, #5
 6386 0182 3620     		movs	r0, #54
 6387 0184 FFF7FEFF 		bl	dwt_read16bitoffsetreg
 6388              	.LVL632:
 302:Core/Src/deca_device.c ****             dwt_write16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET+1, rega) ;
 6389              		.loc 1 302 13 is_stmt 1 view .LVU1604
 302:Core/Src/deca_device.c ****             dwt_write16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET+1, rega) ;
 6390              		.loc 1 302 18 is_stmt 0 view .LVU1605
 6391 0188 20F40072 		bic	r2, r0, #512
 6392 018c 92B2     		uxth	r2, r2
 6393              	.LVL633:
 303:Core/Src/deca_device.c ****         }
 6394              		.loc 1 303 13 is_stmt 1 view .LVU1606
 6395 018e 0521     		movs	r1, #5
 6396 0190 3620     		movs	r0, #54
 6397 0192 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 6398              	.LVL634:
 303:Core/Src/deca_device.c ****         }
 6399              		.loc 1 303 13 is_stmt 0 view .LVU1607
 6400 0196 BCE7     		b	.L380
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 184


 6401              	.L378:
 303:Core/Src/deca_device.c ****         }
 6402              		.loc 1 303 13 view .LVU1608
 6403              	.LBE4:
 308:Core/Src/deca_device.c ****         {
 6404              		.loc 1 308 9 is_stmt 1 view .LVU1609
 308:Core/Src/deca_device.c ****         {
 6405              		.loc 1 308 11 is_stmt 0 view .LVU1610
 6406 0198 14F0040F 		tst	r4, #4
 6407 019c B9D1     		bne	.L380
 310:Core/Src/deca_device.c ****         }
 6408              		.loc 1 310 13 is_stmt 1 view .LVU1611
 310:Core/Src/deca_device.c ****         }
 6409              		.loc 1 310 38 is_stmt 0 view .LVU1612
 6410 019e 054B     		ldr	r3, .L390
 6411 01a0 1A68     		ldr	r2, [r3]
 6412 01a2 D38A     		ldrh	r3, [r2, #22]
 6413 01a4 43F40063 		orr	r3, r3, #2048
 6414 01a8 D382     		strh	r3, [r2, #22]	@ movhi
 6415 01aa B2E7     		b	.L380
 6416              	.LVL635:
 6417              	.L381:
 194:Core/Src/deca_device.c ****     }
 6418              		.loc 1 194 16 view .LVU1613
 6419 01ac 4FF0FF30 		mov	r0, #-1
 6420 01b0 C9E7     		b	.L358
 6421              	.L391:
 6422 01b2 00BF     		.align	2
 6423              	.L390:
 6424 01b4 00000000 		.word	.LANCHOR1
 6425 01b8 3001CADE 		.word	-557186768
 6426              		.cfi_endproc
 6427              	.LFE2:
 6429              		.section	.text.dwt_getxtaltrim,"ax",%progbits
 6430              		.align	1
 6431              		.global	dwt_getxtaltrim
 6432              		.syntax unified
 6433              		.thumb
 6434              		.thumb_func
 6436              	dwt_getxtaltrim:
 6437              	.LFB90:
3281:Core/Src/deca_device.c **** 
3282:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3283:Core/Src/deca_device.c ****  * @fn dwt_getxtaltrim()
3284:Core/Src/deca_device.c ****  *
3285:Core/Src/deca_device.c ****  * @brief This function returns current value of XTAL trim. If this is called after dwt_initalise i
3286:Core/Src/deca_device.c ****  * if OTP value is non-zero or FS_XTALT_MIDRANGE if OTP value is zero (not programmed).
3287:Core/Src/deca_device.c ****  *
3288:Core/Src/deca_device.c ****  * input parameters
3289:Core/Src/deca_device.c ****  *
3290:Core/Src/deca_device.c ****  * output parameters
3291:Core/Src/deca_device.c ****  *
3292:Core/Src/deca_device.c ****  * returns the current XTAL trim value
3293:Core/Src/deca_device.c ****  */
3294:Core/Src/deca_device.c **** uint8 dwt_getxtaltrim(void)
3295:Core/Src/deca_device.c **** {
 6438              		.loc 1 3295 1 is_stmt 1 view -0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 185


 6439              		.cfi_startproc
 6440              		@ args = 0, pretend = 0, frame = 0
 6441              		@ frame_needed = 0, uses_anonymous_args = 0
 6442 0000 08B5     		push	{r3, lr}
 6443              	.LCFI117:
 6444              		.cfi_def_cfa_offset 8
 6445              		.cfi_offset 3, -8
 6446              		.cfi_offset 14, -4
3296:Core/Src/deca_device.c ****     return (dwt_read8bitoffsetreg(FS_CTRL_ID, FS_XTALT_OFFSET) & FS_XTALT_MASK);
 6447              		.loc 1 3296 5 view .LVU1615
 6448              		.loc 1 3296 13 is_stmt 0 view .LVU1616
 6449 0002 0E21     		movs	r1, #14
 6450 0004 2B20     		movs	r0, #43
 6451 0006 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 6452              	.LVL636:
3297:Core/Src/deca_device.c **** }
 6453              		.loc 1 3297 1 view .LVU1617
 6454 000a 00F01F00 		and	r0, r0, #31
 6455 000e 08BD     		pop	{r3, pc}
 6456              		.cfi_endproc
 6457              	.LFE90:
 6459              		.section	.text.dwt_configcwmode,"ax",%progbits
 6460              		.align	1
 6461              		.global	dwt_configcwmode
 6462              		.syntax unified
 6463              		.thumb
 6464              		.thumb_func
 6466              	dwt_configcwmode:
 6467              	.LVL637:
 6468              	.LFB91:
3298:Core/Src/deca_device.c **** 
3299:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3300:Core/Src/deca_device.c ****  * @fn dwt_configcwmode()
3301:Core/Src/deca_device.c ****  *
3302:Core/Src/deca_device.c ****  * @brief this function sets the DW1000 to transmit cw signal at specific channel frequency
3303:Core/Src/deca_device.c ****  *
3304:Core/Src/deca_device.c ****  * input parameters:
3305:Core/Src/deca_device.c ****  * @param chan - specifies the operating channel (e.g. 1, 2, 3, 4, 5, 6 or 7)
3306:Core/Src/deca_device.c ****  *
3307:Core/Src/deca_device.c ****  * output parameters
3308:Core/Src/deca_device.c ****  *
3309:Core/Src/deca_device.c ****  * no return value
3310:Core/Src/deca_device.c ****  */
3311:Core/Src/deca_device.c **** void dwt_configcwmode(uint8 chan)
3312:Core/Src/deca_device.c **** {
 6469              		.loc 1 3312 1 is_stmt 1 view -0
 6470              		.cfi_startproc
 6471              		@ args = 0, pretend = 0, frame = 0
 6472              		@ frame_needed = 0, uses_anonymous_args = 0
 6473              		.loc 1 3312 1 is_stmt 0 view .LVU1619
 6474 0000 10B5     		push	{r4, lr}
 6475              	.LCFI118:
 6476              		.cfi_def_cfa_offset 8
 6477              		.cfi_offset 4, -8
 6478              		.cfi_offset 14, -4
 6479 0002 0446     		mov	r4, r0
3313:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 186


3314:Core/Src/deca_device.c ****     assert((chan >= 1) && (chan <= 7) && (chan != 6));
3315:Core/Src/deca_device.c **** #endif
3316:Core/Src/deca_device.c **** 
3317:Core/Src/deca_device.c ****     //
3318:Core/Src/deca_device.c ****     // Disable TX/RX RF block sequencing (needed for cw frame mode)
3319:Core/Src/deca_device.c ****     //
3320:Core/Src/deca_device.c ****     _dwt_disablesequencing();
 6480              		.loc 1 3320 5 is_stmt 1 view .LVU1620
 6481 0004 FFF7FEFF 		bl	_dwt_disablesequencing
 6482              	.LVL638:
3321:Core/Src/deca_device.c **** 
3322:Core/Src/deca_device.c ****     // Config RF pll (for a given channel)
3323:Core/Src/deca_device.c ****     // Configure PLL2/RF PLL block CFG/TUNE
3324:Core/Src/deca_device.c ****     dwt_write32bitoffsetreg(FS_CTRL_ID, FS_PLLCFG_OFFSET, fs_pll_cfg[chan_idx[chan]]);
 6483              		.loc 1 3324 5 view .LVU1621
 6484              		.loc 1 3324 78 is_stmt 0 view .LVU1622
 6485 0008 194B     		ldr	r3, .L396
 6486 000a 1C5D     		ldrb	r4, [r3, r4]	@ zero_extendqisi2
 6487              		.loc 1 3324 5 view .LVU1623
 6488 000c 194B     		ldr	r3, .L396+4
 6489 000e 53F82420 		ldr	r2, [r3, r4, lsl #2]
 6490 0012 0721     		movs	r1, #7
 6491 0014 2B20     		movs	r0, #43
 6492 0016 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 6493              	.LVL639:
3325:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(FS_CTRL_ID, FS_PLLTUNE_OFFSET, fs_pll_tune[chan_idx[chan]]);
 6494              		.loc 1 3325 5 is_stmt 1 view .LVU1624
 6495 001a 174B     		ldr	r3, .L396+8
 6496 001c 1A5D     		ldrb	r2, [r3, r4]	@ zero_extendqisi2
 6497 001e 0B21     		movs	r1, #11
 6498 0020 2B20     		movs	r0, #43
 6499 0022 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 6500              	.LVL640:
3326:Core/Src/deca_device.c ****     // PLL wont be enabled until a TX/RX enable is issued later on
3327:Core/Src/deca_device.c ****     // Configure RF TX blocks (for specified channel and prf)
3328:Core/Src/deca_device.c ****     // Config RF TX control
3329:Core/Src/deca_device.c ****     dwt_write32bitoffsetreg(RF_CONF_ID, RF_TXCTRL_OFFSET, tx_config[chan_idx[chan]]);
 6501              		.loc 1 3329 5 view .LVU1625
 6502 0026 154B     		ldr	r3, .L396+12
 6503 0028 53F82420 		ldr	r2, [r3, r4, lsl #2]
 6504 002c 0C21     		movs	r1, #12
 6505 002e 2820     		movs	r0, #40
 6506 0030 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 6507              	.LVL641:
3330:Core/Src/deca_device.c **** 
3331:Core/Src/deca_device.c ****     //
3332:Core/Src/deca_device.c ****     // Enable RF PLL
3333:Core/Src/deca_device.c ****     //
3334:Core/Src/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, RF_CONF_TXPLLPOWEN_MASK); // Enable LDO and RF PLL blocks
 6508              		.loc 1 3334 5 view .LVU1626
 6509 0034 4FF4FF12 		mov	r2, #2088960
 6510 0038 0021     		movs	r1, #0
 6511 003a 2820     		movs	r0, #40
 6512 003c FFF7FEFF 		bl	dwt_write32bitoffsetreg
 6513              	.LVL642:
3335:Core/Src/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, RF_CONF_TXALLEN_MASK); // Enable the rest of TX blocks
 6514              		.loc 1 3335 5 view .LVU1627
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 187


 6515 0040 0F4A     		ldr	r2, .L396+16
 6516 0042 0021     		movs	r1, #0
 6517 0044 2820     		movs	r0, #40
 6518 0046 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 6519              	.LVL643:
3336:Core/Src/deca_device.c **** 
3337:Core/Src/deca_device.c ****     //
3338:Core/Src/deca_device.c ****     // Configure TX clocks
3339:Core/Src/deca_device.c ****     //
3340:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, 0x22);
 6520              		.loc 1 3340 5 view .LVU1628
 6521 004a 2222     		movs	r2, #34
 6522 004c 0021     		movs	r1, #0
 6523 004e 3620     		movs	r0, #54
 6524 0050 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 6525              	.LVL644:
3341:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, 0x1, 0x07);
 6526              		.loc 1 3341 5 view .LVU1629
 6527 0054 0722     		movs	r2, #7
 6528 0056 0121     		movs	r1, #1
 6529 0058 3620     		movs	r0, #54
 6530 005a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 6531              	.LVL645:
3342:Core/Src/deca_device.c **** 
3343:Core/Src/deca_device.c ****     // Disable fine grain TX sequencing
3344:Core/Src/deca_device.c ****     dwt_setfinegraintxseq(0);
 6532              		.loc 1 3344 5 view .LVU1630
 6533 005e 0020     		movs	r0, #0
 6534 0060 FFF7FEFF 		bl	dwt_setfinegraintxseq
 6535              	.LVL646:
3345:Core/Src/deca_device.c **** 
3346:Core/Src/deca_device.c ****     // Configure CW mode
3347:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGTEST_OFFSET, TC_PGTEST_CW);
 6536              		.loc 1 3347 5 view .LVU1631
 6537 0064 1322     		movs	r2, #19
 6538 0066 0C21     		movs	r1, #12
 6539 0068 2A20     		movs	r0, #42
 6540 006a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 6541              	.LVL647:
3348:Core/Src/deca_device.c **** }
 6542              		.loc 1 3348 1 is_stmt 0 view .LVU1632
 6543 006e 10BD     		pop	{r4, pc}
 6544              	.L397:
 6545              		.align	2
 6546              	.L396:
 6547 0070 00000000 		.word	chan_idx
 6548 0074 00000000 		.word	fs_pll_cfg
 6549 0078 00000000 		.word	fs_pll_tune
 6550 007c 00000000 		.word	tx_config
 6551 0080 00FF5F00 		.word	6291200
 6552              		.cfi_endproc
 6553              	.LFE91:
 6555              		.section	.text.dwt_configcontinuousframemode,"ax",%progbits
 6556              		.align	1
 6557              		.global	dwt_configcontinuousframemode
 6558              		.syntax unified
 6559              		.thumb
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 188


 6560              		.thumb_func
 6562              	dwt_configcontinuousframemode:
 6563              	.LVL648:
 6564              	.LFB92:
3349:Core/Src/deca_device.c **** 
3350:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3351:Core/Src/deca_device.c ****  * @fn dwt_configcontinuousframemode()
3352:Core/Src/deca_device.c ****  *
3353:Core/Src/deca_device.c ****  * @brief this function sets the DW1000 to continuous tx frame mode for regulatory approvals testin
3354:Core/Src/deca_device.c ****  *
3355:Core/Src/deca_device.c ****  * input parameters:
3356:Core/Src/deca_device.c ****  * @param framerepetitionrate - This is a 32-bit value that is used to set the interval between tra
3357:Core/Src/deca_device.c **** *  The minimum value is 4. The units are approximately 8 ns. (or more precisely 512/(499.2e6*128) s
3358:Core/Src/deca_device.c ****  *
3359:Core/Src/deca_device.c ****  * output parameters
3360:Core/Src/deca_device.c ****  *
3361:Core/Src/deca_device.c ****  * no return value
3362:Core/Src/deca_device.c ****  */
3363:Core/Src/deca_device.c **** void dwt_configcontinuousframemode(uint32 framerepetitionrate)
3364:Core/Src/deca_device.c **** {
 6565              		.loc 1 3364 1 is_stmt 1 view -0
 6566              		.cfi_startproc
 6567              		@ args = 0, pretend = 0, frame = 0
 6568              		@ frame_needed = 0, uses_anonymous_args = 0
 6569              		.loc 1 3364 1 is_stmt 0 view .LVU1634
 6570 0000 10B5     		push	{r4, lr}
 6571              	.LCFI119:
 6572              		.cfi_def_cfa_offset 8
 6573              		.cfi_offset 4, -8
 6574              		.cfi_offset 14, -4
 6575 0002 0446     		mov	r4, r0
3365:Core/Src/deca_device.c ****     //
3366:Core/Src/deca_device.c ****     // Disable TX/RX RF block sequencing (needed for continuous frame mode)
3367:Core/Src/deca_device.c ****     //
3368:Core/Src/deca_device.c ****     _dwt_disablesequencing();
 6576              		.loc 1 3368 5 is_stmt 1 view .LVU1635
 6577 0004 FFF7FEFF 		bl	_dwt_disablesequencing
 6578              	.LVL649:
3369:Core/Src/deca_device.c **** 
3370:Core/Src/deca_device.c ****     //
3371:Core/Src/deca_device.c ****     // Enable RF PLL and TX blocks
3372:Core/Src/deca_device.c ****     //
3373:Core/Src/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, RF_CONF_TXPLLPOWEN_MASK); // Enable LDO and RF PLL blocks
 6579              		.loc 1 3373 5 view .LVU1636
 6580 0008 4FF4FF12 		mov	r2, #2088960
 6581 000c 0021     		movs	r1, #0
 6582 000e 2820     		movs	r0, #40
 6583 0010 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 6584              	.LVL650:
3374:Core/Src/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, RF_CONF_TXALLEN_MASK); // Enable the rest of TX blocks
 6585              		.loc 1 3374 5 view .LVU1637
 6586 0014 0C4A     		ldr	r2, .L402
 6587 0016 0021     		movs	r1, #0
 6588 0018 2820     		movs	r0, #40
 6589 001a FFF7FEFF 		bl	dwt_write32bitoffsetreg
 6590              	.LVL651:
3375:Core/Src/deca_device.c **** 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 189


3376:Core/Src/deca_device.c ****     //
3377:Core/Src/deca_device.c ****     // Configure TX clocks
3378:Core/Src/deca_device.c ****     //
3379:Core/Src/deca_device.c ****     _dwt_enableclocks(FORCE_SYS_PLL);
 6591              		.loc 1 3379 5 view .LVU1638
 6592 001e 0220     		movs	r0, #2
 6593 0020 FFF7FEFF 		bl	_dwt_enableclocks
 6594              	.LVL652:
3380:Core/Src/deca_device.c ****     _dwt_enableclocks(FORCE_TX_PLL);
 6595              		.loc 1 3380 5 view .LVU1639
 6596 0024 0D20     		movs	r0, #13
 6597 0026 FFF7FEFF 		bl	_dwt_enableclocks
 6598              	.LVL653:
3381:Core/Src/deca_device.c **** 
3382:Core/Src/deca_device.c ****     // Set the frame repetition rate
3383:Core/Src/deca_device.c ****     if(framerepetitionrate < 4)
 6599              		.loc 1 3383 5 view .LVU1640
 6600              		.loc 1 3383 7 is_stmt 0 view .LVU1641
 6601 002a 032C     		cmp	r4, #3
 6602 002c 00D8     		bhi	.L399
3384:Core/Src/deca_device.c ****     {
3385:Core/Src/deca_device.c ****         framerepetitionrate = 4;
 6603              		.loc 1 3385 29 view .LVU1642
 6604 002e 0424     		movs	r4, #4
 6605              	.LVL654:
 6606              	.L399:
3386:Core/Src/deca_device.c ****     }
3387:Core/Src/deca_device.c ****     dwt_write32bitreg(DX_TIME_ID, framerepetitionrate);
 6607              		.loc 1 3387 5 is_stmt 1 view .LVU1643
 6608 0030 2246     		mov	r2, r4
 6609 0032 0021     		movs	r1, #0
 6610 0034 0A20     		movs	r0, #10
 6611 0036 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 6612              	.LVL655:
3388:Core/Src/deca_device.c **** 
3389:Core/Src/deca_device.c ****     //
3390:Core/Src/deca_device.c ****     // Configure continuous frame TX
3391:Core/Src/deca_device.c ****     //
3392:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(DIG_DIAG_ID, DIAG_TMC_OFFSET, (uint8)(DIAG_TMC_TX_PSTM)); // Turn the tx
 6613              		.loc 1 3392 5 view .LVU1644
 6614 003a 1022     		movs	r2, #16
 6615 003c 2421     		movs	r1, #36
 6616 003e 2F20     		movs	r0, #47
 6617 0040 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 6618              	.LVL656:
3393:Core/Src/deca_device.c **** }
 6619              		.loc 1 3393 1 is_stmt 0 view .LVU1645
 6620 0044 10BD     		pop	{r4, pc}
 6621              	.LVL657:
 6622              	.L403:
 6623              		.loc 1 3393 1 view .LVU1646
 6624 0046 00BF     		.align	2
 6625              	.L402:
 6626 0048 00FF5F00 		.word	6291200
 6627              		.cfi_endproc
 6628              	.LFE92:
 6630              		.section	.text.dwt_readtempvbat,"ax",%progbits
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 190


 6631              		.align	1
 6632              		.global	dwt_readtempvbat
 6633              		.syntax unified
 6634              		.thumb
 6635              		.thumb_func
 6637              	dwt_readtempvbat:
 6638              	.LVL658:
 6639              	.LFB93:
3394:Core/Src/deca_device.c **** 
3395:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3396:Core/Src/deca_device.c ****  * @fn dwt_readtempvbat()
3397:Core/Src/deca_device.c ****  *
3398:Core/Src/deca_device.c ****  * @brief this function reads the raw battery voltage and temperature values of the DW IC.
3399:Core/Src/deca_device.c ****  * The values read here will be the current values sampled by DW IC AtoD converters.
3400:Core/Src/deca_device.c ****  *
3401:Core/Src/deca_device.c ****  * NB: To correctly read the temperature this read should be done with xtal clock
3402:Core/Src/deca_device.c ****  * however that means that the receiver will be switched off, if receiver needs to be on then
3403:Core/Src/deca_device.c ****  * the timer is used to make sure the value is stable before reading
3404:Core/Src/deca_device.c ****  *
3405:Core/Src/deca_device.c ****  * input parameters:
3406:Core/Src/deca_device.c ****  * @param fastSPI - set to 1 if SPI rate > than 3MHz is used
3407:Core/Src/deca_device.c ****  *
3408:Core/Src/deca_device.c ****  * output parameters
3409:Core/Src/deca_device.c ****  *
3410:Core/Src/deca_device.c ****  * returns  (temp_raw<<8)|(vbat_raw)
3411:Core/Src/deca_device.c ****  */
3412:Core/Src/deca_device.c **** uint16 dwt_readtempvbat(uint8 fastSPI)
3413:Core/Src/deca_device.c **** {
 6640              		.loc 1 3413 1 is_stmt 1 view -0
 6641              		.cfi_startproc
 6642              		@ args = 0, pretend = 0, frame = 8
 6643              		@ frame_needed = 0, uses_anonymous_args = 0
 6644              		.loc 1 3413 1 is_stmt 0 view .LVU1648
 6645 0000 30B5     		push	{r4, r5, lr}
 6646              	.LCFI120:
 6647              		.cfi_def_cfa_offset 12
 6648              		.cfi_offset 4, -12
 6649              		.cfi_offset 5, -8
 6650              		.cfi_offset 14, -4
 6651 0002 83B0     		sub	sp, sp, #12
 6652              	.LCFI121:
 6653              		.cfi_def_cfa_offset 24
 6654 0004 0446     		mov	r4, r0
3414:Core/Src/deca_device.c ****     uint8 wr_buf[2];
 6655              		.loc 1 3414 5 is_stmt 1 view .LVU1649
3415:Core/Src/deca_device.c ****     uint8 vbat_raw;
 6656              		.loc 1 3415 5 view .LVU1650
3416:Core/Src/deca_device.c ****     uint8 temp_raw;
 6657              		.loc 1 3416 5 view .LVU1651
3417:Core/Src/deca_device.c **** 
3418:Core/Src/deca_device.c ****     // These writes should be single writes and in sequence
3419:Core/Src/deca_device.c ****     wr_buf[0] = 0x80; // Enable TLD Bias
 6658              		.loc 1 3419 5 view .LVU1652
 6659              		.loc 1 3419 15 is_stmt 0 view .LVU1653
 6660 0006 8023     		movs	r3, #128
 6661 0008 8DF80430 		strb	r3, [sp, #4]
3420:Core/Src/deca_device.c ****     dwt_writetodevice(RF_CONF_ID,0x11,1,wr_buf);
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 191


 6662              		.loc 1 3420 5 is_stmt 1 view .LVU1654
 6663 000c 01AB     		add	r3, sp, #4
 6664 000e 0122     		movs	r2, #1
 6665 0010 1121     		movs	r1, #17
 6666 0012 2820     		movs	r0, #40
 6667              	.LVL659:
 6668              		.loc 1 3420 5 is_stmt 0 view .LVU1655
 6669 0014 FFF7FEFF 		bl	dwt_writetodevice
 6670              	.LVL660:
3421:Core/Src/deca_device.c **** 
3422:Core/Src/deca_device.c ****     wr_buf[0] = 0x0A; // Enable TLD Bias and ADC Bias
 6671              		.loc 1 3422 5 is_stmt 1 view .LVU1656
 6672              		.loc 1 3422 15 is_stmt 0 view .LVU1657
 6673 0018 0A23     		movs	r3, #10
 6674 001a 8DF80430 		strb	r3, [sp, #4]
3423:Core/Src/deca_device.c ****     dwt_writetodevice(RF_CONF_ID,0x12,1,wr_buf);
 6675              		.loc 1 3423 5 is_stmt 1 view .LVU1658
 6676 001e 01AB     		add	r3, sp, #4
 6677 0020 0122     		movs	r2, #1
 6678 0022 1221     		movs	r1, #18
 6679 0024 2820     		movs	r0, #40
 6680 0026 FFF7FEFF 		bl	dwt_writetodevice
 6681              	.LVL661:
3424:Core/Src/deca_device.c **** 
3425:Core/Src/deca_device.c ****     wr_buf[0] = 0x0f; // Enable Outputs (only after Biases are up and running)
 6682              		.loc 1 3425 5 view .LVU1659
 6683              		.loc 1 3425 15 is_stmt 0 view .LVU1660
 6684 002a 0F23     		movs	r3, #15
 6685 002c 8DF80430 		strb	r3, [sp, #4]
3426:Core/Src/deca_device.c ****     dwt_writetodevice(RF_CONF_ID,0x12,1,wr_buf);    //
 6686              		.loc 1 3426 5 is_stmt 1 view .LVU1661
 6687 0030 01AB     		add	r3, sp, #4
 6688 0032 0122     		movs	r2, #1
 6689 0034 1221     		movs	r1, #18
 6690 0036 2820     		movs	r0, #40
 6691 0038 FFF7FEFF 		bl	dwt_writetodevice
 6692              	.LVL662:
3427:Core/Src/deca_device.c **** 
3428:Core/Src/deca_device.c ****     if(fastSPI == 1)
 6693              		.loc 1 3428 5 view .LVU1662
 6694              		.loc 1 3428 7 is_stmt 0 view .LVU1663
 6695 003c 012C     		cmp	r4, #1
 6696 003e 2DD0     		beq	.L408
3429:Core/Src/deca_device.c ****     {
3430:Core/Src/deca_device.c ****         // Reading All SAR inputs
3431:Core/Src/deca_device.c ****         wr_buf[0] = 0x00;
3432:Core/Src/deca_device.c ****         dwt_writetodevice(TX_CAL_ID, TC_SARL_SAR_C,1,wr_buf);
3433:Core/Src/deca_device.c ****         wr_buf[0] = 0x01; // Set SAR enable
3434:Core/Src/deca_device.c ****         dwt_writetodevice(TX_CAL_ID, TC_SARL_SAR_C,1,wr_buf);
3435:Core/Src/deca_device.c **** 
3436:Core/Src/deca_device.c ****         deca_sleep(1); // If using PLL clocks(and fast SPI rate) then this sleep is needed
3437:Core/Src/deca_device.c ****         // Read voltage and temperature.
3438:Core/Src/deca_device.c ****         dwt_readfromdevice(TX_CAL_ID, TC_SARL_SAR_LVBAT_OFFSET,2,wr_buf);
3439:Core/Src/deca_device.c ****     }
3440:Core/Src/deca_device.c ****     else //change to a slow clock
3441:Core/Src/deca_device.c ****     {
3442:Core/Src/deca_device.c ****         _dwt_enableclocks(FORCE_SYS_XTI); // NOTE: set system clock to XTI - this is necessary to m
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 192


 6697              		.loc 1 3442 9 is_stmt 1 view .LVU1664
 6698 0040 0020     		movs	r0, #0
 6699 0042 FFF7FEFF 		bl	_dwt_enableclocks
 6700              	.LVL663:
3443:Core/Src/deca_device.c ****         // Reading All SAR inputs
3444:Core/Src/deca_device.c ****         wr_buf[0] = 0x00;
 6701              		.loc 1 3444 9 view .LVU1665
 6702              		.loc 1 3444 19 is_stmt 0 view .LVU1666
 6703 0046 0025     		movs	r5, #0
 6704 0048 8DF80450 		strb	r5, [sp, #4]
3445:Core/Src/deca_device.c ****         dwt_writetodevice(TX_CAL_ID, TC_SARL_SAR_C,1,wr_buf);
 6705              		.loc 1 3445 9 is_stmt 1 view .LVU1667
 6706 004c 01AB     		add	r3, sp, #4
 6707 004e 0122     		movs	r2, #1
 6708 0050 2946     		mov	r1, r5
 6709 0052 2A20     		movs	r0, #42
 6710 0054 FFF7FEFF 		bl	dwt_writetodevice
 6711              	.LVL664:
3446:Core/Src/deca_device.c ****         wr_buf[0] = 0x01; // Set SAR enable
 6712              		.loc 1 3446 9 view .LVU1668
 6713              		.loc 1 3446 19 is_stmt 0 view .LVU1669
 6714 0058 0124     		movs	r4, #1
 6715 005a 8DF80440 		strb	r4, [sp, #4]
3447:Core/Src/deca_device.c ****         dwt_writetodevice(TX_CAL_ID, TC_SARL_SAR_C,1,wr_buf);
 6716              		.loc 1 3447 9 is_stmt 1 view .LVU1670
 6717 005e 01AB     		add	r3, sp, #4
 6718 0060 2246     		mov	r2, r4
 6719 0062 2946     		mov	r1, r5
 6720 0064 2A20     		movs	r0, #42
 6721 0066 FFF7FEFF 		bl	dwt_writetodevice
 6722              	.LVL665:
3448:Core/Src/deca_device.c **** 
3449:Core/Src/deca_device.c ****         // Read voltage and temperature.
3450:Core/Src/deca_device.c ****         dwt_readfromdevice(TX_CAL_ID, TC_SARL_SAR_LVBAT_OFFSET,2,wr_buf);
 6723              		.loc 1 3450 9 view .LVU1671
 6724 006a 01AB     		add	r3, sp, #4
 6725 006c 0222     		movs	r2, #2
 6726 006e 0321     		movs	r1, #3
 6727 0070 2A20     		movs	r0, #42
 6728 0072 FFF7FEFF 		bl	dwt_readfromdevice
 6729              	.LVL666:
3451:Core/Src/deca_device.c ****         // Default clocks (ENABLE_ALL_SEQ)
3452:Core/Src/deca_device.c ****         _dwt_enableclocks(ENABLE_ALL_SEQ); // Enable clocks for sequencing
 6730              		.loc 1 3452 9 view .LVU1672
 6731 0076 2046     		mov	r0, r4
 6732 0078 FFF7FEFF 		bl	_dwt_enableclocks
 6733              	.LVL667:
 6734              	.L406:
3453:Core/Src/deca_device.c ****     }
3454:Core/Src/deca_device.c **** 
3455:Core/Src/deca_device.c ****     vbat_raw = wr_buf[0];
 6735              		.loc 1 3455 5 view .LVU1673
 6736              		.loc 1 3455 14 is_stmt 0 view .LVU1674
 6737 007c 9DF80440 		ldrb	r4, [sp, #4]	@ zero_extendqisi2
 6738              	.LVL668:
3456:Core/Src/deca_device.c ****     temp_raw = wr_buf[1];
 6739              		.loc 1 3456 5 is_stmt 1 view .LVU1675
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 193


 6740              		.loc 1 3456 14 is_stmt 0 view .LVU1676
 6741 0080 9DF80550 		ldrb	r5, [sp, #5]	@ zero_extendqisi2
 6742              	.LVL669:
3457:Core/Src/deca_device.c **** 
3458:Core/Src/deca_device.c ****     wr_buf[0] = 0x00; // Clear SAR enable
 6743              		.loc 1 3458 5 is_stmt 1 view .LVU1677
 6744              		.loc 1 3458 15 is_stmt 0 view .LVU1678
 6745 0084 0021     		movs	r1, #0
 6746 0086 8DF80410 		strb	r1, [sp, #4]
3459:Core/Src/deca_device.c ****     dwt_writetodevice(TX_CAL_ID, TC_SARL_SAR_C,1,wr_buf);
 6747              		.loc 1 3459 5 is_stmt 1 view .LVU1679
 6748 008a 01AB     		add	r3, sp, #4
 6749 008c 0122     		movs	r2, #1
 6750 008e 2A20     		movs	r0, #42
 6751 0090 FFF7FEFF 		bl	dwt_writetodevice
 6752              	.LVL670:
3460:Core/Src/deca_device.c **** 
3461:Core/Src/deca_device.c ****     return (((uint16)temp_raw<<8)|(vbat_raw));
 6753              		.loc 1 3461 5 view .LVU1680
3462:Core/Src/deca_device.c **** }
 6754              		.loc 1 3462 1 is_stmt 0 view .LVU1681
 6755 0094 44EA0520 		orr	r0, r4, r5, lsl #8
 6756 0098 03B0     		add	sp, sp, #12
 6757              	.LCFI122:
 6758              		.cfi_remember_state
 6759              		.cfi_def_cfa_offset 12
 6760              		@ sp needed
 6761 009a 30BD     		pop	{r4, r5, pc}
 6762              	.LVL671:
 6763              	.L408:
 6764              	.LCFI123:
 6765              		.cfi_restore_state
3431:Core/Src/deca_device.c ****         dwt_writetodevice(TX_CAL_ID, TC_SARL_SAR_C,1,wr_buf);
 6766              		.loc 1 3431 9 is_stmt 1 view .LVU1682
3431:Core/Src/deca_device.c ****         dwt_writetodevice(TX_CAL_ID, TC_SARL_SAR_C,1,wr_buf);
 6767              		.loc 1 3431 19 is_stmt 0 view .LVU1683
 6768 009c 0025     		movs	r5, #0
 6769 009e 8DF80450 		strb	r5, [sp, #4]
3432:Core/Src/deca_device.c ****         wr_buf[0] = 0x01; // Set SAR enable
 6770              		.loc 1 3432 9 is_stmt 1 view .LVU1684
 6771 00a2 01AB     		add	r3, sp, #4
 6772 00a4 0122     		movs	r2, #1
 6773 00a6 2946     		mov	r1, r5
 6774 00a8 2A20     		movs	r0, #42
 6775 00aa FFF7FEFF 		bl	dwt_writetodevice
 6776              	.LVL672:
3433:Core/Src/deca_device.c ****         dwt_writetodevice(TX_CAL_ID, TC_SARL_SAR_C,1,wr_buf);
 6777              		.loc 1 3433 9 view .LVU1685
3433:Core/Src/deca_device.c ****         dwt_writetodevice(TX_CAL_ID, TC_SARL_SAR_C,1,wr_buf);
 6778              		.loc 1 3433 19 is_stmt 0 view .LVU1686
 6779 00ae 8DF80440 		strb	r4, [sp, #4]
3434:Core/Src/deca_device.c **** 
 6780              		.loc 1 3434 9 is_stmt 1 view .LVU1687
 6781 00b2 01AB     		add	r3, sp, #4
 6782 00b4 2246     		mov	r2, r4
 6783 00b6 2946     		mov	r1, r5
 6784 00b8 2A20     		movs	r0, #42
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 194


 6785 00ba FFF7FEFF 		bl	dwt_writetodevice
 6786              	.LVL673:
3436:Core/Src/deca_device.c ****         // Read voltage and temperature.
 6787              		.loc 1 3436 9 view .LVU1688
 6788 00be 2046     		mov	r0, r4
 6789 00c0 FFF7FEFF 		bl	deca_sleep
 6790              	.LVL674:
3438:Core/Src/deca_device.c ****     }
 6791              		.loc 1 3438 9 view .LVU1689
 6792 00c4 01AB     		add	r3, sp, #4
 6793 00c6 0222     		movs	r2, #2
 6794 00c8 0321     		movs	r1, #3
 6795 00ca 2A20     		movs	r0, #42
 6796 00cc FFF7FEFF 		bl	dwt_readfromdevice
 6797              	.LVL675:
 6798 00d0 D4E7     		b	.L406
 6799              		.cfi_endproc
 6800              	.LFE93:
 6802              		.global	__aeabi_i2d
 6803              		.global	__aeabi_dmul
 6804              		.global	__aeabi_dadd
 6805              		.global	__aeabi_d2f
 6806              		.section	.text.dwt_convertrawtemperature,"ax",%progbits
 6807              		.align	1
 6808              		.global	dwt_convertrawtemperature
 6809              		.syntax unified
 6810              		.thumb
 6811              		.thumb_func
 6813              	dwt_convertrawtemperature:
 6814              	.LVL676:
 6815              	.LFB94:
3463:Core/Src/deca_device.c **** 
3464:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3465:Core/Src/deca_device.c ****  * @fn dwt_convertrawtemperature()
3466:Core/Src/deca_device.c ****  *
3467:Core/Src/deca_device.c ****  * @brief  this function takes in a raw temperature value and applies the conversion factor
3468:Core/Src/deca_device.c ****  * to give true temperature. The dwt_initialise needs to be called before call to this to
3469:Core/Src/deca_device.c ****  * ensure pdw1000local->tempP contains the SAR_LTEMP value from OTP.
3470:Core/Src/deca_device.c ****  *
3471:Core/Src/deca_device.c ****  * input parameters:
3472:Core/Src/deca_device.c ****  * @param raw_temp - this is the 8-bit raw temperature value as read by dwt_readtempvbat
3473:Core/Src/deca_device.c ****  *
3474:Core/Src/deca_device.c ****  * output parameters:
3475:Core/Src/deca_device.c ****  *
3476:Core/Src/deca_device.c ****  * returns: temperature sensor value in degrees
3477:Core/Src/deca_device.c ****  */
3478:Core/Src/deca_device.c **** float dwt_convertrawtemperature(uint8 raw_temp)
3479:Core/Src/deca_device.c **** {
 6816              		.loc 1 3479 1 view -0
 6817              		.cfi_startproc
 6818              		@ args = 0, pretend = 0, frame = 0
 6819              		@ frame_needed = 0, uses_anonymous_args = 0
 6820              		.loc 1 3479 1 is_stmt 0 view .LVU1691
 6821 0000 08B5     		push	{r3, lr}
 6822              	.LCFI124:
 6823              		.cfi_def_cfa_offset 8
 6824              		.cfi_offset 3, -8
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 195


 6825              		.cfi_offset 14, -4
3480:Core/Src/deca_device.c ****     float realtemp;
 6826              		.loc 1 3480 5 is_stmt 1 view .LVU1692
3481:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
3482:Core/Src/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_TMP);
3483:Core/Src/deca_device.c **** #endif
3484:Core/Src/deca_device.c ****     // the User Manual formula is: Temperature (C) = ( (SAR_LTEMP  OTP_READ(Vtemp @ 23C) ) x 1.1
3485:Core/Src/deca_device.c ****     realtemp = ((raw_temp - pdw1000local->tempP) * SAR_TEMP_TO_CELCIUS_CONV) + 23 ;
 6827              		.loc 1 3485 5 view .LVU1693
 6828              		.loc 1 3485 41 is_stmt 0 view .LVU1694
 6829 0002 0B4B     		ldr	r3, .L411+8
 6830 0004 1B68     		ldr	r3, [r3]
 6831 0006 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 6832              		.loc 1 3485 50 view .LVU1695
 6833 0008 C01A     		subs	r0, r0, r3
 6834              	.LVL677:
 6835              		.loc 1 3485 50 view .LVU1696
 6836 000a FFF7FEFF 		bl	__aeabi_i2d
 6837              	.LVL678:
 6838 000e 06A3     		adr	r3, .L411
 6839 0010 D3E90023 		ldrd	r2, [r3]
 6840 0014 FFF7FEFF 		bl	__aeabi_dmul
 6841              	.LVL679:
 6842              		.loc 1 3485 78 view .LVU1697
 6843 0018 0022     		movs	r2, #0
 6844 001a 064B     		ldr	r3, .L411+12
 6845 001c FFF7FEFF 		bl	__aeabi_dadd
 6846              	.LVL680:
 6847              		.loc 1 3485 14 view .LVU1698
 6848 0020 FFF7FEFF 		bl	__aeabi_d2f
 6849              	.LVL681:
3486:Core/Src/deca_device.c **** 
3487:Core/Src/deca_device.c ****     return realtemp;
 6850              		.loc 1 3487 5 is_stmt 1 view .LVU1699
3488:Core/Src/deca_device.c **** }
 6851              		.loc 1 3488 1 is_stmt 0 view .LVU1700
 6852 0024 08BD     		pop	{r3, pc}
 6853              	.L412:
 6854 0026 00BF     		.align	3
 6855              	.L411:
 6856 0028 3D0AD7A3 		.word	-1546188227
 6857 002c 703DF23F 		.word	1072840048
 6858 0030 00000000 		.word	.LANCHOR1
 6859 0034 00003740 		.word	1077346304
 6860              		.cfi_endproc
 6861              	.LFE94:
 6863              		.section	.text.dwt_convertdegtemptoraw,"ax",%progbits
 6864              		.align	1
 6865              		.global	dwt_convertdegtemptoraw
 6866              		.syntax unified
 6867              		.thumb
 6868              		.thumb_func
 6870              	dwt_convertdegtemptoraw:
 6871              	.LVL682:
 6872              	.LFB95:
3489:Core/Src/deca_device.c **** 
3490:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 196


3491:Core/Src/deca_device.c ****  * @fn dwt_convertdegtemptoraw()
3492:Core/Src/deca_device.c ****  *
3493:Core/Src/deca_device.c ****  * @brief  this function takes in an externally measured temperature in 10ths of degrees Celcius
3494:Core/Src/deca_device.c ****  * and applies the conversion factor to give a value in IC temperature units, as produced by the SA
3495:Core/Src/deca_device.c ****  * The dwt_initialise needs to be called before call to this to ensure pdw1000local->tempP contains
3496:Core/Src/deca_device.c ****  *
3497:Core/Src/deca_device.c ****  * input parameters:
3498:Core/Src/deca_device.c ****  * @param externaltemp - this is the an externally measured temperature in 10ths of degrees Celcius
3499:Core/Src/deca_device.c ****  *
3500:Core/Src/deca_device.c ****  * output parameters:
3501:Core/Src/deca_device.c ****  *
3502:Core/Src/deca_device.c ****  * returns: temperature sensor value in DW IC temperature units (1.14C steps)
3503:Core/Src/deca_device.c ****  */
3504:Core/Src/deca_device.c **** uint8 dwt_convertdegtemptoraw(int16 externaltemp)
3505:Core/Src/deca_device.c **** {
 6873              		.loc 1 3505 1 is_stmt 1 view -0
 6874              		.cfi_startproc
 6875              		@ args = 0, pretend = 0, frame = 0
 6876              		@ frame_needed = 0, uses_anonymous_args = 0
 6877              		@ link register save eliminated.
3506:Core/Src/deca_device.c ****     int32 raw_temp;
 6878              		.loc 1 3506 5 view .LVU1702
3507:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
3508:Core/Src/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_TMP);
3509:Core/Src/deca_device.c ****     assert((externaltemp > -800) && (externaltemp < 1500))
3510:Core/Src/deca_device.c **** #endif
3511:Core/Src/deca_device.c ****     // the User Manual formula is: Temperature (C) = ( (SAR_LTEMP  OTP_READ(Vtemp @ 23C) ) x 1.1
3512:Core/Src/deca_device.c ****     raw_temp = ((externaltemp - 230 + 5) * DCELCIUS_TO_SAR_TEMP_CONV) ; //+5 for better rounding
 6879              		.loc 1 3512 5 view .LVU1703
 6880              		.loc 1 3512 37 is_stmt 0 view .LVU1704
 6881 0000 E138     		subs	r0, r0, #225
 6882              	.LVL683:
 6883              		.loc 1 3512 14 view .LVU1705
 6884 0002 1623     		movs	r3, #22
 6885 0004 03FB00F0 		mul	r0, r3, r0
 6886              	.LVL684:
3513:Core/Src/deca_device.c **** 
3514:Core/Src/deca_device.c ****     if(raw_temp < 0) //negative
 6887              		.loc 1 3514 5 is_stmt 1 view .LVU1706
 6888              		.loc 1 3514 7 is_stmt 0 view .LVU1707
 6889 0008 0028     		cmp	r0, #0
 6890 000a 06DB     		blt	.L416
3515:Core/Src/deca_device.c ****     {
3516:Core/Src/deca_device.c ****         raw_temp = (-raw_temp >> 8)  ;
3517:Core/Src/deca_device.c ****         raw_temp = -raw_temp ;
3518:Core/Src/deca_device.c ****     }
3519:Core/Src/deca_device.c ****     else
3520:Core/Src/deca_device.c ****         raw_temp = raw_temp >> 8  ;
 6891              		.loc 1 3520 9 is_stmt 1 view .LVU1708
 6892              		.loc 1 3520 18 is_stmt 0 view .LVU1709
 6893 000c 0012     		asrs	r0, r0, #8
 6894              	.LVL685:
 6895              	.L415:
3521:Core/Src/deca_device.c **** 
3522:Core/Src/deca_device.c ****     return (uint8) (raw_temp + pdw1000local->tempP);
 6896              		.loc 1 3522 5 is_stmt 1 view .LVU1710
 6897              		.loc 1 3522 44 is_stmt 0 view .LVU1711
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 197


 6898 000e 054B     		ldr	r3, .L417
 6899 0010 1B68     		ldr	r3, [r3]
 6900 0012 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 6901              		.loc 1 3522 12 view .LVU1712
 6902 0014 1844     		add	r0, r0, r3
 6903              	.LVL686:
3523:Core/Src/deca_device.c **** }
 6904              		.loc 1 3523 1 view .LVU1713
 6905 0016 C0B2     		uxtb	r0, r0
 6906 0018 7047     		bx	lr
 6907              	.LVL687:
 6908              	.L416:
3516:Core/Src/deca_device.c ****         raw_temp = -raw_temp ;
 6909              		.loc 1 3516 9 is_stmt 1 view .LVU1714
3516:Core/Src/deca_device.c ****         raw_temp = -raw_temp ;
 6910              		.loc 1 3516 21 is_stmt 0 view .LVU1715
 6911 001a 4042     		rsbs	r0, r0, #0
 6912              	.LVL688:
3516:Core/Src/deca_device.c ****         raw_temp = -raw_temp ;
 6913              		.loc 1 3516 18 view .LVU1716
 6914 001c 0012     		asrs	r0, r0, #8
 6915              	.LVL689:
3517:Core/Src/deca_device.c ****     }
 6916              		.loc 1 3517 9 is_stmt 1 view .LVU1717
3517:Core/Src/deca_device.c ****     }
 6917              		.loc 1 3517 18 is_stmt 0 view .LVU1718
 6918 001e 4042     		rsbs	r0, r0, #0
 6919              	.LVL690:
3517:Core/Src/deca_device.c ****     }
 6920              		.loc 1 3517 18 view .LVU1719
 6921 0020 F5E7     		b	.L415
 6922              	.L418:
 6923 0022 00BF     		.align	2
 6924              	.L417:
 6925 0024 00000000 		.word	.LANCHOR1
 6926              		.cfi_endproc
 6927              	.LFE95:
 6929              		.global	__aeabi_i2f
 6930              		.global	__aeabi_f2d
 6931              		.section	.text.dwt_convertrawvoltage,"ax",%progbits
 6932              		.align	1
 6933              		.global	dwt_convertrawvoltage
 6934              		.syntax unified
 6935              		.thumb
 6936              		.thumb_func
 6938              	dwt_convertrawvoltage:
 6939              	.LVL691:
 6940              	.LFB96:
3524:Core/Src/deca_device.c **** 
3525:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3526:Core/Src/deca_device.c ****  * @fn dwt_convertrawvoltage()
3527:Core/Src/deca_device.c ****  *
3528:Core/Src/deca_device.c ****  * @brief this function takes in a raw voltage value and applies the conversion factor
3529:Core/Src/deca_device.c ****  * to give true voltage. The dwt_initialise needs to be called before call to this to
3530:Core/Src/deca_device.c ****  * ensure pdw1000local->vBatP contains the SAR_LVBAT value from OTP
3531:Core/Src/deca_device.c ****  *
3532:Core/Src/deca_device.c ****  * input parameters:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 198


3533:Core/Src/deca_device.c ****  * @param raw_voltage - this is the 8-bit raw voltage value as read by dwt_readtempvbat
3534:Core/Src/deca_device.c ****  *
3535:Core/Src/deca_device.c ****  * output parameters:
3536:Core/Src/deca_device.c ****  *
3537:Core/Src/deca_device.c ****  * returns: voltage sensor value in volts
3538:Core/Src/deca_device.c ****  */
3539:Core/Src/deca_device.c **** float dwt_convertrawvoltage(uint8 raw_voltage)
3540:Core/Src/deca_device.c **** {
 6941              		.loc 1 3540 1 is_stmt 1 view -0
 6942              		.cfi_startproc
 6943              		@ args = 0, pretend = 0, frame = 0
 6944              		@ frame_needed = 0, uses_anonymous_args = 0
 6945              		.loc 1 3540 1 is_stmt 0 view .LVU1721
 6946 0000 08B5     		push	{r3, lr}
 6947              	.LCFI125:
 6948              		.cfi_def_cfa_offset 8
 6949              		.cfi_offset 3, -8
 6950              		.cfi_offset 14, -4
3541:Core/Src/deca_device.c ****     float realvolt;
 6951              		.loc 1 3541 5 is_stmt 1 view .LVU1722
3542:Core/Src/deca_device.c **** 
3543:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
3544:Core/Src/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_BAT);
3545:Core/Src/deca_device.c **** #endif
3546:Core/Src/deca_device.c ****     // the User Manual formula is: Voltage (V) = ( (SAR_LVBAT  OTP_READ(Vmeas @ 3.3 V) ) / 173 ) +
3547:Core/Src/deca_device.c ****     realvolt = ((float)(raw_voltage - pdw1000local->vBatP) * SAR_VBAT_TO_VOLT_CONV) + 3.3 ;
 6952              		.loc 1 3547 5 view .LVU1723
 6953              		.loc 1 3547 51 is_stmt 0 view .LVU1724
 6954 0002 0F4B     		ldr	r3, .L421+16
 6955 0004 1B68     		ldr	r3, [r3]
 6956 0006 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 6957              		.loc 1 3547 17 view .LVU1725
 6958 0008 C01A     		subs	r0, r0, r3
 6959              	.LVL692:
 6960              		.loc 1 3547 17 view .LVU1726
 6961 000a FFF7FEFF 		bl	__aeabi_i2f
 6962              	.LVL693:
 6963 000e FFF7FEFF 		bl	__aeabi_f2d
 6964              	.LVL694:
 6965              		.loc 1 3547 60 view .LVU1727
 6966 0012 07A3     		adr	r3, .L421
 6967 0014 D3E90023 		ldrd	r2, [r3]
 6968 0018 FFF7FEFF 		bl	__aeabi_dmul
 6969              	.LVL695:
 6970              		.loc 1 3547 85 view .LVU1728
 6971 001c 06A3     		adr	r3, .L421+8
 6972 001e D3E90023 		ldrd	r2, [r3]
 6973 0022 FFF7FEFF 		bl	__aeabi_dadd
 6974              	.LVL696:
 6975              		.loc 1 3547 14 view .LVU1729
 6976 0026 FFF7FEFF 		bl	__aeabi_d2f
 6977              	.LVL697:
3548:Core/Src/deca_device.c **** 
3549:Core/Src/deca_device.c ****     return realvolt;
 6978              		.loc 1 3549 5 is_stmt 1 view .LVU1730
3550:Core/Src/deca_device.c **** }
 6979              		.loc 1 3550 1 is_stmt 0 view .LVU1731
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 199


 6980 002a 08BD     		pop	{r3, pc}
 6981              	.L422:
 6982 002c AFF30080 		.align	3
 6983              	.L421:
 6984 0030 C3ECE008 		.word	148958403
 6985 0034 22AD773F 		.word	1064807714
 6986 0038 66666666 		.word	1717986918
 6987 003c 66660A40 		.word	1074423398
 6988 0040 00000000 		.word	.LANCHOR1
 6989              		.cfi_endproc
 6990              	.LFE96:
 6992              		.global	__aeabi_d2uiz
 6993              		.section	.text.dwt_convertvoltstoraw,"ax",%progbits
 6994              		.align	1
 6995              		.global	dwt_convertvoltstoraw
 6996              		.syntax unified
 6997              		.thumb
 6998              		.thumb_func
 7000              	dwt_convertvoltstoraw:
 7001              	.LVL698:
 7002              	.LFB97:
3551:Core/Src/deca_device.c **** 
3552:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3553:Core/Src/deca_device.c ****  * @fn dwt_convertvoltstoraw()
3554:Core/Src/deca_device.c ****  *
3555:Core/Src/deca_device.c ****  * @brief  this function takes in a true voltage in millivolts and applies the conversion factor to
3556:Core/Src/deca_device.c ****  * give a raw DW IC value. The dwt_initialise needs to be called before call to this to
3557:Core/Src/deca_device.c ****  * ensure pdw1000local->vBatP contains the SAR_LVBAT value from OTP.
3558:Core/Src/deca_device.c ****  *
3559:Core/Src/deca_device.c ****  * input parameters:
3560:Core/Src/deca_device.c ****  * @param realvolt - this is a true voltage in millivolts to convert
3561:Core/Src/deca_device.c ****  *
3562:Core/Src/deca_device.c ****  * output parameters:
3563:Core/Src/deca_device.c ****  *
3564:Core/Src/deca_device.c ****  * returns: voltage sensor value in DW IC voltage units
3565:Core/Src/deca_device.c ****  */
3566:Core/Src/deca_device.c **** uint8 dwt_convertvoltstoraw(int32 externalmvolt)
3567:Core/Src/deca_device.c **** {
 7003              		.loc 1 3567 1 is_stmt 1 view -0
 7004              		.cfi_startproc
 7005              		@ args = 0, pretend = 0, frame = 0
 7006              		@ frame_needed = 0, uses_anonymous_args = 0
 7007              		.loc 1 3567 1 is_stmt 0 view .LVU1733
 7008 0000 38B5     		push	{r3, r4, r5, lr}
 7009              	.LCFI126:
 7010              		.cfi_def_cfa_offset 16
 7011              		.cfi_offset 3, -16
 7012              		.cfi_offset 4, -12
 7013              		.cfi_offset 5, -8
 7014              		.cfi_offset 14, -4
3568:Core/Src/deca_device.c ****     uint32 raw_voltage;
 7015              		.loc 1 3568 5 is_stmt 1 view .LVU1734
3569:Core/Src/deca_device.c **** #ifdef DWT_API_ERROR_CHECK
3570:Core/Src/deca_device.c ****     assert(pdw1000local->otp_mask & DWT_READ_OTP_BAT);
3571:Core/Src/deca_device.c **** #endif
3572:Core/Src/deca_device.c ****     // the User Manual formula is: Voltage (V) = ( (SAR_LVBAT  OTP_READ(Vmeas @ 3.3 V) ) / 173 ) +
3573:Core/Src/deca_device.c ****     raw_voltage = ((externalmvolt - 3300) * MVOLT_TO_SAR_VBAT_CONV) + pdw1000local->vBatP ;
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 200


 7016              		.loc 1 3573 5 view .LVU1735
 7017              		.loc 1 3573 43 is_stmt 0 view .LVU1736
 7018 0002 A0F6E440 		subw	r0, r0, #3300
 7019              	.LVL699:
 7020              		.loc 1 3573 43 view .LVU1737
 7021 0006 FFF7FEFF 		bl	__aeabi_i2d
 7022              	.LVL700:
 7023              		.loc 1 3573 43 view .LVU1738
 7024 000a 0BA3     		adr	r3, .L425
 7025 000c D3E90023 		ldrd	r2, [r3]
 7026 0010 FFF7FEFF 		bl	__aeabi_dmul
 7027              	.LVL701:
 7028 0014 0446     		mov	r4, r0
 7029 0016 0D46     		mov	r5, r1
 7030              		.loc 1 3573 83 view .LVU1739
 7031 0018 094B     		ldr	r3, .L425+8
 7032 001a 1B68     		ldr	r3, [r3]
 7033              		.loc 1 3573 69 view .LVU1740
 7034 001c 187A     		ldrb	r0, [r3, #8]	@ zero_extendqisi2
 7035 001e FFF7FEFF 		bl	__aeabi_i2d
 7036              	.LVL702:
 7037 0022 2246     		mov	r2, r4
 7038 0024 2B46     		mov	r3, r5
 7039 0026 FFF7FEFF 		bl	__aeabi_dadd
 7040              	.LVL703:
 7041              		.loc 1 3573 17 view .LVU1741
 7042 002a FFF7FEFF 		bl	__aeabi_d2uiz
 7043              	.LVL704:
3574:Core/Src/deca_device.c **** 
3575:Core/Src/deca_device.c ****     return (uint8) raw_voltage;
 7044              		.loc 1 3575 5 is_stmt 1 view .LVU1742
3576:Core/Src/deca_device.c **** }
 7045              		.loc 1 3576 1 is_stmt 0 view .LVU1743
 7046 002e C0B2     		uxtb	r0, r0
 7047              	.LVL705:
 7048              		.loc 1 3576 1 view .LVU1744
 7049 0030 38BD     		pop	{r3, r4, r5, pc}
 7050              	.L426:
 7051 0032 00BFAFF3 		.align	3
 7051      0080
 7052              	.L425:
 7053 0038 BE9F1A2F 		.word	790273982
 7054 003c DD24C63F 		.word	1069950173
 7055 0040 00000000 		.word	.LANCHOR1
 7056              		.cfi_endproc
 7057              	.LFE97:
 7059              		.section	.text.dwt_readwakeuptemp,"ax",%progbits
 7060              		.align	1
 7061              		.global	dwt_readwakeuptemp
 7062              		.syntax unified
 7063              		.thumb
 7064              		.thumb_func
 7066              	dwt_readwakeuptemp:
 7067              	.LFB98:
3577:Core/Src/deca_device.c **** 
3578:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3579:Core/Src/deca_device.c ****  * @fn dwt_readwakeuptemp()
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 201


3580:Core/Src/deca_device.c ****  *
3581:Core/Src/deca_device.c ****  * @brief this function reads the temperature of the DW1000 that was sampled
3582:Core/Src/deca_device.c ****  * on waking from Sleep/Deepsleep. They are not current values, but read on last
3583:Core/Src/deca_device.c ****  * wakeup if DWT_TANDV bit is set in mode parameter of dwt_configuresleep
3584:Core/Src/deca_device.c ****  *
3585:Core/Src/deca_device.c ****  * input parameters:
3586:Core/Src/deca_device.c ****  *
3587:Core/Src/deca_device.c ****  * output parameters:
3588:Core/Src/deca_device.c ****  *
3589:Core/Src/deca_device.c ****  * returns: 8-bit raw temperature sensor value
3590:Core/Src/deca_device.c ****  */
3591:Core/Src/deca_device.c **** uint8 dwt_readwakeuptemp(void)
3592:Core/Src/deca_device.c **** {
 7068              		.loc 1 3592 1 is_stmt 1 view -0
 7069              		.cfi_startproc
 7070              		@ args = 0, pretend = 0, frame = 0
 7071              		@ frame_needed = 0, uses_anonymous_args = 0
 7072 0000 08B5     		push	{r3, lr}
 7073              	.LCFI127:
 7074              		.cfi_def_cfa_offset 8
 7075              		.cfi_offset 3, -8
 7076              		.cfi_offset 14, -4
3593:Core/Src/deca_device.c ****     return dwt_read8bitoffsetreg(TX_CAL_ID, TC_SARL_SAR_LTEMP_OFFSET);
 7077              		.loc 1 3593 5 view .LVU1746
 7078              		.loc 1 3593 12 is_stmt 0 view .LVU1747
 7079 0002 0421     		movs	r1, #4
 7080 0004 2A20     		movs	r0, #42
 7081 0006 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 7082              	.LVL706:
3594:Core/Src/deca_device.c **** }
 7083              		.loc 1 3594 1 view .LVU1748
 7084 000a 08BD     		pop	{r3, pc}
 7085              		.cfi_endproc
 7086              	.LFE98:
 7088              		.section	.text.dwt_readwakeupvbat,"ax",%progbits
 7089              		.align	1
 7090              		.global	dwt_readwakeupvbat
 7091              		.syntax unified
 7092              		.thumb
 7093              		.thumb_func
 7095              	dwt_readwakeupvbat:
 7096              	.LFB99:
3595:Core/Src/deca_device.c **** 
3596:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3597:Core/Src/deca_device.c ****  * @fn dwt_readwakeupvbat()
3598:Core/Src/deca_device.c ****  *
3599:Core/Src/deca_device.c ****  * @brief this function reads the battery voltage of the DW1000 that was sampled
3600:Core/Src/deca_device.c ****  * on waking from Sleep/Deepsleep. They are not current values, but read on last
3601:Core/Src/deca_device.c ****  * wakeup if DWT_TANDV bit is set in mode parameter of dwt_configuresleep
3602:Core/Src/deca_device.c ****  *
3603:Core/Src/deca_device.c ****  * input parameters:
3604:Core/Src/deca_device.c ****  *
3605:Core/Src/deca_device.c ****  * output parameters:
3606:Core/Src/deca_device.c ****  *
3607:Core/Src/deca_device.c ****  * returns: 8-bit raw battery voltage sensor value
3608:Core/Src/deca_device.c ****  */
3609:Core/Src/deca_device.c **** uint8 dwt_readwakeupvbat(void)
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 202


3610:Core/Src/deca_device.c **** {
 7097              		.loc 1 3610 1 is_stmt 1 view -0
 7098              		.cfi_startproc
 7099              		@ args = 0, pretend = 0, frame = 0
 7100              		@ frame_needed = 0, uses_anonymous_args = 0
 7101 0000 08B5     		push	{r3, lr}
 7102              	.LCFI128:
 7103              		.cfi_def_cfa_offset 8
 7104              		.cfi_offset 3, -8
 7105              		.cfi_offset 14, -4
3611:Core/Src/deca_device.c ****     return dwt_read8bitoffsetreg(TX_CAL_ID, TC_SARL_SAR_LVBAT_OFFSET);
 7106              		.loc 1 3611 5 view .LVU1750
 7107              		.loc 1 3611 12 is_stmt 0 view .LVU1751
 7108 0002 0321     		movs	r1, #3
 7109 0004 2A20     		movs	r0, #42
 7110 0006 FFF7FEFF 		bl	dwt_read8bitoffsetreg
 7111              	.LVL707:
3612:Core/Src/deca_device.c **** }
 7112              		.loc 1 3612 1 view .LVU1752
 7113 000a 08BD     		pop	{r3, pc}
 7114              		.cfi_endproc
 7115              	.LFE99:
 7117              		.section	.text.dwt_calcbandwidthtempadj,"ax",%progbits
 7118              		.align	1
 7119              		.global	dwt_calcbandwidthtempadj
 7120              		.syntax unified
 7121              		.thumb
 7122              		.thumb_func
 7124              	dwt_calcbandwidthtempadj:
 7125              	.LVL708:
 7126              	.LFB100:
3613:Core/Src/deca_device.c **** 
3614:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3615:Core/Src/deca_device.c ****  * @fn dwt_calcbandwidthtempadj()
3616:Core/Src/deca_device.c ****  *
3617:Core/Src/deca_device.c ****  * @brief this function determines the corrected bandwidth setting (PG_DELAY register setting)
3618:Core/Src/deca_device.c ****  * of the DW1000 which changes over temperature.
3619:Core/Src/deca_device.c ****  *
3620:Core/Src/deca_device.c ****  * NOTE 1: SPI Frequency must be < 3MHz.
3621:Core/Src/deca_device.c ****  * NOTE 2: The sleep to allow the calibration to complete is set to 1ms here, but can be as low as 
3622:Core/Src/deca_device.c ****  *
3623:Core/Src/deca_device.c ****  * input parameters:
3624:Core/Src/deca_device.c ****  * @param target_count - uint16 - the PG count target to reach in order to correct the bandwidth
3625:Core/Src/deca_device.c ****  *
3626:Core/Src/deca_device.c ****  * output parameters:
3627:Core/Src/deca_device.c ****  *
3628:Core/Src/deca_device.c ****  * returns: (uint32) The setting to be programmed into the PG_DELAY value
3629:Core/Src/deca_device.c ****  */
3630:Core/Src/deca_device.c **** uint32 dwt_calcbandwidthtempadj(uint16 target_count)
3631:Core/Src/deca_device.c **** {
 7127              		.loc 1 3631 1 is_stmt 1 view -0
 7128              		.cfi_startproc
 7129              		@ args = 0, pretend = 0, frame = 8
 7130              		@ frame_needed = 0, uses_anonymous_args = 0
 7131              		.loc 1 3631 1 is_stmt 0 view .LVU1754
 7132 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 7133              	.LCFI129:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 203


 7134              		.cfi_def_cfa_offset 36
 7135              		.cfi_offset 4, -36
 7136              		.cfi_offset 5, -32
 7137              		.cfi_offset 6, -28
 7138              		.cfi_offset 7, -24
 7139              		.cfi_offset 8, -20
 7140              		.cfi_offset 9, -16
 7141              		.cfi_offset 10, -12
 7142              		.cfi_offset 11, -8
 7143              		.cfi_offset 14, -4
 7144 0004 83B0     		sub	sp, sp, #12
 7145              	.LCFI130:
 7146              		.cfi_def_cfa_offset 48
 7147 0006 0746     		mov	r7, r0
3632:Core/Src/deca_device.c ****     int i;
 7148              		.loc 1 3632 5 is_stmt 1 view .LVU1755
3633:Core/Src/deca_device.c ****     uint8 bit_field, curr_bw;
 7149              		.loc 1 3633 5 view .LVU1756
3634:Core/Src/deca_device.c ****     int32 delta_count = 0;
 7150              		.loc 1 3634 5 view .LVU1757
 7151              	.LVL709:
3635:Core/Src/deca_device.c ****     uint32 best_bw = 0;
 7152              		.loc 1 3635 5 view .LVU1758
3636:Core/Src/deca_device.c ****     uint16 raw_count = 0;
 7153              		.loc 1 3636 5 view .LVU1759
3637:Core/Src/deca_device.c ****     int32 delta_lowest;
 7154              		.loc 1 3637 5 view .LVU1760
3638:Core/Src/deca_device.c **** 
3639:Core/Src/deca_device.c ****     // Used to store the current values of the registers so that they can be restored after
3640:Core/Src/deca_device.c ****     uint8 old_pmsc_ctrl0;
 7155              		.loc 1 3640 5 view .LVU1761
3641:Core/Src/deca_device.c ****     uint16 old_pmsc_ctrl1;
 7156              		.loc 1 3641 5 view .LVU1762
3642:Core/Src/deca_device.c ****     uint32 old_rf_conf_txpow_mask;
 7157              		.loc 1 3642 5 view .LVU1763
3643:Core/Src/deca_device.c **** 
3644:Core/Src/deca_device.c ****     // Record the current values of these registers, to restore later
3645:Core/Src/deca_device.c ****     old_pmsc_ctrl0 = dwt_read8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET);
 7158              		.loc 1 3645 5 view .LVU1764
 7159              		.loc 1 3645 22 is_stmt 0 view .LVU1765
 7160 0008 0021     		movs	r1, #0
 7161 000a 3620     		movs	r0, #54
 7162              	.LVL710:
 7163              		.loc 1 3645 22 view .LVU1766
 7164 000c FFF7FEFF 		bl	dwt_read8bitoffsetreg
 7165              	.LVL711:
 7166 0010 8346     		mov	fp, r0
 7167              	.LVL712:
3646:Core/Src/deca_device.c ****     old_pmsc_ctrl1 = dwt_read16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET);
 7168              		.loc 1 3646 5 is_stmt 1 view .LVU1767
 7169              		.loc 1 3646 22 is_stmt 0 view .LVU1768
 7170 0012 0421     		movs	r1, #4
 7171 0014 3620     		movs	r0, #54
 7172 0016 FFF7FEFF 		bl	dwt_read16bitoffsetreg
 7173              	.LVL713:
 7174 001a 8246     		mov	r10, r0
 7175              	.LVL714:
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 204


3647:Core/Src/deca_device.c ****     old_rf_conf_txpow_mask = dwt_read32bitreg(RF_CONF_ID);
 7176              		.loc 1 3647 5 is_stmt 1 view .LVU1769
 7177              		.loc 1 3647 30 is_stmt 0 view .LVU1770
 7178 001c 0021     		movs	r1, #0
 7179 001e 2820     		movs	r0, #40
 7180 0020 FFF7FEFF 		bl	dwt_read32bitoffsetreg
 7181              	.LVL715:
 7182 0024 0190     		str	r0, [sp, #4]
 7183              	.LVL716:
3648:Core/Src/deca_device.c **** 
3649:Core/Src/deca_device.c ****     //  Set clock to XTAL
3650:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, PMSC_CTRL0_SYSCLKS_19M);
 7184              		.loc 1 3650 5 is_stmt 1 view .LVU1771
 7185 0026 0122     		movs	r2, #1
 7186 0028 0021     		movs	r1, #0
 7187 002a 3620     		movs	r0, #54
 7188              	.LVL717:
 7189              		.loc 1 3650 5 is_stmt 0 view .LVU1772
 7190 002c FFF7FEFF 		bl	dwt_write8bitoffsetreg
 7191              	.LVL718:
3651:Core/Src/deca_device.c **** 
3652:Core/Src/deca_device.c ****     //  Disable sequencing
3653:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET, PMSC_CTRL1_PKTSEQ_DISABLE);
 7192              		.loc 1 3653 5 is_stmt 1 view .LVU1773
 7193 0030 0022     		movs	r2, #0
 7194 0032 0421     		movs	r1, #4
 7195 0034 3620     		movs	r0, #54
 7196 0036 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 7197              	.LVL719:
3654:Core/Src/deca_device.c **** 
3655:Core/Src/deca_device.c ****     //  Turn on CLK PLL, Mix Bias and PG
3656:Core/Src/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, RF_CONF_TXPOW_MASK | RF_CONF_PGMIXBIASEN_MASK);
 7198              		.loc 1 3656 5 view .LVU1774
 7199 003a 284A     		ldr	r2, .L438
 7200 003c 0021     		movs	r1, #0
 7201 003e 2820     		movs	r0, #40
 7202 0040 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 7203              	.LVL720:
3657:Core/Src/deca_device.c **** 
3658:Core/Src/deca_device.c ****     //  Set sys and TX clock to PLL
3659:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, PMSC_CTRL0_SYSCLKS_125M | PMSC_CTRL0_TXCLKS_
 7204              		.loc 1 3659 5 view .LVU1775
 7205 0044 2222     		movs	r2, #34
 7206 0046 0021     		movs	r1, #0
 7207 0048 3620     		movs	r0, #54
 7208 004a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 7209              	.LVL721:
3660:Core/Src/deca_device.c **** 
3661:Core/Src/deca_device.c ****     // Set the MSB high for first guess
3662:Core/Src/deca_device.c ****     curr_bw = 0x80;
 7210              		.loc 1 3662 5 view .LVU1776
3663:Core/Src/deca_device.c ****     // Set starting bit
3664:Core/Src/deca_device.c ****     bit_field = 0x80;
 7211              		.loc 1 3664 5 view .LVU1777
3665:Core/Src/deca_device.c ****     // Initial lowest delta is the maximum difference that we should allow the count value to be fr
3666:Core/Src/deca_device.c ****     // If the algorithm is successful, it will be overwritten by a smaller value where the count va
3667:Core/Src/deca_device.c ****     // to the target
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 205


3668:Core/Src/deca_device.c ****     delta_lowest = 300;
 7212              		.loc 1 3668 5 view .LVU1778
3669:Core/Src/deca_device.c **** 
3670:Core/Src/deca_device.c ****     for (i = 0; i < 7; i++)
 7213              		.loc 1 3670 5 view .LVU1779
3668:Core/Src/deca_device.c **** 
 7214              		.loc 1 3668 18 is_stmt 0 view .LVU1780
 7215 004e 4FF49678 		mov	r8, #300
3635:Core/Src/deca_device.c ****     uint16 raw_count = 0;
 7216              		.loc 1 3635 12 view .LVU1781
 7217 0052 4FF00009 		mov	r9, #0
3662:Core/Src/deca_device.c ****     // Set starting bit
 7218              		.loc 1 3662 13 view .LVU1782
 7219 0056 8024     		movs	r4, #128
3664:Core/Src/deca_device.c ****     // Initial lowest delta is the maximum difference that we should allow the count value to be fr
 7220              		.loc 1 3664 15 view .LVU1783
 7221 0058 2546     		mov	r5, r4
 7222              		.loc 1 3670 12 view .LVU1784
 7223 005a 4E46     		mov	r6, r9
 7224              		.loc 1 3670 5 view .LVU1785
 7225 005c 00E0     		b	.L432
 7226              	.LVL722:
 7227              	.L434:
 7228              		.loc 1 3670 24 is_stmt 1 discriminator 2 view .LVU1786
 7229              		.loc 1 3670 25 is_stmt 0 discriminator 2 view .LVU1787
 7230 005e 0136     		adds	r6, r6, #1
 7231              	.LVL723:
 7232              	.L432:
 7233              		.loc 1 3670 17 is_stmt 1 discriminator 1 view .LVU1788
 7234              		.loc 1 3670 5 is_stmt 0 discriminator 1 view .LVU1789
 7235 0060 062E     		cmp	r6, #6
 7236 0062 27DC     		bgt	.L437
3671:Core/Src/deca_device.c ****     {
3672:Core/Src/deca_device.c ****         // start with 0xc0 and test.
3673:Core/Src/deca_device.c ****         bit_field = bit_field >> 1;
 7237              		.loc 1 3673 9 is_stmt 1 view .LVU1790
 7238              		.loc 1 3673 19 is_stmt 0 view .LVU1791
 7239 0064 6D08     		lsrs	r5, r5, #1
 7240              	.LVL724:
3674:Core/Src/deca_device.c ****         curr_bw = curr_bw | bit_field;
 7241              		.loc 1 3674 9 is_stmt 1 view .LVU1792
 7242              		.loc 1 3674 17 is_stmt 0 view .LVU1793
 7243 0066 2C43     		orrs	r4, r4, r5
 7244              	.LVL725:
 7245              		.loc 1 3674 17 view .LVU1794
 7246 0068 E4B2     		uxtb	r4, r4
 7247              	.LVL726:
3675:Core/Src/deca_device.c **** 
3676:Core/Src/deca_device.c ****         // Write bw setting to PG_DELAY register
3677:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGDELAY_OFFSET, curr_bw);
 7248              		.loc 1 3677 9 is_stmt 1 view .LVU1795
 7249 006a 2246     		mov	r2, r4
 7250 006c 0B21     		movs	r1, #11
 7251 006e 2A20     		movs	r0, #42
 7252 0070 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 7253              	.LVL727:
3678:Core/Src/deca_device.c **** 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 206


3679:Core/Src/deca_device.c ****         // Set cal direction and time
3680:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGCCTRL_OFFSET, TC_PGCCTRL_DIR_CONV | TC_PGCCTRL_TMEAS
 7254              		.loc 1 3680 9 view .LVU1796
 7255 0074 BC22     		movs	r2, #188
 7256 0076 0821     		movs	r1, #8
 7257 0078 2A20     		movs	r0, #42
 7258 007a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 7259              	.LVL728:
3681:Core/Src/deca_device.c **** 
3682:Core/Src/deca_device.c ****         // Start cal
3683:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGCCTRL_OFFSET, TC_PGCCTRL_DIR_CONV | TC_PGCCTRL_TMEAS
 7260              		.loc 1 3683 9 view .LVU1797
 7261 007e BD22     		movs	r2, #189
 7262 0080 0821     		movs	r1, #8
 7263 0082 2A20     		movs	r0, #42
 7264 0084 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 7265              	.LVL729:
3684:Core/Src/deca_device.c ****         // Allow cal to complete
3685:Core/Src/deca_device.c ****         deca_sleep(1);
 7266              		.loc 1 3685 9 view .LVU1798
 7267 0088 0120     		movs	r0, #1
 7268 008a FFF7FEFF 		bl	deca_sleep
 7269              	.LVL730:
3686:Core/Src/deca_device.c **** 
3687:Core/Src/deca_device.c ****         // Read count value from the PG cal block
3688:Core/Src/deca_device.c ****         raw_count = dwt_read16bitoffsetreg(TX_CAL_ID, TC_PGCAL_STATUS_OFFSET) & TC_PGCAL_STATUS_DEL
 7270              		.loc 1 3688 9 view .LVU1799
 7271              		.loc 1 3688 21 is_stmt 0 view .LVU1800
 7272 008e 0921     		movs	r1, #9
 7273 0090 2A20     		movs	r0, #42
 7274 0092 FFF7FEFF 		bl	dwt_read16bitoffsetreg
 7275              	.LVL731:
 7276              		.loc 1 3688 19 view .LVU1801
 7277 0096 C0F30B00 		ubfx	r0, r0, #0, #12
 7278              	.LVL732:
3689:Core/Src/deca_device.c **** 
3690:Core/Src/deca_device.c ****         // lets keep track of the closest value to the target in case we overshoot
3691:Core/Src/deca_device.c ****         delta_count = abs((int)raw_count - (int)target_count);
 7279              		.loc 1 3691 9 is_stmt 1 view .LVU1802
 7280              		.loc 1 3691 42 is_stmt 0 view .LVU1803
 7281 009a C31B     		subs	r3, r0, r7
 7282              		.loc 1 3691 21 view .LVU1804
 7283 009c 002B     		cmp	r3, #0
 7284 009e B8BF     		it	lt
 7285 00a0 5B42     		rsblt	r3, r3, #0
 7286              	.LVL733:
3692:Core/Src/deca_device.c ****         if (delta_count < delta_lowest)
 7287              		.loc 1 3692 9 is_stmt 1 view .LVU1805
 7288              		.loc 1 3692 12 is_stmt 0 view .LVU1806
 7289 00a2 9845     		cmp	r8, r3
 7290 00a4 01DD     		ble	.L433
3693:Core/Src/deca_device.c ****         {
3694:Core/Src/deca_device.c ****             delta_lowest = delta_count;
 7291              		.loc 1 3694 13 is_stmt 1 view .LVU1807
 7292              	.LVL734:
3695:Core/Src/deca_device.c ****             best_bw = curr_bw;
 7293              		.loc 1 3695 13 view .LVU1808
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 207


 7294              		.loc 1 3695 21 is_stmt 0 view .LVU1809
 7295 00a6 A146     		mov	r9, r4
 7296              	.LVL735:
3694:Core/Src/deca_device.c ****             best_bw = curr_bw;
 7297              		.loc 1 3694 26 view .LVU1810
 7298 00a8 9846     		mov	r8, r3
 7299              	.LVL736:
 7300              	.L433:
3696:Core/Src/deca_device.c ****         }
3697:Core/Src/deca_device.c **** 
3698:Core/Src/deca_device.c ****         // Test the count results
3699:Core/Src/deca_device.c ****         if (raw_count > target_count)
 7301              		.loc 1 3699 9 is_stmt 1 view .LVU1811
 7302              		.loc 1 3699 12 is_stmt 0 view .LVU1812
 7303 00aa B842     		cmp	r0, r7
 7304 00ac D7D8     		bhi	.L434
3700:Core/Src/deca_device.c ****             // Count was lower, BW was lower so increase PG DELAY
3701:Core/Src/deca_device.c ****             curr_bw = curr_bw | bit_field;
3702:Core/Src/deca_device.c ****         else
3703:Core/Src/deca_device.c ****             // Count was higher
3704:Core/Src/deca_device.c ****             curr_bw = curr_bw & (~(bit_field));
 7305              		.loc 1 3704 13 is_stmt 1 view .LVU1813
 7306              		.loc 1 3704 21 is_stmt 0 view .LVU1814
 7307 00ae 24EA0504 		bic	r4, r4, r5
 7308              	.LVL737:
 7309              		.loc 1 3704 21 view .LVU1815
 7310 00b2 D4E7     		b	.L434
 7311              	.LVL738:
 7312              	.L437:
3705:Core/Src/deca_device.c ****     }
3706:Core/Src/deca_device.c **** 
3707:Core/Src/deca_device.c ****     // Restore old register values
3708:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, old_pmsc_ctrl0);
 7313              		.loc 1 3708 5 is_stmt 1 view .LVU1816
 7314 00b4 5A46     		mov	r2, fp
 7315 00b6 0021     		movs	r1, #0
 7316 00b8 3620     		movs	r0, #54
 7317 00ba FFF7FEFF 		bl	dwt_write8bitoffsetreg
 7318              	.LVL739:
3709:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET, old_pmsc_ctrl1);
 7319              		.loc 1 3709 5 view .LVU1817
 7320 00be 5246     		mov	r2, r10
 7321 00c0 0421     		movs	r1, #4
 7322 00c2 3620     		movs	r0, #54
 7323 00c4 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 7324              	.LVL740:
3710:Core/Src/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, old_rf_conf_txpow_mask);
 7325              		.loc 1 3710 5 view .LVU1818
 7326 00c8 019A     		ldr	r2, [sp, #4]
 7327 00ca 0021     		movs	r1, #0
 7328 00cc 2820     		movs	r0, #40
 7329 00ce FFF7FEFF 		bl	dwt_write32bitoffsetreg
 7330              	.LVL741:
3711:Core/Src/deca_device.c **** 
3712:Core/Src/deca_device.c ****     // Returns the best PG_DELAY setting
3713:Core/Src/deca_device.c ****     return best_bw;
 7331              		.loc 1 3713 5 view .LVU1819
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 208


3714:Core/Src/deca_device.c **** }
 7332              		.loc 1 3714 1 is_stmt 0 view .LVU1820
 7333 00d2 4846     		mov	r0, r9
 7334 00d4 03B0     		add	sp, sp, #12
 7335              	.LCFI131:
 7336              		.cfi_def_cfa_offset 36
 7337              		@ sp needed
 7338 00d6 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 7339              	.LVL742:
 7340              	.L439:
 7341              		.loc 1 3714 1 view .LVU1821
 7342 00da 00BF     		.align	2
 7343              	.L438:
 7344 00dc 00A71F00 		.word	2074368
 7345              		.cfi_endproc
 7346              	.LFE100:
 7348              		.section	.text._dwt_computetxpowersetting,"ax",%progbits
 7349              		.align	1
 7350              		.global	_dwt_computetxpowersetting
 7351              		.syntax unified
 7352              		.thumb
 7353              		.thumb_func
 7355              	_dwt_computetxpowersetting:
 7356              	.LVL743:
 7357              	.LFB101:
3715:Core/Src/deca_device.c **** 
3716:Core/Src/deca_device.c **** 
3717:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3718:Core/Src/deca_device.c ****  * @fn _dwt_computetxpowersetting()
3719:Core/Src/deca_device.c ****  *
3720:Core/Src/deca_device.c ****  * @brief this function calculates the appropriate change to the TX_POWER register to compensate
3721:Core/Src/deca_device.c ****  * the TX power output at different temperatures.
3722:Core/Src/deca_device.c ****  *
3723:Core/Src/deca_device.c ****  * input parameters:
3724:Core/Src/deca_device.c ****  * @param ref_powerreg - uint32 - the TX_POWER register value recorded when reference measurements 
3725:Core/Src/deca_device.c ****  * @param power_adj - uint32 - the adjustment in power level to be made, in 0.5dB steps
3726:Core/Src/deca_device.c ****  *
3727:Core/Src/deca_device.c ****  * output parameters:
3728:Core/Src/deca_device.c ****  *
3729:Core/Src/deca_device.c ****  * returns: (uint32) The setting to be programmed into the TX_POWER register
3730:Core/Src/deca_device.c ****  */
3731:Core/Src/deca_device.c **** uint32 _dwt_computetxpowersetting(uint32 ref_powerreg, int32 power_adj)
3732:Core/Src/deca_device.c **** {
 7358              		.loc 1 3732 1 is_stmt 1 view -0
 7359              		.cfi_startproc
 7360              		@ args = 0, pretend = 0, frame = 0
 7361              		@ frame_needed = 0, uses_anonymous_args = 0
 7362              		.loc 1 3732 1 is_stmt 0 view .LVU1823
 7363 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 7364              	.LCFI132:
 7365              		.cfi_def_cfa_offset 24
 7366              		.cfi_offset 4, -24
 7367              		.cfi_offset 5, -20
 7368              		.cfi_offset 6, -16
 7369              		.cfi_offset 7, -12
 7370              		.cfi_offset 8, -8
 7371              		.cfi_offset 14, -4
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 209


 7372 0004 0446     		mov	r4, r0
3733:Core/Src/deca_device.c ****     int8 da_attn_change, mixer_gain_change;
 7373              		.loc 1 3733 5 is_stmt 1 view .LVU1824
3734:Core/Src/deca_device.c ****     uint8 current_da_attn, current_mixer_gain;
 7374              		.loc 1 3734 5 view .LVU1825
3735:Core/Src/deca_device.c ****     uint8 new_da_attn, new_mixer_gain;
 7375              		.loc 1 3735 5 view .LVU1826
3736:Core/Src/deca_device.c ****     uint32 new_regval = 0;
 7376              		.loc 1 3736 5 view .LVU1827
 7377              	.LVL744:
3737:Core/Src/deca_device.c ****     int i;
 7378              		.loc 1 3737 5 view .LVU1828
3738:Core/Src/deca_device.c **** 
3739:Core/Src/deca_device.c ****     for(i = 0; i < 4; i++)
 7379              		.loc 1 3739 5 view .LVU1829
 7380              		.loc 1 3739 11 is_stmt 0 view .LVU1830
 7381 0006 4FF0000E 		mov	lr, #0
3736:Core/Src/deca_device.c ****     int i;
 7382              		.loc 1 3736 12 view .LVU1831
 7383 000a 7046     		mov	r0, lr
 7384              	.LVL745:
 7385              		.loc 1 3739 5 view .LVU1832
 7386 000c 27E0     		b	.L441
 7387              	.LVL746:
 7388              	.L443:
3740:Core/Src/deca_device.c ****     {
3741:Core/Src/deca_device.c ****         da_attn_change = 0;
3742:Core/Src/deca_device.c ****         mixer_gain_change = power_adj;
3743:Core/Src/deca_device.c ****         current_da_attn = ((ref_powerreg >> (i*8)) & 0xE0) >> 5;
3744:Core/Src/deca_device.c ****         current_mixer_gain = (ref_powerreg >> (i*8)) & 0x1F;
3745:Core/Src/deca_device.c **** 
3746:Core/Src/deca_device.c ****         // Mixer gain gives best performance between gain value of 4 and 20
3747:Core/Src/deca_device.c ****         while((current_mixer_gain + mixer_gain_change < 4) ||
3748:Core/Src/deca_device.c ****               (current_mixer_gain + mixer_gain_change > 20))
3749:Core/Src/deca_device.c ****         {
3750:Core/Src/deca_device.c ****             // If mixer gain goes outside bounds, adjust the DA attenuation to compensate
3751:Core/Src/deca_device.c ****             if(current_mixer_gain + mixer_gain_change > 20)
3752:Core/Src/deca_device.c ****             {
3753:Core/Src/deca_device.c ****                 da_attn_change -= 1;
3754:Core/Src/deca_device.c **** 
3755:Core/Src/deca_device.c ****                 if(da_attn_change == 0) //DA attenuation has reached the max value
3756:Core/Src/deca_device.c ****                 {
3757:Core/Src/deca_device.c ****                     da_attn_change = 1; //restore the value and exit the loop - DA is at max allowe
3758:Core/Src/deca_device.c ****                     break;
3759:Core/Src/deca_device.c ****                 }
3760:Core/Src/deca_device.c **** 
3761:Core/Src/deca_device.c ****                 mixer_gain_change -= (int8) (MIX_DA_FACTOR);
3762:Core/Src/deca_device.c ****             }
3763:Core/Src/deca_device.c ****             else if(current_mixer_gain + mixer_gain_change < 4)
 7389              		.loc 1 3763 18 is_stmt 1 view .LVU1833
 7390              		.loc 1 3763 20 is_stmt 0 view .LVU1834
 7391 000e BCF1030F 		cmp	ip, #3
 7392 0012 05DC     		bgt	.L442
3764:Core/Src/deca_device.c ****             {
3765:Core/Src/deca_device.c ****                 da_attn_change += 1;
 7393              		.loc 1 3765 17 is_stmt 1 view .LVU1835
 7394              		.loc 1 3765 32 is_stmt 0 view .LVU1836
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 210


 7395 0014 0132     		adds	r2, r2, #1
 7396              	.LVL747:
 7397              		.loc 1 3765 32 view .LVU1837
 7398 0016 52B2     		sxtb	r2, r2
 7399              	.LVL748:
3766:Core/Src/deca_device.c **** 
3767:Core/Src/deca_device.c ****                 if(da_attn_change == 0x8) //DA attenuation has reached the min value
 7400              		.loc 1 3767 17 is_stmt 1 view .LVU1838
 7401              		.loc 1 3767 19 is_stmt 0 view .LVU1839
 7402 0018 082A     		cmp	r2, #8
 7403 001a 2ED0     		beq	.L449
3768:Core/Src/deca_device.c ****                 {
3769:Core/Src/deca_device.c ****                     da_attn_change = 7; //restore the value and exit the loop - DA is at min allowe
3770:Core/Src/deca_device.c ****                     break;
3771:Core/Src/deca_device.c ****                 }
3772:Core/Src/deca_device.c **** 
3773:Core/Src/deca_device.c ****                 mixer_gain_change += (int8) (MIX_DA_FACTOR);
 7404              		.loc 1 3773 17 is_stmt 1 view .LVU1840
 7405              		.loc 1 3773 35 is_stmt 0 view .LVU1841
 7406 001c 0533     		adds	r3, r3, #5
 7407              	.LVL749:
 7408              		.loc 1 3773 35 view .LVU1842
 7409 001e 5BB2     		sxtb	r3, r3
 7410              	.LVL750:
 7411              	.L442:
3747:Core/Src/deca_device.c ****               (current_mixer_gain + mixer_gain_change > 20))
 7412              		.loc 1 3747 14 is_stmt 1 view .LVU1843
3747:Core/Src/deca_device.c ****               (current_mixer_gain + mixer_gain_change > 20))
 7413              		.loc 1 3747 35 is_stmt 0 view .LVU1844
 7414 0020 07EB030C 		add	ip, r7, r3
3747:Core/Src/deca_device.c ****               (current_mixer_gain + mixer_gain_change > 20))
 7415              		.loc 1 3747 60 view .LVU1845
 7416 0024 ACF10408 		sub	r8, ip, #4
3747:Core/Src/deca_device.c ****               (current_mixer_gain + mixer_gain_change > 20))
 7417              		.loc 1 3747 14 view .LVU1846
 7418 0028 B8F1100F 		cmp	r8, #16
 7419 002c 09D9     		bls	.L444
3751:Core/Src/deca_device.c ****             {
 7420              		.loc 1 3751 13 is_stmt 1 view .LVU1847
3751:Core/Src/deca_device.c ****             {
 7421              		.loc 1 3751 15 is_stmt 0 view .LVU1848
 7422 002e BCF1140F 		cmp	ip, #20
 7423 0032 ECDD     		ble	.L443
3753:Core/Src/deca_device.c **** 
 7424              		.loc 1 3753 17 is_stmt 1 view .LVU1849
3753:Core/Src/deca_device.c **** 
 7425              		.loc 1 3753 32 is_stmt 0 view .LVU1850
 7426 0034 013A     		subs	r2, r2, #1
 7427              	.LVL751:
3753:Core/Src/deca_device.c **** 
 7428              		.loc 1 3753 32 view .LVU1851
 7429 0036 52B2     		sxtb	r2, r2
 7430              	.LVL752:
3755:Core/Src/deca_device.c ****                 {
 7431              		.loc 1 3755 17 is_stmt 1 view .LVU1852
3755:Core/Src/deca_device.c ****                 {
 7432              		.loc 1 3755 19 is_stmt 0 view .LVU1853
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 211


 7433 0038 12B1     		cbz	r2, .L448
3761:Core/Src/deca_device.c ****             }
 7434              		.loc 1 3761 17 is_stmt 1 view .LVU1854
3761:Core/Src/deca_device.c ****             }
 7435              		.loc 1 3761 35 is_stmt 0 view .LVU1855
 7436 003a 053B     		subs	r3, r3, #5
 7437              	.LVL753:
3761:Core/Src/deca_device.c ****             }
 7438              		.loc 1 3761 35 view .LVU1856
 7439 003c 5BB2     		sxtb	r3, r3
 7440              	.LVL754:
3761:Core/Src/deca_device.c ****             }
 7441              		.loc 1 3761 35 view .LVU1857
 7442 003e EFE7     		b	.L442
 7443              	.L448:
3757:Core/Src/deca_device.c ****                     break;
 7444              		.loc 1 3757 36 view .LVU1858
 7445 0040 0122     		movs	r2, #1
 7446              	.LVL755:
 7447              	.L444:
3774:Core/Src/deca_device.c ****             }
3775:Core/Src/deca_device.c ****         }
3776:Core/Src/deca_device.c **** 
3777:Core/Src/deca_device.c ****         new_da_attn = (current_da_attn + da_attn_change) & 0x7;
 7448              		.loc 1 3777 9 is_stmt 1 discriminator 2 view .LVU1859
 7449              		.loc 1 3777 58 is_stmt 0 discriminator 2 view .LVU1860
 7450 0042 D2B2     		uxtb	r2, r2
 7451              	.LVL756:
3778:Core/Src/deca_device.c ****         new_mixer_gain = (current_mixer_gain + mixer_gain_change) & 0x1F;
 7452              		.loc 1 3778 9 is_stmt 1 discriminator 2 view .LVU1861
 7453              		.loc 1 3778 67 is_stmt 0 discriminator 2 view .LVU1862
 7454 0044 DBB2     		uxtb	r3, r3
 7455              		.loc 1 3778 46 discriminator 2 view .LVU1863
 7456 0046 3B44     		add	r3, r3, r7
 7457              	.LVL757:
 7458              		.loc 1 3778 24 discriminator 2 view .LVU1864
 7459 0048 03F01F03 		and	r3, r3, #31
 7460              	.LVL758:
3779:Core/Src/deca_device.c **** 
3780:Core/Src/deca_device.c ****         new_regval |= ((uint32) ((new_da_attn << 5) | new_mixer_gain)) << (i * 8);
 7461              		.loc 1 3780 9 is_stmt 1 discriminator 2 view .LVU1865
 7462              		.loc 1 3780 47 is_stmt 0 discriminator 2 view .LVU1866
 7463 004c 3244     		add	r2, r2, r6
 7464              	.LVL759:
 7465              		.loc 1 3780 47 discriminator 2 view .LVU1867
 7466 004e 02F00702 		and	r2, r2, #7
 7467              		.loc 1 3780 53 discriminator 2 view .LVU1868
 7468 0052 43EA4213 		orr	r3, r3, r2, lsl #5
 7469              	.LVL760:
 7470              		.loc 1 3780 72 discriminator 2 view .LVU1869
 7471 0056 AB40     		lsls	r3, r3, r5
 7472              		.loc 1 3780 20 discriminator 2 view .LVU1870
 7473 0058 1843     		orrs	r0, r0, r3
 7474              	.LVL761:
3739:Core/Src/deca_device.c ****     {
 7475              		.loc 1 3739 23 is_stmt 1 discriminator 2 view .LVU1871
3739:Core/Src/deca_device.c ****     {
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 212


 7476              		.loc 1 3739 24 is_stmt 0 discriminator 2 view .LVU1872
 7477 005a 0EF1010E 		add	lr, lr, #1
 7478              	.LVL762:
 7479              	.L441:
3739:Core/Src/deca_device.c ****     {
 7480              		.loc 1 3739 16 is_stmt 1 discriminator 1 view .LVU1873
3739:Core/Src/deca_device.c ****     {
 7481              		.loc 1 3739 5 is_stmt 0 discriminator 1 view .LVU1874
 7482 005e BEF1030F 		cmp	lr, #3
 7483 0062 0CDC     		bgt	.L451
3741:Core/Src/deca_device.c ****         mixer_gain_change = power_adj;
 7484              		.loc 1 3741 9 is_stmt 1 view .LVU1875
 7485              	.LVL763:
3742:Core/Src/deca_device.c ****         current_da_attn = ((ref_powerreg >> (i*8)) & 0xE0) >> 5;
 7486              		.loc 1 3742 9 view .LVU1876
3742:Core/Src/deca_device.c ****         current_da_attn = ((ref_powerreg >> (i*8)) & 0xE0) >> 5;
 7487              		.loc 1 3742 27 is_stmt 0 view .LVU1877
 7488 0064 4BB2     		sxtb	r3, r1
 7489              	.LVL764:
3743:Core/Src/deca_device.c ****         current_mixer_gain = (ref_powerreg >> (i*8)) & 0x1F;
 7490              		.loc 1 3743 9 is_stmt 1 view .LVU1878
3743:Core/Src/deca_device.c ****         current_mixer_gain = (ref_powerreg >> (i*8)) & 0x1F;
 7491              		.loc 1 3743 47 is_stmt 0 view .LVU1879
 7492 0066 4FEACE05 		lsl	r5, lr, #3
3743:Core/Src/deca_device.c ****         current_mixer_gain = (ref_powerreg >> (i*8)) & 0x1F;
 7493              		.loc 1 3743 42 view .LVU1880
 7494 006a 24FA05F7 		lsr	r7, r4, r5
3743:Core/Src/deca_device.c ****         current_mixer_gain = (ref_powerreg >> (i*8)) & 0x1F;
 7495              		.loc 1 3743 60 view .LVU1881
 7496 006e C7F34716 		ubfx	r6, r7, #5, #8
 7497              	.LVL765:
3744:Core/Src/deca_device.c **** 
 7498              		.loc 1 3744 9 is_stmt 1 view .LVU1882
3744:Core/Src/deca_device.c **** 
 7499              		.loc 1 3744 28 is_stmt 0 view .LVU1883
 7500 0072 07F01F07 		and	r7, r7, #31
 7501              	.LVL766:
3747:Core/Src/deca_device.c ****               (current_mixer_gain + mixer_gain_change > 20))
 7502              		.loc 1 3747 9 is_stmt 1 view .LVU1884
3741:Core/Src/deca_device.c ****         mixer_gain_change = power_adj;
 7503              		.loc 1 3741 24 is_stmt 0 view .LVU1885
 7504 0076 0022     		movs	r2, #0
3747:Core/Src/deca_device.c ****               (current_mixer_gain + mixer_gain_change > 20))
 7505              		.loc 1 3747 14 view .LVU1886
 7506 0078 D2E7     		b	.L442
 7507              	.LVL767:
 7508              	.L449:
3769:Core/Src/deca_device.c ****                     break;
 7509              		.loc 1 3769 36 view .LVU1887
 7510 007a 0722     		movs	r2, #7
 7511              	.LVL768:
3769:Core/Src/deca_device.c ****                     break;
 7512              		.loc 1 3769 36 view .LVU1888
 7513 007c E1E7     		b	.L444
 7514              	.LVL769:
 7515              	.L451:
3781:Core/Src/deca_device.c ****     }
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 213


3782:Core/Src/deca_device.c **** 
3783:Core/Src/deca_device.c ****     return (uint32)new_regval;
 7516              		.loc 1 3783 5 is_stmt 1 view .LVU1889
3784:Core/Src/deca_device.c **** }
 7517              		.loc 1 3784 1 is_stmt 0 view .LVU1890
 7518 007e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 7519              		.loc 1 3784 1 view .LVU1891
 7520              		.cfi_endproc
 7521              	.LFE101:
 7523              		.section	.text.dwt_calcpowertempadj,"ax",%progbits
 7524              		.align	1
 7525              		.global	dwt_calcpowertempadj
 7526              		.syntax unified
 7527              		.thumb
 7528              		.thumb_func
 7530              	dwt_calcpowertempadj:
 7531              	.LVL770:
 7532              	.LFB102:
3785:Core/Src/deca_device.c **** 
3786:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3787:Core/Src/deca_device.c ****  * @fn dwt_calcpowertempadj()
3788:Core/Src/deca_device.c ****  *
3789:Core/Src/deca_device.c ****  * @brief this function determines the corrected power setting (TX_POWER setting) for the
3790:Core/Src/deca_device.c ****  * DW1000 which changes over temperature.
3791:Core/Src/deca_device.c ****  *
3792:Core/Src/deca_device.c ****  * Note: only ch2 or ch5 are supported, if other channel is used - the COMP factor should be calcul
3793:Core/Src/deca_device.c ****  *
3794:Core/Src/deca_device.c ****  * input parameters:
3795:Core/Src/deca_device.c ****  * @param channel - uint8 - the channel at which compensation of power level will be applied: 2 or 
3796:Core/Src/deca_device.c ****  * @param ref_powerreg - uint32 - the TX_POWER register value recorded when reference measurements 
3797:Core/Src/deca_device.c ****  * @param delta_temp - int - the difference between current ambient temperature (raw value units)
3798:Core/Src/deca_device.c ****  *                                  and the temperature at which reference measurements were made (
3799:Core/Src/deca_device.c **** 
3800:Core/Src/deca_device.c ****  * output parameters: None
3801:Core/Src/deca_device.c ****  *
3802:Core/Src/deca_device.c ****  * returns: (uint32) The corrected TX_POWER register value
3803:Core/Src/deca_device.c ****  */
3804:Core/Src/deca_device.c ****  uint32 dwt_calcpowertempadj(uint8 channel, uint32 ref_powerreg, int delta_temp)
3805:Core/Src/deca_device.c **** {
 7533              		.loc 1 3805 1 is_stmt 1 view -0
 7534              		.cfi_startproc
 7535              		@ args = 0, pretend = 0, frame = 0
 7536              		@ frame_needed = 0, uses_anonymous_args = 0
 7537              		.loc 1 3805 1 is_stmt 0 view .LVU1893
 7538 0000 10B5     		push	{r4, lr}
 7539              	.LCFI133:
 7540              		.cfi_def_cfa_offset 8
 7541              		.cfi_offset 4, -8
 7542              		.cfi_offset 14, -4
 7543 0002 0346     		mov	r3, r0
 7544 0004 0846     		mov	r0, r1
 7545              	.LVL771:
3806:Core/Src/deca_device.c ****     int8 delta_power;
 7546              		.loc 1 3806 5 is_stmt 1 view .LVU1894
3807:Core/Src/deca_device.c ****     int negative = 0;
 7547              		.loc 1 3807 5 view .LVU1895
3808:Core/Src/deca_device.c **** 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 214


3809:Core/Src/deca_device.c ****     if(delta_temp < 0)
 7548              		.loc 1 3809 5 view .LVU1896
 7549              		.loc 1 3809 7 is_stmt 0 view .LVU1897
 7550 0006 002A     		cmp	r2, #0
 7551              		.loc 1 3809 7 view .LVU1898
 7552 0008 08DB     		blt	.L461
3807:Core/Src/deca_device.c ****     int negative = 0;
 7553              		.loc 1 3807 9 view .LVU1899
 7554 000a 0024     		movs	r4, #0
 7555              	.LVL772:
 7556              	.L453:
3810:Core/Src/deca_device.c ****     {
3811:Core/Src/deca_device.c ****         negative = 1;
3812:Core/Src/deca_device.c ****         delta_temp = -delta_temp; //make (-)ve into (+)ve number
3813:Core/Src/deca_device.c ****     }
3814:Core/Src/deca_device.c **** 
3815:Core/Src/deca_device.c ****     // Calculate the expected power differential at the current temperature
3816:Core/Src/deca_device.c ****     if(channel == 5)
 7557              		.loc 1 3816 5 is_stmt 1 view .LVU1900
 7558              		.loc 1 3816 7 is_stmt 0 view .LVU1901
 7559 000c 052B     		cmp	r3, #5
 7560 000e 08D0     		beq	.L462
3817:Core/Src/deca_device.c ****     {
3818:Core/Src/deca_device.c ****         delta_power = ((delta_temp * TEMP_COMP_FACTOR_CH5) >> 12); //>>12 is same as /4096
3819:Core/Src/deca_device.c ****     }
3820:Core/Src/deca_device.c ****     else if(channel == 2)
 7561              		.loc 1 3820 10 is_stmt 1 view .LVU1902
 7562              		.loc 1 3820 12 is_stmt 0 view .LVU1903
 7563 0010 022B     		cmp	r3, #2
 7564 0012 0DD0     		beq	.L463
3821:Core/Src/deca_device.c ****     {
3822:Core/Src/deca_device.c ****         delta_power = ((delta_temp * TEMP_COMP_FACTOR_CH2) >> 12); //>>12 is same as /4096
3823:Core/Src/deca_device.c ****     }
3824:Core/Src/deca_device.c ****     else
3825:Core/Src/deca_device.c ****         delta_power = 0;
 7565              		.loc 1 3825 21 view .LVU1904
 7566 0014 0021     		movs	r1, #0
 7567              	.LVL773:
 7568              	.L455:
3826:Core/Src/deca_device.c **** 
3827:Core/Src/deca_device.c ****     if(negative == 1)
 7569              		.loc 1 3827 5 is_stmt 1 view .LVU1905
 7570              		.loc 1 3827 7 is_stmt 0 view .LVU1906
 7571 0016 94B9     		cbnz	r4, .L464
 7572              	.L456:
3828:Core/Src/deca_device.c ****     {
3829:Core/Src/deca_device.c ****         delta_power = -delta_power; //restore the sign
3830:Core/Src/deca_device.c ****     }
3831:Core/Src/deca_device.c **** 
3832:Core/Src/deca_device.c ****     if(delta_power == 0)
 7573              		.loc 1 3832 5 is_stmt 1 view .LVU1907
 7574              		.loc 1 3832 7 is_stmt 0 view .LVU1908
 7575 0018 A1B9     		cbnz	r1, .L465
 7576              	.LVL774:
 7577              	.L457:
3833:Core/Src/deca_device.c ****         return ref_powerreg ; //no change to power register
3834:Core/Src/deca_device.c **** 
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 215


3835:Core/Src/deca_device.c ****     // Adjust the TX_POWER register value
3836:Core/Src/deca_device.c ****     return _dwt_computetxpowersetting(ref_powerreg, delta_power);
3837:Core/Src/deca_device.c **** }
 7578              		.loc 1 3837 1 view .LVU1909
 7579 001a 10BD     		pop	{r4, pc}
 7580              	.LVL775:
 7581              	.L461:
3811:Core/Src/deca_device.c ****         delta_temp = -delta_temp; //make (-)ve into (+)ve number
 7582              		.loc 1 3811 9 is_stmt 1 view .LVU1910
3812:Core/Src/deca_device.c ****     }
 7583              		.loc 1 3812 9 view .LVU1911
3812:Core/Src/deca_device.c ****     }
 7584              		.loc 1 3812 20 is_stmt 0 view .LVU1912
 7585 001c 5242     		rsbs	r2, r2, #0
 7586              	.LVL776:
3811:Core/Src/deca_device.c ****         delta_temp = -delta_temp; //make (-)ve into (+)ve number
 7587              		.loc 1 3811 18 view .LVU1913
 7588 001e 0124     		movs	r4, #1
 7589 0020 F4E7     		b	.L453
 7590              	.LVL777:
 7591              	.L462:
3818:Core/Src/deca_device.c ****     }
 7592              		.loc 1 3818 9 is_stmt 1 view .LVU1914
3818:Core/Src/deca_device.c ****     }
 7593              		.loc 1 3818 36 is_stmt 0 view .LVU1915
 7594 0022 40F25F21 		movw	r1, #607
 7595 0026 01FB02F2 		mul	r2, r1, r2
 7596              	.LVL778:
3818:Core/Src/deca_device.c ****     }
 7597              		.loc 1 3818 21 view .LVU1916
 7598 002a 42F30731 		sbfx	r1, r2, #12, #8
 7599              	.LVL779:
3818:Core/Src/deca_device.c ****     }
 7600              		.loc 1 3818 21 view .LVU1917
 7601 002e F2E7     		b	.L455
 7602              	.LVL780:
 7603              	.L463:
3822:Core/Src/deca_device.c ****     }
 7604              		.loc 1 3822 9 is_stmt 1 view .LVU1918
3822:Core/Src/deca_device.c ****     }
 7605              		.loc 1 3822 36 is_stmt 0 view .LVU1919
 7606 0030 40F24711 		movw	r1, #327
 7607 0034 01FB02F2 		mul	r2, r1, r2
 7608              	.LVL781:
3822:Core/Src/deca_device.c ****     }
 7609              		.loc 1 3822 21 view .LVU1920
 7610 0038 42F30731 		sbfx	r1, r2, #12, #8
 7611              	.LVL782:
3822:Core/Src/deca_device.c ****     }
 7612              		.loc 1 3822 21 view .LVU1921
 7613 003c EBE7     		b	.L455
 7614              	.L464:
3829:Core/Src/deca_device.c ****     }
 7615              		.loc 1 3829 9 is_stmt 1 view .LVU1922
3829:Core/Src/deca_device.c ****     }
 7616              		.loc 1 3829 21 is_stmt 0 view .LVU1923
 7617 003e 4A42     		rsbs	r2, r1, #0
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 216


 7618 0040 51B2     		sxtb	r1, r2
 7619              	.LVL783:
3829:Core/Src/deca_device.c ****     }
 7620              		.loc 1 3829 21 view .LVU1924
 7621 0042 E9E7     		b	.L456
 7622              	.L465:
3836:Core/Src/deca_device.c **** }
 7623              		.loc 1 3836 5 is_stmt 1 view .LVU1925
3836:Core/Src/deca_device.c **** }
 7624              		.loc 1 3836 12 is_stmt 0 view .LVU1926
 7625 0044 FFF7FEFF 		bl	_dwt_computetxpowersetting
 7626              	.LVL784:
3836:Core/Src/deca_device.c **** }
 7627              		.loc 1 3836 12 view .LVU1927
 7628 0048 E7E7     		b	.L457
 7629              		.cfi_endproc
 7630              	.LFE102:
 7632              		.section	.text.dwt_calcpgcount,"ax",%progbits
 7633              		.align	1
 7634              		.global	dwt_calcpgcount
 7635              		.syntax unified
 7636              		.thumb
 7637              		.thumb_func
 7639              	dwt_calcpgcount:
 7640              	.LVL785:
 7641              	.LFB103:
3838:Core/Src/deca_device.c **** 
3839:Core/Src/deca_device.c **** /*! -----------------------------------------------------------------------------------------------
3840:Core/Src/deca_device.c ****  * @fn dwt_calcpgcount()
3841:Core/Src/deca_device.c ****  *
3842:Core/Src/deca_device.c ****  * @brief this function calculates the value in the pulse generator counter register (PGC_STATUS) f
3843:Core/Src/deca_device.c ****  * This is used to take a reference measurement, and the value recorded as the reference is used to
3844:Core/Src/deca_device.c ****  * bandwidth of the device when the temperature changes.
3845:Core/Src/deca_device.c ****  *
3846:Core/Src/deca_device.c ****  * NOTE 1: SPI Frequency must be < 3MHz.
3847:Core/Src/deca_device.c ****  * NOTE 2: The sleep to allow the calibration to complete is set to 1ms here, but can be as low as 
3848:Core/Src/deca_device.c ****  *
3849:Core/Src/deca_device.c ****  * input parameters:
3850:Core/Src/deca_device.c ****  * @param pgdly - uint8 - the PG_DELAY to set (to control bandwidth), and to find the corresponding
3851:Core/Src/deca_device.c ****  * output parameters: None
3852:Core/Src/deca_device.c ****  *
3853:Core/Src/deca_device.c ****  * returns: (uint16) PGC_STATUS count value calculated from the provided PG_DELAY value - used as r
3854:Core/Src/deca_device.c ****  * bandwidth adjustments
3855:Core/Src/deca_device.c ****  */
3856:Core/Src/deca_device.c **** uint16 dwt_calcpgcount(uint8 pgdly)
3857:Core/Src/deca_device.c **** {
 7642              		.loc 1 3857 1 is_stmt 1 view -0
 7643              		.cfi_startproc
 7644              		@ args = 0, pretend = 0, frame = 0
 7645              		@ frame_needed = 0, uses_anonymous_args = 0
 7646              		.loc 1 3857 1 is_stmt 0 view .LVU1929
 7647 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 7648              	.LCFI134:
 7649              		.cfi_def_cfa_offset 32
 7650              		.cfi_offset 3, -32
 7651              		.cfi_offset 4, -28
 7652              		.cfi_offset 5, -24
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 217


 7653              		.cfi_offset 6, -20
 7654              		.cfi_offset 7, -16
 7655              		.cfi_offset 8, -12
 7656              		.cfi_offset 9, -8
 7657              		.cfi_offset 14, -4
 7658 0004 0646     		mov	r6, r0
3858:Core/Src/deca_device.c ****     // Perform PG count read ten times and take an average to smooth out any noise
3859:Core/Src/deca_device.c ****     const int NUM_SAMPLES = 10;
 7659              		.loc 1 3859 5 is_stmt 1 view .LVU1930
 7660              	.LVL786:
3860:Core/Src/deca_device.c ****     uint32 sum_count = 0;
 7661              		.loc 1 3860 5 view .LVU1931
3861:Core/Src/deca_device.c ****     uint16 average_count = 0, count = 0;
 7662              		.loc 1 3861 5 view .LVU1932
3862:Core/Src/deca_device.c ****     int i = 0;
 7663              		.loc 1 3862 5 view .LVU1933
3863:Core/Src/deca_device.c **** 
3864:Core/Src/deca_device.c ****     // Used to store the current values of the registers so that they can be restored after
3865:Core/Src/deca_device.c ****     uint8 old_pmsc_ctrl0;
 7664              		.loc 1 3865 5 view .LVU1934
3866:Core/Src/deca_device.c ****     uint16 old_pmsc_ctrl1;
 7665              		.loc 1 3866 5 view .LVU1935
3867:Core/Src/deca_device.c ****     uint32 old_rf_conf_txpow_mask;
 7666              		.loc 1 3867 5 view .LVU1936
3868:Core/Src/deca_device.c **** 
3869:Core/Src/deca_device.c ****     // Record the current values of these registers, to restore later
3870:Core/Src/deca_device.c ****     old_pmsc_ctrl0 = dwt_read8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET);
 7667              		.loc 1 3870 5 view .LVU1937
 7668              		.loc 1 3870 22 is_stmt 0 view .LVU1938
 7669 0006 0021     		movs	r1, #0
 7670 0008 3620     		movs	r0, #54
 7671              	.LVL787:
 7672              		.loc 1 3870 22 view .LVU1939
 7673 000a FFF7FEFF 		bl	dwt_read8bitoffsetreg
 7674              	.LVL788:
 7675 000e 8146     		mov	r9, r0
 7676              	.LVL789:
3871:Core/Src/deca_device.c ****     old_pmsc_ctrl1 = dwt_read16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET);
 7677              		.loc 1 3871 5 is_stmt 1 view .LVU1940
 7678              		.loc 1 3871 22 is_stmt 0 view .LVU1941
 7679 0010 0421     		movs	r1, #4
 7680 0012 3620     		movs	r0, #54
 7681 0014 FFF7FEFF 		bl	dwt_read16bitoffsetreg
 7682              	.LVL790:
 7683 0018 8046     		mov	r8, r0
 7684              	.LVL791:
3872:Core/Src/deca_device.c ****     old_rf_conf_txpow_mask = dwt_read32bitreg(RF_CONF_ID);
 7685              		.loc 1 3872 5 is_stmt 1 view .LVU1942
 7686              		.loc 1 3872 30 is_stmt 0 view .LVU1943
 7687 001a 0021     		movs	r1, #0
 7688 001c 2820     		movs	r0, #40
 7689 001e FFF7FEFF 		bl	dwt_read32bitoffsetreg
 7690              	.LVL792:
 7691 0022 0746     		mov	r7, r0
 7692              	.LVL793:
3873:Core/Src/deca_device.c **** 
3874:Core/Src/deca_device.c ****     //  Set clock to XTAL
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 218


3875:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, PMSC_CTRL0_SYSCLKS_19M);
 7693              		.loc 1 3875 5 is_stmt 1 view .LVU1944
 7694 0024 0122     		movs	r2, #1
 7695 0026 0021     		movs	r1, #0
 7696 0028 3620     		movs	r0, #54
 7697              	.LVL794:
 7698              		.loc 1 3875 5 is_stmt 0 view .LVU1945
 7699 002a FFF7FEFF 		bl	dwt_write8bitoffsetreg
 7700              	.LVL795:
3876:Core/Src/deca_device.c ****     //  Disable sequencing
3877:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET, PMSC_CTRL1_PKTSEQ_DISABLE);
 7701              		.loc 1 3877 5 is_stmt 1 view .LVU1946
 7702 002e 0022     		movs	r2, #0
 7703 0030 0421     		movs	r1, #4
 7704 0032 3620     		movs	r0, #54
 7705 0034 FFF7FEFF 		bl	dwt_write16bitoffsetreg
 7706              	.LVL796:
3878:Core/Src/deca_device.c ****     //  Turn on CLK PLL, Mix Bias and PG
3879:Core/Src/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, RF_CONF_TXPOW_MASK | RF_CONF_PGMIXBIASEN_MASK);
 7707              		.loc 1 3879 5 view .LVU1947
 7708 0038 1F4A     		ldr	r2, .L470
 7709 003a 0021     		movs	r1, #0
 7710 003c 2820     		movs	r0, #40
 7711 003e FFF7FEFF 		bl	dwt_write32bitoffsetreg
 7712              	.LVL797:
3880:Core/Src/deca_device.c ****     //  Set sys and TX clock to PLL
3881:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, PMSC_CTRL0_SYSCLKS_125M | PMSC_CTRL0_TXCLKS_
 7713              		.loc 1 3881 5 view .LVU1948
 7714 0042 2222     		movs	r2, #34
 7715 0044 0021     		movs	r1, #0
 7716 0046 3620     		movs	r0, #54
 7717 0048 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 7718              	.LVL798:
3882:Core/Src/deca_device.c **** 
3883:Core/Src/deca_device.c ****     for(i = 0; i < NUM_SAMPLES; i++) {
 7719              		.loc 1 3883 5 view .LVU1949
 7720              		.loc 1 3883 11 is_stmt 0 view .LVU1950
 7721 004c 0024     		movs	r4, #0
3860:Core/Src/deca_device.c ****     uint16 average_count = 0, count = 0;
 7722              		.loc 1 3860 12 view .LVU1951
 7723 004e 2546     		mov	r5, r4
 7724              		.loc 1 3883 5 view .LVU1952
 7725 0050 19E0     		b	.L467
 7726              	.LVL799:
 7727              	.L468:
3884:Core/Src/deca_device.c ****         // Write bw setting to PG_DELAY register
3885:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGDELAY_OFFSET, pgdly);
 7728              		.loc 1 3885 9 is_stmt 1 discriminator 3 view .LVU1953
 7729 0052 3246     		mov	r2, r6
 7730 0054 0B21     		movs	r1, #11
 7731 0056 2A20     		movs	r0, #42
 7732 0058 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 7733              	.LVL800:
3886:Core/Src/deca_device.c **** 
3887:Core/Src/deca_device.c ****         // Set cal direction and time
3888:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGCCTRL_OFFSET, TC_PGCCTRL_DIR_CONV | TC_PGCCTRL_TMEAS
 7734              		.loc 1 3888 9 discriminator 3 view .LVU1954
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 219


 7735 005c BC22     		movs	r2, #188
 7736 005e 0821     		movs	r1, #8
 7737 0060 2A20     		movs	r0, #42
 7738 0062 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 7739              	.LVL801:
3889:Core/Src/deca_device.c **** 
3890:Core/Src/deca_device.c ****         // Start cal
3891:Core/Src/deca_device.c ****         dwt_write8bitoffsetreg(TX_CAL_ID, TC_PGCCTRL_OFFSET, TC_PGCCTRL_DIR_CONV | TC_PGCCTRL_TMEAS
 7740              		.loc 1 3891 9 discriminator 3 view .LVU1955
 7741 0066 BD22     		movs	r2, #189
 7742 0068 0821     		movs	r1, #8
 7743 006a 2A20     		movs	r0, #42
 7744 006c FFF7FEFF 		bl	dwt_write8bitoffsetreg
 7745              	.LVL802:
3892:Core/Src/deca_device.c **** 
3893:Core/Src/deca_device.c ****         // Allow cal to complete - the TC_PGCCTRL_CALSTART bit will clear automatically
3894:Core/Src/deca_device.c ****         deca_sleep(1);
 7746              		.loc 1 3894 9 discriminator 3 view .LVU1956
 7747 0070 0120     		movs	r0, #1
 7748 0072 FFF7FEFF 		bl	deca_sleep
 7749              	.LVL803:
3895:Core/Src/deca_device.c **** 
3896:Core/Src/deca_device.c ****         // Read count value from the PG cal block
3897:Core/Src/deca_device.c ****         count = dwt_read16bitoffsetreg(TX_CAL_ID, TC_PGCAL_STATUS_OFFSET) & TC_PGCAL_STATUS_DELAY_M
 7750              		.loc 1 3897 9 discriminator 3 view .LVU1957
 7751              		.loc 1 3897 17 is_stmt 0 discriminator 3 view .LVU1958
 7752 0076 0921     		movs	r1, #9
 7753 0078 2A20     		movs	r0, #42
 7754 007a FFF7FEFF 		bl	dwt_read16bitoffsetreg
 7755              	.LVL804:
 7756              		.loc 1 3897 15 discriminator 3 view .LVU1959
 7757 007e C0F30B03 		ubfx	r3, r0, #0, #12
 7758              	.LVL805:
3898:Core/Src/deca_device.c **** 
3899:Core/Src/deca_device.c ****         sum_count += count;
 7759              		.loc 1 3899 9 is_stmt 1 discriminator 3 view .LVU1960
 7760              		.loc 1 3899 19 is_stmt 0 discriminator 3 view .LVU1961
 7761 0082 1D44     		add	r5, r5, r3
 7762              	.LVL806:
3883:Core/Src/deca_device.c ****         // Write bw setting to PG_DELAY register
 7763              		.loc 1 3883 33 is_stmt 1 discriminator 3 view .LVU1962
3883:Core/Src/deca_device.c ****         // Write bw setting to PG_DELAY register
 7764              		.loc 1 3883 34 is_stmt 0 discriminator 3 view .LVU1963
 7765 0084 0134     		adds	r4, r4, #1
 7766              	.LVL807:
 7767              	.L467:
3883:Core/Src/deca_device.c ****         // Write bw setting to PG_DELAY register
 7768              		.loc 1 3883 16 is_stmt 1 discriminator 1 view .LVU1964
3883:Core/Src/deca_device.c ****         // Write bw setting to PG_DELAY register
 7769              		.loc 1 3883 5 is_stmt 0 discriminator 1 view .LVU1965
 7770 0086 092C     		cmp	r4, #9
 7771 0088 E3DD     		ble	.L468
3900:Core/Src/deca_device.c ****     }
3901:Core/Src/deca_device.c **** 
3902:Core/Src/deca_device.c ****      // Restore old register values
3903:Core/Src/deca_device.c ****     dwt_write8bitoffsetreg(PMSC_ID, PMSC_CTRL0_OFFSET, old_pmsc_ctrl0);
 7772              		.loc 1 3903 5 is_stmt 1 view .LVU1966
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 220


 7773 008a 4A46     		mov	r2, r9
 7774 008c 0021     		movs	r1, #0
 7775 008e 3620     		movs	r0, #54
 7776 0090 FFF7FEFF 		bl	dwt_write8bitoffsetreg
 7777              	.LVL808:
3904:Core/Src/deca_device.c ****     dwt_write16bitoffsetreg(PMSC_ID, PMSC_CTRL1_OFFSET, old_pmsc_ctrl1);
 7778              		.loc 1 3904 5 view .LVU1967
 7779 0094 4246     		mov	r2, r8
 7780 0096 0421     		movs	r1, #4
 7781 0098 3620     		movs	r0, #54
 7782 009a FFF7FEFF 		bl	dwt_write16bitoffsetreg
 7783              	.LVL809:
3905:Core/Src/deca_device.c ****     dwt_write32bitreg(RF_CONF_ID, old_rf_conf_txpow_mask);
 7784              		.loc 1 3905 5 view .LVU1968
 7785 009e 3A46     		mov	r2, r7
 7786 00a0 0021     		movs	r1, #0
 7787 00a2 2820     		movs	r0, #40
 7788 00a4 FFF7FEFF 		bl	dwt_write32bitoffsetreg
 7789              	.LVL810:
3906:Core/Src/deca_device.c **** 
3907:Core/Src/deca_device.c ****     average_count = (int)(sum_count / NUM_SAMPLES);
 7790              		.loc 1 3907 5 view .LVU1969
 7791              		.loc 1 3907 37 is_stmt 0 view .LVU1970
 7792 00a8 0448     		ldr	r0, .L470+4
 7793 00aa A0FB0530 		umull	r3, r0, r0, r5
 7794              	.LVL811:
3908:Core/Src/deca_device.c ****     return average_count;
 7795              		.loc 1 3908 5 is_stmt 1 view .LVU1971
3909:Core/Src/deca_device.c **** }
 7796              		.loc 1 3909 1 is_stmt 0 view .LVU1972
 7797 00ae C0F3CF00 		ubfx	r0, r0, #3, #16
 7798              	.LVL812:
 7799              		.loc 1 3909 1 view .LVU1973
 7800 00b2 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 7801              	.LVL813:
 7802              	.L471:
 7803              		.loc 1 3909 1 view .LVU1974
 7804 00b6 00BF     		.align	2
 7805              	.L470:
 7806 00b8 00A71F00 		.word	2074368
 7807 00bc CDCCCCCC 		.word	-858993459
 7808              		.cfi_endproc
 7809              	.LFE103:
 7811              		.section	.bss.dw1000local,"aw",%nobits
 7812              		.align	2
 7813              		.set	.LANCHOR0,. + 0
 7816              	dw1000local:
 7817 0000 00000000 		.space	56
 7817      00000000 
 7817      00000000 
 7817      00000000 
 7817      00000000 
 7818              		.section	.data.pdw1000local,"aw"
 7819              		.align	2
 7820              		.set	.LANCHOR1,. + 0
 7823              	pdw1000local:
 7824 0000 00000000 		.word	dw1000local
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 221


 7825              		.text
 7826              	.Letext0:
 7827              		.file 2 "Core/decadriver/deca_types.h"
 7828              		.file 3 "Core/decadriver/deca_param_types.h"
 7829              		.file 4 "Core/decadriver/deca_device_api.h"
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 222


DEFINED SYMBOLS
                            *ABS*:00000000 deca_device.c
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:18     .text.dwt_apiversion:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:24     .text.dwt_apiversion:00000000 dwt_apiversion
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:39     .text.dwt_apiversion:00000004 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:44     .text.dwt_setlocaldataptr:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:50     .text.dwt_setlocaldataptr:00000000 dwt_setlocaldataptr
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:81     .text.dwt_setlocaldataptr:00000018 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:87     .text.dwt_otprevision:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:93     .text.dwt_otprevision:00000000 dwt_otprevision
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:110    .text.dwt_otprevision:00000008 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:115    .text.dwt_geticrefvolt:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:121    .text.dwt_geticrefvolt:00000000 dwt_geticrefvolt
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:138    .text.dwt_geticrefvolt:00000008 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:143    .text.dwt_geticreftemp:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:149    .text.dwt_geticreftemp:00000000 dwt_geticreftemp
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:166    .text.dwt_geticreftemp:00000008 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:171    .text.dwt_getpartid:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:177    .text.dwt_getpartid:00000000 dwt_getpartid
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:194    .text.dwt_getpartid:00000008 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:199    .text.dwt_getlotid:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:205    .text.dwt_getlotid:00000000 dwt_getlotid
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:222    .text.dwt_getlotid:00000008 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:227    .text.dwt_writetodevice:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:233    .text.dwt_writetodevice:00000000 dwt_writetodevice
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:321    .text.dwt_setgpiodirection:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:327    .text.dwt_setgpiodirection:00000000 dwt_setgpiodirection
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:380    .text.dwt_setgpiovalue:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:386    .text.dwt_setgpiovalue:00000000 dwt_setgpiovalue
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:439    .text.dwt_writetxdata:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:445    .text.dwt_writetxdata:00000000 dwt_writetxdata
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:492    .text.dwt_readfromdevice:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:498    .text.dwt_readfromdevice:00000000 dwt_readfromdevice
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:583    .text.dwt_readrxdata:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:589    .text.dwt_readrxdata:00000000 dwt_readrxdata
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:621    .text.dwt_readcarrierintegrator:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:627    .text.dwt_readcarrierintegrator:00000000 dwt_readcarrierintegrator
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:710    .text.dwt_readtxtimestamp:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:716    .text.dwt_readtxtimestamp:00000000 dwt_readtxtimestamp
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:744    .text.dwt_readrxtimestamp:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:750    .text.dwt_readrxtimestamp:00000000 dwt_readrxtimestamp
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:778    .text.dwt_readsystime:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:784    .text.dwt_readsystime:00000000 dwt_readsystime
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:812    .text.dwt_read32bitoffsetreg:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:818    .text.dwt_read32bitoffsetreg:00000000 dwt_read32bitoffsetreg
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:885    .text.dwt_getgpiovalue:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:891    .text.dwt_getgpiovalue:00000000 dwt_getgpiovalue
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:925    .text.dwt_readdevid:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:931    .text.dwt_readdevid:00000000 dwt_readdevid
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:954    .text.dwt_readtxtimestamphi32:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:960    .text.dwt_readtxtimestamphi32:00000000 dwt_readtxtimestamphi32
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:983    .text.dwt_readtxtimestamplo32:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:989    .text.dwt_readtxtimestamplo32:00000000 dwt_readtxtimestamplo32
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1012   .text.dwt_readrxtimestamphi32:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1018   .text.dwt_readrxtimestamphi32:00000000 dwt_readrxtimestamphi32
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1041   .text.dwt_readrxtimestamplo32:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1047   .text.dwt_readrxtimestamplo32:00000000 dwt_readrxtimestamplo32
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 223


C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1070   .text.dwt_readsystimestamphi32:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1076   .text.dwt_readsystimestamphi32:00000000 dwt_readsystimestamphi32
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1099   .text.dwt_read16bitoffsetreg:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1105   .text.dwt_read16bitoffsetreg:00000000 dwt_read16bitoffsetreg
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1155   .text.dwt_readdiagnostics:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1161   .text.dwt_readdiagnostics:00000000 dwt_readdiagnostics
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1225   .text.dwt_read8bitoffsetreg:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1231   .text.dwt_read8bitoffsetreg:00000000 dwt_read8bitoffsetreg
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1270   .text.dwt_write8bitoffsetreg:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1276   .text.dwt_write8bitoffsetreg:00000000 dwt_write8bitoffsetreg
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1315   .text.dwt_configurefor64plen:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1321   .text.dwt_configurefor64plen:00000000 dwt_configurefor64plen
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1369   .text.dwt_write16bitoffsetreg:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1375   .text.dwt_write16bitoffsetreg:00000000 dwt_write16bitoffsetreg
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1421   .text.dwt_setfinegraintxseq:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1427   .text.dwt_setfinegraintxseq:00000000 dwt_setfinegraintxseq
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1470   .text.dwt_setrxantennadelay:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1476   .text.dwt_setrxantennadelay:00000000 dwt_setrxantennadelay
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1503   .text.dwt_settxantennadelay:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1509   .text.dwt_settxantennadelay:00000000 dwt_settxantennadelay
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1536   .text.dwt_write32bitoffsetreg:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1542   .text.dwt_write32bitoffsetreg:00000000 dwt_write32bitoffsetreg
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1610   .text.dwt_setlnapamode:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1616   .text.dwt_setlnapamode:00000000 dwt_setlnapamode
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1672   .text.dwt_enablegpioclocks:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1678   .text.dwt_enablegpioclocks:00000000 dwt_enablegpioclocks
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1709   .text.dwt_configuretxrf:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1715   .text.dwt_configuretxrf:00000000 dwt_configuretxrf
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1750   .text.dwt_writetxfctrl:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1756   .text.dwt_writetxfctrl:00000000 dwt_writetxfctrl
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1795   .text.dwt_writetxfctrl:0000001c $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1800   .text.dwt_enableframefilter:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1806   .text.dwt_enableframefilter:00000000 dwt_enableframefilter
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1869   .text.dwt_enableframefilter:00000034 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1876   .text.dwt_setpanid:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1882   .text.dwt_setpanid:00000000 dwt_setpanid
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1909   .text.dwt_setaddress16:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1915   .text.dwt_setaddress16:00000000 dwt_setaddress16
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1942   .text.dwt_seteui:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1948   .text.dwt_seteui:00000000 dwt_seteui
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1976   .text.dwt_geteui:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:1982   .text.dwt_geteui:00000000 dwt_geteui
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2010   .text._dwt_otpread:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2016   .text._dwt_otpread:00000000 _dwt_otpread
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2063   .text._dwt_otpsetmrregs:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2069   .text._dwt_otpsetmrregs:00000000 _dwt_otpsetmrregs
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2116   .text._dwt_otpsetmrregs:00000028 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2122   .text._dwt_otpsetmrregs:0000002e $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2425   .text._dwt_otpprogword32:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2431   .text._dwt_otpprogword32:00000000 _dwt_otpprogword32
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2549   .text._dwt_aonconfigupload:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2555   .text._dwt_aonconfigupload:00000000 _dwt_aonconfigupload
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2584   .text._dwt_aonarrayupload:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2590   .text._dwt_aonarrayupload:00000000 _dwt_aonarrayupload
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2619   .text.dwt_entersleep:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2625   .text.dwt_entersleep:00000000 dwt_entersleep
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2645   .text.dwt_configuresleep:00000000 $t
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 224


C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2651   .text.dwt_configuresleep:00000000 dwt_configuresleep
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2692   .text.dwt_configuresleep:00000020 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2697   .text.dwt_entersleepaftertx:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2703   .text.dwt_entersleepaftertx:00000000 dwt_entersleepaftertx
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2752   .text.dwt_spicswakeup:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2758   .text.dwt_spicswakeup:00000000 dwt_spicswakeup
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2819   .text.dwt_spicswakeup:0000003c $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2824   .text._dwt_configlde:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2830   .text._dwt_configlde:00000000 _dwt_configlde
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2878   .text.dwt_configure:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:2884   .text.dwt_configure:00000000 dwt_configure
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3274   .text.dwt_configure:000001f0 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3290   .text.dwt_setsmarttxpower:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3296   .text.dwt_setsmarttxpower:00000000 dwt_setsmarttxpower
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3359   .text.dwt_setsmarttxpower:00000040 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3364   .text.dwt_enableautoack:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3370   .text.dwt_enableautoack:00000000 dwt_enableautoack
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3408   .text.dwt_enableautoack:00000024 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3413   .text.dwt_setdblrxbuffmode:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3419   .text.dwt_setdblrxbuffmode:00000000 dwt_setdblrxbuffmode
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3476   .text.dwt_setdblrxbuffmode:00000038 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3481   .text.dwt_setrxaftertxdelay:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3487   .text.dwt_setrxaftertxdelay:00000000 dwt_setrxaftertxdelay
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3535   .text.dwt_setcallbacks:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3541   .text.dwt_setcallbacks:00000000 dwt_setcallbacks
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3578   .text.dwt_setcallbacks:00000014 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3583   .text.dwt_checkirq:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3589   .text.dwt_checkirq:00000000 dwt_checkirq
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3613   .text.dwt_setleds:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3619   .text.dwt_setleds:00000000 dwt_setleds
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3733   .text.dwt_setleds:00000074 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3738   .text._dwt_enableclocks:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3744   .text._dwt_enableclocks:00000000 _dwt_enableclocks
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3776   .text._dwt_enableclocks:0000001a $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3935   .text.dwt_readaccdata:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3941   .text.dwt_readaccdata:00000000 dwt_readaccdata
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3983   .text.dwt_otpread:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3989   .text.dwt_otpread:00000000 dwt_otpread
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4052   .text.dwt_otpwriteandverify:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4058   .text.dwt_otpwriteandverify:00000000 dwt_otpwriteandverify
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4150   .text.dwt_configuresleepcnt:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4156   .text.dwt_configuresleepcnt:00000000 dwt_configuresleepcnt
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4219   .text.dwt_calibratesleepcnt:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4225   .text.dwt_calibratesleepcnt:00000000 dwt_calibratesleepcnt
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4344   .text._dwt_loaducodefromrom:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4350   .text._dwt_loaducodefromrom:00000000 _dwt_loaducodefromrom
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4385   .text.dwt_loadopsettabfromotp:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4391   .text.dwt_loadopsettabfromotp:00000000 dwt_loadopsettabfromotp
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4435   .text._dwt_disablesequencing:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4441   .text._dwt_disablesequencing:00000000 _dwt_disablesequencing
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4468   .text.dwt_setdelayedtrxtime:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4474   .text.dwt_setdelayedtrxtime:00000000 dwt_setdelayedtrxtime
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4501   .text.dwt_starttx:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4507   .text.dwt_starttx:00000000 dwt_starttx
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4609   .text.dwt_starttx:00000058 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4614   .text.dwt_syncrxbufptrs:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4620   .text.dwt_syncrxbufptrs:00000000 dwt_syncrxbufptrs
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 225


C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4661   .text.dwt_forcetrxoff:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4667   .text.dwt_forcetrxoff:00000000 dwt_forcetrxoff
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4744   .text.dwt_forcetrxoff:00000050 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4750   .text.dwt_setsniffmode:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4756   .text.dwt_setsniffmode:00000000 dwt_setsniffmode
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4843   .text.dwt_setlowpowerlistening:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4849   .text.dwt_setlowpowerlistening:00000000 dwt_setlowpowerlistening
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4898   .text.dwt_lowpowerlistenisr:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:4904   .text.dwt_lowpowerlistenisr:00000000 dwt_lowpowerlistenisr
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5050   .text.dwt_lowpowerlistenisr:000000a0 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5055   .text.dwt_setsnoozetime:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5061   .text.dwt_setsnoozetime:00000000 dwt_setsnoozetime
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5088   .text.dwt_rxenable:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5094   .text.dwt_rxenable:00000000 dwt_rxenable
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5191   .text.dwt_setrxtimeout:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5197   .text.dwt_setrxtimeout:00000000 dwt_setrxtimeout
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5279   .text.dwt_setrxtimeout:00000050 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5284   .text.dwt_setpreambledetecttimeout:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5290   .text.dwt_setpreambledetecttimeout:00000000 dwt_setpreambledetecttimeout
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5317   .text.dwt_setinterrupt:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5323   .text.dwt_setinterrupt:00000000 dwt_setinterrupt
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5405   .text.dwt_configeventcounters:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5411   .text.dwt_configeventcounters:00000000 dwt_configeventcounters
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5453   .text.dwt_readeventcounters:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5459   .text.dwt_readeventcounters:00000000 dwt_readeventcounters
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5585   .text.dwt_rxreset:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5591   .text.dwt_rxreset:00000000 dwt_rxreset
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5620   .text.dwt_isr:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5626   .text.dwt_isr:00000000 dwt_isr
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5918   .text.dwt_isr:00000150 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5924   .text.dwt_softreset:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5930   .text.dwt_softreset:00000000 dwt_softreset
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5987   .text.dwt_softreset:00000044 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5992   .text.dwt_setxtaltrim:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:5998   .text.dwt_setxtaltrim:00000000 dwt_setxtaltrim
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6031   .text.dwt_initialise:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6037   .text.dwt_initialise:00000000 dwt_initialise
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6424   .text.dwt_initialise:000001b4 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6430   .text.dwt_getxtaltrim:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6436   .text.dwt_getxtaltrim:00000000 dwt_getxtaltrim
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6460   .text.dwt_configcwmode:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6466   .text.dwt_configcwmode:00000000 dwt_configcwmode
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6547   .text.dwt_configcwmode:00000070 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6556   .text.dwt_configcontinuousframemode:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6562   .text.dwt_configcontinuousframemode:00000000 dwt_configcontinuousframemode
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6626   .text.dwt_configcontinuousframemode:00000048 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6631   .text.dwt_readtempvbat:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6637   .text.dwt_readtempvbat:00000000 dwt_readtempvbat
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6807   .text.dwt_convertrawtemperature:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6813   .text.dwt_convertrawtemperature:00000000 dwt_convertrawtemperature
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6856   .text.dwt_convertrawtemperature:00000028 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6864   .text.dwt_convertdegtemptoraw:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6870   .text.dwt_convertdegtemptoraw:00000000 dwt_convertdegtemptoraw
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6925   .text.dwt_convertdegtemptoraw:00000024 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6932   .text.dwt_convertrawvoltage:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6938   .text.dwt_convertrawvoltage:00000000 dwt_convertrawvoltage
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6984   .text.dwt_convertrawvoltage:00000030 $d
ARM GAS  C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s 			page 226


C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:6994   .text.dwt_convertvoltstoraw:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7000   .text.dwt_convertvoltstoraw:00000000 dwt_convertvoltstoraw
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7053   .text.dwt_convertvoltstoraw:00000038 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7060   .text.dwt_readwakeuptemp:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7066   .text.dwt_readwakeuptemp:00000000 dwt_readwakeuptemp
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7089   .text.dwt_readwakeupvbat:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7095   .text.dwt_readwakeupvbat:00000000 dwt_readwakeupvbat
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7118   .text.dwt_calcbandwidthtempadj:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7124   .text.dwt_calcbandwidthtempadj:00000000 dwt_calcbandwidthtempadj
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7344   .text.dwt_calcbandwidthtempadj:000000dc $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7349   .text._dwt_computetxpowersetting:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7355   .text._dwt_computetxpowersetting:00000000 _dwt_computetxpowersetting
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7524   .text.dwt_calcpowertempadj:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7530   .text.dwt_calcpowertempadj:00000000 dwt_calcpowertempadj
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7633   .text.dwt_calcpgcount:00000000 $t
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7639   .text.dwt_calcpgcount:00000000 dwt_calcpgcount
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7806   .text.dwt_calcpgcount:000000b8 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7812   .bss.dw1000local:00000000 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7816   .bss.dw1000local:00000000 dw1000local
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7819   .data.pdw1000local:00000000 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:7823   .data.pdw1000local:00000000 pdw1000local
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3791   .text._dwt_enableclocks:00000029 $d
C:\Users\Admin\AppData\Local\Temp\cchiYAOc.s:3791   .text._dwt_enableclocks:0000002a $t

UNDEFINED SYMBOLS
writetospi
readfromspi
deca_sleep
lde_replicaCoeff
chan_idx
fs_pll_cfg
fs_pll_tune
rx_config
tx_config
sftsh
dtune1
digital_bb_config
agc_config
dwnsSFDlen
decamutexon
decamutexoff
__aeabi_i2d
__aeabi_dmul
__aeabi_dadd
__aeabi_d2f
__aeabi_i2f
__aeabi_f2d
__aeabi_d2uiz
